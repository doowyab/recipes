(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(u){if(u.ep)return;u.ep=!0;const l=s(u);fetch(u.href,l)}})();function Ma(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Il={exports:{}},Bs={},Al={exports:{}},Ee={};var mh;function Y0(){if(mh)return Ee;mh=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=x&&j[x]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function E(j,B,ne){this.props=j,this.context=B,this.refs=N,this.updater=ne||b}E.prototype.isReactComponent={},E.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},E.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=E.prototype;function O(j,B,ne){this.props=j,this.context=B,this.refs=N,this.updater=ne||b}var L=O.prototype=new U;L.constructor=O,S(L,E.prototype),L.isPureReactComponent=!0;var q=Array.isArray,re=Object.prototype.hasOwnProperty,X={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function P(j,B,ne){var ue,ce={},ye=null,ge=null;if(B!=null)for(ue in B.ref!==void 0&&(ge=B.ref),B.key!==void 0&&(ye=""+B.key),B)re.call(B,ue)&&!Z.hasOwnProperty(ue)&&(ce[ue]=B[ue]);var be=arguments.length-2;if(be===1)ce.children=ne;else if(1<be){for(var je=Array(be),Be=0;Be<be;Be++)je[Be]=arguments[Be+2];ce.children=je}if(j&&j.defaultProps)for(ue in be=j.defaultProps,be)ce[ue]===void 0&&(ce[ue]=be[ue]);return{$$typeof:n,type:j,key:ye,ref:ge,props:ce,_owner:X.current}}function F(j,B){return{$$typeof:n,type:j.type,key:B,ref:j.ref,props:j.props,_owner:j._owner}}function K(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function pe(j){var B={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ne){return B[ne]})}var M=/\/+/g;function H(j,B){return typeof j=="object"&&j!==null&&j.key!=null?pe(""+j.key):B.toString(36)}function ee(j,B,ne,ue,ce){var ye=typeof j;(ye==="undefined"||ye==="boolean")&&(j=null);var ge=!1;if(j===null)ge=!0;else switch(ye){case"string":case"number":ge=!0;break;case"object":switch(j.$$typeof){case n:case t:ge=!0}}if(ge)return ge=j,ce=ce(ge),j=ue===""?"."+H(ge,0):ue,q(ce)?(ne="",j!=null&&(ne=j.replace(M,"$&/")+"/"),ee(ce,B,ne,"",function(Be){return Be})):ce!=null&&(K(ce)&&(ce=F(ce,ne+(!ce.key||ge&&ge.key===ce.key?"":(""+ce.key).replace(M,"$&/")+"/")+j)),B.push(ce)),1;if(ge=0,ue=ue===""?".":ue+":",q(j))for(var be=0;be<j.length;be++){ye=j[be];var je=ue+H(ye,be);ge+=ee(ye,B,ne,je,ce)}else if(je=w(j),typeof je=="function")for(j=je.call(j),be=0;!(ye=j.next()).done;)ye=ye.value,je=ue+H(ye,be++),ge+=ee(ye,B,ne,je,ce);else if(ye==="object")throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return ge}function se(j,B,ne){if(j==null)return j;var ue=[],ce=0;return ee(j,ue,"","",function(ye){return B.call(ne,ye,ce++)}),ue}function te(j){if(j._status===-1){var B=j._result;B=B(),B.then(function(ne){(j._status===0||j._status===-1)&&(j._status=1,j._result=ne)},function(ne){(j._status===0||j._status===-1)&&(j._status=2,j._result=ne)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var T={current:null},I={transition:null},J={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:I,ReactCurrentOwner:X};function z(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:se,forEach:function(j,B,ne){se(j,function(){B.apply(this,arguments)},ne)},count:function(j){var B=0;return se(j,function(){B++}),B},toArray:function(j){return se(j,function(B){return B})||[]},only:function(j){if(!K(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ee.Component=E,Ee.Fragment=s,Ee.Profiler=u,Ee.PureComponent=O,Ee.StrictMode=a,Ee.Suspense=m,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ee.act=z,Ee.cloneElement=function(j,B,ne){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ue=S({},j.props),ce=j.key,ye=j.ref,ge=j._owner;if(B!=null){if(B.ref!==void 0&&(ye=B.ref,ge=X.current),B.key!==void 0&&(ce=""+B.key),j.type&&j.type.defaultProps)var be=j.type.defaultProps;for(je in B)re.call(B,je)&&!Z.hasOwnProperty(je)&&(ue[je]=B[je]===void 0&&be!==void 0?be[je]:B[je])}var je=arguments.length-2;if(je===1)ue.children=ne;else if(1<je){be=Array(je);for(var Be=0;Be<je;Be++)be[Be]=arguments[Be+2];ue.children=be}return{$$typeof:n,type:j.type,key:ce,ref:ye,props:ue,_owner:ge}},Ee.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Ee.createElement=P,Ee.createFactory=function(j){var B=P.bind(null,j);return B.type=j,B},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(j){return{$$typeof:f,render:j}},Ee.isValidElement=K,Ee.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:te}},Ee.memo=function(j,B){return{$$typeof:y,type:j,compare:B===void 0?null:B}},Ee.startTransition=function(j){var B=I.transition;I.transition={};try{j()}finally{I.transition=B}},Ee.unstable_act=z,Ee.useCallback=function(j,B){return T.current.useCallback(j,B)},Ee.useContext=function(j){return T.current.useContext(j)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(j){return T.current.useDeferredValue(j)},Ee.useEffect=function(j,B){return T.current.useEffect(j,B)},Ee.useId=function(){return T.current.useId()},Ee.useImperativeHandle=function(j,B,ne){return T.current.useImperativeHandle(j,B,ne)},Ee.useInsertionEffect=function(j,B){return T.current.useInsertionEffect(j,B)},Ee.useLayoutEffect=function(j,B){return T.current.useLayoutEffect(j,B)},Ee.useMemo=function(j,B){return T.current.useMemo(j,B)},Ee.useReducer=function(j,B,ne){return T.current.useReducer(j,B,ne)},Ee.useRef=function(j){return T.current.useRef(j)},Ee.useState=function(j){return T.current.useState(j)},Ee.useSyncExternalStore=function(j,B,ne){return T.current.useSyncExternalStore(j,B,ne)},Ee.useTransition=function(){return T.current.useTransition()},Ee.version="18.3.1",Ee}var yh;function xu(){return yh||(yh=1,Al.exports=Y0()),Al.exports}var gh;function X0(){if(gh)return Bs;gh=1;var n=xu(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,y){var g,x={},w=null,b=null;y!==void 0&&(w=""+y),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(b=m.ref);for(g in m)a.call(m,g)&&!l.hasOwnProperty(g)&&(x[g]=m[g]);if(f&&f.defaultProps)for(g in m=f.defaultProps,m)x[g]===void 0&&(x[g]=m[g]);return{$$typeof:t,type:f,key:w,ref:b,props:x,_owner:u.current}}return Bs.Fragment=s,Bs.jsx=c,Bs.jsxs=c,Bs}var kh;function Z0(){return kh||(kh=1,Il.exports=X0()),Il.exports}var d=Z0(),v=xu();const zr=Ma(v);var va={},Ll={exports:{}},St={},$l={exports:{}},Ul={};var vh;function em(){return vh||(vh=1,(function(n){function t(I,J){var z=I.length;I.push(J);e:for(;0<z;){var j=z-1>>>1,B=I[j];if(0<u(B,J))I[j]=J,I[z]=B,z=j;else break e}}function s(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var J=I[0],z=I.pop();if(z!==J){I[0]=z;e:for(var j=0,B=I.length,ne=B>>>1;j<ne;){var ue=2*(j+1)-1,ce=I[ue],ye=ue+1,ge=I[ye];if(0>u(ce,z))ye<B&&0>u(ge,ce)?(I[j]=ge,I[ye]=z,j=ye):(I[j]=ce,I[ue]=z,j=ue);else if(ye<B&&0>u(ge,z))I[j]=ge,I[ye]=z,j=ye;else break e}}return J}function u(I,J){var z=I.sortIndex-J.sortIndex;return z!==0?z:I.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],y=[],g=1,x=null,w=3,b=!1,S=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(I){for(var J=s(y);J!==null;){if(J.callback===null)a(y);else if(J.startTime<=I)a(y),J.sortIndex=J.expirationTime,t(m,J);else break;J=s(y)}}function q(I){if(N=!1,L(I),!S)if(s(m)!==null)S=!0,te(re);else{var J=s(y);J!==null&&T(q,J.startTime-I)}}function re(I,J){S=!1,N&&(N=!1,U(P),P=-1),b=!0;var z=w;try{for(L(J),x=s(m);x!==null&&(!(x.expirationTime>J)||I&&!pe());){var j=x.callback;if(typeof j=="function"){x.callback=null,w=x.priorityLevel;var B=j(x.expirationTime<=J);J=n.unstable_now(),typeof B=="function"?x.callback=B:x===s(m)&&a(m),L(J)}else a(m);x=s(m)}if(x!==null)var ne=!0;else{var ue=s(y);ue!==null&&T(q,ue.startTime-J),ne=!1}return ne}finally{x=null,w=z,b=!1}}var X=!1,Z=null,P=-1,F=5,K=-1;function pe(){return!(n.unstable_now()-K<F)}function M(){if(Z!==null){var I=n.unstable_now();K=I;var J=!0;try{J=Z(!0,I)}finally{J?H():(X=!1,Z=null)}}else X=!1}var H;if(typeof O=="function")H=function(){O(M)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=M,H=function(){se.postMessage(null)}}else H=function(){E(M,0)};function te(I){Z=I,X||(X=!0,H())}function T(I,J){P=E(function(){I(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,te(re))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return s(m)},n.unstable_next=function(I){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var z=w;w=J;try{return I()}finally{w=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,J){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var z=w;w=I;try{return J()}finally{w=z}},n.unstable_scheduleCallback=function(I,J,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,I){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,I={id:g++,callback:J,priorityLevel:I,startTime:z,expirationTime:B,sortIndex:-1},z>j?(I.sortIndex=z,t(y,I),s(m)===null&&I===s(y)&&(N?(U(P),P=-1):N=!0,T(q,z-j))):(I.sortIndex=B,t(m,I),S||b||(S=!0,te(re))),I},n.unstable_shouldYield=pe,n.unstable_wrapCallback=function(I){var J=w;return function(){var z=w;w=J;try{return I.apply(this,arguments)}finally{w=z}}}})(Ul)),Ul}var xh;function tm(){return xh||(xh=1,$l.exports=em()),$l.exports}var wh;function rm(){if(wh)return St;wh=1;var n=xu(),t=tm();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function l(e,r){c(e,r),c(e+"Capture",r)}function c(e,r){for(u[e]=r,e=0;e<r.length;e++)a.add(r[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},x={};function w(e){return m.call(x,e)?!0:m.call(g,e)?!1:y.test(e)?x[e]=!0:(g[e]=!0,!1)}function b(e,r,i,o){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,r,i,o){if(r===null||typeof r>"u"||b(e,r,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function N(e,r,i,o,h,p,k){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=r,this.sanitizeURL=p,this.removeEmptyString=k}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new N(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];E[r]=new N(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new N(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new N(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new N(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new N(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new N(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new N(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new N(e,5,!1,e.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(U,O);E[r]=new N(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(U,O);E[r]=new N(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(U,O);E[r]=new N(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new N(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new N(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,r,i,o){var h=E.hasOwnProperty(r)?E[r]:null;(h!==null?h.type!==0:o||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,i,h,o)&&(i=null),o||h===null?w(r)&&(i===null?e.removeAttribute(r):e.setAttribute(r,""+i)):h.mustUseProperty?e[h.propertyName]=i===null?h.type===3?!1:"":i:(r=h.attributeName,o=h.attributeNamespace,i===null?e.removeAttribute(r):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,o?e.setAttributeNS(o,r,i):e.setAttribute(r,i))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),X=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),pe=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),I=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var z=Object.assign,j;function B(e){if(j===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);j=r&&r[1]||""}return`
`+j+e}var ne=!1;function ue(e,r){if(!e||ne)return"";ne=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var o=D}Reflect.construct(e,[],r)}else{try{r.call()}catch(D){o=D}e.call(r.prototype)}else{try{throw Error()}catch(D){o=D}e()}}catch(D){if(D&&o&&typeof D.stack=="string"){for(var h=D.stack.split(`
`),p=o.stack.split(`
`),k=h.length-1,_=p.length-1;1<=k&&0<=_&&h[k]!==p[_];)_--;for(;1<=k&&0<=_;k--,_--)if(h[k]!==p[_]){if(k!==1||_!==1)do if(k--,_--,0>_||h[k]!==p[_]){var C=`
`+h[k].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=k&&0<=_);break}}}finally{ne=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function ce(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function ye(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case X:return"Portal";case F:return"Profiler";case P:return"StrictMode";case H:return"Suspense";case ee:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case K:return(e._context.displayName||"Context")+".Provider";case M:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case se:return r=e.displayName||null,r!==null?r:ye(e.type)||"Memo";case te:r=e._payload,e=e._init;try{return ye(e(r))}catch{}}return null}function ge(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(r);case 8:return r===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function je(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Be(e){var r=je(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),o=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,p=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return h.call(this)},set:function(k){o=""+k,p.call(this,k)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(k){o=""+k},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ie(e){e._valueTracker||(e._valueTracker=Be(e))}function Ke(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),o="";return e&&(o=je(e)?e.checked?"true":"false":e.value),e=o,e!==i?(r.setValue(e),!0):!1}function Ne(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function De(e,r){var i=r.checked;return z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Oe(e,r){var i=r.defaultValue==null?"":r.defaultValue,o=r.checked!=null?r.checked:r.defaultChecked;i=be(r.value!=null?r.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ze(e,r){r=r.checked,r!=null&&L(e,"checked",r,!1)}function ct(e,r){ze(e,r);var i=be(r.value),o=r.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?vr(e,r.type,i):r.hasOwnProperty("defaultValue")&&vr(e,r.type,be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function et(e,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var o=r.type;if(!(o!=="submit"&&o!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,i||r===e.value||(e.value=r),e.defaultValue=r}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function vr(e,r,i){(r!=="number"||Ne(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var sr=Array.isArray;function xr(e,r,i,o){if(e=e.options,r){r={};for(var h=0;h<i.length;h++)r["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=r.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&o&&(e[i].defaultSelected=!0)}else{for(i=""+be(i),r=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}r!==null||e[h].disabled||(r=e[h])}r!==null&&(r.selected=!0)}}function cn(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return z({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function li(e,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(s(92));if(sr(i)){if(1<i.length)throw Error(s(93));i=i[0]}r=i}r==null&&(r=""),i=r}e._wrapperState={initialValue:be(i)}}function rs(e,r){var i=be(r.value),o=be(r.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),r.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function ui(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function di(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ns(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?di(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hn,ci=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,o,h){MSApp.execUnsafeLocalFunction(function(){return e(r,i,o,h)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=hn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function qr(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var Y={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];Object.keys(Y).forEach(function(e){Ce.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Y[r]=Y[e]})});function Je(e,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||Y.hasOwnProperty(e)&&Y[e]?(""+r).trim():r+"px"}function Ye(e,r){e=e.style;for(var i in r)if(r.hasOwnProperty(i)){var o=i.indexOf("--")===0,h=Je(i,r[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,h):e[i]=h}}var Le=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fn(e,r){if(r){if(Le[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function ss(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Va=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,pn=null,mn=null;function Pu(e){if(e=Ns(e)){if(typeof Ja!="function")throw Error(s(280));var r=e.stateNode;r&&(r=Ai(r),Ja(e.stateNode,e.type,r))}}function Iu(e){pn?mn?mn.push(e):mn=[e]:pn=e}function Au(){if(pn){var e=pn,r=mn;if(mn=pn=null,Pu(e),r)for(e=0;e<r.length;e++)Pu(r[e])}}function Lu(e,r){return e(r)}function $u(){}var Ga=!1;function Uu(e,r,i){if(Ga)return e(r,i);Ga=!0;try{return Lu(e,r,i)}finally{Ga=!1,(pn!==null||mn!==null)&&($u(),Au())}}function is(e,r){var i=e.stateNode;if(i===null)return null;var o=Ai(i);if(o===null)return null;i=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var Qa=!1;if(f)try{var as={};Object.defineProperty(as,"passive",{get:function(){Qa=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{Qa=!1}function np(e,r,i,o,h,p,k,_,C){var D=Array.prototype.slice.call(arguments,3);try{r.apply(i,D)}catch(V){this.onError(V)}}var os=!1,hi=null,fi=!1,Ya=null,sp={onError:function(e){os=!0,hi=e}};function ip(e,r,i,o,h,p,k,_,C){os=!1,hi=null,np.apply(sp,arguments)}function ap(e,r,i,o,h,p,k,_,C){if(ip.apply(this,arguments),os){if(os){var D=hi;os=!1,hi=null}else throw Error(s(198));fi||(fi=!0,Ya=D)}}function Hr(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function Du(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Mu(e){if(Hr(e)!==e)throw Error(s(188))}function op(e){var r=e.alternate;if(!r){if(r=Hr(e),r===null)throw Error(s(188));return r!==e?null:e}for(var i=e,o=r;;){var h=i.return;if(h===null)break;var p=h.alternate;if(p===null){if(o=h.return,o!==null){i=o;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===i)return Mu(h),e;if(p===o)return Mu(h),r;p=p.sibling}throw Error(s(188))}if(i.return!==o.return)i=h,o=p;else{for(var k=!1,_=h.child;_;){if(_===i){k=!0,i=h,o=p;break}if(_===o){k=!0,o=h,i=p;break}_=_.sibling}if(!k){for(_=p.child;_;){if(_===i){k=!0,i=p,o=h;break}if(_===o){k=!0,o=p,i=h;break}_=_.sibling}if(!k)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:r}function Fu(e){return e=op(e),e!==null?Bu(e):null}function Bu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Bu(e);if(r!==null)return r;e=e.sibling}return null}var zu=t.unstable_scheduleCallback,qu=t.unstable_cancelCallback,lp=t.unstable_shouldYield,up=t.unstable_requestPaint,Ge=t.unstable_now,dp=t.unstable_getCurrentPriorityLevel,Xa=t.unstable_ImmediatePriority,Hu=t.unstable_UserBlockingPriority,pi=t.unstable_NormalPriority,cp=t.unstable_LowPriority,Wu=t.unstable_IdlePriority,mi=null,Zt=null;function hp(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(mi,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:mp,fp=Math.log,pp=Math.LN2;function mp(e){return e>>>=0,e===0?32:31-(fp(e)/pp|0)|0}var yi=64,gi=4194304;function ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ki(e,r){var i=e.pendingLanes;if(i===0)return 0;var o=0,h=e.suspendedLanes,p=e.pingedLanes,k=i&268435455;if(k!==0){var _=k&~h;_!==0?o=ls(_):(p&=k,p!==0&&(o=ls(p)))}else k=i&~h,k!==0?o=ls(k):p!==0&&(o=ls(p));if(o===0)return 0;if(r!==0&&r!==o&&(r&h)===0&&(h=o&-o,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((o&4)!==0&&(o|=i&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=o;0<r;)i=31-Bt(r),h=1<<i,o|=e[i],r&=~h;return o}function yp(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gp(e,r){for(var i=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes;0<p;){var k=31-Bt(p),_=1<<k,C=h[k];C===-1?((_&i)===0||(_&o)!==0)&&(h[k]=yp(_,r)):C<=r&&(e.expiredLanes|=_),p&=~_}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vu(){var e=yi;return yi<<=1,(yi&4194240)===0&&(yi=64),e}function eo(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function us(e,r,i){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Bt(r),e[r]=i}function kp(e,r){var i=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var h=31-Bt(i),p=1<<h;r[h]=0,o[h]=-1,e[h]=-1,i&=~p}}function to(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var o=31-Bt(i),h=1<<o;h&r|e[o]&r&&(e[o]|=r),i&=~h}}var Pe=0;function Ku(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ju,ro,Gu,Qu,Yu,no=!1,vi=[],wr=null,br=null,_r=null,ds=new Map,cs=new Map,Sr=[],vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xu(e,r){switch(e){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":ds.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":cs.delete(r.pointerId)}}function hs(e,r,i,o,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:r,domEventName:i,eventSystemFlags:o,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Ns(r),r!==null&&ro(r)),e):(e.eventSystemFlags|=o,r=e.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),e)}function xp(e,r,i,o,h){switch(r){case"focusin":return wr=hs(wr,e,r,i,o,h),!0;case"dragenter":return br=hs(br,e,r,i,o,h),!0;case"mouseover":return _r=hs(_r,e,r,i,o,h),!0;case"pointerover":var p=h.pointerId;return ds.set(p,hs(ds.get(p)||null,e,r,i,o,h)),!0;case"gotpointercapture":return p=h.pointerId,cs.set(p,hs(cs.get(p)||null,e,r,i,o,h)),!0}return!1}function Zu(e){var r=Wr(e.target);if(r!==null){var i=Hr(r);if(i!==null){if(r=i.tag,r===13){if(r=Du(i),r!==null){e.blockedOn=r,Yu(e.priority,function(){Gu(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xi(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=io(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Va=o,i.target.dispatchEvent(o),Va=null}else return r=Ns(i),r!==null&&ro(r),e.blockedOn=i,!1;r.shift()}return!0}function ed(e,r,i){xi(e)&&i.delete(r)}function wp(){no=!1,wr!==null&&xi(wr)&&(wr=null),br!==null&&xi(br)&&(br=null),_r!==null&&xi(_r)&&(_r=null),ds.forEach(ed),cs.forEach(ed)}function fs(e,r){e.blockedOn===r&&(e.blockedOn=null,no||(no=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wp)))}function ps(e){function r(h){return fs(h,e)}if(0<vi.length){fs(vi[0],e);for(var i=1;i<vi.length;i++){var o=vi[i];o.blockedOn===e&&(o.blockedOn=null)}}for(wr!==null&&fs(wr,e),br!==null&&fs(br,e),_r!==null&&fs(_r,e),ds.forEach(r),cs.forEach(r),i=0;i<Sr.length;i++)o=Sr[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Sr.length&&(i=Sr[0],i.blockedOn===null);)Zu(i),i.blockedOn===null&&Sr.shift()}var yn=q.ReactCurrentBatchConfig,wi=!0;function bp(e,r,i,o){var h=Pe,p=yn.transition;yn.transition=null;try{Pe=1,so(e,r,i,o)}finally{Pe=h,yn.transition=p}}function _p(e,r,i,o){var h=Pe,p=yn.transition;yn.transition=null;try{Pe=4,so(e,r,i,o)}finally{Pe=h,yn.transition=p}}function so(e,r,i,o){if(wi){var h=io(e,r,i,o);if(h===null)_o(e,r,o,bi,i),Xu(e,o);else if(xp(h,e,r,i,o))o.stopPropagation();else if(Xu(e,o),r&4&&-1<vp.indexOf(e)){for(;h!==null;){var p=Ns(h);if(p!==null&&Ju(p),p=io(e,r,i,o),p===null&&_o(e,r,o,bi,i),p===h)break;h=p}h!==null&&o.stopPropagation()}else _o(e,r,o,null,i)}}var bi=null;function io(e,r,i,o){if(bi=null,e=Ka(o),e=Wr(e),e!==null)if(r=Hr(e),r===null)e=null;else if(i=r.tag,i===13){if(e=Du(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return bi=e,null}function td(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dp()){case Xa:return 1;case Hu:return 4;case pi:case cp:return 16;case Wu:return 536870912;default:return 16}default:return 16}}var jr=null,ao=null,_i=null;function rd(){if(_i)return _i;var e,r=ao,i=r.length,o,h="value"in jr?jr.value:jr.textContent,p=h.length;for(e=0;e<i&&r[e]===h[e];e++);var k=i-e;for(o=1;o<=k&&r[i-o]===h[p-o];o++);return _i=h.slice(e,1<o?1-o:void 0)}function Si(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function nd(){return!1}function Nt(e){function r(i,o,h,p,k){this._reactName=i,this._targetInst=h,this.type=o,this.nativeEvent=p,this.target=k,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ji:nd,this.isPropagationStopped=nd,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),r}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=Nt(gn),ms=z({},gn,{view:0,detail:0}),Sp=Nt(ms),lo,uo,ys,Ni=z({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(lo=e.screenX-ys.screenX,uo=e.screenY-ys.screenY):uo=lo=0,ys=e),lo)},movementY:function(e){return"movementY"in e?e.movementY:uo}}),sd=Nt(Ni),jp=z({},Ni,{dataTransfer:0}),Np=Nt(jp),Ep=z({},ms,{relatedTarget:0}),co=Nt(Ep),Cp=z({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Tp=Nt(Cp),Rp=z({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Op=Nt(Rp),Pp=z({},gn,{data:0}),id=Nt(Pp),Ip={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $p(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Lp[e])?!!r[e]:!1}function ho(){return $p}var Up=z({},ms,{key:function(e){if(e.key){var r=Ip[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ap[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ho,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dp=Nt(Up),Mp=z({},Ni,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ad=Nt(Mp),Fp=z({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ho}),Bp=Nt(Fp),zp=z({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),qp=Nt(zp),Hp=z({},Ni,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wp=Nt(Hp),Vp=[9,13,27,32],fo=f&&"CompositionEvent"in window,gs=null;f&&"documentMode"in document&&(gs=document.documentMode);var Kp=f&&"TextEvent"in window&&!gs,od=f&&(!fo||gs&&8<gs&&11>=gs),ld=" ",ud=!1;function dd(e,r){switch(e){case"keyup":return Vp.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function Jp(e,r){switch(e){case"compositionend":return cd(r);case"keypress":return r.which!==32?null:(ud=!0,ld);case"textInput":return e=r.data,e===ld&&ud?null:e;default:return null}}function Gp(e,r){if(kn)return e==="compositionend"||!fo&&dd(e,r)?(e=rd(),_i=ao=jr=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return od&&r.locale!=="ko"?null:r.data;default:return null}}var Qp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Qp[e.type]:r==="textarea"}function fd(e,r,i,o){Iu(o),r=Oi(r,"onChange"),0<r.length&&(i=new oo("onChange","change",null,i,o),e.push({event:i,listeners:r}))}var ks=null,vs=null;function Yp(e){Od(e,0)}function Ei(e){var r=_n(e);if(Ke(r))return e}function Xp(e,r){if(e==="change")return r}var pd=!1;if(f){var po;if(f){var mo="oninput"in document;if(!mo){var md=document.createElement("div");md.setAttribute("oninput","return;"),mo=typeof md.oninput=="function"}po=mo}else po=!1;pd=po&&(!document.documentMode||9<document.documentMode)}function yd(){ks&&(ks.detachEvent("onpropertychange",gd),vs=ks=null)}function gd(e){if(e.propertyName==="value"&&Ei(vs)){var r=[];fd(r,vs,e,Ka(e)),Uu(Yp,r)}}function Zp(e,r,i){e==="focusin"?(yd(),ks=r,vs=i,ks.attachEvent("onpropertychange",gd)):e==="focusout"&&yd()}function e0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ei(vs)}function t0(e,r){if(e==="click")return Ei(r)}function r0(e,r){if(e==="input"||e==="change")return Ei(r)}function n0(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var zt=typeof Object.is=="function"?Object.is:n0;function xs(e,r){if(zt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var h=i[o];if(!m.call(r,h)||!zt(e[h],r[h]))return!1}return!0}function kd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vd(e,r){var i=kd(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=r&&o>=r)return{node:i,offset:r-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=kd(i)}}function xd(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?xd(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function wd(){for(var e=window,r=Ne();r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=Ne(e.document)}return r}function yo(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function s0(e){var r=wd(),i=e.focusedElem,o=e.selectionRange;if(r!==i&&i&&i.ownerDocument&&xd(i.ownerDocument.documentElement,i)){if(o!==null&&yo(i)){if(r=o.start,e=o.end,e===void 0&&(e=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(e,i.value.length);else if(e=(r=i.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var h=i.textContent.length,p=Math.min(o.start,h);o=o.end===void 0?p:Math.min(o.end,h),!e.extend&&p>o&&(h=o,o=p,p=h),h=vd(i,p);var k=vd(i,o);h&&k&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==k.node||e.focusOffset!==k.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),e.removeAllRanges(),p>o?(e.addRange(r),e.extend(k.node,k.offset)):(r.setEnd(k.node,k.offset),e.addRange(r)))}}for(r=[],e=i;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)e=r[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i0=f&&"documentMode"in document&&11>=document.documentMode,vn=null,go=null,ws=null,ko=!1;function bd(e,r,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ko||vn==null||vn!==Ne(o)||(o=vn,"selectionStart"in o&&yo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ws&&xs(ws,o)||(ws=o,o=Oi(go,"onSelect"),0<o.length&&(r=new oo("onSelect","select",null,r,i),e.push({event:r,listeners:o}),r.target=vn)))}function Ci(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var xn={animationend:Ci("Animation","AnimationEnd"),animationiteration:Ci("Animation","AnimationIteration"),animationstart:Ci("Animation","AnimationStart"),transitionend:Ci("Transition","TransitionEnd")},vo={},_d={};f&&(_d=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function Ti(e){if(vo[e])return vo[e];if(!xn[e])return e;var r=xn[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in _d)return vo[e]=r[i];return e}var Sd=Ti("animationend"),jd=Ti("animationiteration"),Nd=Ti("animationstart"),Ed=Ti("transitionend"),Cd=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,r){Cd.set(e,r),l(r,[e])}for(var xo=0;xo<Td.length;xo++){var wo=Td[xo],a0=wo.toLowerCase(),o0=wo[0].toUpperCase()+wo.slice(1);Nr(a0,"on"+o0)}Nr(Sd,"onAnimationEnd"),Nr(jd,"onAnimationIteration"),Nr(Nd,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ed,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l0=new Set("cancel close invalid load scroll toggle".split(" ").concat(bs));function Rd(e,r,i){var o=e.type||"unknown-event";e.currentTarget=i,ap(o,r,void 0,e),e.currentTarget=null}function Od(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],h=o.event;o=o.listeners;e:{var p=void 0;if(r)for(var k=o.length-1;0<=k;k--){var _=o[k],C=_.instance,D=_.currentTarget;if(_=_.listener,C!==p&&h.isPropagationStopped())break e;Rd(h,_,D),p=C}else for(k=0;k<o.length;k++){if(_=o[k],C=_.instance,D=_.currentTarget,_=_.listener,C!==p&&h.isPropagationStopped())break e;Rd(h,_,D),p=C}}}if(fi)throw e=Ya,fi=!1,Ya=null,e}function $e(e,r){var i=r[To];i===void 0&&(i=r[To]=new Set);var o=e+"__bubble";i.has(o)||(Pd(r,e,2,!1),i.add(o))}function bo(e,r,i){var o=0;r&&(o|=4),Pd(i,e,o,r)}var Ri="_reactListening"+Math.random().toString(36).slice(2);function _s(e){if(!e[Ri]){e[Ri]=!0,a.forEach(function(i){i!=="selectionchange"&&(l0.has(i)||bo(i,!1,e),bo(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Ri]||(r[Ri]=!0,bo("selectionchange",!1,r))}}function Pd(e,r,i,o){switch(td(r)){case 1:var h=bp;break;case 4:h=_p;break;default:h=so}i=h.bind(null,r,i,e),h=void 0,!Qa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(r,i,{capture:!0,passive:h}):e.addEventListener(r,i,!0):h!==void 0?e.addEventListener(r,i,{passive:h}):e.addEventListener(r,i,!1)}function _o(e,r,i,o,h){var p=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var k=o.tag;if(k===3||k===4){var _=o.stateNode.containerInfo;if(_===h||_.nodeType===8&&_.parentNode===h)break;if(k===4)for(k=o.return;k!==null;){var C=k.tag;if((C===3||C===4)&&(C=k.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;k=k.return}for(;_!==null;){if(k=Wr(_),k===null)return;if(C=k.tag,C===5||C===6){o=p=k;continue e}_=_.parentNode}}o=o.return}Uu(function(){var D=p,V=Ka(i),G=[];e:{var W=Cd.get(e);if(W!==void 0){var ae=oo,de=e;switch(e){case"keypress":if(Si(i)===0)break e;case"keydown":case"keyup":ae=Dp;break;case"focusin":de="focus",ae=co;break;case"focusout":de="blur",ae=co;break;case"beforeblur":case"afterblur":ae=co;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Np;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=Bp;break;case Sd:case jd:case Nd:ae=Tp;break;case Ed:ae=qp;break;case"scroll":ae=Sp;break;case"wheel":ae=Wp;break;case"copy":case"cut":case"paste":ae=Op;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=ad}var he=(r&4)!==0,Qe=!he&&e==="scroll",A=he?W!==null?W+"Capture":null:W;he=[];for(var R=D,$;R!==null;){$=R;var Q=$.stateNode;if($.tag===5&&Q!==null&&($=Q,A!==null&&(Q=is(R,A),Q!=null&&he.push(Ss(R,Q,$)))),Qe)break;R=R.return}0<he.length&&(W=new ae(W,de,null,i,V),G.push({event:W,listeners:he}))}}if((r&7)===0){e:{if(W=e==="mouseover"||e==="pointerover",ae=e==="mouseout"||e==="pointerout",W&&i!==Va&&(de=i.relatedTarget||i.fromElement)&&(Wr(de)||de[ir]))break e;if((ae||W)&&(W=V.window===V?V:(W=V.ownerDocument)?W.defaultView||W.parentWindow:window,ae?(de=i.relatedTarget||i.toElement,ae=D,de=de?Wr(de):null,de!==null&&(Qe=Hr(de),de!==Qe||de.tag!==5&&de.tag!==6)&&(de=null)):(ae=null,de=D),ae!==de)){if(he=sd,Q="onMouseLeave",A="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(he=ad,Q="onPointerLeave",A="onPointerEnter",R="pointer"),Qe=ae==null?W:_n(ae),$=de==null?W:_n(de),W=new he(Q,R+"leave",ae,i,V),W.target=Qe,W.relatedTarget=$,Q=null,Wr(V)===D&&(he=new he(A,R+"enter",de,i,V),he.target=$,he.relatedTarget=Qe,Q=he),Qe=Q,ae&&de)t:{for(he=ae,A=de,R=0,$=he;$;$=wn($))R++;for($=0,Q=A;Q;Q=wn(Q))$++;for(;0<R-$;)he=wn(he),R--;for(;0<$-R;)A=wn(A),$--;for(;R--;){if(he===A||A!==null&&he===A.alternate)break t;he=wn(he),A=wn(A)}he=null}else he=null;ae!==null&&Id(G,W,ae,he,!1),de!==null&&Qe!==null&&Id(G,Qe,de,he,!0)}}e:{if(W=D?_n(D):window,ae=W.nodeName&&W.nodeName.toLowerCase(),ae==="select"||ae==="input"&&W.type==="file")var fe=Xp;else if(hd(W))if(pd)fe=r0;else{fe=e0;var ke=Zp}else(ae=W.nodeName)&&ae.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(fe=t0);if(fe&&(fe=fe(e,D))){fd(G,fe,i,V);break e}ke&&ke(e,W,D),e==="focusout"&&(ke=W._wrapperState)&&ke.controlled&&W.type==="number"&&vr(W,"number",W.value)}switch(ke=D?_n(D):window,e){case"focusin":(hd(ke)||ke.contentEditable==="true")&&(vn=ke,go=D,ws=null);break;case"focusout":ws=go=vn=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,bd(G,i,V);break;case"selectionchange":if(i0)break;case"keydown":case"keyup":bd(G,i,V)}var ve;if(fo)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else kn?dd(e,i)&&(_e="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(_e="onCompositionStart");_e&&(od&&i.locale!=="ko"&&(kn||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&kn&&(ve=rd()):(jr=V,ao="value"in jr?jr.value:jr.textContent,kn=!0)),ke=Oi(D,_e),0<ke.length&&(_e=new id(_e,e,null,i,V),G.push({event:_e,listeners:ke}),ve?_e.data=ve:(ve=cd(i),ve!==null&&(_e.data=ve)))),(ve=Kp?Jp(e,i):Gp(e,i))&&(D=Oi(D,"onBeforeInput"),0<D.length&&(V=new id("onBeforeInput","beforeinput",null,i,V),G.push({event:V,listeners:D}),V.data=ve))}Od(G,r)})}function Ss(e,r,i){return{instance:e,listener:r,currentTarget:i}}function Oi(e,r){for(var i=r+"Capture",o=[];e!==null;){var h=e,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=is(e,i),p!=null&&o.unshift(Ss(e,p,h)),p=is(e,r),p!=null&&o.push(Ss(e,p,h))),e=e.return}return o}function wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Id(e,r,i,o,h){for(var p=r._reactName,k=[];i!==null&&i!==o;){var _=i,C=_.alternate,D=_.stateNode;if(C!==null&&C===o)break;_.tag===5&&D!==null&&(_=D,h?(C=is(i,p),C!=null&&k.unshift(Ss(i,C,_))):h||(C=is(i,p),C!=null&&k.push(Ss(i,C,_)))),i=i.return}k.length!==0&&e.push({event:r,listeners:k})}var u0=/\r\n?/g,d0=/\u0000|\uFFFD/g;function Ad(e){return(typeof e=="string"?e:""+e).replace(u0,`
`).replace(d0,"")}function Pi(e,r,i){if(r=Ad(r),Ad(e)!==r&&i)throw Error(s(425))}function Ii(){}var So=null,jo=null;function No(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Eo=typeof setTimeout=="function"?setTimeout:void 0,c0=typeof clearTimeout=="function"?clearTimeout:void 0,Ld=typeof Promise=="function"?Promise:void 0,h0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ld<"u"?function(e){return Ld.resolve(null).then(e).catch(f0)}:Eo;function f0(e){setTimeout(function(){throw e})}function Co(e,r){var i=r,o=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(o===0){e.removeChild(h),ps(r);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=h}while(i);ps(r)}function Er(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function $d(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}var bn=Math.random().toString(36).slice(2),er="__reactFiber$"+bn,js="__reactProps$"+bn,ir="__reactContainer$"+bn,To="__reactEvents$"+bn,p0="__reactListeners$"+bn,m0="__reactHandles$"+bn;function Wr(e){var r=e[er];if(r)return r;for(var i=e.parentNode;i;){if(r=i[ir]||i[er]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=$d(e);e!==null;){if(i=e[er])return i;e=$d(e)}return r}e=i,i=e.parentNode}return null}function Ns(e){return e=e[er]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _n(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Ai(e){return e[js]||null}var Ro=[],Sn=-1;function Cr(e){return{current:e}}function Ue(e){0>Sn||(e.current=Ro[Sn],Ro[Sn]=null,Sn--)}function Ie(e,r){Sn++,Ro[Sn]=e.current,e.current=r}var Tr={},ht=Cr(Tr),vt=Cr(!1),Vr=Tr;function jn(e,r){var i=e.type.contextTypes;if(!i)return Tr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in i)h[p]=r[p];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=h),h}function xt(e){return e=e.childContextTypes,e!=null}function Li(){Ue(vt),Ue(ht)}function Ud(e,r,i){if(ht.current!==Tr)throw Error(s(168));Ie(ht,r),Ie(vt,i)}function Dd(e,r,i){var o=e.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var h in o)if(!(h in r))throw Error(s(108,ge(e)||"Unknown",h));return z({},i,o)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Vr=ht.current,Ie(ht,e),Ie(vt,vt.current),!0}function Md(e,r,i){var o=e.stateNode;if(!o)throw Error(s(169));i?(e=Dd(e,r,Vr),o.__reactInternalMemoizedMergedChildContext=e,Ue(vt),Ue(ht),Ie(ht,e)):Ue(vt),Ie(vt,i)}var ar=null,Ui=!1,Oo=!1;function Fd(e){ar===null?ar=[e]:ar.push(e)}function y0(e){Ui=!0,Fd(e)}function Rr(){if(!Oo&&ar!==null){Oo=!0;var e=0,r=Pe;try{var i=ar;for(Pe=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}ar=null,Ui=!1}catch(h){throw ar!==null&&(ar=ar.slice(e+1)),zu(Xa,Rr),h}finally{Pe=r,Oo=!1}}return null}var Nn=[],En=0,Di=null,Mi=0,It=[],At=0,Kr=null,or=1,lr="";function Jr(e,r){Nn[En++]=Mi,Nn[En++]=Di,Di=e,Mi=r}function Bd(e,r,i){It[At++]=or,It[At++]=lr,It[At++]=Kr,Kr=e;var o=or;e=lr;var h=32-Bt(o)-1;o&=~(1<<h),i+=1;var p=32-Bt(r)+h;if(30<p){var k=h-h%5;p=(o&(1<<k)-1).toString(32),o>>=k,h-=k,or=1<<32-Bt(r)+h|i<<h|o,lr=p+e}else or=1<<p|i<<h|o,lr=e}function Po(e){e.return!==null&&(Jr(e,1),Bd(e,1,0))}function Io(e){for(;e===Di;)Di=Nn[--En],Nn[En]=null,Mi=Nn[--En],Nn[En]=null;for(;e===Kr;)Kr=It[--At],It[At]=null,lr=It[--At],It[At]=null,or=It[--At],It[At]=null}var Et=null,Ct=null,Me=!1,qt=null;function zd(e,r){var i=Dt(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=e,r=e.deletions,r===null?(e.deletions=[i],e.flags|=16):r.push(i)}function qd(e,r){switch(e.tag){case 5:var i=e.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,Et=e,Ct=Er(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,Et=e,Ct=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Kr!==null?{id:or,overflow:lr}:null,e.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=Dt(18,null,null,0),i.stateNode=r,i.return=e,e.child=i,Et=e,Ct=null,!0):!1;default:return!1}}function Ao(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lo(e){if(Me){var r=Ct;if(r){var i=r;if(!qd(e,r)){if(Ao(e))throw Error(s(418));r=Er(i.nextSibling);var o=Et;r&&qd(e,r)?zd(o,i):(e.flags=e.flags&-4097|2,Me=!1,Et=e)}}else{if(Ao(e))throw Error(s(418));e.flags=e.flags&-4097|2,Me=!1,Et=e}}}function Hd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function Fi(e){if(e!==Et)return!1;if(!Me)return Hd(e),Me=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!No(e.type,e.memoizedProps)),r&&(r=Ct)){if(Ao(e))throw Wd(),Error(s(418));for(;r;)zd(e,r),r=Er(r.nextSibling)}if(Hd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(r===0){Ct=Er(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}e=e.nextSibling}Ct=null}}else Ct=Et?Er(e.stateNode.nextSibling):null;return!0}function Wd(){for(var e=Ct;e;)e=Er(e.nextSibling)}function Cn(){Ct=Et=null,Me=!1}function $o(e){qt===null?qt=[e]:qt.push(e)}var g0=q.ReactCurrentBatchConfig;function Es(e,r,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var o=i.stateNode}if(!o)throw Error(s(147,e));var h=o,p=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(k){var _=h.refs;k===null?delete _[p]:_[p]=k},r._stringRef=p,r)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function Bi(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Vd(e){var r=e._init;return r(e._payload)}function Kd(e){function r(A,R){if(e){var $=A.deletions;$===null?(A.deletions=[R],A.flags|=16):$.push(R)}}function i(A,R){if(!e)return null;for(;R!==null;)r(A,R),R=R.sibling;return null}function o(A,R){for(A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function h(A,R){return A=Dr(A,R),A.index=0,A.sibling=null,A}function p(A,R,$){return A.index=$,e?($=A.alternate,$!==null?($=$.index,$<R?(A.flags|=2,R):$):(A.flags|=2,R)):(A.flags|=1048576,R)}function k(A){return e&&A.alternate===null&&(A.flags|=2),A}function _(A,R,$,Q){return R===null||R.tag!==6?(R=El($,A.mode,Q),R.return=A,R):(R=h(R,$),R.return=A,R)}function C(A,R,$,Q){var fe=$.type;return fe===Z?V(A,R,$.props.children,Q,$.key):R!==null&&(R.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===te&&Vd(fe)===R.type)?(Q=h(R,$.props),Q.ref=Es(A,R,$),Q.return=A,Q):(Q=ca($.type,$.key,$.props,null,A.mode,Q),Q.ref=Es(A,R,$),Q.return=A,Q)}function D(A,R,$,Q){return R===null||R.tag!==4||R.stateNode.containerInfo!==$.containerInfo||R.stateNode.implementation!==$.implementation?(R=Cl($,A.mode,Q),R.return=A,R):(R=h(R,$.children||[]),R.return=A,R)}function V(A,R,$,Q,fe){return R===null||R.tag!==7?(R=rn($,A.mode,Q,fe),R.return=A,R):(R=h(R,$),R.return=A,R)}function G(A,R,$){if(typeof R=="string"&&R!==""||typeof R=="number")return R=El(""+R,A.mode,$),R.return=A,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case re:return $=ca(R.type,R.key,R.props,null,A.mode,$),$.ref=Es(A,null,R),$.return=A,$;case X:return R=Cl(R,A.mode,$),R.return=A,R;case te:var Q=R._init;return G(A,Q(R._payload),$)}if(sr(R)||J(R))return R=rn(R,A.mode,$,null),R.return=A,R;Bi(A,R)}return null}function W(A,R,$,Q){var fe=R!==null?R.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return fe!==null?null:_(A,R,""+$,Q);if(typeof $=="object"&&$!==null){switch($.$$typeof){case re:return $.key===fe?C(A,R,$,Q):null;case X:return $.key===fe?D(A,R,$,Q):null;case te:return fe=$._init,W(A,R,fe($._payload),Q)}if(sr($)||J($))return fe!==null?null:V(A,R,$,Q,null);Bi(A,$)}return null}function ae(A,R,$,Q,fe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return A=A.get($)||null,_(R,A,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case re:return A=A.get(Q.key===null?$:Q.key)||null,C(R,A,Q,fe);case X:return A=A.get(Q.key===null?$:Q.key)||null,D(R,A,Q,fe);case te:var ke=Q._init;return ae(A,R,$,ke(Q._payload),fe)}if(sr(Q)||J(Q))return A=A.get($)||null,V(R,A,Q,fe,null);Bi(R,Q)}return null}function de(A,R,$,Q){for(var fe=null,ke=null,ve=R,_e=R=0,at=null;ve!==null&&_e<$.length;_e++){ve.index>_e?(at=ve,ve=null):at=ve.sibling;var Re=W(A,ve,$[_e],Q);if(Re===null){ve===null&&(ve=at);break}e&&ve&&Re.alternate===null&&r(A,ve),R=p(Re,R,_e),ke===null?fe=Re:ke.sibling=Re,ke=Re,ve=at}if(_e===$.length)return i(A,ve),Me&&Jr(A,_e),fe;if(ve===null){for(;_e<$.length;_e++)ve=G(A,$[_e],Q),ve!==null&&(R=p(ve,R,_e),ke===null?fe=ve:ke.sibling=ve,ke=ve);return Me&&Jr(A,_e),fe}for(ve=o(A,ve);_e<$.length;_e++)at=ae(ve,A,_e,$[_e],Q),at!==null&&(e&&at.alternate!==null&&ve.delete(at.key===null?_e:at.key),R=p(at,R,_e),ke===null?fe=at:ke.sibling=at,ke=at);return e&&ve.forEach(function(Mr){return r(A,Mr)}),Me&&Jr(A,_e),fe}function he(A,R,$,Q){var fe=J($);if(typeof fe!="function")throw Error(s(150));if($=fe.call($),$==null)throw Error(s(151));for(var ke=fe=null,ve=R,_e=R=0,at=null,Re=$.next();ve!==null&&!Re.done;_e++,Re=$.next()){ve.index>_e?(at=ve,ve=null):at=ve.sibling;var Mr=W(A,ve,Re.value,Q);if(Mr===null){ve===null&&(ve=at);break}e&&ve&&Mr.alternate===null&&r(A,ve),R=p(Mr,R,_e),ke===null?fe=Mr:ke.sibling=Mr,ke=Mr,ve=at}if(Re.done)return i(A,ve),Me&&Jr(A,_e),fe;if(ve===null){for(;!Re.done;_e++,Re=$.next())Re=G(A,Re.value,Q),Re!==null&&(R=p(Re,R,_e),ke===null?fe=Re:ke.sibling=Re,ke=Re);return Me&&Jr(A,_e),fe}for(ve=o(A,ve);!Re.done;_e++,Re=$.next())Re=ae(ve,A,_e,Re.value,Q),Re!==null&&(e&&Re.alternate!==null&&ve.delete(Re.key===null?_e:Re.key),R=p(Re,R,_e),ke===null?fe=Re:ke.sibling=Re,ke=Re);return e&&ve.forEach(function(Q0){return r(A,Q0)}),Me&&Jr(A,_e),fe}function Qe(A,R,$,Q){if(typeof $=="object"&&$!==null&&$.type===Z&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case re:e:{for(var fe=$.key,ke=R;ke!==null;){if(ke.key===fe){if(fe=$.type,fe===Z){if(ke.tag===7){i(A,ke.sibling),R=h(ke,$.props.children),R.return=A,A=R;break e}}else if(ke.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===te&&Vd(fe)===ke.type){i(A,ke.sibling),R=h(ke,$.props),R.ref=Es(A,ke,$),R.return=A,A=R;break e}i(A,ke);break}else r(A,ke);ke=ke.sibling}$.type===Z?(R=rn($.props.children,A.mode,Q,$.key),R.return=A,A=R):(Q=ca($.type,$.key,$.props,null,A.mode,Q),Q.ref=Es(A,R,$),Q.return=A,A=Q)}return k(A);case X:e:{for(ke=$.key;R!==null;){if(R.key===ke)if(R.tag===4&&R.stateNode.containerInfo===$.containerInfo&&R.stateNode.implementation===$.implementation){i(A,R.sibling),R=h(R,$.children||[]),R.return=A,A=R;break e}else{i(A,R);break}else r(A,R);R=R.sibling}R=Cl($,A.mode,Q),R.return=A,A=R}return k(A);case te:return ke=$._init,Qe(A,R,ke($._payload),Q)}if(sr($))return de(A,R,$,Q);if(J($))return he(A,R,$,Q);Bi(A,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,R!==null&&R.tag===6?(i(A,R.sibling),R=h(R,$),R.return=A,A=R):(i(A,R),R=El($,A.mode,Q),R.return=A,A=R),k(A)):i(A,R)}return Qe}var Tn=Kd(!0),Jd=Kd(!1),zi=Cr(null),qi=null,Rn=null,Uo=null;function Do(){Uo=Rn=qi=null}function Mo(e){var r=zi.current;Ue(zi),e._currentValue=r}function Fo(e,r,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),e===i)break;e=e.return}}function On(e,r){qi=e,Uo=Rn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(wt=!0),e.firstContext=null)}function Lt(e){var r=e._currentValue;if(Uo!==e)if(e={context:e,memoizedValue:r,next:null},Rn===null){if(qi===null)throw Error(s(308));Rn=e,qi.dependencies={lanes:0,firstContext:e}}else Rn=Rn.next=e;return r}var Gr=null;function Bo(e){Gr===null?Gr=[e]:Gr.push(e)}function Gd(e,r,i,o){var h=r.interleaved;return h===null?(i.next=i,Bo(r)):(i.next=h.next,h.next=i),r.interleaved=i,ur(e,o)}function ur(e,r){e.lanes|=r;var i=e.alternate;for(i!==null&&(i.lanes|=r),i=e,e=e.return;e!==null;)e.childLanes|=r,i=e.alternate,i!==null&&(i.childLanes|=r),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Or=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qd(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dr(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Pr(e,r,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Te&2)!==0){var h=o.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),o.pending=r,ur(e,i)}return h=o.interleaved,h===null?(r.next=r,Bo(o)):(r.next=h.next,h.next=r),o.interleaved=r,ur(e,i)}function Hi(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var o=r.lanes;o&=e.pendingLanes,i|=o,r.lanes=i,to(e,i)}}function Yd(e,r){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var h=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var k={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?h=p=k:p=p.next=k,i=i.next}while(i!==null);p===null?h=p=r:p=p.next=r}else h=p=r;i={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}function Wi(e,r,i,o){var h=e.updateQueue;Or=!1;var p=h.firstBaseUpdate,k=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var C=_,D=C.next;C.next=null,k===null?p=D:k.next=D,k=C;var V=e.alternate;V!==null&&(V=V.updateQueue,_=V.lastBaseUpdate,_!==k&&(_===null?V.firstBaseUpdate=D:_.next=D,V.lastBaseUpdate=C))}if(p!==null){var G=h.baseState;k=0,V=D=C=null,_=p;do{var W=_.lane,ae=_.eventTime;if((o&W)===W){V!==null&&(V=V.next={eventTime:ae,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var de=e,he=_;switch(W=r,ae=i,he.tag){case 1:if(de=he.payload,typeof de=="function"){G=de.call(ae,G,W);break e}G=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=he.payload,W=typeof de=="function"?de.call(ae,G,W):de,W==null)break e;G=z({},G,W);break e;case 2:Or=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,W=h.effects,W===null?h.effects=[_]:W.push(_))}else ae={eventTime:ae,lane:W,tag:_.tag,payload:_.payload,callback:_.callback,next:null},V===null?(D=V=ae,C=G):V=V.next=ae,k|=W;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;W=_,_=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);if(V===null&&(C=G),h.baseState=C,h.firstBaseUpdate=D,h.lastBaseUpdate=V,r=h.shared.interleaved,r!==null){h=r;do k|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Xr|=k,e.lanes=k,e.memoizedState=G}}function Xd(e,r,i){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var o=e[r],h=o.callback;if(h!==null){if(o.callback=null,o=i,typeof h!="function")throw Error(s(191,h));h.call(o)}}}var Cs={},tr=Cr(Cs),Ts=Cr(Cs),Rs=Cr(Cs);function Qr(e){if(e===Cs)throw Error(s(174));return e}function qo(e,r){switch(Ie(Rs,r),Ie(Ts,e),Ie(tr,Cs),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ns(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=ns(r,e)}Ue(tr),Ie(tr,r)}function Pn(){Ue(tr),Ue(Ts),Ue(Rs)}function Zd(e){Qr(Rs.current);var r=Qr(tr.current),i=ns(r,e.type);r!==i&&(Ie(Ts,e),Ie(tr,i))}function Ho(e){Ts.current===e&&(Ue(tr),Ue(Ts))}var qe=Cr(0);function Vi(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wo=[];function Vo(){for(var e=0;e<Wo.length;e++)Wo[e]._workInProgressVersionPrimary=null;Wo.length=0}var Ki=q.ReactCurrentDispatcher,Ko=q.ReactCurrentBatchConfig,Yr=0,He=null,tt=null,st=null,Ji=!1,Os=!1,Ps=0,k0=0;function ft(){throw Error(s(321))}function Jo(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!zt(e[i],r[i]))return!1;return!0}function Go(e,r,i,o,h,p){if(Yr=p,He=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ki.current=e===null||e.memoizedState===null?b0:_0,e=i(o,h),Os){p=0;do{if(Os=!1,Ps=0,25<=p)throw Error(s(301));p+=1,st=tt=null,r.updateQueue=null,Ki.current=S0,e=i(o,h)}while(Os)}if(Ki.current=Yi,r=tt!==null&&tt.next!==null,Yr=0,st=tt=He=null,Ji=!1,r)throw Error(s(300));return e}function Qo(){var e=Ps!==0;return Ps=0,e}function rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?He.memoizedState=st=e:st=st.next=e,st}function $t(){if(tt===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var r=st===null?He.memoizedState:st.next;if(r!==null)st=r,tt=e;else{if(e===null)throw Error(s(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?He.memoizedState=st=e:st=st.next=e}return st}function Is(e,r){return typeof r=="function"?r(e):r}function Yo(e){var r=$t(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=tt,h=o.baseQueue,p=i.pending;if(p!==null){if(h!==null){var k=h.next;h.next=p.next,p.next=k}o.baseQueue=h=p,i.pending=null}if(h!==null){p=h.next,o=o.baseState;var _=k=null,C=null,D=p;do{var V=D.lane;if((Yr&V)===V)C!==null&&(C=C.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),o=D.hasEagerState?D.eagerState:e(o,D.action);else{var G={lane:V,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};C===null?(_=C=G,k=o):C=C.next=G,He.lanes|=V,Xr|=V}D=D.next}while(D!==null&&D!==p);C===null?k=o:C.next=_,zt(o,r.memoizedState)||(wt=!0),r.memoizedState=o,r.baseState=k,r.baseQueue=C,i.lastRenderedState=o}if(e=i.interleaved,e!==null){h=e;do p=h.lane,He.lanes|=p,Xr|=p,h=h.next;while(h!==e)}else h===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function Xo(e){var r=$t(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,h=i.pending,p=r.memoizedState;if(h!==null){i.pending=null;var k=h=h.next;do p=e(p,k.action),k=k.next;while(k!==h);zt(p,r.memoizedState)||(wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),i.lastRenderedState=p}return[p,o]}function ec(){}function tc(e,r){var i=He,o=$t(),h=r(),p=!zt(o.memoizedState,h);if(p&&(o.memoizedState=h,wt=!0),o=o.queue,Zo(sc.bind(null,i,o,e),[e]),o.getSnapshot!==r||p||st!==null&&st.memoizedState.tag&1){if(i.flags|=2048,As(9,nc.bind(null,i,o,h,r),void 0,null),it===null)throw Error(s(349));(Yr&30)!==0||rc(i,r,h)}return h}function rc(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=He.updateQueue,r===null?(r={lastEffect:null,stores:null},He.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function nc(e,r,i,o){r.value=i,r.getSnapshot=o,ic(r)&&ac(e)}function sc(e,r,i){return i(function(){ic(r)&&ac(e)})}function ic(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!zt(e,i)}catch{return!0}}function ac(e){var r=ur(e,1);r!==null&&Kt(r,e,1,-1)}function oc(e){var r=rr();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},r.queue=e,e=e.dispatch=w0.bind(null,He,e),[r.memoizedState,e]}function As(e,r,i,o){return e={tag:e,create:r,destroy:i,deps:o,next:null},r=He.updateQueue,r===null?(r={lastEffect:null,stores:null},He.updateQueue=r,r.lastEffect=e.next=e):(i=r.lastEffect,i===null?r.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,r.lastEffect=e)),e}function lc(){return $t().memoizedState}function Gi(e,r,i,o){var h=rr();He.flags|=e,h.memoizedState=As(1|r,i,void 0,o===void 0?null:o)}function Qi(e,r,i,o){var h=$t();o=o===void 0?null:o;var p=void 0;if(tt!==null){var k=tt.memoizedState;if(p=k.destroy,o!==null&&Jo(o,k.deps)){h.memoizedState=As(r,i,p,o);return}}He.flags|=e,h.memoizedState=As(1|r,i,p,o)}function uc(e,r){return Gi(8390656,8,e,r)}function Zo(e,r){return Qi(2048,8,e,r)}function dc(e,r){return Qi(4,2,e,r)}function cc(e,r){return Qi(4,4,e,r)}function hc(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function fc(e,r,i){return i=i!=null?i.concat([e]):null,Qi(4,4,hc.bind(null,r,e),i)}function el(){}function pc(e,r){var i=$t();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&Jo(r,o[1])?o[0]:(i.memoizedState=[e,r],e)}function mc(e,r){var i=$t();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&Jo(r,o[1])?o[0]:(e=e(),i.memoizedState=[e,r],e)}function yc(e,r,i){return(Yr&21)===0?(e.baseState&&(e.baseState=!1,wt=!0),e.memoizedState=i):(zt(i,r)||(i=Vu(),He.lanes|=i,Xr|=i,e.baseState=!0),r)}function v0(e,r){var i=Pe;Pe=i!==0&&4>i?i:4,e(!0);var o=Ko.transition;Ko.transition={};try{e(!1),r()}finally{Pe=i,Ko.transition=o}}function gc(){return $t().memoizedState}function x0(e,r,i){var o=$r(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},kc(e))vc(r,i);else if(i=Gd(e,r,i,o),i!==null){var h=gt();Kt(i,e,o,h),xc(i,r,o)}}function w0(e,r,i){var o=$r(e),h={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(kc(e))vc(r,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var k=r.lastRenderedState,_=p(k,i);if(h.hasEagerState=!0,h.eagerState=_,zt(_,k)){var C=r.interleaved;C===null?(h.next=h,Bo(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}i=Gd(e,r,h,o),i!==null&&(h=gt(),Kt(i,e,o,h),xc(i,r,o))}}function kc(e){var r=e.alternate;return e===He||r!==null&&r===He}function vc(e,r){Os=Ji=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function xc(e,r,i){if((i&4194240)!==0){var o=r.lanes;o&=e.pendingLanes,i|=o,r.lanes=i,to(e,i)}}var Yi={readContext:Lt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},b0={readContext:Lt,useCallback:function(e,r){return rr().memoizedState=[e,r===void 0?null:r],e},useContext:Lt,useEffect:uc,useImperativeHandle:function(e,r,i){return i=i!=null?i.concat([e]):null,Gi(4194308,4,hc.bind(null,r,e),i)},useLayoutEffect:function(e,r){return Gi(4194308,4,e,r)},useInsertionEffect:function(e,r){return Gi(4,2,e,r)},useMemo:function(e,r){var i=rr();return r=r===void 0?null:r,e=e(),i.memoizedState=[e,r],e},useReducer:function(e,r,i){var o=rr();return r=i!==void 0?i(r):r,o.memoizedState=o.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},o.queue=e,e=e.dispatch=x0.bind(null,He,e),[o.memoizedState,e]},useRef:function(e){var r=rr();return e={current:e},r.memoizedState=e},useState:oc,useDebugValue:el,useDeferredValue:function(e){return rr().memoizedState=e},useTransition:function(){var e=oc(!1),r=e[0];return e=v0.bind(null,e[1]),rr().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,i){var o=He,h=rr();if(Me){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),it===null)throw Error(s(349));(Yr&30)!==0||rc(o,r,i)}h.memoizedState=i;var p={value:i,getSnapshot:r};return h.queue=p,uc(sc.bind(null,o,p,e),[e]),o.flags|=2048,As(9,nc.bind(null,o,p,i,r),void 0,null),i},useId:function(){var e=rr(),r=it.identifierPrefix;if(Me){var i=lr,o=or;i=(o&~(1<<32-Bt(o)-1)).toString(32)+i,r=":"+r+"R"+i,i=Ps++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=k0++,r=":"+r+"r"+i.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},_0={readContext:Lt,useCallback:pc,useContext:Lt,useEffect:Zo,useImperativeHandle:fc,useInsertionEffect:dc,useLayoutEffect:cc,useMemo:mc,useReducer:Yo,useRef:lc,useState:function(){return Yo(Is)},useDebugValue:el,useDeferredValue:function(e){var r=$t();return yc(r,tt.memoizedState,e)},useTransition:function(){var e=Yo(Is)[0],r=$t().memoizedState;return[e,r]},useMutableSource:ec,useSyncExternalStore:tc,useId:gc,unstable_isNewReconciler:!1},S0={readContext:Lt,useCallback:pc,useContext:Lt,useEffect:Zo,useImperativeHandle:fc,useInsertionEffect:dc,useLayoutEffect:cc,useMemo:mc,useReducer:Xo,useRef:lc,useState:function(){return Xo(Is)},useDebugValue:el,useDeferredValue:function(e){var r=$t();return tt===null?r.memoizedState=e:yc(r,tt.memoizedState,e)},useTransition:function(){var e=Xo(Is)[0],r=$t().memoizedState;return[e,r]},useMutableSource:ec,useSyncExternalStore:tc,useId:gc,unstable_isNewReconciler:!1};function Ht(e,r){if(e&&e.defaultProps){r=z({},r),e=e.defaultProps;for(var i in e)r[i]===void 0&&(r[i]=e[i]);return r}return r}function tl(e,r,i,o){r=e.memoizedState,i=i(o,r),i=i==null?r:z({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Xi={isMounted:function(e){return(e=e._reactInternals)?Hr(e)===e:!1},enqueueSetState:function(e,r,i){e=e._reactInternals;var o=gt(),h=$r(e),p=dr(o,h);p.payload=r,i!=null&&(p.callback=i),r=Pr(e,p,h),r!==null&&(Kt(r,e,h,o),Hi(r,e,h))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var o=gt(),h=$r(e),p=dr(o,h);p.tag=1,p.payload=r,i!=null&&(p.callback=i),r=Pr(e,p,h),r!==null&&(Kt(r,e,h,o),Hi(r,e,h))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=gt(),o=$r(e),h=dr(i,o);h.tag=2,r!=null&&(h.callback=r),r=Pr(e,h,o),r!==null&&(Kt(r,e,o,i),Hi(r,e,o))}};function wc(e,r,i,o,h,p,k){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,k):r.prototype&&r.prototype.isPureReactComponent?!xs(i,o)||!xs(h,p):!0}function bc(e,r,i){var o=!1,h=Tr,p=r.contextType;return typeof p=="object"&&p!==null?p=Lt(p):(h=xt(r)?Vr:ht.current,o=r.contextTypes,p=(o=o!=null)?jn(e,h):Tr),r=new r(i,p),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Xi,e.stateNode=r,r._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=p),r}function _c(e,r,i,o){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,o),r.state!==e&&Xi.enqueueReplaceState(r,r.state,null)}function rl(e,r,i,o){var h=e.stateNode;h.props=i,h.state=e.memoizedState,h.refs={},zo(e);var p=r.contextType;typeof p=="object"&&p!==null?h.context=Lt(p):(p=xt(r)?Vr:ht.current,h.context=jn(e,p)),h.state=e.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(tl(e,r,p,i),h.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Xi.enqueueReplaceState(h,h.state,null),Wi(e,i,h,o),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function In(e,r){try{var i="",o=r;do i+=ce(o),o=o.return;while(o);var h=i}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:r,stack:h,digest:null}}function nl(e,r,i){return{value:e,source:null,stack:i??null,digest:r??null}}function sl(e,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var j0=typeof WeakMap=="function"?WeakMap:Map;function Sc(e,r,i){i=dr(-1,i),i.tag=3,i.payload={element:null};var o=r.value;return i.callback=function(){ia||(ia=!0,vl=o),sl(e,r)},i}function jc(e,r,i){i=dr(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var h=r.value;i.payload=function(){return o(h)},i.callback=function(){sl(e,r)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){sl(e,r),typeof o!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var k=r.stack;this.componentDidCatch(r.value,{componentStack:k!==null?k:""})}),i}function Nc(e,r,i){var o=e.pingCache;if(o===null){o=e.pingCache=new j0;var h=new Set;o.set(r,h)}else h=o.get(r),h===void 0&&(h=new Set,o.set(r,h));h.has(i)||(h.add(i),e=M0.bind(null,e,r,i),r.then(e,e))}function Ec(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Cc(e,r,i,o,h){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=dr(-1,1),r.tag=2,Pr(i,r,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var N0=q.ReactCurrentOwner,wt=!1;function yt(e,r,i,o){r.child=e===null?Jd(r,null,i,o):Tn(r,e.child,i,o)}function Tc(e,r,i,o,h){i=i.render;var p=r.ref;return On(r,h),o=Go(e,r,i,o,p,h),i=Qo(),e!==null&&!wt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,cr(e,r,h)):(Me&&i&&Po(r),r.flags|=1,yt(e,r,o,h),r.child)}function Rc(e,r,i,o,h){if(e===null){var p=i.type;return typeof p=="function"&&!Nl(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=p,Oc(e,r,p,o,h)):(e=ca(i.type,null,o,r,r.mode,h),e.ref=r.ref,e.return=r,r.child=e)}if(p=e.child,(e.lanes&h)===0){var k=p.memoizedProps;if(i=i.compare,i=i!==null?i:xs,i(k,o)&&e.ref===r.ref)return cr(e,r,h)}return r.flags|=1,e=Dr(p,o),e.ref=r.ref,e.return=r,r.child=e}function Oc(e,r,i,o,h){if(e!==null){var p=e.memoizedProps;if(xs(p,o)&&e.ref===r.ref)if(wt=!1,r.pendingProps=o=p,(e.lanes&h)!==0)(e.flags&131072)!==0&&(wt=!0);else return r.lanes=e.lanes,cr(e,r,h)}return il(e,r,i,o,h)}function Pc(e,r,i){var o=r.pendingProps,h=o.children,p=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Ln,Tt),Tt|=i;else{if((i&1073741824)===0)return e=p!==null?p.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Ie(Ln,Tt),Tt|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=p!==null?p.baseLanes:i,Ie(Ln,Tt),Tt|=o}else p!==null?(o=p.baseLanes|i,r.memoizedState=null):o=i,Ie(Ln,Tt),Tt|=o;return yt(e,r,h,i),r.child}function Ic(e,r){var i=r.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function il(e,r,i,o,h){var p=xt(i)?Vr:ht.current;return p=jn(r,p),On(r,h),i=Go(e,r,i,o,p,h),o=Qo(),e!==null&&!wt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,cr(e,r,h)):(Me&&o&&Po(r),r.flags|=1,yt(e,r,i,h),r.child)}function Ac(e,r,i,o,h){if(xt(i)){var p=!0;$i(r)}else p=!1;if(On(r,h),r.stateNode===null)ea(e,r),bc(r,i,o),rl(r,i,o,h),o=!0;else if(e===null){var k=r.stateNode,_=r.memoizedProps;k.props=_;var C=k.context,D=i.contextType;typeof D=="object"&&D!==null?D=Lt(D):(D=xt(i)?Vr:ht.current,D=jn(r,D));var V=i.getDerivedStateFromProps,G=typeof V=="function"||typeof k.getSnapshotBeforeUpdate=="function";G||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(_!==o||C!==D)&&_c(r,k,o,D),Or=!1;var W=r.memoizedState;k.state=W,Wi(r,o,k,h),C=r.memoizedState,_!==o||W!==C||vt.current||Or?(typeof V=="function"&&(tl(r,i,V,o),C=r.memoizedState),(_=Or||wc(r,i,_,o,W,C,D))?(G||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(r.flags|=4194308)):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=C),k.props=o,k.state=C,k.context=D,o=_):(typeof k.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{k=r.stateNode,Qd(e,r),_=r.memoizedProps,D=r.type===r.elementType?_:Ht(r.type,_),k.props=D,G=r.pendingProps,W=k.context,C=i.contextType,typeof C=="object"&&C!==null?C=Lt(C):(C=xt(i)?Vr:ht.current,C=jn(r,C));var ae=i.getDerivedStateFromProps;(V=typeof ae=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(_!==G||W!==C)&&_c(r,k,o,C),Or=!1,W=r.memoizedState,k.state=W,Wi(r,o,k,h);var de=r.memoizedState;_!==G||W!==de||vt.current||Or?(typeof ae=="function"&&(tl(r,i,ae,o),de=r.memoizedState),(D=Or||wc(r,i,D,o,W,de,C)||!1)?(V||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(o,de,C),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(o,de,C)),typeof k.componentDidUpdate=="function"&&(r.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof k.componentDidUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=de),k.props=o,k.state=de,k.context=C,o=D):(typeof k.componentDidUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),o=!1)}return al(e,r,i,o,p,h)}function al(e,r,i,o,h,p){Ic(e,r);var k=(r.flags&128)!==0;if(!o&&!k)return h&&Md(r,i,!1),cr(e,r,p);o=r.stateNode,N0.current=r;var _=k&&typeof i.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,e!==null&&k?(r.child=Tn(r,e.child,null,p),r.child=Tn(r,null,_,p)):yt(e,r,_,p),r.memoizedState=o.state,h&&Md(r,i,!0),r.child}function Lc(e){var r=e.stateNode;r.pendingContext?Ud(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ud(e,r.context,!1),qo(e,r.containerInfo)}function $c(e,r,i,o,h){return Cn(),$o(h),r.flags|=256,yt(e,r,i,o),r.child}var ol={dehydrated:null,treeContext:null,retryLane:0};function ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uc(e,r,i){var o=r.pendingProps,h=qe.current,p=!1,k=(r.flags&128)!==0,_;if((_=k)||(_=e!==null&&e.memoizedState===null?!1:(h&2)!==0),_?(p=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Ie(qe,h&1),e===null)return Lo(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(k=o.children,e=o.fallback,p?(o=r.mode,p=r.child,k={mode:"hidden",children:k},(o&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=k):p=ha(k,o,0,null),e=rn(e,o,i,null),p.return=r,e.return=r,p.sibling=e,r.child=p,r.child.memoizedState=ll(i),r.memoizedState=ol,e):ul(r,k));if(h=e.memoizedState,h!==null&&(_=h.dehydrated,_!==null))return E0(e,r,k,o,_,h,i);if(p){p=o.fallback,k=r.mode,h=e.child,_=h.sibling;var C={mode:"hidden",children:o.children};return(k&1)===0&&r.child!==h?(o=r.child,o.childLanes=0,o.pendingProps=C,r.deletions=null):(o=Dr(h,C),o.subtreeFlags=h.subtreeFlags&14680064),_!==null?p=Dr(_,p):(p=rn(p,k,i,null),p.flags|=2),p.return=r,o.return=r,o.sibling=p,r.child=o,o=p,p=r.child,k=e.child.memoizedState,k=k===null?ll(i):{baseLanes:k.baseLanes|i,cachePool:null,transitions:k.transitions},p.memoizedState=k,p.childLanes=e.childLanes&~i,r.memoizedState=ol,o}return p=e.child,e=p.sibling,o=Dr(p,{mode:"visible",children:o.children}),(r.mode&1)===0&&(o.lanes=i),o.return=r,o.sibling=null,e!==null&&(i=r.deletions,i===null?(r.deletions=[e],r.flags|=16):i.push(e)),r.child=o,r.memoizedState=null,o}function ul(e,r){return r=ha({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Zi(e,r,i,o){return o!==null&&$o(o),Tn(r,e.child,null,i),e=ul(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function E0(e,r,i,o,h,p,k){if(i)return r.flags&256?(r.flags&=-257,o=nl(Error(s(422))),Zi(e,r,k,o)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(p=o.fallback,h=r.mode,o=ha({mode:"visible",children:o.children},h,0,null),p=rn(p,h,k,null),p.flags|=2,o.return=r,p.return=r,o.sibling=p,r.child=o,(r.mode&1)!==0&&Tn(r,e.child,null,k),r.child.memoizedState=ll(k),r.memoizedState=ol,p);if((r.mode&1)===0)return Zi(e,r,k,null);if(h.data==="$!"){if(o=h.nextSibling&&h.nextSibling.dataset,o)var _=o.dgst;return o=_,p=Error(s(419)),o=nl(p,o,void 0),Zi(e,r,k,o)}if(_=(k&e.childLanes)!==0,wt||_){if(o=it,o!==null){switch(k&-k){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(o.suspendedLanes|k))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,ur(e,h),Kt(o,e,h,-1))}return jl(),o=nl(Error(s(421))),Zi(e,r,k,o)}return h.data==="$?"?(r.flags|=128,r.child=e.child,r=F0.bind(null,e),h._reactRetry=r,null):(e=p.treeContext,Ct=Er(h.nextSibling),Et=r,Me=!0,qt=null,e!==null&&(It[At++]=or,It[At++]=lr,It[At++]=Kr,or=e.id,lr=e.overflow,Kr=r),r=ul(r,o.children),r.flags|=4096,r)}function Dc(e,r,i){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r),Fo(e.return,r,i)}function dl(e,r,i,o,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=i,p.tailMode=h)}function Mc(e,r,i){var o=r.pendingProps,h=o.revealOrder,p=o.tail;if(yt(e,r,o.children,i),o=qe.current,(o&2)!==0)o=o&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,i,r);else if(e.tag===19)Dc(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ie(qe,o),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(i=r.child,h=null;i!==null;)e=i.alternate,e!==null&&Vi(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=r.child,r.child=null):(h=i.sibling,i.sibling=null),dl(r,!1,h,i,p);break;case"backwards":for(i=null,h=r.child,r.child=null;h!==null;){if(e=h.alternate,e!==null&&Vi(e)===null){r.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}dl(r,!0,i,null,p);break;case"together":dl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ea(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function cr(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),Xr|=r.lanes,(i&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,i=Dr(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=Dr(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function C0(e,r,i){switch(r.tag){case 3:Lc(r),Cn();break;case 5:Zd(r);break;case 1:xt(r.type)&&$i(r);break;case 4:qo(r,r.stateNode.containerInfo);break;case 10:var o=r.type._context,h=r.memoizedProps.value;Ie(zi,o._currentValue),o._currentValue=h;break;case 13:if(o=r.memoizedState,o!==null)return o.dehydrated!==null?(Ie(qe,qe.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Uc(e,r,i):(Ie(qe,qe.current&1),e=cr(e,r,i),e!==null?e.sibling:null);Ie(qe,qe.current&1);break;case 19:if(o=(i&r.childLanes)!==0,(e.flags&128)!==0){if(o)return Mc(e,r,i);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ie(qe,qe.current),o)break;return null;case 22:case 23:return r.lanes=0,Pc(e,r,i)}return cr(e,r,i)}var Fc,cl,Bc,zc;Fc=function(e,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},cl=function(){},Bc=function(e,r,i,o){var h=e.memoizedProps;if(h!==o){e=r.stateNode,Qr(tr.current);var p=null;switch(i){case"input":h=De(e,h),o=De(e,o),p=[];break;case"select":h=z({},h,{value:void 0}),o=z({},o,{value:void 0}),p=[];break;case"textarea":h=cn(e,h),o=cn(e,o),p=[];break;default:typeof h.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ii)}fn(i,o);var k;i=null;for(D in h)if(!o.hasOwnProperty(D)&&h.hasOwnProperty(D)&&h[D]!=null)if(D==="style"){var _=h[D];for(k in _)_.hasOwnProperty(k)&&(i||(i={}),i[k]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(u.hasOwnProperty(D)?p||(p=[]):(p=p||[]).push(D,null));for(D in o){var C=o[D];if(_=h?.[D],o.hasOwnProperty(D)&&C!==_&&(C!=null||_!=null))if(D==="style")if(_){for(k in _)!_.hasOwnProperty(k)||C&&C.hasOwnProperty(k)||(i||(i={}),i[k]="");for(k in C)C.hasOwnProperty(k)&&_[k]!==C[k]&&(i||(i={}),i[k]=C[k])}else i||(p||(p=[]),p.push(D,i)),i=C;else D==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,_=_?_.__html:void 0,C!=null&&_!==C&&(p=p||[]).push(D,C)):D==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(D,""+C):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(u.hasOwnProperty(D)?(C!=null&&D==="onScroll"&&$e("scroll",e),p||_===C||(p=[])):(p=p||[]).push(D,C))}i&&(p=p||[]).push("style",i);var D=p;(r.updateQueue=D)&&(r.flags|=4)}},zc=function(e,r,i,o){i!==o&&(r.flags|=4)};function Ls(e,r){if(!Me)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function pt(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(r)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags&14680064,o|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=i,r}function T0(e,r,i){var o=r.pendingProps;switch(Io(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(r),null;case 1:return xt(r.type)&&Li(),pt(r),null;case 3:return o=r.stateNode,Pn(),Ue(vt),Ue(ht),Vo(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Fi(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,qt!==null&&(bl(qt),qt=null))),cl(e,r),pt(r),null;case 5:Ho(r);var h=Qr(Rs.current);if(i=r.type,e!==null&&r.stateNode!=null)Bc(e,r,i,o,h),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(s(166));return pt(r),null}if(e=Qr(tr.current),Fi(r)){o=r.stateNode,i=r.type;var p=r.memoizedProps;switch(o[er]=r,o[js]=p,e=(r.mode&1)!==0,i){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(h=0;h<bs.length;h++)$e(bs[h],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":Oe(o,p),$e("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!p.multiple},$e("invalid",o);break;case"textarea":li(o,p),$e("invalid",o)}fn(i,p),h=null;for(var k in p)if(p.hasOwnProperty(k)){var _=p[k];k==="children"?typeof _=="string"?o.textContent!==_&&(p.suppressHydrationWarning!==!0&&Pi(o.textContent,_,e),h=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(p.suppressHydrationWarning!==!0&&Pi(o.textContent,_,e),h=["children",""+_]):u.hasOwnProperty(k)&&_!=null&&k==="onScroll"&&$e("scroll",o)}switch(i){case"input":ie(o),et(o,p,!0);break;case"textarea":ie(o),ui(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(o.onclick=Ii)}o=h,r.updateQueue=o,o!==null&&(r.flags|=4)}else{k=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=di(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=k.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=k.createElement(i,{is:o.is}):(e=k.createElement(i),i==="select"&&(k=e,o.multiple?k.multiple=!0:o.size&&(k.size=o.size))):e=k.createElementNS(e,i),e[er]=r,e[js]=o,Fc(e,r,!1,!1),r.stateNode=e;e:{switch(k=ss(i,o),i){case"dialog":$e("cancel",e),$e("close",e),h=o;break;case"iframe":case"object":case"embed":$e("load",e),h=o;break;case"video":case"audio":for(h=0;h<bs.length;h++)$e(bs[h],e);h=o;break;case"source":$e("error",e),h=o;break;case"img":case"image":case"link":$e("error",e),$e("load",e),h=o;break;case"details":$e("toggle",e),h=o;break;case"input":Oe(e,o),h=De(e,o),$e("invalid",e);break;case"option":h=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},h=z({},o,{value:void 0}),$e("invalid",e);break;case"textarea":li(e,o),h=cn(e,o),$e("invalid",e);break;default:h=o}fn(i,h),_=h;for(p in _)if(_.hasOwnProperty(p)){var C=_[p];p==="style"?Ye(e,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&ci(e,C)):p==="children"?typeof C=="string"?(i!=="textarea"||C!=="")&&qr(e,C):typeof C=="number"&&qr(e,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(u.hasOwnProperty(p)?C!=null&&p==="onScroll"&&$e("scroll",e):C!=null&&L(e,p,C,k))}switch(i){case"input":ie(e),et(e,o,!1);break;case"textarea":ie(e),ui(e);break;case"option":o.value!=null&&e.setAttribute("value",""+be(o.value));break;case"select":e.multiple=!!o.multiple,p=o.value,p!=null?xr(e,!!o.multiple,p,!1):o.defaultValue!=null&&xr(e,!!o.multiple,o.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Ii)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return pt(r),null;case 6:if(e&&r.stateNode!=null)zc(e,r,e.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(s(166));if(i=Qr(Rs.current),Qr(tr.current),Fi(r)){if(o=r.stateNode,i=r.memoizedProps,o[er]=r,(p=o.nodeValue!==i)&&(e=Et,e!==null))switch(e.tag){case 3:Pi(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pi(o.nodeValue,i,(e.mode&1)!==0)}p&&(r.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[er]=r,r.stateNode=o}return pt(r),null;case 13:if(Ue(qe),o=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Ct!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Wd(),Cn(),r.flags|=98560,p=!1;else if(p=Fi(r),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[er]=r}else Cn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;pt(r),p=!1}else qt!==null&&(bl(qt),qt=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(qe.current&1)!==0?rt===0&&(rt=3):jl())),r.updateQueue!==null&&(r.flags|=4),pt(r),null);case 4:return Pn(),cl(e,r),e===null&&_s(r.stateNode.containerInfo),pt(r),null;case 10:return Mo(r.type._context),pt(r),null;case 17:return xt(r.type)&&Li(),pt(r),null;case 19:if(Ue(qe),p=r.memoizedState,p===null)return pt(r),null;if(o=(r.flags&128)!==0,k=p.rendering,k===null)if(o)Ls(p,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(k=Vi(e),k!==null){for(r.flags|=128,Ls(p,!1),o=k.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),r.subtreeFlags=0,o=i,i=r.child;i!==null;)p=i,e=o,p.flags&=14680066,k=p.alternate,k===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=k.childLanes,p.lanes=k.lanes,p.child=k.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=k.memoizedProps,p.memoizedState=k.memoizedState,p.updateQueue=k.updateQueue,p.type=k.type,e=k.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ie(qe,qe.current&1|2),r.child}e=e.sibling}p.tail!==null&&Ge()>$n&&(r.flags|=128,o=!0,Ls(p,!1),r.lanes=4194304)}else{if(!o)if(e=Vi(k),e!==null){if(r.flags|=128,o=!0,i=e.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),Ls(p,!0),p.tail===null&&p.tailMode==="hidden"&&!k.alternate&&!Me)return pt(r),null}else 2*Ge()-p.renderingStartTime>$n&&i!==1073741824&&(r.flags|=128,o=!0,Ls(p,!1),r.lanes=4194304);p.isBackwards?(k.sibling=r.child,r.child=k):(i=p.last,i!==null?i.sibling=k:r.child=k,p.last=k)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ge(),r.sibling=null,i=qe.current,Ie(qe,o?i&1|2:i&1),r):(pt(r),null);case 22:case 23:return Sl(),o=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(r.flags|=8192),o&&(r.mode&1)!==0?(Tt&1073741824)!==0&&(pt(r),r.subtreeFlags&6&&(r.flags|=8192)):pt(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function R0(e,r){switch(Io(r),r.tag){case 1:return xt(r.type)&&Li(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Pn(),Ue(vt),Ue(ht),Vo(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Ho(r),null;case 13:if(Ue(qe),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Cn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Ue(qe),null;case 4:return Pn(),null;case 10:return Mo(r.type._context),null;case 22:case 23:return Sl(),null;case 24:return null;default:return null}}var ta=!1,mt=!1,O0=typeof WeakSet=="function"?WeakSet:Set,le=null;function An(e,r){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){We(e,r,o)}else i.current=null}function hl(e,r,i){try{i()}catch(o){We(e,r,o)}}var qc=!1;function P0(e,r){if(So=wi,e=wd(),yo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var h=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var k=0,_=-1,C=-1,D=0,V=0,G=e,W=null;t:for(;;){for(var ae;G!==i||h!==0&&G.nodeType!==3||(_=k+h),G!==p||o!==0&&G.nodeType!==3||(C=k+o),G.nodeType===3&&(k+=G.nodeValue.length),(ae=G.firstChild)!==null;)W=G,G=ae;for(;;){if(G===e)break t;if(W===i&&++D===h&&(_=k),W===p&&++V===o&&(C=k),(ae=G.nextSibling)!==null)break;G=W,W=G.parentNode}G=ae}i=_===-1||C===-1?null:{start:_,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(jo={focusedElem:e,selectionRange:i},wi=!1,le=r;le!==null;)if(r=le,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,le=e;else for(;le!==null;){r=le;try{var de=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var he=de.memoizedProps,Qe=de.memoizedState,A=r.stateNode,R=A.getSnapshotBeforeUpdate(r.elementType===r.type?he:Ht(r.type,he),Qe);A.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var $=r.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Q){We(r,r.return,Q)}if(e=r.sibling,e!==null){e.return=r.return,le=e;break}le=r.return}return de=qc,qc=!1,de}function $s(e,r,i){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&e)===e){var p=h.destroy;h.destroy=void 0,p!==void 0&&hl(r,i,p)}h=h.next}while(h!==o)}}function ra(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==r)}}function fl(e){var r=e.ref;if(r!==null){var i=e.stateNode;e.tag,e=i,typeof r=="function"?r(e):r.current=e}}function Hc(e){var r=e.alternate;r!==null&&(e.alternate=null,Hc(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[er],delete r[js],delete r[To],delete r[p0],delete r[m0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wc(e){return e.tag===5||e.tag===3||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pl(e,r,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(e,r):i.insertBefore(e,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(e,i)):(r=i,r.appendChild(e)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Ii));else if(o!==4&&(e=e.child,e!==null))for(pl(e,r,i),e=e.sibling;e!==null;)pl(e,r,i),e=e.sibling}function ml(e,r,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(ml(e,r,i),e=e.sibling;e!==null;)ml(e,r,i),e=e.sibling}var ot=null,Wt=!1;function Ir(e,r,i){for(i=i.child;i!==null;)Kc(e,r,i),i=i.sibling}function Kc(e,r,i){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(mi,i)}catch{}switch(i.tag){case 5:mt||An(i,r);case 6:var o=ot,h=Wt;ot=null,Ir(e,r,i),ot=o,Wt=h,ot!==null&&(Wt?(e=ot,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):ot.removeChild(i.stateNode));break;case 18:ot!==null&&(Wt?(e=ot,i=i.stateNode,e.nodeType===8?Co(e.parentNode,i):e.nodeType===1&&Co(e,i),ps(e)):Co(ot,i.stateNode));break;case 4:o=ot,h=Wt,ot=i.stateNode.containerInfo,Wt=!0,Ir(e,r,i),ot=o,Wt=h;break;case 0:case 11:case 14:case 15:if(!mt&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){h=o=o.next;do{var p=h,k=p.destroy;p=p.tag,k!==void 0&&((p&2)!==0||(p&4)!==0)&&hl(i,r,k),h=h.next}while(h!==o)}Ir(e,r,i);break;case 1:if(!mt&&(An(i,r),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(_){We(i,r,_)}Ir(e,r,i);break;case 21:Ir(e,r,i);break;case 22:i.mode&1?(mt=(o=mt)||i.memoizedState!==null,Ir(e,r,i),mt=o):Ir(e,r,i);break;default:Ir(e,r,i)}}function Jc(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new O0),r.forEach(function(o){var h=B0.bind(null,e,o);i.has(o)||(i.add(o),o.then(h,h))})}}function Vt(e,r){var i=r.deletions;if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];try{var p=e,k=r,_=k;e:for(;_!==null;){switch(_.tag){case 5:ot=_.stateNode,Wt=!1;break e;case 3:ot=_.stateNode.containerInfo,Wt=!0;break e;case 4:ot=_.stateNode.containerInfo,Wt=!0;break e}_=_.return}if(ot===null)throw Error(s(160));Kc(p,k,h),ot=null,Wt=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(D){We(h,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Gc(r,e),r=r.sibling}function Gc(e,r){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(r,e),nr(e),o&4){try{$s(3,e,e.return),ra(3,e)}catch(he){We(e,e.return,he)}try{$s(5,e,e.return)}catch(he){We(e,e.return,he)}}break;case 1:Vt(r,e),nr(e),o&512&&i!==null&&An(i,i.return);break;case 5:if(Vt(r,e),nr(e),o&512&&i!==null&&An(i,i.return),e.flags&32){var h=e.stateNode;try{qr(h,"")}catch(he){We(e,e.return,he)}}if(o&4&&(h=e.stateNode,h!=null)){var p=e.memoizedProps,k=i!==null?i.memoizedProps:p,_=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{_==="input"&&p.type==="radio"&&p.name!=null&&ze(h,p),ss(_,k);var D=ss(_,p);for(k=0;k<C.length;k+=2){var V=C[k],G=C[k+1];V==="style"?Ye(h,G):V==="dangerouslySetInnerHTML"?ci(h,G):V==="children"?qr(h,G):L(h,V,G,D)}switch(_){case"input":ct(h,p);break;case"textarea":rs(h,p);break;case"select":var W=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ae=p.value;ae!=null?xr(h,!!p.multiple,ae,!1):W!==!!p.multiple&&(p.defaultValue!=null?xr(h,!!p.multiple,p.defaultValue,!0):xr(h,!!p.multiple,p.multiple?[]:"",!1))}h[js]=p}catch(he){We(e,e.return,he)}}break;case 6:if(Vt(r,e),nr(e),o&4){if(e.stateNode===null)throw Error(s(162));h=e.stateNode,p=e.memoizedProps;try{h.nodeValue=p}catch(he){We(e,e.return,he)}}break;case 3:if(Vt(r,e),nr(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ps(r.containerInfo)}catch(he){We(e,e.return,he)}break;case 4:Vt(r,e),nr(e);break;case 13:Vt(r,e),nr(e),h=e.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(kl=Ge())),o&4&&Jc(e);break;case 22:if(V=i!==null&&i.memoizedState!==null,e.mode&1?(mt=(D=mt)||V,Vt(r,e),mt=D):Vt(r,e),nr(e),o&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!V&&(e.mode&1)!==0)for(le=e,V=e.child;V!==null;){for(G=le=V;le!==null;){switch(W=le,ae=W.child,W.tag){case 0:case 11:case 14:case 15:$s(4,W,W.return);break;case 1:An(W,W.return);var de=W.stateNode;if(typeof de.componentWillUnmount=="function"){o=W,i=W.return;try{r=o,de.props=r.memoizedProps,de.state=r.memoizedState,de.componentWillUnmount()}catch(he){We(o,i,he)}}break;case 5:An(W,W.return);break;case 22:if(W.memoizedState!==null){Xc(G);continue}}ae!==null?(ae.return=W,le=ae):Xc(G)}V=V.sibling}e:for(V=null,G=e;;){if(G.tag===5){if(V===null){V=G;try{h=G.stateNode,D?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(_=G.stateNode,C=G.memoizedProps.style,k=C!=null&&C.hasOwnProperty("display")?C.display:null,_.style.display=Je("display",k))}catch(he){We(e,e.return,he)}}}else if(G.tag===6){if(V===null)try{G.stateNode.nodeValue=D?"":G.memoizedProps}catch(he){We(e,e.return,he)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;V===G&&(V=null),G=G.return}V===G&&(V=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Vt(r,e),nr(e),o&4&&Jc(e);break;case 21:break;default:Vt(r,e),nr(e)}}function nr(e){var r=e.flags;if(r&2){try{e:{for(var i=e.return;i!==null;){if(Wc(i)){var o=i;break e}i=i.return}throw Error(s(160))}switch(o.tag){case 5:var h=o.stateNode;o.flags&32&&(qr(h,""),o.flags&=-33);var p=Vc(e);ml(e,p,h);break;case 3:case 4:var k=o.stateNode.containerInfo,_=Vc(e);pl(e,_,k);break;default:throw Error(s(161))}}catch(C){We(e,e.return,C)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function I0(e,r,i){le=e,Qc(e)}function Qc(e,r,i){for(var o=(e.mode&1)!==0;le!==null;){var h=le,p=h.child;if(h.tag===22&&o){var k=h.memoizedState!==null||ta;if(!k){var _=h.alternate,C=_!==null&&_.memoizedState!==null||mt;_=ta;var D=mt;if(ta=k,(mt=C)&&!D)for(le=h;le!==null;)k=le,C=k.child,k.tag===22&&k.memoizedState!==null?Zc(h):C!==null?(C.return=k,le=C):Zc(h);for(;p!==null;)le=p,Qc(p),p=p.sibling;le=h,ta=_,mt=D}Yc(e)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,le=p):Yc(e)}}function Yc(e){for(;le!==null;){var r=le;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:mt||ra(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!mt)if(i===null)o.componentDidMount();else{var h=r.elementType===r.type?i.memoizedProps:Ht(r.type,i.memoizedProps);o.componentDidUpdate(h,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Xd(r,p,o);break;case 3:var k=r.updateQueue;if(k!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}Xd(r,k,i)}break;case 5:var _=r.stateNode;if(i===null&&r.flags&4){i=_;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&i.focus();break;case"img":C.src&&(i.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var D=r.alternate;if(D!==null){var V=D.memoizedState;if(V!==null){var G=V.dehydrated;G!==null&&ps(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}mt||r.flags&512&&fl(r)}catch(W){We(r,r.return,W)}}if(r===e){le=null;break}if(i=r.sibling,i!==null){i.return=r.return,le=i;break}le=r.return}}function Xc(e){for(;le!==null;){var r=le;if(r===e){le=null;break}var i=r.sibling;if(i!==null){i.return=r.return,le=i;break}le=r.return}}function Zc(e){for(;le!==null;){var r=le;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{ra(4,r)}catch(C){We(r,i,C)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var h=r.return;try{o.componentDidMount()}catch(C){We(r,h,C)}}var p=r.return;try{fl(r)}catch(C){We(r,p,C)}break;case 5:var k=r.return;try{fl(r)}catch(C){We(r,k,C)}}}catch(C){We(r,r.return,C)}if(r===e){le=null;break}var _=r.sibling;if(_!==null){_.return=r.return,le=_;break}le=r.return}}var A0=Math.ceil,na=q.ReactCurrentDispatcher,yl=q.ReactCurrentOwner,Ut=q.ReactCurrentBatchConfig,Te=0,it=null,Xe=null,lt=0,Tt=0,Ln=Cr(0),rt=0,Us=null,Xr=0,sa=0,gl=0,Ds=null,bt=null,kl=0,$n=1/0,hr=null,ia=!1,vl=null,Ar=null,aa=!1,Lr=null,oa=0,Ms=0,xl=null,la=-1,ua=0;function gt(){return(Te&6)!==0?Ge():la!==-1?la:la=Ge()}function $r(e){return(e.mode&1)===0?1:(Te&2)!==0&&lt!==0?lt&-lt:g0.transition!==null?(ua===0&&(ua=Vu()),ua):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:td(e.type)),e)}function Kt(e,r,i,o){if(50<Ms)throw Ms=0,xl=null,Error(s(185));us(e,i,o),((Te&2)===0||e!==it)&&(e===it&&((Te&2)===0&&(sa|=i),rt===4&&Ur(e,lt)),_t(e,o),i===1&&Te===0&&(r.mode&1)===0&&($n=Ge()+500,Ui&&Rr()))}function _t(e,r){var i=e.callbackNode;gp(e,r);var o=ki(e,e===it?lt:0);if(o===0)i!==null&&qu(i),e.callbackNode=null,e.callbackPriority=0;else if(r=o&-o,e.callbackPriority!==r){if(i!=null&&qu(i),r===1)e.tag===0?y0(th.bind(null,e)):Fd(th.bind(null,e)),h0(function(){(Te&6)===0&&Rr()}),i=null;else{switch(Ku(o)){case 1:i=Xa;break;case 4:i=Hu;break;case 16:i=pi;break;case 536870912:i=Wu;break;default:i=pi}i=uh(i,eh.bind(null,e))}e.callbackPriority=r,e.callbackNode=i}}function eh(e,r){if(la=-1,ua=0,(Te&6)!==0)throw Error(s(327));var i=e.callbackNode;if(Un()&&e.callbackNode!==i)return null;var o=ki(e,e===it?lt:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||r)r=da(e,o);else{r=o;var h=Te;Te|=2;var p=nh();(it!==e||lt!==r)&&(hr=null,$n=Ge()+500,en(e,r));do try{U0();break}catch(_){rh(e,_)}while(!0);Do(),na.current=p,Te=h,Xe!==null?r=0:(it=null,lt=0,r=rt)}if(r!==0){if(r===2&&(h=Za(e),h!==0&&(o=h,r=wl(e,h))),r===1)throw i=Us,en(e,0),Ur(e,o),_t(e,Ge()),i;if(r===6)Ur(e,o);else{if(h=e.current.alternate,(o&30)===0&&!L0(h)&&(r=da(e,o),r===2&&(p=Za(e),p!==0&&(o=p,r=wl(e,p))),r===1))throw i=Us,en(e,0),Ur(e,o),_t(e,Ge()),i;switch(e.finishedWork=h,e.finishedLanes=o,r){case 0:case 1:throw Error(s(345));case 2:tn(e,bt,hr);break;case 3:if(Ur(e,o),(o&130023424)===o&&(r=kl+500-Ge(),10<r)){if(ki(e,0)!==0)break;if(h=e.suspendedLanes,(h&o)!==o){gt(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=Eo(tn.bind(null,e,bt,hr),r);break}tn(e,bt,hr);break;case 4:if(Ur(e,o),(o&4194240)===o)break;for(r=e.eventTimes,h=-1;0<o;){var k=31-Bt(o);p=1<<k,k=r[k],k>h&&(h=k),o&=~p}if(o=h,o=Ge()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*A0(o/1960))-o,10<o){e.timeoutHandle=Eo(tn.bind(null,e,bt,hr),o);break}tn(e,bt,hr);break;case 5:tn(e,bt,hr);break;default:throw Error(s(329))}}}return _t(e,Ge()),e.callbackNode===i?eh.bind(null,e):null}function wl(e,r){var i=Ds;return e.current.memoizedState.isDehydrated&&(en(e,r).flags|=256),e=da(e,r),e!==2&&(r=bt,bt=i,r!==null&&bl(r)),e}function bl(e){bt===null?bt=e:bt.push.apply(bt,e)}function L0(e){for(var r=e;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var h=i[o],p=h.getSnapshot;h=h.value;try{if(!zt(p(),h))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ur(e,r){for(r&=~gl,r&=~sa,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var i=31-Bt(r),o=1<<i;e[i]=-1,r&=~o}}function th(e){if((Te&6)!==0)throw Error(s(327));Un();var r=ki(e,0);if((r&1)===0)return _t(e,Ge()),null;var i=da(e,r);if(e.tag!==0&&i===2){var o=Za(e);o!==0&&(r=o,i=wl(e,o))}if(i===1)throw i=Us,en(e,0),Ur(e,r),_t(e,Ge()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,tn(e,bt,hr),_t(e,Ge()),null}function _l(e,r){var i=Te;Te|=1;try{return e(r)}finally{Te=i,Te===0&&($n=Ge()+500,Ui&&Rr())}}function Zr(e){Lr!==null&&Lr.tag===0&&(Te&6)===0&&Un();var r=Te;Te|=1;var i=Ut.transition,o=Pe;try{if(Ut.transition=null,Pe=1,e)return e()}finally{Pe=o,Ut.transition=i,Te=r,(Te&6)===0&&Rr()}}function Sl(){Tt=Ln.current,Ue(Ln)}function en(e,r){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,c0(i)),Xe!==null)for(i=Xe.return;i!==null;){var o=i;switch(Io(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Li();break;case 3:Pn(),Ue(vt),Ue(ht),Vo();break;case 5:Ho(o);break;case 4:Pn();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:Mo(o.type._context);break;case 22:case 23:Sl()}i=i.return}if(it=e,Xe=e=Dr(e.current,null),lt=Tt=r,rt=0,Us=null,gl=sa=Xr=0,bt=Ds=null,Gr!==null){for(r=0;r<Gr.length;r++)if(i=Gr[r],o=i.interleaved,o!==null){i.interleaved=null;var h=o.next,p=i.pending;if(p!==null){var k=p.next;p.next=h,o.next=k}i.pending=o}Gr=null}return e}function rh(e,r){do{var i=Xe;try{if(Do(),Ki.current=Yi,Ji){for(var o=He.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}Ji=!1}if(Yr=0,st=tt=He=null,Os=!1,Ps=0,yl.current=null,i===null||i.return===null){rt=1,Us=r,Xe=null;break}e:{var p=e,k=i.return,_=i,C=r;if(r=lt,_.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var D=C,V=_,G=V.tag;if((V.mode&1)===0&&(G===0||G===11||G===15)){var W=V.alternate;W?(V.updateQueue=W.updateQueue,V.memoizedState=W.memoizedState,V.lanes=W.lanes):(V.updateQueue=null,V.memoizedState=null)}var ae=Ec(k);if(ae!==null){ae.flags&=-257,Cc(ae,k,_,p,r),ae.mode&1&&Nc(p,D,r),r=ae,C=D;var de=r.updateQueue;if(de===null){var he=new Set;he.add(C),r.updateQueue=he}else de.add(C);break e}else{if((r&1)===0){Nc(p,D,r),jl();break e}C=Error(s(426))}}else if(Me&&_.mode&1){var Qe=Ec(k);if(Qe!==null){(Qe.flags&65536)===0&&(Qe.flags|=256),Cc(Qe,k,_,p,r),$o(In(C,_));break e}}p=C=In(C,_),rt!==4&&(rt=2),Ds===null?Ds=[p]:Ds.push(p),p=k;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var A=Sc(p,C,r);Yd(p,A);break e;case 1:_=C;var R=p.type,$=p.stateNode;if((p.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ar===null||!Ar.has($)))){p.flags|=65536,r&=-r,p.lanes|=r;var Q=jc(p,_,r);Yd(p,Q);break e}}p=p.return}while(p!==null)}ih(i)}catch(fe){r=fe,Xe===i&&i!==null&&(Xe=i=i.return);continue}break}while(!0)}function nh(){var e=na.current;return na.current=Yi,e===null?Yi:e}function jl(){(rt===0||rt===3||rt===2)&&(rt=4),it===null||(Xr&268435455)===0&&(sa&268435455)===0||Ur(it,lt)}function da(e,r){var i=Te;Te|=2;var o=nh();(it!==e||lt!==r)&&(hr=null,en(e,r));do try{$0();break}catch(h){rh(e,h)}while(!0);if(Do(),Te=i,na.current=o,Xe!==null)throw Error(s(261));return it=null,lt=0,rt}function $0(){for(;Xe!==null;)sh(Xe)}function U0(){for(;Xe!==null&&!lp();)sh(Xe)}function sh(e){var r=lh(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,r===null?ih(e):Xe=r,yl.current=null}function ih(e){var r=e;do{var i=r.alternate;if(e=r.return,(r.flags&32768)===0){if(i=T0(i,r,Tt),i!==null){Xe=i;return}}else{if(i=R0(i,r),i!==null){i.flags&=32767,Xe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Xe=null;return}}if(r=r.sibling,r!==null){Xe=r;return}Xe=r=e}while(r!==null);rt===0&&(rt=5)}function tn(e,r,i){var o=Pe,h=Ut.transition;try{Ut.transition=null,Pe=1,D0(e,r,i,o)}finally{Ut.transition=h,Pe=o}return null}function D0(e,r,i,o){do Un();while(Lr!==null);if((Te&6)!==0)throw Error(s(327));i=e.finishedWork;var h=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(kp(e,p),e===it&&(Xe=it=null,lt=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||aa||(aa=!0,uh(pi,function(){return Un(),null})),p=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||p){p=Ut.transition,Ut.transition=null;var k=Pe;Pe=1;var _=Te;Te|=4,yl.current=null,P0(e,i),Gc(i,e),s0(jo),wi=!!So,jo=So=null,e.current=i,I0(i),up(),Te=_,Pe=k,Ut.transition=p}else e.current=i;if(aa&&(aa=!1,Lr=e,oa=h),p=e.pendingLanes,p===0&&(Ar=null),hp(i.stateNode),_t(e,Ge()),r!==null)for(o=e.onRecoverableError,i=0;i<r.length;i++)h=r[i],o(h.value,{componentStack:h.stack,digest:h.digest});if(ia)throw ia=!1,e=vl,vl=null,e;return(oa&1)!==0&&e.tag!==0&&Un(),p=e.pendingLanes,(p&1)!==0?e===xl?Ms++:(Ms=0,xl=e):Ms=0,Rr(),null}function Un(){if(Lr!==null){var e=Ku(oa),r=Ut.transition,i=Pe;try{if(Ut.transition=null,Pe=16>e?16:e,Lr===null)var o=!1;else{if(e=Lr,Lr=null,oa=0,(Te&6)!==0)throw Error(s(331));var h=Te;for(Te|=4,le=e.current;le!==null;){var p=le,k=p.child;if((le.flags&16)!==0){var _=p.deletions;if(_!==null){for(var C=0;C<_.length;C++){var D=_[C];for(le=D;le!==null;){var V=le;switch(V.tag){case 0:case 11:case 15:$s(8,V,p)}var G=V.child;if(G!==null)G.return=V,le=G;else for(;le!==null;){V=le;var W=V.sibling,ae=V.return;if(Hc(V),V===D){le=null;break}if(W!==null){W.return=ae,le=W;break}le=ae}}}var de=p.alternate;if(de!==null){var he=de.child;if(he!==null){de.child=null;do{var Qe=he.sibling;he.sibling=null,he=Qe}while(he!==null)}}le=p}}if((p.subtreeFlags&2064)!==0&&k!==null)k.return=p,le=k;else e:for(;le!==null;){if(p=le,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:$s(9,p,p.return)}var A=p.sibling;if(A!==null){A.return=p.return,le=A;break e}le=p.return}}var R=e.current;for(le=R;le!==null;){k=le;var $=k.child;if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,le=$;else e:for(k=R;le!==null;){if(_=le,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:ra(9,_)}}catch(fe){We(_,_.return,fe)}if(_===k){le=null;break e}var Q=_.sibling;if(Q!==null){Q.return=_.return,le=Q;break e}le=_.return}}if(Te=h,Rr(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(mi,e)}catch{}o=!0}return o}finally{Pe=i,Ut.transition=r}}return!1}function ah(e,r,i){r=In(i,r),r=Sc(e,r,1),e=Pr(e,r,1),r=gt(),e!==null&&(us(e,1,r),_t(e,r))}function We(e,r,i){if(e.tag===3)ah(e,e,i);else for(;r!==null;){if(r.tag===3){ah(r,e,i);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ar===null||!Ar.has(o))){e=In(i,e),e=jc(r,e,1),r=Pr(r,e,1),e=gt(),r!==null&&(us(r,1,e),_t(r,e));break}}r=r.return}}function M0(e,r,i){var o=e.pingCache;o!==null&&o.delete(r),r=gt(),e.pingedLanes|=e.suspendedLanes&i,it===e&&(lt&i)===i&&(rt===4||rt===3&&(lt&130023424)===lt&&500>Ge()-kl?en(e,0):gl|=i),_t(e,r)}function oh(e,r){r===0&&((e.mode&1)===0?r=1:(r=gi,gi<<=1,(gi&130023424)===0&&(gi=4194304)));var i=gt();e=ur(e,r),e!==null&&(us(e,r,i),_t(e,i))}function F0(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),oh(e,i)}function B0(e,r){var i=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(r),oh(e,i)}var lh;lh=function(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps||vt.current)wt=!0;else{if((e.lanes&i)===0&&(r.flags&128)===0)return wt=!1,C0(e,r,i);wt=(e.flags&131072)!==0}else wt=!1,Me&&(r.flags&1048576)!==0&&Bd(r,Mi,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;ea(e,r),e=r.pendingProps;var h=jn(r,ht.current);On(r,i),h=Go(null,r,o,e,h,i);var p=Qo();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,xt(o)?(p=!0,$i(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,zo(r),h.updater=Xi,r.stateNode=h,h._reactInternals=r,rl(r,o,e,i),r=al(null,r,o,!0,p,i)):(r.tag=0,Me&&p&&Po(r),yt(null,r,h,i),r=r.child),r;case 16:o=r.elementType;e:{switch(ea(e,r),e=r.pendingProps,h=o._init,o=h(o._payload),r.type=o,h=r.tag=q0(o),e=Ht(o,e),h){case 0:r=il(null,r,o,e,i);break e;case 1:r=Ac(null,r,o,e,i);break e;case 11:r=Tc(null,r,o,e,i);break e;case 14:r=Rc(null,r,o,Ht(o.type,e),i);break e}throw Error(s(306,o,""))}return r;case 0:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Ht(o,h),il(e,r,o,h,i);case 1:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Ht(o,h),Ac(e,r,o,h,i);case 3:e:{if(Lc(r),e===null)throw Error(s(387));o=r.pendingProps,p=r.memoizedState,h=p.element,Qd(e,r),Wi(r,o,null,i);var k=r.memoizedState;if(o=k.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=In(Error(s(423)),r),r=$c(e,r,o,i,h);break e}else if(o!==h){h=In(Error(s(424)),r),r=$c(e,r,o,i,h);break e}else for(Ct=Er(r.stateNode.containerInfo.firstChild),Et=r,Me=!0,qt=null,i=Jd(r,null,o,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Cn(),o===h){r=cr(e,r,i);break e}yt(e,r,o,i)}r=r.child}return r;case 5:return Zd(r),e===null&&Lo(r),o=r.type,h=r.pendingProps,p=e!==null?e.memoizedProps:null,k=h.children,No(o,h)?k=null:p!==null&&No(o,p)&&(r.flags|=32),Ic(e,r),yt(e,r,k,i),r.child;case 6:return e===null&&Lo(r),null;case 13:return Uc(e,r,i);case 4:return qo(r,r.stateNode.containerInfo),o=r.pendingProps,e===null?r.child=Tn(r,null,o,i):yt(e,r,o,i),r.child;case 11:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Ht(o,h),Tc(e,r,o,h,i);case 7:return yt(e,r,r.pendingProps,i),r.child;case 8:return yt(e,r,r.pendingProps.children,i),r.child;case 12:return yt(e,r,r.pendingProps.children,i),r.child;case 10:e:{if(o=r.type._context,h=r.pendingProps,p=r.memoizedProps,k=h.value,Ie(zi,o._currentValue),o._currentValue=k,p!==null)if(zt(p.value,k)){if(p.children===h.children&&!vt.current){r=cr(e,r,i);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var _=p.dependencies;if(_!==null){k=p.child;for(var C=_.firstContext;C!==null;){if(C.context===o){if(p.tag===1){C=dr(-1,i&-i),C.tag=2;var D=p.updateQueue;if(D!==null){D=D.shared;var V=D.pending;V===null?C.next=C:(C.next=V.next,V.next=C),D.pending=C}}p.lanes|=i,C=p.alternate,C!==null&&(C.lanes|=i),Fo(p.return,i,r),_.lanes|=i;break}C=C.next}}else if(p.tag===10)k=p.type===r.type?null:p.child;else if(p.tag===18){if(k=p.return,k===null)throw Error(s(341));k.lanes|=i,_=k.alternate,_!==null&&(_.lanes|=i),Fo(k,i,r),k=p.sibling}else k=p.child;if(k!==null)k.return=p;else for(k=p;k!==null;){if(k===r){k=null;break}if(p=k.sibling,p!==null){p.return=k.return,k=p;break}k=k.return}p=k}yt(e,r,h.children,i),r=r.child}return r;case 9:return h=r.type,o=r.pendingProps.children,On(r,i),h=Lt(h),o=o(h),r.flags|=1,yt(e,r,o,i),r.child;case 14:return o=r.type,h=Ht(o,r.pendingProps),h=Ht(o.type,h),Rc(e,r,o,h,i);case 15:return Oc(e,r,r.type,r.pendingProps,i);case 17:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Ht(o,h),ea(e,r),r.tag=1,xt(o)?(e=!0,$i(r)):e=!1,On(r,i),bc(r,o,h),rl(r,o,h,i),al(null,r,o,!0,e,i);case 19:return Mc(e,r,i);case 22:return Pc(e,r,i)}throw Error(s(156,r.tag))};function uh(e,r){return zu(e,r)}function z0(e,r,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,r,i,o){return new z0(e,r,i,o)}function Nl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function q0(e){if(typeof e=="function")return Nl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===M)return 11;if(e===se)return 14}return 2}function Dr(e,r){var i=e.alternate;return i===null?(i=Dt(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function ca(e,r,i,o,h,p){var k=2;if(o=e,typeof e=="function")Nl(e)&&(k=1);else if(typeof e=="string")k=5;else e:switch(e){case Z:return rn(i.children,h,p,r);case P:k=8,h|=8;break;case F:return e=Dt(12,i,r,h|2),e.elementType=F,e.lanes=p,e;case H:return e=Dt(13,i,r,h),e.elementType=H,e.lanes=p,e;case ee:return e=Dt(19,i,r,h),e.elementType=ee,e.lanes=p,e;case T:return ha(i,h,p,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:k=10;break e;case pe:k=9;break e;case M:k=11;break e;case se:k=14;break e;case te:k=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=Dt(k,i,r,h),r.elementType=e,r.type=o,r.lanes=p,r}function rn(e,r,i,o){return e=Dt(7,e,o,r),e.lanes=i,e}function ha(e,r,i,o){return e=Dt(22,e,o,r),e.elementType=T,e.lanes=i,e.stateNode={isHidden:!1},e}function El(e,r,i){return e=Dt(6,e,null,r),e.lanes=i,e}function Cl(e,r,i){return r=Dt(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function H0(e,r,i,o,h){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eo(0),this.expirationTimes=eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eo(0),this.identifierPrefix=o,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Tl(e,r,i,o,h,p,k,_,C){return e=new H0(e,r,i,_,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Dt(3,null,null,r),e.current=p,p.stateNode=e,p.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(p),e}function W0(e,r,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:o==null?null:""+o,children:e,containerInfo:r,implementation:i}}function dh(e){if(!e)return Tr;e=e._reactInternals;e:{if(Hr(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(xt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(xt(i))return Dd(e,i,r)}return r}function ch(e,r,i,o,h,p,k,_,C){return e=Tl(i,o,!0,e,h,p,k,_,C),e.context=dh(null),i=e.current,o=gt(),h=$r(i),p=dr(o,h),p.callback=r??null,Pr(i,p,h),e.current.lanes=h,us(e,h,o),_t(e,o),e}function fa(e,r,i,o){var h=r.current,p=gt(),k=$r(h);return i=dh(i),r.context===null?r.context=i:r.pendingContext=i,r=dr(p,k),r.payload={element:e},o=o===void 0?null:o,o!==null&&(r.callback=o),e=Pr(h,r,k),e!==null&&(Kt(e,h,k,p),Hi(e,h,k)),k}function pa(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function hh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function Rl(e,r){hh(e,r),(e=e.alternate)&&hh(e,r)}function V0(){return null}var fh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ol(e){this._internalRoot=e}ma.prototype.render=Ol.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));fa(e,r,null,null)},ma.prototype.unmount=Ol.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Zr(function(){fa(null,e,null,null)}),r[ir]=null}};function ma(e){this._internalRoot=e}ma.prototype.unstable_scheduleHydration=function(e){if(e){var r=Qu();e={blockedOn:null,target:e,priority:r};for(var i=0;i<Sr.length&&r!==0&&r<Sr[i].priority;i++);Sr.splice(i,0,e),i===0&&Zu(e)}};function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ya(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ph(){}function K0(e,r,i,o,h){if(h){if(typeof o=="function"){var p=o;o=function(){var D=pa(k);p.call(D)}}var k=ch(r,o,e,0,null,!1,!1,"",ph);return e._reactRootContainer=k,e[ir]=k.current,_s(e.nodeType===8?e.parentNode:e),Zr(),k}for(;h=e.lastChild;)e.removeChild(h);if(typeof o=="function"){var _=o;o=function(){var D=pa(C);_.call(D)}}var C=Tl(e,0,!1,null,null,!1,!1,"",ph);return e._reactRootContainer=C,e[ir]=C.current,_s(e.nodeType===8?e.parentNode:e),Zr(function(){fa(r,C,i,o)}),C}function ga(e,r,i,o,h){var p=i._reactRootContainer;if(p){var k=p;if(typeof h=="function"){var _=h;h=function(){var C=pa(k);_.call(C)}}fa(r,k,e,h)}else k=K0(i,r,e,h,o);return pa(k)}Ju=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var i=ls(r.pendingLanes);i!==0&&(to(r,i|1),_t(r,Ge()),(Te&6)===0&&($n=Ge()+500,Rr()))}break;case 13:Zr(function(){var o=ur(e,1);if(o!==null){var h=gt();Kt(o,e,1,h)}}),Rl(e,1)}},ro=function(e){if(e.tag===13){var r=ur(e,134217728);if(r!==null){var i=gt();Kt(r,e,134217728,i)}Rl(e,134217728)}},Gu=function(e){if(e.tag===13){var r=$r(e),i=ur(e,r);if(i!==null){var o=gt();Kt(i,e,r,o)}Rl(e,r)}},Qu=function(){return Pe},Yu=function(e,r){var i=Pe;try{return Pe=e,r()}finally{Pe=i}},Ja=function(e,r,i){switch(r){case"input":if(ct(e,i),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var o=i[r];if(o!==e&&o.form===e.form){var h=Ai(o);if(!h)throw Error(s(90));Ke(o),ct(o,h)}}}break;case"textarea":rs(e,i);break;case"select":r=i.value,r!=null&&xr(e,!!i.multiple,r,!1)}},Lu=_l,$u=Zr;var J0={usingClientEntryPoint:!1,Events:[Ns,_n,Ai,Iu,Au,_l]},Fs={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G0={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fu(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||V0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{mi=ka.inject(G0),Zt=ka}catch{}}return St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J0,St.createPortal=function(e,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pl(r))throw Error(s(200));return W0(e,r,null,i)},St.createRoot=function(e,r){if(!Pl(e))throw Error(s(299));var i=!1,o="",h=fh;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Tl(e,1,!1,null,null,i,!1,o,h),e[ir]=r.current,_s(e.nodeType===8?e.parentNode:e),new Ol(r)},St.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=Fu(r),e=e===null?null:e.stateNode,e},St.flushSync=function(e){return Zr(e)},St.hydrate=function(e,r,i){if(!ya(r))throw Error(s(200));return ga(null,e,r,!0,i)},St.hydrateRoot=function(e,r,i){if(!Pl(e))throw Error(s(405));var o=i!=null&&i.hydratedSources||null,h=!1,p="",k=fh;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(k=i.onRecoverableError)),r=ch(r,null,e,1,i??null,h,!1,p,k),e[ir]=r.current,_s(e),o)for(e=0;e<o.length;e++)i=o[e],h=i._getVersion,h=h(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,h]:r.mutableSourceEagerHydrationData.push(i,h);return new ma(r)},St.render=function(e,r,i){if(!ya(r))throw Error(s(200));return ga(null,e,r,!1,i)},St.unmountComponentAtNode=function(e){if(!ya(e))throw Error(s(40));return e._reactRootContainer?(Zr(function(){ga(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1},St.unstable_batchedUpdates=_l,St.unstable_renderSubtreeIntoContainer=function(e,r,i,o){if(!ya(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return ga(e,r,i,!1,o)},St.version="18.3.1-next-f1338f8080-20240426",St}var bh;function nm(){if(bh)return Ll.exports;bh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ll.exports=rm(),Ll.exports}var _h;function sm(){if(_h)return va;_h=1;var n=nm();return va.createRoot=n.createRoot,va.hydrateRoot=n.hydrateRoot,va}var im=sm();var Sh="popstate";function am(n={}){function t(u,l){let{pathname:c="/",search:f="",hash:m=""}=dn(u.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),su("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(u,l){let c=u.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=u.location.href,y=m.indexOf("#");f=y===-1?m:m.slice(0,y)}return f+"#"+(typeof l=="string"?l:Qs(l))}function a(u,l){Ft(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return lm(t,s,a,n)}function Fe(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Ft(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function om(){return Math.random().toString(36).substring(2,10)}function jh(n,t){return{usr:n.state,key:n.key,idx:t}}function su(n,t,s=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?dn(t):t,state:s,key:t&&t.key||a||om()}}function Qs({pathname:n="/",search:t="",hash:s=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function dn(n){let t={};if(n){let s=n.indexOf("#");s>=0&&(t.hash=n.substring(s),n=n.substring(0,s));let a=n.indexOf("?");a>=0&&(t.search=n.substring(a),n=n.substring(0,a)),n&&(t.pathname=n)}return t}function lm(n,t,s,a={}){let{window:u=document.defaultView,v5Compat:l=!1}=a,c=u.history,f="POP",m=null,y=g();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function g(){return(c.state||{idx:null}).idx}function x(){f="POP";let E=g(),U=E==null?null:E-y;y=E,m&&m({action:f,location:N.location,delta:U})}function w(E,U){f="PUSH";let O=su(N.location,E,U);s&&s(O,E),y=g()+1;let L=jh(O,y),q=N.createHref(O);try{c.pushState(L,"",q)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;u.location.assign(q)}l&&m&&m({action:f,location:N.location,delta:1})}function b(E,U){f="REPLACE";let O=su(N.location,E,U);s&&s(O,E),y=g();let L=jh(O,y),q=N.createHref(O);c.replaceState(L,"",q),l&&m&&m({action:f,location:N.location,delta:0})}function S(E){return um(E)}let N={get action(){return f},get location(){return n(u,c)},listen(E){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(Sh,x),m=E,()=>{u.removeEventListener(Sh,x),m=null}},createHref(E){return t(u,E)},createURL:S,encodeLocation(E){let U=S(E);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:b,go(E){return c.go(E)}};return N}function um(n,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(s,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Qs(n);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function mf(n,t,s="/"){return dm(n,t,s,!1)}function dm(n,t,s,a){let u=typeof t=="string"?dn(t):t,l=yr(u.pathname||"/",s);if(l==null)return null;let c=yf(n);cm(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let y=bm(l);f=xm(c[m],y,a)}return f}function yf(n,t=[],s=[],a="",u=!1){let l=(c,f,m=u,y)=>{let g={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(a)&&m)return;Fe(g.relativePath.startsWith(a),`Absolute route path "${g.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(a.length)}let x=mr([a,g.relativePath]),w=s.concat(g);c.children&&c.children.length>0&&(Fe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),yf(c.children,t,w,x,m)),!(c.path==null&&!c.index)&&t.push({path:x,score:km(x,c.index),routesMeta:w})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of gf(c.path))l(c,f,!0,m)}),t}function gf(n){let t=n.split("/");if(t.length===0)return[];let[s,...a]=t,u=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return u?[l,""]:[l];let c=gf(a.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),u&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function cm(n){n.sort((t,s)=>t.score!==s.score?s.score-t.score:vm(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var hm=/^:[\w-]+$/,fm=3,pm=2,mm=1,ym=10,gm=-2,Nh=n=>n==="*";function km(n,t){let s=n.split("/"),a=s.length;return s.some(Nh)&&(a+=gm),t&&(a+=pm),s.filter(u=>!Nh(u)).reduce((u,l)=>u+(hm.test(l)?fm:l===""?mm:ym),a)}function vm(n,t){return n.length===t.length&&n.slice(0,-1).every((a,u)=>a===t[u])?n[n.length-1]-t[t.length-1]:0}function xm(n,t,s=!1){let{routesMeta:a}=n,u={},l="/",c=[];for(let f=0;f<a.length;++f){let m=a[f],y=f===a.length-1,g=l==="/"?t:t.slice(l.length)||"/",x=Aa({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},g),w=m.route;if(!x&&y&&s&&!a[a.length-1].route.index&&(x=Aa({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},g)),!x)return null;Object.assign(u,x.params),c.push({params:u,pathname:mr([l,x.pathname]),pathnameBase:Nm(mr([l,x.pathnameBase])),route:w}),x.pathnameBase!=="/"&&(l=mr([l,x.pathnameBase]))}return c}function Aa(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,a]=wm(n.path,n.caseSensitive,n.end),u=t.match(s);if(!u)return null;let l=u[0],c=l.replace(/(.)\/+$/,"$1"),f=u.slice(1);return{params:a.reduce((y,{paramName:g,isOptional:x},w)=>{if(g==="*"){let S=f[w]||"";c=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const b=f[w];return x&&!b?y[g]=void 0:y[g]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function wm(n,t=!1,s=!0){Ft(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),a]}function bm(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ft(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function yr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=n.charAt(s);return a&&a!=="/"?null:n.slice(s)||"/"}var _m=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Sm(n,t="/"){let{pathname:s,search:a="",hash:u=""}=typeof n=="string"?dn(n):n,l;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?l=Eh(s.substring(1),"/"):l=Eh(s,t)):l=t,{pathname:l,search:Em(a),hash:Cm(u)}}function Eh(n,t){let s=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function Dl(n,t,s,a){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jm(n){return n.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function wu(n){let t=jm(n);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function bu(n,t,s,a=!1){let u;typeof n=="string"?u=dn(n):(u={...n},Fe(!u.pathname||!u.pathname.includes("?"),Dl("?","pathname","search",u)),Fe(!u.pathname||!u.pathname.includes("#"),Dl("#","pathname","hash",u)),Fe(!u.search||!u.search.includes("#"),Dl("#","search","hash",u)));let l=n===""||u.pathname==="",c=l?"/":u.pathname,f;if(c==null)f=s;else{let x=t.length-1;if(!a&&c.startsWith("..")){let w=c.split("/");for(;w[0]==="..";)w.shift(),x-=1;u.pathname=w.join("/")}f=x>=0?t[x]:"/"}let m=Sm(u,f),y=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(y||g)&&(m.pathname+="/"),m}var mr=n=>n.join("/").replace(/\/\/+/g,"/"),Nm=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Em=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Cm=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Tm=class{constructor(n,t,s,a=!1){this.status=n,this.statusText=t||"",this.internal=a,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Rm(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Om(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vf(n,t){let s=n;if(typeof s!="string"||!_m.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let a=s,u=!1;if(kf)try{let l=new URL(window.location.href),c=s.startsWith("//")?new URL(l.protocol+s):new URL(s),f=yr(c.pathname,t);c.origin===l.origin&&f!=null?s=f+c.search+c.hash:u=!0}catch{Ft(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:u,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var xf=["POST","PUT","PATCH","DELETE"];new Set(xf);var Pm=["GET",...xf];new Set(Pm);var Zn=v.createContext(null);Zn.displayName="DataRouter";var Fa=v.createContext(null);Fa.displayName="DataRouterState";var Im=v.createContext(!1),wf=v.createContext({isTransitioning:!1});wf.displayName="ViewTransition";var Am=v.createContext(new Map);Am.displayName="Fetchers";var Lm=v.createContext(null);Lm.displayName="Await";var Pt=v.createContext(null);Pt.displayName="Navigation";var si=v.createContext(null);si.displayName="Location";var Xt=v.createContext({outlet:null,matches:[],isDataRoute:!1});Xt.displayName="Route";var _u=v.createContext(null);_u.displayName="RouteError";var bf="REACT_ROUTER_ERROR",$m="REDIRECT",Um="ROUTE_ERROR_RESPONSE";function Dm(n){if(n.startsWith(`${bf}:${$m}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Mm(n){if(n.startsWith(`${bf}:${Um}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Tm(t.status,t.statusText,t.data)}catch{}}function Fm(n,{relative:t}={}){Fe(es(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=v.useContext(Pt),{hash:u,pathname:l,search:c}=ai(n,{relative:t}),f=l;return s!=="/"&&(f=l==="/"?s:mr([s,l])),a.createHref({pathname:f,search:c,hash:u})}function es(){return v.useContext(si)!=null}function gr(){return Fe(es(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(si).location}var _f="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sf(n){v.useContext(Pt).static||v.useLayoutEffect(n)}function ii(){let{isDataRoute:n}=v.useContext(Xt);return n?Zm():Bm()}function Bm(){Fe(es(),"useNavigate() may be used only in the context of a <Router> component.");let n=v.useContext(Zn),{basename:t,navigator:s}=v.useContext(Pt),{matches:a}=v.useContext(Xt),{pathname:u}=gr(),l=JSON.stringify(wu(a)),c=v.useRef(!1);return Sf(()=>{c.current=!0}),v.useCallback((m,y={})=>{if(Ft(c.current,_f),!c.current)return;if(typeof m=="number"){s.go(m);return}let g=bu(m,JSON.parse(l),u,y.relative==="path");n==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:mr([t,g.pathname])),(y.replace?s.replace:s.push)(g,y.state,y)},[t,s,l,u,n])}v.createContext(null);function jf(){let{matches:n}=v.useContext(Xt),t=n[n.length-1];return t?t.params:{}}function ai(n,{relative:t}={}){let{matches:s}=v.useContext(Xt),{pathname:a}=gr(),u=JSON.stringify(wu(s));return v.useMemo(()=>bu(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function zm(n,t){return Nf(n,t)}function Nf(n,t,s,a,u){Fe(es(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=v.useContext(Pt),{matches:c}=v.useContext(Xt),f=c[c.length-1],m=f?f.params:{},y=f?f.pathname:"/",g=f?f.pathnameBase:"/",x=f&&f.route;{let O=x&&x.path||"";Cf(y,!x||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let w=gr(),b;if(t){let O=typeof t=="string"?dn(t):t;Fe(g==="/"||O.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${O.pathname}" was given in the \`location\` prop.`),b=O}else b=w;let S=b.pathname||"/",N=S;if(g!=="/"){let O=g.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let E=mf(n,{pathname:N});Ft(x||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ft(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Km(E&&E.map(O=>Object.assign({},O,{params:Object.assign({},m,O.params),pathname:mr([g,l.encodeLocation?l.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:mr([g,l.encodeLocation?l.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,s,a,u);return t&&U?v.createElement(si.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},U):U}function qm(){let n=Xm(),t=Rm(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),s?v.createElement("pre",{style:u},s):null,c)}var Hm=v.createElement(qm,null),Ef=class extends v.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const s=Mm(n.digest);s&&(n=s)}let t=n!==void 0?v.createElement(Xt.Provider,{value:this.props.routeContext},v.createElement(_u.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?v.createElement(Wm,{error:n},t):t}};Ef.contextType=Im;var Ml=new WeakMap;function Wm({children:n,error:t}){let{basename:s}=v.useContext(Pt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=Dm(t.digest);if(a){let u=Ml.get(t);if(u)throw u;let l=vf(a.location,s);if(kf&&!Ml.get(t))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Ml.set(t,c),c}return v.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function Vm({routeContext:n,match:t,children:s}){let a=v.useContext(Zn);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Xt.Provider,{value:n},s)}function Km(n,t=[],s=null,a=null,u=null){if(n==null){if(!s)return null;if(s.errors)n=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let l=n,c=s?.errors;if(c!=null){let g=l.findIndex(x=>x.route.id&&c?.[x.route.id]!==void 0);Fe(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,m=-1;if(s)for(let g=0;g<l.length;g++){let x=l[g];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(m=g),x.route.id){let{loaderData:w,errors:b}=s,S=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!b||b[x.route.id]===void 0);if(x.route.lazy||S){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let y=s&&a?(g,x)=>{a(g,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:Om(s.matches),errorInfo:x})}:void 0;return l.reduceRight((g,x,w)=>{let b,S=!1,N=null,E=null;s&&(b=c&&x.route.id?c[x.route.id]:void 0,N=x.route.errorElement||Hm,f&&(m<0&&w===0?(Cf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):m===w&&(S=!0,E=x.route.hydrateFallbackElement||null)));let U=t.concat(l.slice(0,w+1)),O=()=>{let L;return b?L=N:S?L=E:x.route.Component?L=v.createElement(x.route.Component,null):x.route.element?L=x.route.element:L=g,v.createElement(Vm,{match:x,routeContext:{outlet:g,matches:U,isDataRoute:s!=null},children:L})};return s&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?v.createElement(Ef,{location:s.location,revalidation:s.revalidation,component:N,error:b,children:O(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:y}):O()},null)}function Su(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jm(n){let t=v.useContext(Zn);return Fe(t,Su(n)),t}function Gm(n){let t=v.useContext(Fa);return Fe(t,Su(n)),t}function Qm(n){let t=v.useContext(Xt);return Fe(t,Su(n)),t}function ju(n){let t=Qm(n),s=t.matches[t.matches.length-1];return Fe(s.route.id,`${n} can only be used on routes that contain a unique "id"`),s.route.id}function Ym(){return ju("useRouteId")}function Xm(){let n=v.useContext(_u),t=Gm("useRouteError"),s=ju("useRouteError");return n!==void 0?n:t.errors?.[s]}function Zm(){let{router:n}=Jm("useNavigate"),t=ju("useNavigate"),s=v.useRef(!1);return Sf(()=>{s.current=!0}),v.useCallback(async(u,l={})=>{Ft(s.current,_f),s.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:t,...l}))},[n,t])}var Ch={};function Cf(n,t,s){!t&&!Ch[n]&&(Ch[n]=!0,Ft(!1,s))}v.memo(ey);function ey({routes:n,future:t,state:s,onError:a}){return Nf(n,void 0,s,a,t)}function ty({to:n,replace:t,state:s,relative:a}){Fe(es(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=v.useContext(Pt);Ft(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=v.useContext(Xt),{pathname:c}=gr(),f=ii(),m=bu(n,wu(l),c,a==="path"),y=JSON.stringify(m);return v.useEffect(()=>{f(JSON.parse(y),{replace:t,state:s,relative:a})},[f,y,a,t,s]),null}function kt(n){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ry({basename:n="/",children:t=null,location:s,navigationType:a="POP",navigator:u,static:l=!1,unstable_useTransitions:c}){Fe(!es(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=v.useMemo(()=>({basename:f,navigator:u,static:l,unstable_useTransitions:c,future:{}}),[f,u,l,c]);typeof s=="string"&&(s=dn(s));let{pathname:y="/",search:g="",hash:x="",state:w=null,key:b="default"}=s,S=v.useMemo(()=>{let N=yr(y,f);return N==null?null:{location:{pathname:N,search:g,hash:x,state:w,key:b},navigationType:a}},[f,y,g,x,w,b,a]);return Ft(S!=null,`<Router basename="${f}"> is not able to match the URL "${y}${g}${x}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:v.createElement(Pt.Provider,{value:m},v.createElement(si.Provider,{children:t,value:S}))}function ny({children:n,location:t}){return zm(iu(n),t)}function iu(n,t=[]){let s=[];return v.Children.forEach(n,(a,u)=>{if(!v.isValidElement(a))return;let l=[...t,u];if(a.type===v.Fragment){s.push.apply(s,iu(a.props.children,l));return}Fe(a.type===kt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!a.props.index||!a.props.children,"An index route cannot have child routes.");let c={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(c.children=iu(a.props.children,l)),s.push(c)}),s}var Oa="get",Pa="application/x-www-form-urlencoded";function Ba(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function sy(n){return Ba(n)&&n.tagName.toLowerCase()==="button"}function iy(n){return Ba(n)&&n.tagName.toLowerCase()==="form"}function ay(n){return Ba(n)&&n.tagName.toLowerCase()==="input"}function oy(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ly(n,t){return n.button===0&&(!t||t==="_self")&&!oy(n)}var xa=null;function uy(){if(xa===null)try{new FormData(document.createElement("form"),0),xa=!1}catch{xa=!0}return xa}var dy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fl(n){return n!=null&&!dy.has(n)?(Ft(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pa}"`),null):n}function cy(n,t){let s,a,u,l,c;if(iy(n)){let f=n.getAttribute("action");a=f?yr(f,t):null,s=n.getAttribute("method")||Oa,u=Fl(n.getAttribute("enctype"))||Pa,l=new FormData(n)}else if(sy(n)||ay(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(a=m?yr(m,t):null,s=n.getAttribute("formmethod")||f.getAttribute("method")||Oa,u=Fl(n.getAttribute("formenctype"))||Fl(f.getAttribute("enctype"))||Pa,l=new FormData(f,n),!uy()){let{name:y,type:g,value:x}=n;if(g==="image"){let w=y?`${y}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else y&&l.append(y,x)}}else{if(Ba(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Oa,a=null,u=Pa,c=n}return l&&u==="text/plain"&&(c=l,l=void 0),{action:a,method:s.toLowerCase(),encType:u,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nu(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function hy(n,t,s,a){let u=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${a}`:u.pathname=`${u.pathname}.${a}`:u.pathname==="/"?u.pathname=`_root.${a}`:t&&yr(u.pathname,t)==="/"?u.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${a}`,u}async function fy(n,t){if(n.id in t)return t[n.id];try{let s=await import(n.module);return t[n.id]=s,s}catch(s){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function py(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function my(n,t,s){let a=await Promise.all(n.map(async u=>{let l=t.routes[u.route.id];if(l){let c=await fy(l,s);return c.links?c.links():[]}return[]}));return vy(a.flat(1).filter(py).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Th(n,t,s,a,u,l){let c=(m,y)=>s[y]?m.route.id!==s[y].route.id:!0,f=(m,y)=>s[y].pathname!==m.pathname||s[y].route.path?.endsWith("*")&&s[y].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,y)=>c(m,y)||f(m,y)):l==="data"?t.filter((m,y)=>{let g=a.routes[m.route.id];if(!g||!g.hasLoader)return!1;if(c(m,y)||f(m,y))return!0;if(m.route.shouldRevalidate){let x=m.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function yy(n,t,{includeHydrateFallback:s}={}){return gy(n.map(a=>{let u=t.routes[a.route.id];if(!u)return[];let l=[u.module];return u.clientActionModule&&(l=l.concat(u.clientActionModule)),u.clientLoaderModule&&(l=l.concat(u.clientLoaderModule)),s&&u.hydrateFallbackModule&&(l=l.concat(u.hydrateFallbackModule)),u.imports&&(l=l.concat(u.imports)),l}).flat(1))}function gy(n){return[...new Set(n)]}function ky(n){let t={},s=Object.keys(n).sort();for(let a of s)t[a]=n[a];return t}function vy(n,t){let s=new Set;return new Set(t),n.reduce((a,u)=>{let l=JSON.stringify(ky(u));return s.has(l)||(s.add(l),a.push({key:l,link:u})),a},[])}function Tf(){let n=v.useContext(Zn);return Nu(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function xy(){let n=v.useContext(Fa);return Nu(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Eu=v.createContext(void 0);Eu.displayName="FrameworkContext";function Rf(){let n=v.useContext(Eu);return Nu(n,"You must render this element inside a <HydratedRouter> element"),n}function wy(n,t){let s=v.useContext(Eu),[a,u]=v.useState(!1),[l,c]=v.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:y,onMouseLeave:g,onTouchStart:x}=t,w=v.useRef(null);v.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let N=U=>{U.forEach(O=>{c(O.isIntersecting)})},E=new IntersectionObserver(N,{threshold:.5});return w.current&&E.observe(w.current),()=>{E.disconnect()}}},[n]),v.useEffect(()=>{if(a){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[a]);let b=()=>{u(!0)},S=()=>{u(!1),c(!1)};return s?n!=="intent"?[l,w,{}]:[l,w,{onFocus:zs(f,b),onBlur:zs(m,S),onMouseEnter:zs(y,b),onMouseLeave:zs(g,S),onTouchStart:zs(x,b)}]:[!1,w,{}]}function zs(n,t){return s=>{n&&n(s),s.defaultPrevented||t(s)}}function by({page:n,...t}){let{router:s}=Tf(),a=v.useMemo(()=>mf(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?v.createElement(Sy,{page:n,matches:a,...t}):null}function _y(n){let{manifest:t,routeModules:s}=Rf(),[a,u]=v.useState([]);return v.useEffect(()=>{let l=!1;return my(n,t,s).then(c=>{l||u(c)}),()=>{l=!0}},[n,t,s]),a}function Sy({page:n,matches:t,...s}){let a=gr(),{future:u,manifest:l,routeModules:c}=Rf(),{basename:f}=Tf(),{loaderData:m,matches:y}=xy(),g=v.useMemo(()=>Th(n,t,y,l,a,"data"),[n,t,y,l,a]),x=v.useMemo(()=>Th(n,t,y,l,a,"assets"),[n,t,y,l,a]),w=v.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let N=new Set,E=!1;if(t.forEach(O=>{let L=l.routes[O.route.id];!L||!L.hasLoader||(!g.some(q=>q.route.id===O.route.id)&&O.route.id in m&&c[O.route.id]?.shouldRevalidate||L.hasClientLoader?E=!0:N.add(O.route.id))}),N.size===0)return[];let U=hy(n,f,u.unstable_trailingSlashAwareDataRequests,"data");return E&&N.size>0&&U.searchParams.set("_routes",t.filter(O=>N.has(O.route.id)).map(O=>O.route.id).join(",")),[U.pathname+U.search]},[f,u.unstable_trailingSlashAwareDataRequests,m,a,l,g,t,n,c]),b=v.useMemo(()=>yy(x,l),[x,l]),S=_y(x);return v.createElement(v.Fragment,null,w.map(N=>v.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...s})),b.map(N=>v.createElement("link",{key:N,rel:"modulepreload",href:N,...s})),S.map(({key:N,link:E})=>v.createElement("link",{key:N,nonce:s.nonce,...E,crossOrigin:E.crossOrigin??s.crossOrigin})))}function jy(...n){return t=>{n.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Ny=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ny&&(window.__reactRouterVersion="7.13.0")}catch{}function Ey({basename:n,children:t,unstable_useTransitions:s,window:a}){let u=v.useRef();u.current==null&&(u.current=am({window:a,v5Compat:!0}));let l=u.current,[c,f]=v.useState({action:l.action,location:l.location}),m=v.useCallback(y=>{s===!1?f(y):v.startTransition(()=>f(y))},[s]);return v.useLayoutEffect(()=>l.listen(m),[l,m]),v.createElement(ry,{basename:n,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:s})}var Of=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=v.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:u,reloadDocument:l,replace:c,state:f,target:m,to:y,preventScrollReset:g,viewTransition:x,unstable_defaultShouldRevalidate:w,...b},S){let{basename:N,unstable_useTransitions:E}=v.useContext(Pt),U=typeof y=="string"&&Of.test(y),O=vf(y,N);y=O.to;let L=Fm(y,{relative:u}),[q,re,X]=wy(a,b),Z=Oy(y,{replace:c,state:f,target:m,preventScrollReset:g,relative:u,viewTransition:x,unstable_defaultShouldRevalidate:w,unstable_useTransitions:E});function P(K){t&&t(K),K.defaultPrevented||Z(K)}let F=v.createElement("a",{...b,...X,href:O.absoluteURL||L,onClick:O.isExternal||l?t:P,ref:jy(S,re),target:m,"data-discover":!U&&s==="render"?"true":void 0});return q&&!U?v.createElement(v.Fragment,null,F,v.createElement(by,{page:L})):F});Se.displayName="Link";var Cy=v.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:u=!1,style:l,to:c,viewTransition:f,children:m,...y},g){let x=ai(c,{relative:y.relative}),w=gr(),b=v.useContext(Fa),{navigator:S,basename:N}=v.useContext(Pt),E=b!=null&&$y(x)&&f===!0,U=S.encodeLocation?S.encodeLocation(x).pathname:x.pathname,O=w.pathname,L=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(O=O.toLowerCase(),L=L?L.toLowerCase():null,U=U.toLowerCase()),L&&N&&(L=yr(L,N)||L);const q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let re=O===U||!u&&O.startsWith(U)&&O.charAt(q)==="/",X=L!=null&&(L===U||!u&&L.startsWith(U)&&L.charAt(U.length)==="/"),Z={isActive:re,isPending:X,isTransitioning:E},P=re?t:void 0,F;typeof a=="function"?F=a(Z):F=[a,re?"active":null,X?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(Z):l;return v.createElement(Se,{...y,"aria-current":P,className:F,ref:g,style:K,to:c,viewTransition:f},typeof m=="function"?m(Z):m)});Cy.displayName="NavLink";var Ty=v.forwardRef(({discover:n="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:u,state:l,method:c=Oa,action:f,onSubmit:m,relative:y,preventScrollReset:g,viewTransition:x,unstable_defaultShouldRevalidate:w,...b},S)=>{let{unstable_useTransitions:N}=v.useContext(Pt),E=Ay(),U=Ly(f,{relative:y}),O=c.toLowerCase()==="get"?"get":"post",L=typeof f=="string"&&Of.test(f),q=re=>{if(m&&m(re),re.defaultPrevented)return;re.preventDefault();let X=re.nativeEvent.submitter,Z=X?.getAttribute("formmethod")||c,P=()=>E(X||re.currentTarget,{fetcherKey:t,method:Z,navigate:s,replace:u,state:l,relative:y,preventScrollReset:g,viewTransition:x,unstable_defaultShouldRevalidate:w});N&&s!==!1?v.startTransition(()=>P()):P()};return v.createElement("form",{ref:S,method:O,action:U,onSubmit:a?m:q,...b,"data-discover":!L&&n==="render"?"true":void 0})});Ty.displayName="Form";function Ry(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pf(n){let t=v.useContext(Zn);return Fe(t,Ry(n)),t}function Oy(n,{target:t,replace:s,state:a,preventScrollReset:u,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let y=ii(),g=gr(),x=ai(n,{relative:l});return v.useCallback(w=>{if(ly(w,t)){w.preventDefault();let b=s!==void 0?s:Qs(g)===Qs(x),S=()=>y(n,{replace:b,state:a,preventScrollReset:u,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:f});m?v.startTransition(()=>S()):S()}},[g,y,x,s,a,t,n,u,l,c,f,m])}var Py=0,Iy=()=>`__${String(++Py)}__`;function Ay(){let{router:n}=Pf("useSubmit"),{basename:t}=v.useContext(Pt),s=Ym(),a=n.fetch,u=n.navigate;return v.useCallback(async(l,c={})=>{let{action:f,method:m,encType:y,formData:g,body:x}=cy(l,t);if(c.navigate===!1){let w=c.fetcherKey||Iy();await a(w,s,c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:x,formMethod:c.method||m,formEncType:c.encType||y,flushSync:c.flushSync})}else await u(c.action||f,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:x,formMethod:c.method||m,formEncType:c.encType||y,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,u,t,s])}function Ly(n,{relative:t}={}){let{basename:s}=v.useContext(Pt),a=v.useContext(Xt);Fe(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),l={...ai(n||".",{relative:t})},c=gr();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(g=>g==="")){f.delete("index"),m.filter(x=>x).forEach(x=>f.append("index",x));let g=f.toString();l.search=g?`?${g}`:""}}return(!n||n===".")&&u.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:mr([s,l.pathname])),Qs(l)}function $y(n,{relative:t}={}){let s=v.useContext(wf);Fe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Pf("useViewTransitionState"),u=ai(n,{relative:t});if(!s.isTransitioning)return!1;let l=yr(s.currentLocation.pathname,a)||s.currentLocation.pathname,c=yr(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Aa(u.pathname,c)!=null||Aa(u.pathname,l)!=null}var Bl,Rh;function Uy(){if(Rh)return Bl;Rh=1;var n=typeof Element<"u",t=typeof Map=="function",s=typeof Set=="function",a=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function u(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var f,m,y;if(Array.isArray(l)){if(f=l.length,f!=c.length)return!1;for(m=f;m--!==0;)if(!u(l[m],c[m]))return!1;return!0}var g;if(t&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(g=l.entries();!(m=g.next()).done;)if(!c.has(m.value[0]))return!1;for(g=l.entries();!(m=g.next()).done;)if(!u(m.value[1],c.get(m.value[0])))return!1;return!0}if(s&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(g=l.entries();!(m=g.next()).done;)if(!c.has(m.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(f=l.length,f!=c.length)return!1;for(m=f;m--!==0;)if(l[m]!==c[m])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(y=Object.keys(l),f=y.length,f!==Object.keys(c).length)return!1;for(m=f;m--!==0;)if(!Object.prototype.hasOwnProperty.call(c,y[m]))return!1;if(n&&l instanceof Element)return!1;for(m=f;m--!==0;)if(!((y[m]==="_owner"||y[m]==="__v"||y[m]==="__o")&&l.$$typeof)&&!u(l[y[m]],c[y[m]]))return!1;return!0}return l!==l&&c!==c}return Bl=function(c,f){try{return u(c,f)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Bl}var Dy=Uy();const My=Ma(Dy);var zl,Oh;function Fy(){if(Oh)return zl;Oh=1;var n=function(t,s,a,u,l,c,f,m){if(!t){var y;if(s===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[a,u,l,c,f,m],x=0;y=new Error(s.replace(/%s/g,function(){return g[x++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return zl=n,zl}var By=Fy();const Ph=Ma(By);var ql,Ih;function zy(){return Ih||(Ih=1,ql=function(t,s,a,u){var l=a?a.call(u,t,s):void 0;if(l!==void 0)return!!l;if(t===s)return!0;if(typeof t!="object"||!t||typeof s!="object"||!s)return!1;var c=Object.keys(t),f=Object.keys(s);if(c.length!==f.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(s),y=0;y<c.length;y++){var g=c[y];if(!m(g))return!1;var x=t[g],w=s[g];if(l=a?a.call(u,x,w,g):void 0,l===!1||l===void 0&&x!==w)return!1}return!0}),ql}var qy=zy();const Hy=Ma(qy);var If=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(If||{}),Hl={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Ah=Object.values(If),Cu={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Wy=Object.entries(Cu).reduce((n,[t,s])=>(n[s]=t,n),{}),Yt="data-rh",Qn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Yn=(n,t)=>{for(let s=n.length-1;s>=0;s-=1){const a=n[s];if(Object.prototype.hasOwnProperty.call(a,t))return a[t]}return null},Vy=n=>{let t=Yn(n,"title");const s=Yn(n,Qn.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),s&&t)return s.replace(/%s/g,()=>t);const a=Yn(n,Qn.DEFAULT_TITLE);return t||a||void 0},Ky=n=>Yn(n,Qn.ON_CHANGE_CLIENT_STATE)||(()=>{}),Wl=(n,t)=>t.filter(s=>typeof s[n]<"u").map(s=>s[n]).reduce((s,a)=>({...s,...a}),{}),Jy=(n,t)=>t.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,a)=>{if(!s.length){const u=Object.keys(a);for(let l=0;l<u.length;l+=1){const f=u[l].toLowerCase();if(n.indexOf(f)!==-1&&a[f])return s.concat(a)}}return s},[]),Gy=n=>console&&typeof console.warn=="function"&&console.warn(n),qs=(n,t,s)=>{const a={};return s.filter(u=>Array.isArray(u[n])?!0:(typeof u[n]<"u"&&Gy(`Helmet: ${n} should be of type "Array". Instead found type "${typeof u[n]}"`),!1)).map(u=>u[n]).reverse().reduce((u,l)=>{const c={};l.filter(m=>{let y;const g=Object.keys(m);for(let w=0;w<g.length;w+=1){const b=g[w],S=b.toLowerCase();t.indexOf(S)!==-1&&!(y==="rel"&&m[y].toLowerCase()==="canonical")&&!(S==="rel"&&m[S].toLowerCase()==="stylesheet")&&(y=S),t.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(y=b)}if(!y||!m[y])return!1;const x=m[y].toLowerCase();return a[y]||(a[y]={}),c[y]||(c[y]={}),a[y][x]?!1:(c[y][x]=!0,!0)}).reverse().forEach(m=>u.push(m));const f=Object.keys(c);for(let m=0;m<f.length;m+=1){const y=f[m],g={...a[y],...c[y]};a[y]=g}return u},[]).reverse()},Qy=(n,t)=>{if(Array.isArray(n)&&n.length){for(let s=0;s<n.length;s+=1)if(n[s][t])return!0}return!1},Yy=n=>({baseTag:Jy(["href"],n),bodyAttributes:Wl("bodyAttributes",n),defer:Yn(n,Qn.DEFER),encode:Yn(n,Qn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Wl("htmlAttributes",n),linkTags:qs("link",["rel","href"],n),metaTags:qs("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:qs("noscript",["innerHTML"],n),onChangeClientState:Ky(n),scriptTags:qs("script",["src","innerHTML"],n),styleTags:qs("style",["cssText"],n),title:Vy(n),titleAttributes:Wl("titleAttributes",n),prioritizeSeoTags:Qy(n,Qn.PRIORITIZE_SEO_TAGS)}),Af=n=>Array.isArray(n)?n.join(""):n,Xy=(n,t)=>{const s=Object.keys(n);for(let a=0;a<s.length;a+=1)if(t[s[a]]&&t[s[a]].includes(n[s[a]]))return!0;return!1},Vl=(n,t)=>Array.isArray(n)?n.reduce((s,a)=>(Xy(a,t)?s.priority.push(a):s.default.push(a),s),{priority:[],default:[]}):{default:n,priority:[]},Lh=(n,t)=>({...n,[t]:void 0}),Zy=["noscript","script","style"],au=(n,t=!0)=>t===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Lf=n=>Object.keys(n).reduce((t,s)=>{const a=typeof n[s]<"u"?`${s}="${n[s]}"`:`${s}`;return t?`${t} ${a}`:a},""),eg=(n,t,s,a)=>{const u=Lf(s),l=Af(t);return u?`<${n} ${Yt}="true" ${u}>${au(l,a)}</${n}>`:`<${n} ${Yt}="true">${au(l,a)}</${n}>`},tg=(n,t,s=!0)=>t.reduce((a,u)=>{const l=u,c=Object.keys(l).filter(y=>!(y==="innerHTML"||y==="cssText")).reduce((y,g)=>{const x=typeof l[g]>"u"?g:`${g}="${au(l[g],s)}"`;return y?`${y} ${x}`:x},""),f=l.innerHTML||l.cssText||"",m=Zy.indexOf(n)===-1;return`${a}<${n} ${Yt}="true" ${c}${m?"/>":`>${f}</${n}>`}`},""),$f=(n,t={})=>Object.keys(n).reduce((s,a)=>{const u=Cu[a];return s[u||a]=n[a],s},t),rg=(n,t,s)=>{const a={key:t,[Yt]:!0},u=$f(s,a);return[zr.createElement("title",u,t)]},Ia=(n,t)=>t.map((s,a)=>{const u={key:a,[Yt]:!0};return Object.keys(s).forEach(l=>{const f=Cu[l]||l;if(f==="innerHTML"||f==="cssText"){const m=s.innerHTML||s.cssText;u.dangerouslySetInnerHTML={__html:m}}else u[f]=s[l]}),zr.createElement(n,u)}),Mt=(n,t,s=!0)=>{switch(n){case"title":return{toComponent:()=>rg(n,t.title,t.titleAttributes),toString:()=>eg(n,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>$f(t),toString:()=>Lf(t)};default:return{toComponent:()=>Ia(n,t),toString:()=>tg(n,t,s)}}},ng=({metaTags:n,linkTags:t,scriptTags:s,encode:a})=>{const u=Vl(n,Hl.meta),l=Vl(t,Hl.link),c=Vl(s,Hl.script);return{priorityMethods:{toComponent:()=>[...Ia("meta",u.priority),...Ia("link",l.priority),...Ia("script",c.priority)],toString:()=>`${Mt("meta",u.priority,a)} ${Mt("link",l.priority,a)} ${Mt("script",c.priority,a)}`},metaTags:u.default,linkTags:l.default,scriptTags:c.default}},sg=n=>{const{baseTag:t,bodyAttributes:s,encode:a=!0,htmlAttributes:u,noscriptTags:l,styleTags:c,title:f="",titleAttributes:m,prioritizeSeoTags:y}=n;let{linkTags:g,metaTags:x,scriptTags:w}=n,b={toComponent:()=>{},toString:()=>""};return y&&({priorityMethods:b,linkTags:g,metaTags:x,scriptTags:w}=ng(n)),{priority:b,base:Mt("base",t,a),bodyAttributes:Mt("bodyAttributes",s,a),htmlAttributes:Mt("htmlAttributes",u,a),link:Mt("link",g,a),meta:Mt("meta",x,a),noscript:Mt("noscript",l,a),script:Mt("script",w,a),style:Mt("style",c,a),title:Mt("title",{title:f,titleAttributes:m},a)}},ou=sg,wa=[],Uf=!!(typeof window<"u"&&window.document&&window.document.createElement),lu=class{instances=[];canUseDOM=Uf;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?wa:this.instances,add:n=>{(this.canUseDOM?wa:this.instances).push(n)},remove:n=>{const t=(this.canUseDOM?wa:this.instances).indexOf(n);(this.canUseDOM?wa:this.instances).splice(t,1)}}};constructor(n,t){this.context=n,this.canUseDOM=t||!1,t||(n.helmet=ou({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ig={},Df=zr.createContext(ig),Mf=class Ff extends v.Component{static canUseDOM=Uf;helmetData;constructor(t){super(t),this.helmetData=new lu(this.props.context||{},Ff.canUseDOM)}render(){return zr.createElement(Df.Provider,{value:this.helmetData.value},this.props.children)}},Dn=(n,t)=>{const s=document.head||document.querySelector("head"),a=s.querySelectorAll(`${n}[${Yt}]`),u=[].slice.call(a),l=[];let c;return t&&t.length&&t.forEach(f=>{const m=document.createElement(n);for(const y in f)if(Object.prototype.hasOwnProperty.call(f,y))if(y==="innerHTML")m.innerHTML=f.innerHTML;else if(y==="cssText")m.styleSheet?m.styleSheet.cssText=f.cssText:m.appendChild(document.createTextNode(f.cssText));else{const g=y,x=typeof f[g]>"u"?"":f[g];m.setAttribute(y,x)}m.setAttribute(Yt,"true"),u.some((y,g)=>(c=g,m.isEqualNode(y)))?u.splice(c,1):l.push(m)}),u.forEach(f=>f.parentNode?.removeChild(f)),l.forEach(f=>s.appendChild(f)),{oldTags:u,newTags:l}},uu=(n,t)=>{const s=document.getElementsByTagName(n)[0];if(!s)return;const a=s.getAttribute(Yt),u=a?a.split(","):[],l=[...u],c=Object.keys(t);for(const f of c){const m=t[f]||"";s.getAttribute(f)!==m&&s.setAttribute(f,m),u.indexOf(f)===-1&&u.push(f);const y=l.indexOf(f);y!==-1&&l.splice(y,1)}for(let f=l.length-1;f>=0;f-=1)s.removeAttribute(l[f]);u.length===l.length?s.removeAttribute(Yt):s.getAttribute(Yt)!==c.join(",")&&s.setAttribute(Yt,c.join(","))},ag=(n,t)=>{typeof n<"u"&&document.title!==n&&(document.title=Af(n)),uu("title",t)},$h=(n,t)=>{const{baseTag:s,bodyAttributes:a,htmlAttributes:u,linkTags:l,metaTags:c,noscriptTags:f,onChangeClientState:m,scriptTags:y,styleTags:g,title:x,titleAttributes:w}=n;uu("body",a),uu("html",u),ag(x,w);const b={baseTag:Dn("base",s),linkTags:Dn("link",l),metaTags:Dn("meta",c),noscriptTags:Dn("noscript",f),scriptTags:Dn("script",y),styleTags:Dn("style",g)},S={},N={};Object.keys(b).forEach(E=>{const{newTags:U,oldTags:O}=b[E];U.length&&(S[E]=U),O.length&&(N[E]=b[E].oldTags)}),t&&t(),m(n,S,N)},Hs=null,og=n=>{Hs&&cancelAnimationFrame(Hs),n.defer?Hs=requestAnimationFrame(()=>{$h(n,()=>{Hs=null})}):($h(n),Hs=null)},lg=og,Uh=class extends v.Component{rendered=!1;shouldComponentUpdate(n){return!Hy(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:t}=this.props.context;let s=null;const a=Yy(n.get().map(u=>{const l={...u.props};return delete l.context,l}));Mf.canUseDOM?lg(a):ou&&(s=ou(a)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},jt=class extends v.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!My(Lh(this.props,"helmetData"),Lh(n,"helmetData"))}mapNestedChildrenToProps(n,t){if(!t)return null;switch(n.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,t,s,a){return{...t,[n.type]:[...t[n.type]||[],{...s,...this.mapNestedChildrenToProps(n,a)}]}}mapObjectTypeChildren(n,t,s,a){switch(n.type){case"title":return{...t,[n.type]:a,titleAttributes:{...s}};case"body":return{...t,bodyAttributes:{...s}};case"html":return{...t,htmlAttributes:{...s}};default:return{...t,[n.type]:{...s}}}}mapArrayTypeChildrenToProps(n,t){let s={...t};return Object.keys(n).forEach(a=>{s={...s,[a]:n[a]}}),s}warnOnInvalidChildren(n,t){return Ph(Ah.some(s=>n.type===s),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ah.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),Ph(!t||typeof t=="string"||Array.isArray(t)&&!t.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,t){let s={};return zr.Children.forEach(n,a=>{if(!a||!a.props)return;const{children:u,...l}=a.props,c=Object.keys(l).reduce((m,y)=>(m[Wy[y]||y]=l[y],m),{});let{type:f}=a;switch(typeof f=="symbol"?f=f.toString():this.warnOnInvalidChildren(a,u),f){case"Symbol(react.fragment)":t=this.mapChildrenToProps(u,t);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(a,s,c,u);break;default:t=this.mapObjectTypeChildren(a,t,c,u);break}}),this.mapArrayTypeChildrenToProps(s,t)}render(){const{children:n,...t}=this.props;let s={...t},{helmetData:a}=t;if(n&&(s=this.mapChildrenToProps(n,s)),a&&!(a instanceof lu)){const u=a;a=new lu(u.context,!0),delete s.helmetData}return a?zr.createElement(Uh,{...s,context:a.value}):zr.createElement(Df.Consumer,null,u=>zr.createElement(Uh,{...s,context:u}))}};function ug(){return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"About - Recipes"})}),d.jsxs("div",{className:"flex flex-col gap-10",children:[d.jsxs("section",{children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"About"}),d.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"This site was created as a personal project, to help speed up the process of weekly meal planning. No subscriptions, no adverts, no SEO."})]}),d.jsxs("section",{children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100 md:text-2xl",children:"Stack"}),d.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"The frontend is Vite + React, hosted on GitHub Pages."}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:["The backend is"," ",d.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noreferrer",className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:"Supabase"})," ","with a hosted PostgreSQL database."]}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"The application was written with the assistance of ChatGPT Codex."})]})]})]})}function za(n,t){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&t.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(n);u<a.length;u++)t.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(n,a[u])&&(s[a[u]]=n[a[u]]);return s}function dg(n,t,s,a){function u(l){return l instanceof s?l:new s(function(c){c(l)})}return new(s||(s=Promise))(function(l,c){function f(g){try{y(a.next(g))}catch(x){c(x)}}function m(g){try{y(a.throw(g))}catch(x){c(x)}}function y(g){g.done?l(g.value):u(g.value).then(f,m)}y((a=a.apply(n,t||[])).next())})}const cg=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Tu extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class hg extends Tu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dh extends Tu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Mh extends Tu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var du;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(du||(du={}));class fg{constructor(t,{headers:s={},customFetch:a,region:u=du.Any}={}){this.url=t,this.headers=s,this.region=u,this.fetch=cg(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return dg(this,arguments,void 0,function*(s,a={}){var u;let l,c;try{const{headers:f,method:m,body:y,signal:g,timeout:x}=a;let w={},{region:b}=a;b||(b=this.region);const S=new URL(`${this.url}/${s}`);b&&b!=="any"&&(w["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let N;y&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",N=y):typeof y=="string"?(w["Content-Type"]="text/plain",N=y):typeof FormData<"u"&&y instanceof FormData?N=y:(w["Content-Type"]="application/json",N=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?N=JSON.stringify(y):N=y;let E=g;x&&(c=new AbortController,l=setTimeout(()=>c.abort(),x),g?(E=c.signal,g.addEventListener("abort",()=>c.abort())):E=c.signal);const U=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),f),body:N,signal:E}).catch(re=>{throw new hg(re)}),O=U.headers.get("x-relay-error");if(O&&O==="true")throw new Dh(U);if(!U.ok)throw new Mh(U);let L=((u=U.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),q;return L==="application/json"?q=yield U.json():L==="application/octet-stream"||L==="application/pdf"?q=yield U.blob():L==="text/event-stream"?q=U:L==="multipart/form-data"?q=yield U.formData():q=yield U.text(),{data:q,error:null,response:U}}catch(f){return{data:null,error:f,response:f instanceof Mh||f instanceof Dh?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var pg=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},mg=class{constructor(n){var t,s,a;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(a=n.urlLengthLimit)!==null&&a!==void 0?a:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,f=null,m=null,y=l.status,g=l.statusText;if(l.ok){var x,w;if(s.method!=="HEAD"){var b;const U=await l.text();U===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((b=s.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?f=U:f=JSON.parse(U))}const N=(x=s.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),E=(w=l.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");N&&E&&E.length>1&&(m=parseInt(E[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,y=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var S;const N=await l.text();try{c=JSON.parse(N),Array.isArray(c)&&l.status===404&&(f=[],c=null,y=200,g="OK")}catch{l.status===404&&N===""?(y=204,g="No Content"):c={message:N}}if(c&&s.isMaybeSingle&&(!(c==null||(S=c.details)===null||S===void 0)&&S.includes("0 rows"))&&(c=null,y=200,g="OK"),c&&s.shouldThrowOnError)throw new pg(c)}return{error:c,data:f,count:m,status:y,statusText:g}});return this.shouldThrowOnError||(u=u.catch(l=>{var c;let f="",m="",y="";const g=l?.cause;if(g){var x,w,b,S;const U=(x=g?.message)!==null&&x!==void 0?x:"",O=(w=g?.code)!==null&&w!==void 0?w:"";f=`${(b=l?.name)!==null&&b!==void 0?b:"FetchError"}: ${l?.message}`,f+=`

Caused by: ${(S=g?.name)!==null&&S!==void 0?S:"Error"}: ${U}`,O&&(f+=` (${O})`),g?.stack&&(f+=`
${g.stack}`)}else{var N;f=(N=l?.stack)!==null&&N!==void 0?N:""}const E=this.url.toString().length;return l?.name==="AbortError"||l?.code==="ABORT_ERR"?(y="",m="Request was aborted (timeout or manual cancellation)",E>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${E} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(g?.name==="HeadersOverflowError"||g?.code==="UND_ERR_HEADERS_OVERFLOW")&&(y="",m="HTTP headers exceeded server limits (typically 16KB)",E>this.urlLengthLimit&&(m+=`. Your request URL is ${E} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=l?.name)!==null&&c!==void 0?c:"FetchError"}: ${l?.message}`,details:f,hint:m,code:y},data:null,count:null,status:0,statusText:""}})),u.then(n,t)}returns(){return this}overrideTypes(){return this}},yg=class extends mg{select(n){let t=!1;const s=(n??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:a,referencedTable:u=a}={}){const l=u?`${u}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(l,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:a=!1,wal:u=!1,format:l="text"}={}){var c;const f=[n?"analyze":null,t?"verbose":null,s?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${f};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Fh=new RegExp("[,()]");var Vn=class extends yg{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(a=>typeof a=="string"&&Fh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(a=>typeof a=="string"&&Fh.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${u}fts${l}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},gg=class{constructor(n,{headers:t={},schema:s,fetch:a,urlLengthLimit:u=8e3}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=a,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:s=!1,count:a}=t??{},u=s?"HEAD":"GET";let l=!1;const c=(n??"*").split("").map(y=>/\s/.test(y)&&!l?"":(y==='"'&&(l=!l),y)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",c),a&&m.append("Prefer",`count=${a}`),new Vn({method:u,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:t,defaultToNull:s=!0}={}){var a;const u="POST",{url:l,headers:c}=this.cloneRequestState();if(t&&c.append("Prefer",`count=${t}`),s||c.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(f.length>0){const m=[...new Set(f)].map(y=>`"${y}"`);l.searchParams.set("columns",m.join(","))}}return new Vn({method:u,url:l,headers:c,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:a,defaultToNull:u=!0}={}){var l;const c="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&f.searchParams.set("on_conflict",t),a&&m.append("Prefer",`count=${a}`),u||m.append("Prefer","missing=default"),Array.isArray(n)){const y=n.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(y.length>0){const g=[...new Set(y)].map(x=>`"${x}"`);f.searchParams.set("columns",g.join(","))}}return new Vn({method:c,url:f,headers:m,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:t}={}){var s;const a="PATCH",{url:u,headers:l}=this.cloneRequestState();return t&&l.append("Prefer",`count=${t}`),new Vn({method:a,url:u,headers:l,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var t;const s="DELETE",{url:a,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new Vn({method:s,url:a,headers:u,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ys(n){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(n)}function kg(n,t){if(Ys(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(Ys(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function vg(n){var t=kg(n,"string");return Ys(t)=="symbol"?t:t+""}function xg(n,t,s){return(t=vg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Bh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function ba(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Bh(Object(s),!0).forEach(function(a){xg(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Bh(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}var wg=class Bf{constructor(t,{headers:s={},schema:a,fetch:u,timeout:l,urlLengthLimit:c=8e3}={}){this.url=t,this.headers=new Headers(s),this.schemaName=a,this.urlLengthLimit=c;const f=u??globalThis.fetch;l!==void 0&&l>0?this.fetch=(m,y)=>{const g=new AbortController,x=setTimeout(()=>g.abort(),l),w=y?.signal;if(w){if(w.aborted)return clearTimeout(x),f(m,y);const b=()=>{clearTimeout(x),g.abort()};return w.addEventListener("abort",b,{once:!0}),f(m,ba(ba({},y),{},{signal:g.signal})).finally(()=>{clearTimeout(x),w.removeEventListener("abort",b)})}return f(m,ba(ba({},y),{},{signal:g.signal})).finally(()=>clearTimeout(x))}:this.fetch=f}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new gg(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Bf(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,s={},{head:a=!1,get:u=!1,count:l}={}){var c;let f;const m=new URL(`${this.url}/rpc/${t}`);let y;const g=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(g)),x=a&&Object.values(s).some(g);x?(f="POST",y=s):a||u?(f=a?"HEAD":"GET",Object.entries(s).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{m.searchParams.append(b,S)})):(f="POST",y=s);const w=new Headers(this.headers);return x?w.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&w.set("Prefer",`count=${l}`),new Vn({method:f,url:m,headers:w,schema:this.schemaName,body:y,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class bg{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const u=a.node,l=parseInt(u.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const a=this.getWebSocketConstructor();return new a(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const _g="2.94.1",Sg=`realtime-js/${_g}`,jg="1.0.0",zf="2.0.0",zh=zf,cu=1e4,Ng=1e3,Eg=100;var Fr;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Fr||(Fr={}));var nt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(nt||(nt={}));var Qt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Qt||(Qt={}));var hu;(function(n){n.websocket="websocket"})(hu||(hu={}));var on;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(on||(on={}));class Cg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,a;const u=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(t){var s,a;const u=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},c=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,s,a){var u,l;const c=t.topic,f=(u=t.ref)!==null&&u!==void 0?u:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",y=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(g).length===0?"":JSON.stringify(g);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+c.length+y.length+x.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(b),N=0;S.setUint8(N++,this.KINDS.userBroadcastPush),S.setUint8(N++,m.length),S.setUint8(N++,f.length),S.setUint8(N++,c.length),S.setUint8(N++,y.length),S.setUint8(N++,x.length),S.setUint8(N++,s),Array.from(m,U=>S.setUint8(N++,U.charCodeAt(0))),Array.from(f,U=>S.setUint8(N++,U.charCodeAt(0))),Array.from(c,U=>S.setUint8(N++,U.charCodeAt(0))),Array.from(y,U=>S.setUint8(N++,U.charCodeAt(0))),Array.from(x,U=>S.setUint8(N++,U.charCodeAt(0)));var E=new Uint8Array(b.byteLength+a.byteLength);return E.set(new Uint8Array(b),0),E.set(new Uint8Array(a),b.byteLength),E.buffer}decode(t,s){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return s(a)}if(typeof t=="string"){const a=JSON.parse(t),[u,l,c,f,m]=a;return s({join_ref:u,ref:l,topic:c,event:f,payload:m})}return s({})}_binaryDecode(t){const s=new DataView(t),a=s.getUint8(0),u=new TextDecoder;if(a===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,u)}_decodeUserBroadcast(t,s,a){const u=s.getUint8(1),l=s.getUint8(2),c=s.getUint8(3),f=s.getUint8(4);let m=this.HEADER_LENGTH+4;const y=a.decode(t.slice(m,m+u));m=m+u;const g=a.decode(t.slice(m,m+l));m=m+l;const x=a.decode(t.slice(m,m+c));m=m+c;const w=t.slice(m,t.byteLength),b=f===this.JSON_ENCODING?JSON.parse(a.decode(w)):w,S={type:this.BROADCAST_EVENT,event:g,payload:b};return c>0&&(S.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>s.includes(a)))}}class qf{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ae||(Ae={}));const qh=(n,t,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((l,c)=>(l[c]=Tg(c,n,t,u),l),{}):{}},Tg=(n,t,s,a)=>{const u=t.find(f=>f.name===n),l=u?.type,c=s[n];return l&&!a.includes(l)?Hf(l,c):fu(c)},Hf=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return Ig(t,s)}switch(n){case Ae.bool:return Rg(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return Og(t);case Ae.json:case Ae.jsonb:return Pg(t);case Ae.timestamp:return Ag(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return fu(t);default:return fu(t)}},fu=n=>n,Rg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Og=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Pg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},Ig=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,a=n[s];if(n[0]==="{"&&a==="}"){let l;const c=n.slice(1,s);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>Hf(t,f))}return n},Ag=n=>typeof n=="string"?n.replace(" ","T"):n,Wf=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Kl{constructor(t,s,a={},u=cu){this.channel=t,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Hh||(Hh={}));class Js{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Js.syncState(this.state,u,l,c),this.pendingDiffs.forEach(m=>{this.state=Js.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},u=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Js.syncDiff(this.state,u,l,c),f())}),this.onJoin((u,l,c)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:l,newPresences:c})}),this.onLeave((u,l,c)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,u){const l=this.cloneDeep(t),c=this.transformState(s),f={},m={};return this.map(l,(y,g)=>{c[y]||(m[y]=g)}),this.map(c,(y,g)=>{const x=l[y];if(x){const w=g.map(E=>E.presence_ref),b=x.map(E=>E.presence_ref),S=g.filter(E=>b.indexOf(E.presence_ref)<0),N=x.filter(E=>w.indexOf(E.presence_ref)<0);S.length>0&&(f[y]=S),N.length>0&&(m[y]=N)}else f[y]=g}),this.syncDiff(l,{joins:f,leaves:m},a,u)}static syncDiff(t,s,a,u){const{joins:l,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(l,(f,m)=>{var y;const g=(y=t[f])!==null&&y!==void 0?y:[];if(t[f]=this.cloneDeep(m),g.length>0){const x=t[f].map(b=>b.presence_ref),w=g.filter(b=>x.indexOf(b.presence_ref)<0);t[f].unshift(...w)}a(f,g,m)}),this.map(c,(f,m)=>{let y=t[f];if(!y)return;const g=m.map(x=>x.presence_ref);y=y.filter(x=>g.indexOf(x.presence_ref)<0),t[f]=y,u(f,y,m),y.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const u=t[a];return"metas"in u?s[a]=u.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):s[a]=u,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wh;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Wh||(Wh={}));var Gs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Gs||(Gs={}));var pr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(pr||(pr={}));class Gn{constructor(t,s={config:{}},a){var u,l;if(this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Kl(this,Qt.join,this.params,this.timeout),this.rejoinTimer=new qf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qt.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Js(this),this.broadcastEndpointURL=Wf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var a,u,l;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:c,presence:f,private:m}}=this.params,y=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&u!==void 0?u:[],g=!!this.bindings[Gs.PRESENCE]&&this.bindings[Gs.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,x={},w={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:g}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(pr.CHANNEL_ERROR,b)),this._onClose(()=>t?.(pr.CLOSED)),this.updateJoinPayload(Object.assign({config:w},x)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t?.(pr.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,E=(S=N?.length)!==null&&S!==void 0?S:0,U=[];for(let O=0;O<E;O++){const L=N[O],{filter:{event:q,schema:re,table:X,filter:Z}}=L,P=b&&b[O];if(P&&P.event===q&&Gn.isFilterValueEqual(P.schema,re)&&Gn.isFilterValueEqual(P.table,X)&&Gn.isFilterValueEqual(P.filter,Z))U.push(Object.assign(Object.assign({},L),{id:P.id}));else{this.unsubscribe(),this.state=nt.errored,t?.(pr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,t&&t(pr.SUBSCRIBED);return}}).receive("error",b=>{this.state=nt.errored,t?.(pr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(pr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this.state===nt.joined&&t===Gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,a)}async httpSend(t,s,a={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const y=await f.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(t,s={}){var a,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,m;const y=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),y.receive("ok",()=>l("ok")),y.receive("error",()=>l("error")),y.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new Kl(this,Qt.leave,{},t),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,s,a){const u=new AbortController,l=setTimeout(()=>u.abort(),a),c=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(l),c}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Kl(this,t,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Eg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var u,l;const c=t.toLocaleLowerCase(),{close:f,error:m,leave:y,join:g}=Qt;if(a&&[f,m,y,g].indexOf(c)>=0&&a!==this._joinRef())return;let w=this._onMessage(c,s,a);if(s&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(b=>{var S,N,E;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(N=b.filter)===null||N===void 0?void 0:N.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(b=>b.callback(w,a)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var S,N,E,U,O,L;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const q=b.id,re=(S=b.filter)===null||S===void 0?void 0:S.event;return q&&((N=s.ids)===null||N===void 0?void 0:N.includes(q))&&(re==="*"||re?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const q=(O=(U=b?.filter)===null||U===void 0?void 0:U.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return q==="*"||q===((L=s?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:N,table:E,commit_timestamp:U,type:O,errors:L}=S;w=Object.assign(Object.assign({},{schema:N,table:E,commit_timestamp:U,eventType:O,new:{},old:{},errors:L}),this._getPayloadRecords(S))}b.callback(w,a)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const u=t.toLocaleLowerCase(),l={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(l):this.bindings[u]=[l],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var l;return!(((l=u.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===a&&Gn.isEqual(u.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qt.close,{},t)}_onError(t){this._on(Qt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=qh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=qh(t.columns,t.old_record)),s}}const Jl=()=>{},_a={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Lg=[1e3,2e3,5e3,1e4],$g=1e4,Ug=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Dg{constructor(t,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cu,this.transport=null,this.heartbeatIntervalMs=_a.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jl,this.ref=0,this.reconnectTimer=null,this.vsn=zh,this.logger=Jl,this.conn=null,this.sendBuffer=[],this.serializer=new Cg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...l)=>u(...l):(...l)=>fetch(...l),!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${hu.websocket}`,this.httpEndpoint=Wf(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Fr.connecting:return on.Connecting;case Fr.open:return on.Open;case Fr.closing:return on.Closing;default:return on.Closed}}isConnected(){return this.connectionState()===on.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const a=`realtime:${t}`,u=this.getChannels().find(l=>l.topic===a);if(u)return u;{const l=new Gn(`realtime:${t}`,s,this);return this.channels.push(l),l}}push(t){const{topic:s,event:a,payload:u,ref:l}=t,c=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${s} ${a} (${l})`,u),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ng,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},_a.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",y)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:l,ref:c}=s,f=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${a} ${u} ${f}`.trim(),l),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(u,l,c)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Fr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Fr.open||this.conn.readyState===Fr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${t}${a}${u}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([Ug],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,a=!1;if(t)s=t,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const l={access_token:s,version:Sg};s&&u.updateJoinPayload(l),u.joinedOnce&&u._isJoined()&&u._push(Qt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${t} callback`,u)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new qf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_a.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,a,u,l,c,f,m,y,g,x,w,b;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:cu,this.heartbeatIntervalMs=(u=t?.heartbeatIntervalMs)!==null&&u!==void 0?u:_a.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=t?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Jl,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:zh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=t?.reconnectAfterMs)!==null&&y!==void 0?y:(S=>Lg[S-1]||$g),this.vsn){case jg:this.encode=(g=t?.encode)!==null&&g!==void 0?g:((S,N)=>N(JSON.stringify(S))),this.decode=(x=t?.decode)!==null&&x!==void 0?x:((S,N)=>N(JSON.parse(S)));break;case zf:this.encode=(w=t?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(b=t?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var Xs=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Mg(n,t,s){const a=new URL(t,n);if(s)for(const[u,l]of Object.entries(s))l!==void 0&&a.searchParams.set(u,l);return a.toString()}async function Fg(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Bg(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:u,body:l,headers:c}){const f=Mg(n.baseUrl,a,u),m=await Fg(n.auth),y=await t(f,{method:s,headers:{...l?{"Content-Type":"application/json"}:{},...m,...c},body:l?JSON.stringify(l):void 0}),g=await y.text(),x=(y.headers.get("content-type")||"").includes("application/json"),w=x&&g?JSON.parse(g):g;if(!y.ok){const b=x?w:void 0,S=b?.error;throw new Xs(S?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:y.status,headers:y.headers,data:w}}}}function Sa(n){return n.join("")}var zg=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:Sa(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sa(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sa(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sa(n.namespace)}`}),!0}catch(t){if(t instanceof Xs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof Xs&&s.status===409)return;throw s}}};function Mn(n){return n.join("")}var qg=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mn(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof Xs&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof Xs&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},Hg=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Bg({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new zg(this.client,t),this.tableOps=new qg(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},qa=class extends Error{constructor(n,t="storage",s,a){super(n),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=a}};function Ha(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ja=class extends qa{constructor(n,t,s,a="storage"){super(n,a,t,s),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Vf=class extends qa{constructor(n,t,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Wg=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Vg=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},pu=n=>{if(Array.isArray(n))return n.map(s=>pu(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[u]=pu(a)}),t},Kg=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Zs(n){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(n)}function Jg(n,t){if(Zs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(Zs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Gg(n){var t=Jg(n,"string");return Zs(t)=="symbol"?t:t+""}function Qg(n,t,s){return(t=Gg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Vh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function we(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Vh(Object(s),!0).forEach(function(a){Qg(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Vh(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const Kh=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},Yg=async(n,t,s,a)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const u=n,l=u.status||500;if(typeof u.json=="function")u.json().then(c=>{const f=c?.statusCode||c?.code||l+"";t(new ja(Kh(c),l,f,a))}).catch(()=>{if(a==="vectors"){const c=l+"";t(new ja(u.statusText||`HTTP ${l} error`,l,c,a))}else{const c=l+"";t(new ja(u.statusText||`HTTP ${l} error`,l,c,a))}});else{const c=l+"";t(new ja(u.statusText||`HTTP ${l} error`,l,c,a))}}else t(new Vf(Kh(n),n,a))},Xg=(n,t,s,a)=>{const u={method:n,headers:t?.headers||{}};return n==="GET"||n==="HEAD"||!a?we(we({},u),s):(Vg(a)?(u.headers=we({"Content-Type":"application/json"},t?.headers),u.body=JSON.stringify(a)):u.body=a,t?.duplex&&(u.duplex=t.duplex),we(we({},u),s))};async function Ws(n,t,s,a,u,l,c){return new Promise((f,m)=>{n(s,Xg(t,a,u,l)).then(y=>{if(!y.ok)throw y;if(a?.noResolveJson)return y;if(c==="vectors"){const g=y.headers.get("content-type");if(y.headers.get("content-length")==="0"||y.status===204)return{};if(!g||!g.includes("application/json"))return{}}return y.json()}).then(y=>f(y)).catch(y=>Yg(y,m,a,c))})}function Kf(n="storage"){return{get:async(t,s,a,u)=>Ws(t,"GET",s,a,u,void 0,n),post:async(t,s,a,u,l)=>Ws(t,"POST",s,u,l,a,n),put:async(t,s,a,u,l)=>Ws(t,"PUT",s,u,l,a,n),head:async(t,s,a,u)=>Ws(t,"HEAD",s,we(we({},a),{},{noResolveJson:!0}),u,void 0,n),remove:async(t,s,a,u,l)=>Ws(t,"DELETE",s,u,l,a,n)}}const Zg=Kf("storage"),{get:ei,post:Gt,put:mu,head:ek,remove:Ru}=Zg,Ot=Kf("vectors");var ts=class{constructor(n,t={},s,a="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.fetch=Wg(s),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var t=this;try{return{data:await n(),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ha(s))return{data:null,error:s};throw s}}},tk=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ha(t))return{data:null,error:t};throw t}}};let Jf;Jf=Symbol.toStringTag;var rk=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[Jf]="BlobDownloadBuilder",this.promise=null}asStream(){return new tk(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Ha(t))return{data:null,error:t};throw t}}};const nk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Jh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var sk=class extends ts{constructor(n,t={},s,a){super(n,t,a,"storage"),this.bucketId=s}async uploadOrUpdate(n,t,s,a){var u=this;return u.handleOperation(async()=>{let l;const c=we(we({},Jh),a);let f=we(we({},u.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",u.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),m&&!l.has("metadata")&&l.append("metadata",u.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,m&&(f["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(f=we(we({},f),a.headers));const y=u._removeEmptyFolders(t),g=u._getFinalPath(y),x=await(n=="PUT"?mu:Gt)(u.fetch,`${u.url}/object/${g}`,l,we({headers:f},c?.duplex?{duplex:c.duplex}:{}));return{path:y,id:x.Id,fullPath:x.Key}})}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,a){var u=this;const l=u._removeEmptyFolders(n),c=u._getFinalPath(l),f=new URL(u.url+`/object/upload/sign/${c}`);return f.searchParams.set("token",t),u.handleOperation(async()=>{let m;const y=we({upsert:Jh.upsert},a),g=we(we({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",y.cacheControl)):(m=s,g["cache-control"]=`max-age=${y.cacheControl}`,g["content-type"]=y.contentType),{path:l,fullPath:(await mu(u.fetch,f.toString(),m,{headers:g})).Key}})}async createSignedUploadUrl(n,t){var s=this;return s.handleOperation(async()=>{let a=s._getFinalPath(n);const u=we({},s.headers);t?.upsert&&(u["x-upsert"]="true");const l=await Gt(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:u}),c=new URL(s.url+l.url),f=c.searchParams.get("token");if(!f)throw new qa("No token returned by API");return{signedUrl:c.toString(),path:n,token:f}})}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var a=this;return a.handleOperation(async()=>await Gt(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:a.headers}))}async copy(n,t,s){var a=this;return a.handleOperation(async()=>({path:(await Gt(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(n,t,s){var a=this;return a.handleOperation(async()=>{let u=a._getFinalPath(n),l=await Gt(a.fetch,`${a.url}/object/sign/${u}`,we({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:a.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${a.url}${l.signedURL}${c}`)}})}async createSignedUrls(n,t,s){var a=this;return a.handleOperation(async()=>{const u=await Gt(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:t,paths:n},{headers:a.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u.map(c=>we(we({},c),{},{signedUrl:c.signedURL?encodeURI(`${a.url}${c.signedURL}${l}`):null}))})}download(n,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),u=a?`?${a}`:"",l=this._getFinalPath(n),c=()=>ei(this.fetch,`${this.url}/${s}/${l}${u}`,{headers:this.headers,noResolveJson:!0});return new rk(c,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);return t.handleOperation(async()=>pu(await ei(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})))}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await ek(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Ha(a)&&a instanceof Vf){const u=a.originalError;if([400,404].includes(u?.status))return{data:!1,error:a}}throw a}}getPublicUrl(n,t){const s=this._getFinalPath(n),a=[],u=t?.download?`download=${t.download===!0?"":t.download}`:"";u!==""&&a.push(u);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&a.push(c);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${f}`)}}}async remove(n){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}))}async list(n,t,s){var a=this;return a.handleOperation(async()=>{const u=we(we(we({},nk),t),{},{prefix:n||""});return await Gt(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},s)})}async listV2(n,t){var s=this;return s.handleOperation(async()=>{const a=we({},n);return await Gt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},t)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const ik="2.94.1",oi={"X-Client-Info":`storage-js/${ik}`};var ak=class extends ts{constructor(n,t={},s,a){const u=new URL(n);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const l=u.href.replace(/\/$/,""),c=we(we({},oi),t);super(l,c,s,"storage")}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=t.listBucketOptionsToQueryString(n);return await ei(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers})})}async getBucket(n){var t=this;return t.handleOperation(async()=>await ei(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}))}async createBucket(n,t={public:!1}){var s=this;return s.handleOperation(async()=>await Gt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,t){var s=this;return s.handleOperation(async()=>await mu(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var t=this;return t.handleOperation(async()=>await Gt(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},ok=class extends ts{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=we(we({},oi),t);super(a,u,s,"storage")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Gt(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}))}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const a=s.toString(),u=a?`${t.url}/bucket?${a}`:`${t.url}/bucket`;return await ei(t.fetch,u,{headers:t.headers})})}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Ru(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}from(n){var t=this;if(!Kg(n))throw new qa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Hg({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(u,l){const c=u[l];return typeof c!="function"?c:async(...f)=>{try{return{data:await c.apply(u,f),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},lk=class extends ts{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=we(we({},oi),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async createIndex(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{})}async getIndex(n,t){var s=this;return s.handleOperation(async()=>await Ot.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}))}async listIndexes(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}))}async deleteIndex(n,t){var s=this;return s.handleOperation(async()=>await Ot.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{})}},uk=class extends ts{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=we(we({},oi),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async putVectors(n){var t=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{})}async getVectors(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}))}async listVectors(n){var t=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}))}async queryVectors(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}))}async deleteVectors(n){var t=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{})}},dk=class extends ts{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=we(we({},oi),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}async getBucket(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}))}async listBuckets(n={}){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Ot.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}},ck=class extends dk{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new hk(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},hk=class extends lk{constructor(n,t,s,a){super(n,t,a),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new fk(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},fk=class extends uk{constructor(n,t,s,a,u){super(n,t,u),this.vectorBucketName=s,this.indexName=a}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,we(we({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},pk=class extends ak{constructor(n,t={},s,a){super(n,t,s,a)}from(n){return new sk(this.url,this.headers,n,this.fetch)}get vectors(){return new ck(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ok(this.url+"/iceberg",this.headers,this.fetch)}};const Gf="2.94.1",Kn=30*1e3,yu=3,Gl=yu*Kn,mk="http://localhost:9999",yk="supabase.auth.token",gk={"X-Client-Info":`gotrue-js/${Gf}`},gu="X-Supabase-Api-Version",Qf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vk=600*1e3;class ti extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class xk extends ti{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function wk(n){return me(n)&&n.name==="AuthApiError"}class ln extends ti{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class kr extends ti{constructor(t,s,a,u){super(t,a,u),this.name=s,this.status=a}}class Rt extends kr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ql(n){return me(n)&&n.name==="AuthSessionMissingError"}class Fn extends kr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Na extends kr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ea extends kr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bk(n){return me(n)&&n.name==="AuthImplicitGrantRedirectError"}class Gh extends kr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _k extends kr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ku extends kr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Yl(n){return me(n)&&n.name==="AuthRetryableFetchError"}class Qh extends kr{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class vu extends kr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const La="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yh=` 	
\r=`.split(""),Sk=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<Yh.length;t+=1)n[Yh[t].charCodeAt(0)]=-2;for(let t=0;t<La.length;t+=1)n[La[t].charCodeAt(0)]=t;return n})();function Xh(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(La[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(La[a]),t.queuedBits-=6}}function Yf(n,t,s){const a=Sk[n];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Zh(n){const t=[],s=c=>{t.push(String.fromCodePoint(c))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},l=c=>{Ek(c,a,s)};for(let c=0;c<n.length;c+=1)Yf(n.charCodeAt(c),u,l);return t.join("")}function jk(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Nk(n,t){for(let s=0;s<n.length;s+=1){let a=n.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(n.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}jk(a,t)}}function Ek(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function Xn(n){const t=[],s={queue:0,queuedBits:0},a=u=>{t.push(u)};for(let u=0;u<n.length;u+=1)Yf(n.charCodeAt(u),s,a);return new Uint8Array(t)}function Ck(n){const t=[];return Nk(n,s=>t.push(s)),new Uint8Array(t)}function un(n){const t=[],s={queue:0,queuedBits:0},a=u=>{t.push(u)};return n.forEach(u=>Xh(u,s,a)),Xh(null,s,a),t.join("")}function Tk(n){return Math.round(Date.now()/1e3)+n}function Rk(){return Symbol("auth-callback")}const dt=()=>typeof window<"u"&&typeof document<"u",nn={tested:!1,writable:!1},Xf=()=>{if(!dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nn.tested)return nn.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),nn.tested=!0,nn.writable=!0}catch{nn.tested=!0,nn.writable=!1}return nn.writable};function Ok(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,l)=>{t[l]=u})}catch{}return s.searchParams.forEach((a,u)=>{t[u]=a}),t}const Zf=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Pk=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Jn=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},sn=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ut=async(n,t)=>{await n.removeItem(t)};class Wa{constructor(){this.promise=new Wa.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Wa.promiseConstructor=Promise;function Ca(n){const t=n.split(".");if(t.length!==3)throw new vu("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!kk.test(t[a]))throw new vu("JWT not in base64url format");return{header:JSON.parse(Zh(t[0])),payload:JSON.parse(Zh(t[1])),signature:Xn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ik(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function Ak(n,t){return new Promise((a,u)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!t(l,null,c)){a(c);return}}catch(c){if(!t(l,c)){u(c);return}}})()})}function Lk(n){return("0"+n.toString(16)).substr(-2)}function $k(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let l=0;l<56;l++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(t),Array.from(t,Lk).join("")}async function Uk(n){const s=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(l=>String.fromCharCode(l)).join("")}async function Dk(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await Uk(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bn(n,t,s=!1){const a=$k();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await Jn(n,`${t}-code-verifier`,u);const l=await Dk(a);return[l,a===l?"plain":"s256"]}const Mk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Fk(n){const t=n.headers.get(gu);if(!t||!t.match(Mk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Bk(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function zk(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zn(n){if(!qk.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xl(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hk(n,t){return new Proxy(n,{get:(s,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const l=a.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,u)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,a,u)}})}function ef(n){return JSON.parse(JSON.stringify(n))}const an=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Wk=[502,503,504];async function tf(n){var t;if(!Pk(n))throw new ku(an(n),0);if(Wk.includes(n.status))throw new ku(an(n),n.status);let s;try{s=await n.json()}catch(l){throw new ln(an(l),l)}let a;const u=Fk(n);if(u&&u.getTime()>=Qf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Qh(an(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Rt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Qh(an(s),n.status,s.weak_password.reasons);throw new xk(an(s),n.status||500,a)}const Vk=(n,t,s,a)=>{const u={method:n,headers:t?.headers||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function xe(n,t,s,a){var u;const l=Object.assign({},a?.headers);l[gu]||(l[gu]=Qf["2024-01-01"].name),a?.jwt&&(l.Authorization=`Bearer ${a.jwt}`);const c=(u=a?.query)!==null&&u!==void 0?u:{};a?.redirectTo&&(c.redirect_to=a.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await Kk(n,t,s+f,{headers:l,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function Kk(n,t,s,a,u,l){const c=Vk(t,a,u,l);let f;try{f=await n(s,Object.assign({},c))}catch(m){throw console.error(m),new ku(an(m),0)}if(f.ok||await tf(f),a?.noResolveJson)return f;try{return await f.json()}catch(m){await tf(m)}}function Jt(n){var t;let s=null;Qk(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=Tk(n.expires_in)));const a=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:a},error:null}}function rf(n){const t=Jt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Br(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Jk(n){return{data:n,error:null}}function Gk(n){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:u,verification_type:l}=n,c=za(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:a,redirect_to:u,verification_type:l},m=Object.assign({},c);return{data:{properties:f,user:m},error:null}}function nf(n){return n}function Qk(n){return n.access_token&&n.refresh_token&&n.expires_in}const Zl=["global","local","others"];class Yk{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Zf(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Zl[0]){if(Zl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zl.join(", ")}`);try{return await xe(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(me(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await xe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Br})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=za(t,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a?.newEmail,delete u.newEmail),await xe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Gk,redirectTo:s?.redirectTo})}catch(s){if(me(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Br})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,u,l,c,f,m;try{const y={nextPage:null,lastPage:0,total:0},g=await xe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&l!==void 0?l:""},xform:nf});if(g.error)throw g.error;const x=await g.json(),w=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(m=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const N=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);y[`${E}Page`]=N}),y.total=parseInt(w)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(me(y))return{data:{users:[]},error:y};throw y}}async getUserById(t){zn(t);try{return await xe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Br})}catch(s){if(me(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){zn(t);try{return await xe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Br})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){zn(t);try{return await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Br})}catch(a){if(me(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){zn(t.userId);try{const{data:s,error:a}=await xe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _deleteFactor(t){zn(t.userId),zn(t.id);try{return{data:await xe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,a,u,l,c,f,m;try{const y={nextPage:null,lastPage:0,total:0},g=await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&l!==void 0?l:""},xform:nf});if(g.error)throw g.error;const x=await g.json(),w=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(m=(f=g.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const N=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);y[`${E}Page`]=N}),y.total=parseInt(w)),{data:Object.assign(Object.assign({},x),y),error:null}}catch(y){if(me(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await xe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await xe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(me(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await xe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await xe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(me(s))return{data:null,error:s};throw s}}}function sf(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const qn={debug:!!(globalThis&&Xf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ep extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Xk extends ep{}async function Zk(n,t,s){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),qn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await s()}finally{qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(t===0)throw qn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Xk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(qn.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function ev(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tp(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function tv(n){return parseInt(n,16)}function rv(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function nv(n){var t;const{chainId:s,domain:a,expirationTime:u,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:m,resources:y,scheme:g,uri:x,version:w}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const b=tp(n.address),S=g?`${g}://${a}`:a,N=n.statement?`${n.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${b}

${N}`;let U=`URI: ${x}
Version: ${w}
Chain ID: ${s}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(u&&(U+=`
Expiration Time: ${u.toISOString()}`),f&&(U+=`
Not Before: ${f.toISOString()}`),m&&(U+=`
Request ID: ${m}`),y){let O=`
Resources:`;for(const L of y){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);O+=`
- ${L}`}U+=O}return`${E}
${U}`}class Ze extends Error{constructor({message:t,code:s,cause:a,name:u}){var l;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(l=u??(a instanceof Error?a.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=s}}class $a extends Ze{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function sv({error:n,options:t}){var s,a,u;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=l.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(rp(c)){if(l.rp.id!==c)return new Ze({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function iv({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Ze({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(rp(a)){if(s.rpId!==a)return new Ze({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class av{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ov=new av;function lv(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:a}=n,u=za(n,["challenge","user","excludeCredentials"]),l=Xn(t).buffer,c=Object.assign(Object.assign({},s),{id:Xn(s.id).buffer}),f=Object.assign(Object.assign({},u),{challenge:l,user:c});if(a&&a.length>0){f.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const y=a[m];f.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:Xn(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return f}function uv(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,a=za(n,["challenge","allowCredentials"]),u=Xn(t).buffer,l=Object.assign(Object.assign({},a),{challenge:u});if(s&&s.length>0){l.allowCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const f=s[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:Xn(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function dv(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:un(new Uint8Array(n.response.attestationObject)),clientDataJSON:un(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cv(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,a=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:un(new Uint8Array(u.authenticatorData)),clientDataJSON:un(new Uint8Array(u.clientDataJSON)),signature:un(new Uint8Array(u.signature)),userHandle:u.userHandle?un(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rp(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function af(){var n,t;return!!(dt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function hv(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $a("Browser returned unexpected credential type",t)}:{data:null,error:new $a("Empty credential response",t)}}catch(t){return{data:null,error:sv({error:t,options:n})}}}async function fv(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new $a("Browser returned unexpected credential type",t)}:{data:null,error:new $a("Empty credential response",t)}}catch(t){return{data:null,error:iv({error:t,options:n})}}}const pv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ua(...n){const t=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of n)if(u)for(const l in u){const c=u[l];if(c!==void 0)if(Array.isArray(c))a[l]=c;else if(s(c))a[l]=c;else if(t(c)){const f=a[l];t(f)?a[l]=Ua(f,c):a[l]=Ua(c)}else a[l]=c}return a}function yv(n,t){return Ua(pv,n,t||{})}function gv(n,t){return Ua(mv,n,t||{})}class kv{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:a,signal:u},l){var c;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!f)return{data:null,error:m};const y=u??ov.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:g}=f.webauthn.credential_options.publicKey;if(!g.name){const x=a;if(x)g.name=`${g.id}:${x}`;else{const b=(await this.client.getUser()).data.user,S=((c=b?.user_metadata)===null||c===void 0?void 0:c.name)||b?.email||b?.id||"User";g.name=`${g.id}:${S}`}}g.displayName||(g.displayName=g.name)}switch(f.webauthn.type){case"create":{const g=yv(f.webauthn.credential_options.publicKey,l?.create),{data:x,error:w}=await hv({publicKey:g,signal:y});return x?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}case"request":{const g=gv(f.webauthn.credential_options.publicKey,l?.request),{data:x,error:w}=await fv(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g,signal:y}));return x?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:w}}}}catch(f){return me(f)?{data:null,error:f}:{data:null,error:new ln("Unexpected error in challenge",f)}}}async _verify({challengeId:t,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},l){if(!s)return{data:null,error:new ti("rpId is required for WebAuthn authentication")};try{if(!af())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:a},signal:u},{request:l});if(!c)return{data:null,error:f};const{webauthn:m}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(c){return me(c)?{data:null,error:c}:{data:null,error:new ln("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},l){if(!s)return{data:null,error:new ti("rpId is required for WebAuthn registration")};try{if(!af())return{data:null,error:new ln("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(g=>{var x;return(x=g.data)===null||x===void 0?void 0:x.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===t&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:f};const{data:m,error:y}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:u},{create:l});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(c){return me(c)?{data:null,error:c}:{data:null,error:new ln("Unexpected error in register",c)}}}}ev();const vv={url:mk,storageKey:yk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function of(n,t,s){return await s()}const Hn={};class ri{get jwks(){var t,s;return(s=(t=Hn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Hn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Hn[this.storageKey]=Object.assign(Object.assign({},Hn[this.storageKey]),{cachedAt:t})}constructor(t){var s,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},vv),t);if(this.storageKey=l.storageKey,this.instanceID=(s=ri.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,ri.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&dt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Yk({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Zf(l.fetch),this.lock=l.lock||of,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&dt()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Zk:this.lock=of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Xf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sf(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=sf(this.memoryStorage)),dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Gf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},a="none";if(dt()&&(s=Ok(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),dt()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:l}=await this._getSessionFromURL(s,a);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),bk(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:f}=u;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return me(s)?this._returnResult({error:s}):this._returnResult({error:new ln("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,u;try{const l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=t?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Jt}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const m=c.session,y=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(me(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var s,a,u;try{let l;if("email"in t){const{email:g,password:x,options:w}=t;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Bn(this.storage,this.storageKey)),l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:x,data:(s=w?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:b,code_challenge_method:S},xform:Jt})}else if("phone"in t){const{phone:g,password:x,options:w}=t;l=await xe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:x,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(u=w?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Jt})}else throw new Na("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return await ut(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=c.session,y=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let s;if("email"in t){const{email:l,password:c,options:f}=t;s=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:rf})}else if("phone"in t){const{phone:l,password:c,options:f}=t;s=await xe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:rf})}else throw new Na("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const l=new Fn;return this._returnResult({data:{user:null,session:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,a,u,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,a,u,l,c,f,m,y,g,x,w;let b,S;if("message"in t)b=t.message,S=t.signature;else{const{chain:N,wallet:E,statement:U,options:O}=t;let L;if(dt())if(typeof E=="object")L=E;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")L=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=E}const q=new URL((s=O?.url)!==null&&s!==void 0?s:window.location.href),re=await L.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!re||re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=tp(re[0]);let Z=(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!Z){const F=await L.request({method:"eth_chainId"});Z=tv(F)}const P={domain:q.host,address:X,statement:U,uri:q.href,version:"1",chainId:Z,nonce:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(c=(l=O?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=O?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=O?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=O?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.resources};b=nv(P),S=await L.request({method:"personal_sign",params:[rv(b),X]})}try{const{data:N,error:E}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Jt});if(E)throw E;if(!N||!N.session||!N.user){const U=new Fn;return this._returnResult({data:{user:null,session:null},error:U})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:E})}catch(N){if(me(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(t){var s,a,u,l,c,f,m,y,g,x,w,b;let S,N;if("message"in t)S=t.message,N=t.signature;else{const{chain:E,wallet:U,statement:O,options:L}=t;let q;if(dt())if(typeof U=="object")q=U;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))q=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=U}const re=new URL((s=L?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in q&&q.signIn){const X=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:re.host,uri:re.href}),O?{statement:O}:null));let Z;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")Z=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)Z=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)S=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),N=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${re.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${re.href}`,`Issued At: ${(u=(a=L?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((l=L?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((y=L?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((x=(g=L?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||x===void 0)&&x.length?["Resources",...L.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const X=await q.signMessage(new TextEncoder().encode(S),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=X}}try{const{data:E,error:U}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:un(N)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Jt});if(U)throw U;if(!E||!E.session||!E.user){const O=new Fn;return this._returnResult({data:{user:null,session:null},error:O})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:U})}catch(E){if(me(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(t){const s=await sn(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new _k;const{data:l,error:c}=await xe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Jt});if(await ut(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new Fn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:u??null}),error:c})}catch(l){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:s,provider:a,token:u,access_token:l,nonce:c}=t,f=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:Jt}),{data:m,error:y}=f;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const g=new Fn;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,a,u,l,c;try{if("email"in t){const{email:f,options:m}=t;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await Bn(this.storage,this.storageKey));const{error:x}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:g},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:f,options:m}=t,{data:y,error:g}=await xe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(u=m?.data)!==null&&u!==void 0?u:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:g})}throw new Na("You must provide either an email or phone number.")}catch(f){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var s,a;try{let u,l;"options"in t&&(u=(s=t.options)===null||s===void 0?void 0:s.redirectTo,l=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:c,error:f}=await xe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:u,xform:Jt});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,y=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(t){var s,a,u,l,c;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Bn(this.storage,this.storageKey));const y=await xe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=t?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:Jk});return!((l=y.data)===null||l===void 0)&&l.url&&dt()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(f){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new Rt;const{error:u}=await xe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(t){if(me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:u,options:l}=t,{error:c}=await xe(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:a,type:u,options:l}=t,{data:c,error:f}=await xe(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:f})}throw new Na("You must provide either an email or phone number and a type")}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await sn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Gl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const c=await sn(this.userStorage,this.storageKey+"-user");c?.user?t.user=c.user:t.user=Xl()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=Hk(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:u,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Br}):await this._useSession(async s=>{var a,u,l;const{data:c,error:f}=s;if(f)throw f;return!(!((a=c.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rt}:await xe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0,xform:Br})})}catch(s){if(me(s))return Ql(s)&&(await this._removeSession(),await ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:u,error:l}=a;if(l)throw l;if(!u.session)throw new Rt;const c=u.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Bn(this.storage,this.storageKey));const{data:y,error:g}=await xe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:c.access_token,xform:Br});if(g)throw g;return c.user=y.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(a){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rt;const s=Date.now()/1e3;let a=s,u=!0,l=null;const{payload:c}=Ca(t.access_token);if(c.exp&&(a=c.exp,u=a<=s),u){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(s){if(me(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:c,error:f}=s;if(f)throw f;t=(a=c.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new Rt;const{data:u,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(me(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!dt())throw new Ea("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ea(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Gh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ea("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gh("No code detected.");const{data:O,error:L}=await this._exchangeCodeForSession(t.code);if(L)throw L;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:l,refresh_token:c,expires_in:f,expires_at:m,token_type:y}=t;if(!l||!f||!c||!y)throw new Ea("No session defined in URL");const g=Math.round(Date.now()/1e3),x=parseInt(f);let w=g+x;m&&(w=parseInt(m));const b=w-g;b*1e3<=Kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const S=w-x;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,g);const{data:N,error:E}=await this._getUser(l);if(E)throw E;const U={provider_token:a,provider_refresh_token:u,access_token:l,expires_in:x,expires_at:w,refresh_token:c,token_type:y,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:t.type},error:null})}catch(a){if(me(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await sn(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l&&!Ql(l))return this._returnResult({error:l});const c=(a=u.session)===null||a===void 0?void 0:a.access_token;if(c){const{error:f}=await this.admin.signOut(c,t);if(f&&!(wk(f)&&(f.status===404||f.status===401||f.status===403)||Ql(f)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await ut(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=Rk(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,u;try{const{data:{session:l},error:c}=s;if(c)throw c;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((u=this.stateChangeEmitters.get(t))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await Bn(this.storage,this.storageKey,!0));try{return await xe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(l){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:a,error:u}=await this._useSession(async l=>{var c,f,m,y,g;const{data:x,error:w}=l;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await xe(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(y=x.session)===null||y===void 0?void 0:y.access_token)!==null&&g!==void 0?g:void 0})});if(u)throw u;return dt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:t.provider,url:a?.url},error:null})}catch(a){if(me(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var a;try{const{error:u,data:{session:l}}=s;if(u)throw u;const{options:c,provider:f,token:m,access_token:y,nonce:g}=t,x=await xe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=l?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:f,id_token:m,access_token:y,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Jt}),{data:w,error:b}=x;return b?this._returnResult({data:{user:null,session:null},error:b}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new Fn}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:b}))}catch(u){if(await ut(this.storage,`${this.storageKey}-code-verifier`),me(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,u;const{data:l,error:c}=s;if(c)throw c;return await xe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(u=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Ak(async u=>(u>0&&await Ik(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await xe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Jt})),(u,l)=>{const c=200*Math.pow(2,u);return l&&Yl(l)&&Date.now()+c-a<Kn})}catch(a){if(this._debug(s,"error",a),me(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),dt()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await sn(this.storage,this.storageKey);if(u&&this.userStorage){let c=await sn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:u.user},await Jn(this.userStorage,this.storageKey+"-user",c)),u.user=(t=c?.user)!==null&&t!==void 0?t:Xl()}else if(u&&!u.user&&!u.user){const c=await sn(this.storage,this.storageKey+"-user");c&&c?.user?(u.user=c.user,await ut(this.storage,this.storageKey+"-user"),await Jn(this.storage,this.storageKey,u)):u.user=Xl()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const l=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Gl;if(this._debug(a,`session has${l?"":" not"} expired with margin of ${Gl}s`),l){if(this.autoRefreshToken&&u.refresh_token){const{error:c}=await this._callRefreshToken(u.refresh_token);c&&(console.error(c),Yl(c)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(u.access_token);!f&&c?.user?(u.user=c.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(a,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new Rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Wa;const{data:l,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!l.session)throw new Rt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(u,"error",l),me(l)){const c={data:null,error:l};return Yl(l)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(l),l}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(t,s,a=!0){const u=`#_notifyAllSubscribers(${t})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(u,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ut(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await Jn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const l=ef(u);await Jn(this.storage,this.storageKey,l)}else{const u=ef(s);await Jn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ut(this.storage,this.storageKey),await ut(this.storage,this.storageKey+"-code-verifier"),await ut(this.storage,this.storageKey+"-user"),this.userStorage&&await ut(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Kn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-t)/Kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Kn}ms, refresh threshold is ${yu} ticks`),u<=yu&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ep)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[l,c]=await Bn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});u.push(f.toString())}if(a?.queryParams){const l=new URLSearchParams(a.queryParams);u.push(l.toString())}return a?.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${u.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;return l?this._returnResult({data:null,error:l}):await xe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,u;const{data:l,error:c}=s;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:y}=await xe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(t.factorType==="totp"&&m.type==="totp"&&(!((u=m?.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?dv(t.webauthn.credential_response):cv(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l)return this._returnResult({data:null,error:l});const c=await xe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:lv(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:uv(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=s?.factors)!==null&&t!==void 0?t:[])u.all.push(l),l.status==="verified"&&u[l.factor_type].push(l);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(t){var s,a,u,l;if(t)try{const{payload:b}=Ca(t);let S=null;b.aal&&(S=b.aal);let N=S;const{data:{user:E},error:U}=await this.getUser(t);if(U)return this._returnResult({data:null,error:U});((a=(s=E?.factors)===null||s===void 0?void 0:s.filter(q=>q.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(N="aal2");const L=b.amr||[];return{data:{currentLevel:S,nextLevel:N,currentAuthenticationMethods:L},error:null}}catch(b){if(me(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:c},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Ca(c.access_token);let y=null;m.aal&&(y=m.aal);let g=y;((l=(u=c.user.factors)===null||u===void 0?void 0:u.filter(b=>b.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(g="aal2");const w=m.amr||[];return{data:{currentLevel:y,nextLevel:g,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?await xe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Rt})})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:u},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!u)return this._returnResult({data:null,error:new Rt});const c=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&dt()&&!s?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:u},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!u)return this._returnResult({data:null,error:new Rt});const c=await xe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&dt()&&!s?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await xe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Rt})})}catch(t){if(me(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?(await xe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rt})})}catch(s){if(me(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(f=>f.kid===t);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(f=>f.kid===t),a&&this.jwks_cached_at+vk>u)return a;const{data:l,error:c}=await xe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=u,a=l.keys.find(f=>f.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});a=b.session.access_token}const{header:u,payload:l,signature:c,raw:{header:f,payload:m}}=Ca(a);s?.allowExpired||Bk(l.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:l,header:u,signature:c},error:null}}const g=zk(u.alg),x=await crypto.subtle.importKey("jwk",y,g,!0,["verify"]);if(!await crypto.subtle.verify(g,x,c,Ck(`${f}.${m}`)))throw new vu("Invalid JWT signature");return{data:{claims:l,header:u,signature:c},error:null}}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}}ri.nextInstanceID={};const xv=ri,wv="2.94.1";let Vs="";typeof Deno<"u"?Vs="deno":typeof document<"u"?Vs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vs="react-native":Vs="node";const bv={"X-Client-Info":`supabase-js-${Vs}/${wv}`},_v={headers:bv},Sv={schema:"public"},jv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Nv={};function ni(n){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(n)}function Ev(n,t){if(ni(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(ni(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Cv(n){var t=Ev(n,"string");return ni(t)=="symbol"?t:t+""}function Tv(n,t,s){return(t=Cv(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function lf(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function Ve(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?lf(Object(s),!0).forEach(function(a){Tv(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):lf(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const Rv=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Ov=()=>Headers,Pv=(n,t,s)=>{const a=Rv(s),u=Ov();return async(l,c)=>{var f;const m=(f=await t())!==null&&f!==void 0?f:n;let y=new u(c?.headers);return y.has("apikey")||y.set("apikey",n),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),a(l,Ve(Ve({},c),{},{headers:y}))}};function Iv(n){return n.endsWith("/")?n:n+"/"}function Av(n,t){var s,a;const{db:u,auth:l,realtime:c,global:f}=n,{db:m,auth:y,realtime:g,global:x}=t,w={db:Ve(Ve({},m),u),auth:Ve(Ve({},y),l),realtime:Ve(Ve({},g),c),storage:{},global:Ve(Ve(Ve({},x),f),{},{headers:Ve(Ve({},(s=x?.headers)!==null&&s!==void 0?s:{}),(a=f?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function Lv(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Iv(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var $v=class extends xv{constructor(n){super(n)}},Uv=class{constructor(n,t,s){var a,u;this.supabaseUrl=n,this.supabaseKey=t;const l=Lv(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:Sv,realtime:Nv,auth:Ve(Ve({},jv),{},{storageKey:c}),global:_v},m=Av(s??{},f);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=m.auth)!==null&&y!==void 0?y:{},this.headers,m.global.fetch)}this.fetch=Pv(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ve({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new wg(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new pk(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new fg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:a}=await n.auth.getSession();return(t=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:u,storageKey:l,flowType:c,lock:f,debug:m,throwOnError:y},g,x){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $v({url:this.authUrl.href,headers:Ve(Ve({},w),g),storageKey:l,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:u,flowType:c,lock:f,debug:m,throwOnError:y,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Dg(this.realtimeUrl.href,Ve(Ve({},n),{},{params:Ve(Ve({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t?.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Dv=(n,t,s)=>new Uv(n,t,s);function Mv(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Mv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fv="https://mipuxwumpzfzvoxnimuv.supabase.co",Bv="sb_publishable_KNtL05U6y-qfX6Jb0xS6Fg_YM7f0vPu",oe=Dv(Fv,Bv);function zv(){const[n,t]=v.useState(!1);return v.useEffect(()=>{let s=!0;async function a(){const{data:l}=await oe.auth.getUser();s&&t(!!l?.user)}const{data:u}=oe.auth.onAuthStateChange((l,c)=>{t(!!c?.user)});return a(),()=>{s=!1,u?.subscription?.unsubscribe()}},[]),d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Contact - Recipes"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Contact"}),n?d.jsxs("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:["If you have any questions or find any issues let me know at"," ",d.jsx("a",{href:"mailto:josh.baywood@outlook.com",className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:"josh.baywood@outlook.com"}),"."]}):d.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"This website is developed for friends and family. We aren't taking any external invitations at this time."})]})]})}function Ta(n){if(n===""||n===null||n===void 0)return null;const t=Number.parseInt(n,10);return Number.isNaN(t)?null:t}function qv(n){return n==null?!0:Number.isInteger(n)&&n>=0&&n<=3}function Hv({recipeDraft:n,setRecipeDraft:t,onSave:s,saving:a,status:u}){return d.jsxs("section",{className:"p-0",children:[d.jsxs("header",{className:"mb-6",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"New Recipe"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Add the basics now, then build out ingredients and steps next."})]}),d.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Title"}),d.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.title,onChange:l=>t(c=>({...c,title:l.target.value})),placeholder:"Smoky Lemon Pasta"})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Servings"}),d.jsx("input",{type:"number",min:"0",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.servings,onChange:l=>t(c=>({...c,servings:l.target.value})),placeholder:"4"})]}),d.jsxs("label",{className:"form-label md:col-span-2",children:[d.jsx("span",{children:"Description"}),d.jsx("textarea",{className:"min-h-[120px] rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.description,onChange:l=>t(c=>({...c,description:l.target.value})),placeholder:"Notes on flavor, pairings, or a quick story."})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Prep Time (min)"}),d.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.preMinutes,onChange:l=>t(c=>({...c,preMinutes:l.target.value})),placeholder:"15"})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Cook Time (min)"}),d.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.cookMinutes,onChange:l=>t(c=>({...c,cookMinutes:l.target.value})),placeholder:"20"})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Heat Level"}),d.jsx("input",{type:"number",min:"0",max:"3",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.heat,onChange:l=>t(c=>({...c,heat:l.target.value})),placeholder:"0-3"})]})]}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:s,disabled:a,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:a?"Saving...":"Create Recipe"}),u&&d.jsx("span",{className:"text-sm text-sky-500 dark:text-sky-400",children:u})]})]})}function Wv(){const n=ii(),[t,s]=v.useState({title:"",description:"",preMinutes:"",cookMinutes:"",servings:"",heat:""}),[a,u]=v.useState(!1),[l,c]=v.useState("");async function f(){const{data:y,error:g}=await oe.auth.getUser();if(g||!y?.user)throw new Error("You need to be signed in to save recipes.");return y.user.id}async function m(){u(!0),c("");try{const y=await f(),g={title:t.title.trim(),description:t.description.trim(),owner_id:y,pre_minutes:Ta(t.preMinutes),cook_minutes:Ta(t.cookMinutes),servings:Ta(t.servings),heat:Ta(t.heat)};if(!g.title)throw new Error("Recipe title is required.");if(!qv(g.heat))throw new Error("Heat level must be between 0 and 3.");const{data:x,error:w}=await oe.from("recipes").insert(g).select("id").single();if(w)throw w;n(`/recipe/${x.id}/edit`)}catch(y){c(y.message??"Unable to save recipe.")}finally{u(!1)}}return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Create Recipe  Recipes"})}),d.jsx("div",{className:"flex w-full flex-col gap-10 text-left",children:d.jsx(Hv,{recipeDraft:t,setRecipeDraft:s,onSave:m,saving:a,status:l})})]})}const Vv="/recipes/assets/ella-olsson-KPDbRyFOTnE-unsplash-BzfSK5tG.jpg";function Kv(){return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Home - Recipes"})}),d.jsxs("div",{className:"flex flex-col gap-8 pb-4",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-sky-200/80 bg-gradient-to-br from-white via-sky-50 to-cyan-100 p-6 shadow-xl shadow-black/10 dark:border-sky-800/70 dark:from-sky-950 dark:via-sky-900 dark:to-cyan-950/80 dark:shadow-black/30 md:p-10",children:[d.jsx("div",{className:"pointer-events-none absolute -top-20 -right-16 h-52 w-52 rounded-full bg-cyan-300/25 blur-3xl dark:bg-cyan-400/10"}),d.jsx("div",{className:"pointer-events-none absolute -bottom-16 -left-10 h-40 w-40 rounded-full bg-sky-300/35 blur-2xl dark:bg-sky-500/10"}),d.jsxs("div",{className:"relative grid gap-8 md:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)] md:items-center",children:[d.jsxs("div",{className:"space-y-5",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-sky-700 dark:text-sky-300",children:"Meal Planning, Finally Simpler"}),d.jsx("h1",{className:"max-w-2xl text-3xl font-semibold leading-tight text-sky-950 dark:text-white md:text-5xl",children:"Planning meals is hard when your recipes live everywhere."}),d.jsx("p",{className:"max-w-xl text-base text-sky-700 dark:text-sky-200 md:text-lg",children:"Wouldn't it be easier if all your recipes were in one place, your favorites were easy to plan, and new synergies surfaced from fresh ingredients you already use?"})]}),d.jsx("div",{className:"h-[20rem] overflow-hidden rounded-2xl border border-sky-200 bg-white/70 shadow-lg shadow-black/10 dark:border-sky-800 dark:bg-sky-950/60 md:h-[24rem]",children:d.jsx("img",{src:Vv,alt:"Prepared meal ingredients and dishes arranged for planning and cooking",className:"block h-full w-full object-cover object-center",loading:"lazy"})})]})]}),d.jsxs("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-5",children:[d.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"1. Store"}),d.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Add your favorite recipes"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Keep your best meals in one place instead of juggling notes, links, and screenshots."})]}),d.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"2. Plan"}),d.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Plan out your next week"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Build your week quickly from the recipes you already trust."})]}),d.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"3. Discover"}),d.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Get smart recipe suggestions"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Discover recipes that synergize with ingredients you already plan to use."})]}),d.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"4. Shop"}),d.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Go shopping with an automated list"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Check what you already have and buy only what you need."})]}),d.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"5. Cook"}),d.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Cook from your planned recipes"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"No bookmarking or remembering what to make next."})]})]})]})]})}function Jv(){const[n,t]=v.useState(""),[s,a]=v.useState([]),[u,l]=v.useState([]),[c,f]=v.useState(!0),[m,y]=v.useState(""),[g,x]=v.useState(""),[w,b]=v.useState(!1),[S,N]=v.useState(!1),[E,U]=v.useState(""),[O,L]=v.useState(!1),[q,re]=v.useState(null),[X,Z]=v.useState(!1),[P,F]=v.useState(""),[K,pe]=v.useState(!1),[M,H]=v.useState(null),ee=v.useCallback(async()=>{f(!0),y("");const{data:j,error:B}=await oe.auth.getUser();if(B){y(B.message??"Unable to load your account."),f(!1);return}const ne=j?.user;if(!ne){y("Please sign in to view your households."),f(!1);return}t(ne.id);const{data:ue,error:ce}=await oe.from("household_members").select("household_id").eq("user_id",ne.id);if(ce){y(ce.message??"Unable to load household membership."),f(!1);return}const ye=(ue??[]).map(je=>je.household_id).filter(Boolean);if(ye.length>0){const{data:je,error:Be}=await oe.from("households").select("id, name").in("id",ye).order("name");if(Be){y(Be.message??"Unable to load households."),f(!1);return}a(je??[]),l([]),f(!1);return}const{data:ge,error:be}=await oe.from("households").select("id, name").order("name");if(be){y(be.message??"Unable to load households."),f(!1);return}a([]),l(ge??[]),f(!1)},[]);v.useEffect(()=>{ee()},[ee]);const se=async j=>{if(!n||!j)return;x(j),y("");const{error:B}=await oe.from("household_members").insert({user_id:n,household_id:j});if(B){y(B.message??"Unable to join household."),x("");return}x(""),ee()},te=async j=>{if(!n||!j)return;F(j),y("");const{error:B}=await oe.from("household_members").delete().eq("user_id",n).eq("household_id",j);if(B){y(B.message??"Unable to leave household."),F("");return}F(""),ee()},T=j=>{H(j),pe(!0)},I=async()=>{M?.id&&(await te(M.id),pe(!1),H(null))},J=async j=>{if(j.preventDefault(),!E.trim())return;L(!0),y("");const{data:B,error:ne}=await oe.from("households").insert({name:E.trim()}).select("id, name").single();if(ne){y(ne.message??"Unable to create household."),L(!1);return}L(!1),b(!1),U(""),re(B??null),N(!0),ee()},z=async()=>{if(!q?.id||!n)return;Z(!0),y("");const{error:j}=await oe.from("household_members").insert({user_id:n,household_id:q.id});if(j){y(j.message??"Unable to join household."),Z(!1);return}Z(!1),N(!1),re(null),ee()};return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Household - Recipes"})}),d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Your Household"}),c?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading households..."}):m?d.jsx("p",{className:"text-sm text-rose-300",children:m}):s.length>0?d.jsx("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 backdrop-blur dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:d.jsx("div",{className:"flex flex-col gap-4",children:s.map(j=>d.jsx("div",{className:"flex flex-col gap-4",children:d.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:["You are part of the ",j.name||"Untitled household"," household."]}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Now you can meal plan together, share menus, and generate shopping lists."})]}),d.jsx("button",{type:"button",onClick:()=>T(j),disabled:P===j.id||K,className:"w-full rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-70 md:w-auto md:self-start dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white",children:P===j.id?"Leaving":"Leave"})]})},j.id))})}):d.jsxs("section",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"You are not in a household yet"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Pick a household to join and start planning together."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3 text-left",children:[d.jsx("span",{className:"text-sm font-semibold text-sky-700 dark:text-sky-200",children:"All households"}),d.jsx("button",{type:"button",onClick:()=>b(!0),className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Create household"})]}),u.length===0?d.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No households available right now."}):d.jsx("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:u.map(j=>d.jsxs("button",{type:"button",onClick:()=>se(j.id),disabled:g===j.id,className:"flex items-center justify-between rounded-xl border border-sky-200 bg-white px-4 py-3 text-left text-sm font-semibold text-sky-800 transition hover:border-sky-400 hover:bg-sky-100 disabled:cursor-not-allowed disabled:opacity-70 dark:border-sky-800 dark:bg-sky-950/70 dark:text-sky-100 dark:hover:border-sky-600 dark:hover:bg-sky-900",children:[d.jsx("span",{children:j.name||"Untitled household"}),d.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:g===j.id?"Joining":"Join"})]},j.id))})]})]}),w?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Create a household"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Give your household a name so others can find it."}),d.jsxs("form",{onSubmit:J,className:"mt-6 flex flex-col gap-4",children:[d.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Name",d.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:E,onChange:j=>U(j.target.value),placeholder:"Sunday Supper Club",autoFocus:!0})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{b(!1),U("")},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:!E.trim()||O,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:O?"Creating...":"Create household"})]})]})]})}):null,S&&q?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Join your new household?"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You just created ",d.jsx("span",{className:"font-semibold",children:q.name}),". Want to join it now?"]}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{N(!1),re(null)},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Not now"}),d.jsx("button",{type:"button",onClick:z,disabled:X,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:X?"Joining...":"Join household"})]})]})}):null,K&&M?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Leave this household?"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to leave ",M.name||"Untitled household",". You can rejoin later if needed."]}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{pe(!1),H(null)},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"button",onClick:I,disabled:P===M.id,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-rose-500 dark:hover:bg-rose-400",children:P===M.id?"Leaving...":"Leave household"})]})]})}):null]})}const Gv=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"];async function eu(){const[{data:n,error:t},{data:s,error:a}]=await Promise.all([oe.from("ingredients").select("id, name, is_synergy_core, default_unit, default_quantity, supermarket_section").order("name",{ascending:!0}),oe.from("recipe_ingredients").select("ingredient_id")]);if(t)return{error:t.message??"Unable to load ingredients.",data:[]};if(a)return{error:a.message??"Unable to load ingredient usage.",data:[]};const u=new Map;return(s??[]).forEach(c=>{const f=c?.ingredient_id;f&&u.set(f,(u.get(f)??0)+1)}),{error:"",data:(n??[]).map(c=>({...c,usageCount:u.get(c.id)??0}))}}function Qv(){const[n,t]=v.useState([]),[s,a]=v.useState(!0),[u,l]=v.useState(""),[c,f]=v.useState(null),[m,y]=v.useState(""),[g,x]=v.useState(""),[w,b]=v.useState(""),[S,N]=v.useState(""),[E,U]=v.useState(!1),[O,L]=v.useState(!1),[q,re]=v.useState(""),[X,Z]=v.useState(""),[P,F]=v.useState(null),[K,pe]=v.useState(!1),[M,H]=v.useState(""),[ee,se]=v.useState(null),[te,T]=v.useState([]),[I,J]=v.useState(!1),[z,j]=v.useState(""),B=v.useMemo(()=>{const ie=n.length;return ie===1?"1 ingredient":`${ie} ingredients`},[n]);v.useEffect(()=>{let ie=!0;async function Ke(){a(!0),l("");const{data:Ne,error:De}=await eu();ie&&(De?(l(De),t(Ne??[])):t(Ne??[]),a(!1))}return Ke(),()=>{ie=!1}},[]);const ne=ie=>{f(ie),y(ie.name||""),x(ie.default_unit||""),b(ie.default_quantity??""),N(ie.supermarket_section||""),U(!!ie.is_synergy_core),re("")},ue=()=>{O||(f(null),re(""))},ce=ie=>{F(ie),H("")},ye=()=>{K||(F(null),H(""))},ge=async ie=>{if(ie.preventDefault(),!c?.id)return;const Ke=m.trim(),Ne=g.trim(),De=String(w??"").trim()!=="",Oe=De?Number.parseInt(w,10):null;if(!Ke){re("Ingredient name is required.");return}if(De&&Number.isNaN(Oe)||De&&String(Oe)!==String(w).trim()||De&&Oe<=0){re("Default quantity must be a whole number greater than 0.");return}L(!0),re(""),Z("");const{error:ze}=await oe.from("ingredients").update({name:Ke,default_unit:Ne||null,default_quantity:Oe,supermarket_section:S||null,is_synergy_core:E}).eq("id",c.id);if(ze){re(ze.message??"Unable to save ingredient."),L(!1);return}const{data:ct,error:et}=await eu();if(et){re(et||"Saved, but failed to refresh ingredients."),L(!1);return}t(ct??[]),f(null),L(!1),Z(`Saved ${Ke}.`),setTimeout(()=>{Z("")},2500)},be=async()=>{if(!P?.id)return;const ie=P.name||"ingredient";pe(!0),H(""),Z("");const{error:Ke}=await oe.from("ingredients").delete().eq("id",P.id);if(Ke){const Oe=Ke.code==="23503"||/foreign key|recipe_ingredients|constraint/i.test(Ke.message||"");H(Oe?"Cannot delete this ingredient because it is used in one or more recipes.":Ke.message??"Unable to delete ingredient."),pe(!1);return}const{data:Ne,error:De}=await eu();if(De){H(De||"Deleted, but failed to refresh ingredients."),pe(!1);return}t(Ne??[]),F(null),pe(!1),Z(`Deleted ${ie}.`),setTimeout(()=>{Z("")},2500)},je=async ie=>{if(!ie?.id||!ie.usageCount)return;se(ie),T([]),J(!0),j("");const{data:Ke,error:Ne}=await oe.from("recipe_ingredients").select("recipes ( id, title )").eq("ingredient_id",ie.id);if(Ne){j(Ne.message??"Unable to load recipes for this ingredient."),J(!1);return}const De=new Map;(Ke??[]).forEach(ze=>{const ct=ze?.recipes;ct?.id&&De.set(ct.id,{id:ct.id,title:ct.title||"Untitled recipe"})});const Oe=Array.from(De.values()).sort((ze,ct)=>ze.title.localeCompare(ct.title));T(Oe),J(!1)},Be=()=>{I||(se(null),T([]),j(""))};return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Ingredients - Recipes"})}),d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Ingredients"}),d.jsx("p",{className:"mt-1 text-sm text-sky-600 dark:text-sky-300",children:"All ingredients defined in your database."})]}),d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:B})]}),X?d.jsx("p",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 dark:border-emerald-500/40 dark:bg-emerald-900/20 dark:text-emerald-200",children:X}):null,s?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading ingredients..."}):u?d.jsx("p",{className:"text-sm text-rose-300",children:u}):n.length===0?d.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"No ingredients found."})}):d.jsx("div",{className:"overflow-hidden rounded-2xl border border-sky-200 bg-white shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full text-left text-sm",children:[d.jsx("thead",{className:"border-b border-sky-200 bg-sky-50 text-xs font-semibold uppercase tracking-[0.18em] text-sky-600 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3",children:"Name"}),d.jsx("th",{className:"px-4 py-3",children:"Default Unit"}),d.jsx("th",{className:"px-4 py-3",children:"Default Quantity"}),d.jsx("th",{className:"px-4 py-3",children:"Supermarket Section"}),d.jsx("th",{className:"px-4 py-3",children:"Synergy Core"}),d.jsx("th",{className:"px-4 py-3",children:"Used"}),d.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),d.jsx("tbody",{children:n.map(ie=>d.jsxs("tr",{className:"border-b border-sky-100/80 text-sky-800 last:border-0 dark:border-sky-800/70 dark:text-sky-100",children:[d.jsx("td",{className:"px-4 py-3 font-semibold",children:ie.name||"Unnamed ingredient"}),d.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:ie.default_unit||""}),d.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:ie.default_quantity||""}),d.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:ie.supermarket_section||""}),d.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:ie.is_synergy_core?"Yes":"No"}),d.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:ie.usageCount>0?d.jsx("button",{type:"button",onClick:()=>je(ie),className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:ie.usageCount}):d.jsx("span",{children:ie.usageCount})}),d.jsx("td",{className:"px-4 py-3 text-right",children:d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>ne(ie),className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"}),d.jsx("button",{type:"button",onClick:()=>ce(ie),className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:"Delete"})]})})]},ie.id))})]})})})]}),c?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Edit ingredient"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Update details for this ingredient."}),d.jsxs("form",{onSubmit:ge,className:"mt-6 flex flex-col gap-4",children:[d.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Name",d.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:m,onChange:ie=>y(ie.target.value),placeholder:"Tomato",autoFocus:!0})]}),d.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Default unit",d.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:g,onChange:ie=>x(ie.target.value),placeholder:"g"})]}),d.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Default quantity",d.jsx("input",{type:"number",min:"1",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:w,onChange:ie=>b(ie.target.value),placeholder:"1"})]}),d.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Supermarket section",d.jsxs("select",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",value:S,onChange:ie=>N(ie.target.value),children:[d.jsx("option",{value:"",children:"Select section"}),Gv.map(ie=>d.jsx("option",{value:ie,children:ie},ie))]})]}),d.jsxs("label",{className:"flex items-center gap-3 text-sm font-semibold text-sky-800 dark:text-sky-100",children:[d.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-200",checked:E,onChange:ie=>U(ie.target.checked)}),"Is synergy core ingredient"]}),q?d.jsx("p",{className:"text-sm text-rose-300",children:q}):null,d.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:ue,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:O,children:"Cancel"}),d.jsx("button",{type:"submit",disabled:O||!m.trim(),className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:O?"Saving...":"Save changes"})]})]})]})}):null,P?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Delete this ingredient?"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to remove"," ",d.jsx("span",{className:"font-semibold",children:P.name||"this ingredient"}),"."]}),M?d.jsx("p",{className:"mt-3 text-sm text-rose-300",children:M}):null,d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:ye,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:K,children:"Cancel"}),d.jsx("button",{type:"button",onClick:be,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400",disabled:K,children:K?"Deleting...":"Delete"})]})]})}):null,ee?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsxs("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:[ee.name||"This ingredient"," is used in"," ",ee.usageCount," recipe",ee.usageCount===1?"":"s","."]}),I?d.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"Loading recipes..."}):z?d.jsx("p",{className:"mt-4 text-sm text-rose-300",children:z}):te.length===0?d.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No recipes found for this ingredient."}):d.jsx("ul",{className:"mt-4 max-h-72 list-disc overflow-auto pl-6 text-sm text-sky-700 dark:text-sky-200",children:te.map(ie=>d.jsx("li",{className:"py-1",children:d.jsx(Se,{to:`/recipe/${ie.id}/view`,className:"transition hover:text-sky-900 hover:underline dark:hover:text-white",children:ie.title})},ie.id))}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx("button",{type:"button",onClick:Be,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:I,children:"Close"})})]})}):null]})}function Yv(){const[n,t]=v.useState(""),[s,a]=v.useState(!1),[u,l]=v.useState(null),[c,f]=v.useState(null),m=ii(),y=new URL("/recipes/",window.location.origin).toString();v.useEffect(()=>{let x=!0;async function w(){const{data:S}=await oe.auth.getUser();x&&S?.user&&m("/",{replace:!0})}const{data:b}=oe.auth.onAuthStateChange((S,N)=>{N?.user&&m("/",{replace:!0})});return w(),()=>{x=!1,b?.subscription?.unsubscribe()}},[m]);const g=async x=>{x.preventDefault(),a(!0),l(null),f(null);const{error:w}=await oe.auth.signInWithOtp({email:n,options:{emailRedirectTo:y}});w?f(w.message):l("Check your email for your magic link!"),a(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Sign In  Recipes"})}),d.jsxs("div",{className:"flex min-h-[60vh] flex-col items-center justify-center gap-6 text-center",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-sky-500 dark:text-sky-400",children:"Account"}),d.jsx("h1",{className:"text-2xl font-semibold",children:"Friends & Family Access"}),d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["This app is shared with friends and family only. Want access to build your own lists?"," ",d.jsx(Se,{className:"text-sky-900 underline dark:text-white",to:"/contact",children:"Reach out"})," ","and we'll help."]})]}),d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white/80 p-6 text-left shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[u?d.jsxs("div",{className:"mb-5 rounded-xl border border-emerald-200 bg-emerald-50 p-4 text-center text-emerald-900 dark:border-emerald-900/70 dark:bg-emerald-950/50 dark:text-emerald-100",children:[d.jsx("p",{className:"font-medium",children:u}),d.jsx("p",{className:"mt-1 text-xs text-emerald-700/80 dark:text-emerald-200/80",children:"This link expires in 1 hour."})]}):null,c?d.jsx("div",{className:"mb-5 rounded-xl border border-rose-200 bg-rose-50 p-4 text-center text-rose-900 dark:border-rose-900/70 dark:bg-rose-950/50 dark:text-rose-100",children:d.jsx("p",{className:"font-medium",children:c})}):null,d.jsxs("form",{className:"space-y-5",onSubmit:g,children:[d.jsxs("div",{children:[d.jsx("label",{className:"form-label",htmlFor:"email",children:d.jsx("span",{children:"Email address"})}),d.jsx("input",{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:x=>t(x.target.value),required:!0,className:"w-full rounded-xl border border-sky-200 bg-white px-4 py-3 text-sky-900 placeholder:text-sky-400 focus:border-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-sky-500 dark:focus:border-white dark:focus:ring-white/40"})]}),d.jsx("button",{type:"submit",disabled:s,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-sky-900 px-6 py-3 font-semibold text-white shadow-lg shadow-black/10 transition hover:-transky-y-0.5 hover:bg-sky-800 disabled:transky-y-0 disabled:cursor-not-allowed disabled:bg-sky-300 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:s?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-sky-200/40 border-t-sky-200 dark:border-sky-900/40 dark:border-t-sky-900"}),"Sending..."]}):"Send Magic Link"})]}),d.jsx("p",{className:"mt-5 text-center text-xs text-sky-500 dark:text-sky-400",children:"No password required. We'll email you a secure sign-in link."})]})]})]})}function Xv(){const n=ii(),[t,s]=v.useState(null),[a,u]=v.useState([]),[l,c]=v.useState([]),[f,m]=v.useState(!0),[y,g]=v.useState(""),[x,w]=v.useState(!1),[b,S]=v.useState(""),[N,E]=v.useState(!1);v.useEffect(()=>{let L=!0;async function q(){m(!0),g("");const{data:re,error:X}=await oe.auth.getUser();if(!L)return;if(X){g(X.message??"Unable to load your account."),m(!1);return}const Z=re?.user;if(!Z){g("Please sign in to manage your menu."),m(!1);return}const{data:P,error:F}=await oe.from("household_members").select("household_id").eq("user_id",Z.id).limit(1).maybeSingle();if(F){g(F.message??"Unable to load household membership."),m(!1);return}if(!P?.household_id){s(null),u([]),c([]),m(!1);return}const{data:K,error:pe}=await oe.from("households").select("id, name").eq("id",P.household_id).single();if(pe){g(pe.message??"Unable to load household."),m(!1);return}s(K??null);const[M,H]=await Promise.all([oe.from("plan_recipes").select("recipe_id").eq("household_id",P.household_id),oe.from("menu_recipes").select("recipe_id").eq("household_id",P.household_id)]);if(M.error){g(M.error.message??"Unable to load plan recipes."),m(!1);return}if(H.error){g(H.error.message??"Unable to load menu recipes."),m(!1);return}const ee=(M.data??[]).map(J=>J.recipe_id).filter(Boolean),se=(H.data??[]).map(J=>J.recipe_id).filter(Boolean),[te,T]=await Promise.all([ee.length>0?oe.from("recipes").select("id, title").in("id",ee).order("title"):Promise.resolve({data:[],error:null}),se.length>0?oe.from("recipes").select("id, title").in("id",se).order("title"):Promise.resolve({data:[],error:null})]);if(te.error){g(te.error.message??"Unable to load plan recipes."),m(!1);return}if(T.error){g(T.error.message??"Unable to load menu recipes."),m(!1);return}const I=J=>(J??[]).map(z=>({id:z.id,title:z.title||"Untitled recipe"}));u(I(te.data)),c(I(T.data)),m(!1)}return q(),()=>{L=!1}},[]);const U=L=>{S(L),w(!0)},O=async()=>{if(!t?.id||a.length===0)return;E(!0),g("");const L=a.map(re=>re.id);if(b==="replace"){const{error:re}=await oe.from("menu_recipes").delete().eq("household_id",t.id);if(re){g(re.message??"Unable to replace menu recipes."),E(!1);return}}if(b==="add"||b==="replace"){const re=new Set(l.map(Z=>Z.id)),X=L.filter(Z=>b==="replace"||!re.has(Z)).map(Z=>({household_id:t.id,recipe_id:Z}));if(X.length>0){const{error:Z}=await oe.from("menu_recipes").insert(X);if(Z){g(Z.message??"Unable to update menu recipes."),E(!1);return}}}const{error:q}=await oe.from("plan_recipes").delete().eq("household_id",t.id);if(q){g(q.message??"Unable to clear plan recipes."),E(!1);return}E(!1),w(!1),n("/menu",{replace:!0})};return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Move to Menu - Recipes"})}),d.jsx("div",{className:"flex flex-col gap-6",children:f?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading menu migration..."}):y?d.jsx("p",{className:"text-sm text-rose-300",children:y}):t?d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Ready to start cooking?"}),d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Once you have purchased the ingredients for your planned meals, you can add them to your ready to go menu."}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_auto_1fr] lg:items-start",children:[d.jsxs("section",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Planned recipes"}),a.length===0?d.jsx("p",{className:"mt-3 text-sm text-sky-600 dark:text-sky-300",children:"No recipes in the plan yet."}):d.jsx("ul",{className:"mt-4 flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:a.map(L=>d.jsx("li",{className:"rounded-lg border border-sky-100 bg-white px-3 py-2 font-semibold text-sky-900 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-100",children:L.title},L.id))})]}),d.jsx("div",{className:"flex items-center justify-center text-2xl font-semibold text-sky-400 dark:text-sky-600",children:""}),d.jsxs("section",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Menu recipes"}),l.length===0?d.jsx("p",{className:"mt-3 text-sm text-sky-600 dark:text-sky-300",children:"No recipes on the menu yet."}):d.jsx("ul",{className:"mt-4 flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:l.map(L=>d.jsx("li",{className:"rounded-lg border border-sky-100 bg-white px-3 py-2 font-semibold text-sky-900 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-100",children:L.title},L.id))})]})]}),d.jsxs("section",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>U("add"),disabled:a.length===0,className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Add plan to menu"}),d.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"or"}),d.jsx("button",{type:"button",onClick:()=>U("replace"),disabled:a.length===0,className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Replace menu with plan"})]})]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to manage its menu."]})})}),x?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Confirm menu update"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:b==="replace"?"This will replace every recipe on the menu with your current plan.":"This will add planned recipes to the menu and keep what is already there."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>w(!1),className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"button",onClick:O,disabled:N,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:N?"Working...":"Confirm"})]})]})}):null]})}function Ou({sortBy:n,onSortByChange:t,sortDirection:s,onSortDirectionChange:a,selectedIngredients:u,onSelectedIngredientsChange:l,selectedServings:c,onSelectedServingsChange:f,recipes:m,className:y=""}){const g=v.useMemo(()=>{const S=new Set;return(m??[]).forEach(N=>{(N.ingredients??[]).forEach(E=>{const U=E?.name?.trim();U&&S.add(U)})}),Array.from(S).sort((N,E)=>N.localeCompare(E))},[m]),x=v.useMemo(()=>new Set(u??[]),[u]),w=v.useMemo(()=>{const S=new Set;return(m??[]).forEach(N=>{const E=N?.servings;E==null||E===""||S.add(E)}),Array.from(S).sort((N,E)=>N-E)},[m]),b=S=>{const N=x.has(S)?(u??[]).filter(E=>E!==S):[...u??[],S];l(N)};return d.jsxs("div",{className:`flex flex-col gap-3 md:flex-row md:items-end ${y}`.trim(),children:[d.jsxs("label",{className:"form-label",children:["Sort By",d.jsxs("select",{value:n,onChange:S=>t(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[d.jsx("option",{value:"alphabetical",children:"Alphabetical"}),d.jsx("option",{value:"cook-time",children:"Cook time"}),d.jsx("option",{value:"heat-level",children:"Heat level"})]})]}),d.jsxs("label",{className:"form-label",children:["Direction",d.jsxs("select",{value:s,onChange:S=>a(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[d.jsx("option",{value:"asc",children:"Ascending"}),d.jsx("option",{value:"desc",children:"Descending"})]})]}),d.jsxs("label",{className:"form-label",children:["Serves",d.jsxs("select",{value:c,onChange:S=>f(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[d.jsx("option",{value:"",children:"Any"}),w.map(S=>d.jsx("option",{value:String(S),children:S},S))]})]}),d.jsxs("div",{className:"form-label min-w-[16rem]",children:[d.jsx("span",{children:"Ingredients"}),d.jsxs("details",{className:"group relative",children:[d.jsx("summary",{className:"cursor-pointer list-none rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none transition hover:border-sky-400 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100",children:u?.length?`${u.length} selected`:"All ingredients"}),d.jsxs("div",{className:"absolute z-20 mt-2 w-80 max-w-[90vw] rounded-lg border border-sky-200 bg-white p-3 shadow-xl shadow-black/10 dark:border-sky-800 dark:bg-sky-950 dark:shadow-black/30",children:[d.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[d.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"Select one or more"}),d.jsx("button",{type:"button",onClick:()=>l([]),className:"rounded-full border border-sky-200 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Clear"})]}),g.length===0?d.jsx("p",{className:"text-xs normal-case tracking-normal text-sky-500 dark:text-sky-400",children:"No ingredients available."}):d.jsx("ul",{className:"max-h-56 overflow-auto pr-1 text-sm normal-case tracking-normal text-sky-800 dark:text-sky-100",children:g.map(S=>d.jsx("li",{children:d.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded px-2 py-1.5 hover:bg-sky-50 dark:hover:bg-sky-900/60",children:[d.jsx("input",{type:"checkbox",checked:x.has(S),onChange:()=>b(S),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-200"}),d.jsx("span",{children:S})]})},S))})]})]})]})]})}function uf(n){return n==null||n===""?"":`${n} min`}function tu(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function Zv(){const[n,t]=v.useState(null),[s,a]=v.useState([]),[u,l]=v.useState(!0),[c,f]=v.useState(""),[m,y]=v.useState(""),[g,x]=v.useState(!1),[w,b]=v.useState(""),[S,N]=v.useState(""),[E,U]=v.useState("alphabetical"),[O,L]=v.useState("asc"),[q,re]=v.useState([]),[X,Z]=v.useState("");v.useEffect(()=>{let M=!0;async function H(){l(!0),f("");const{data:ee,error:se}=await oe.auth.getUser();if(!M)return;if(se){f(se.message??"Unable to load your account."),l(!1);return}const te=ee?.user;if(!te){f("Please sign in to view your menu."),l(!1);return}const{data:T,error:I}=await oe.from("household_members").select("household_id").eq("user_id",te.id).limit(1).maybeSingle();if(I){f(I.message??"Unable to load household membership."),l(!1);return}if(!T?.household_id){t(null),a([]),l(!1);return}const{data:J,error:z}=await oe.from("households").select("id, name").eq("id",T.household_id).single();if(z){f(z.message??"Unable to load household."),l(!1);return}t(J??null);const{data:j,error:B}=await oe.from("menu_recipes").select("recipe_id").eq("household_id",T.household_id);if(B){f(B.message??"Unable to load menu recipes."),a([]),l(!1);return}const ne=(j??[]).map(ge=>ge.recipe_id).filter(Boolean);if(ne.length===0){a([]),l(!1);return}const{data:ue,error:ce}=await oe.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit ) )").in("id",ne).order("title");if(ce){f(ce.message??"Unable to load menu recipes."),a([]),l(!1);return}const ye=(ue??[]).map(ge=>({id:ge.id,title:ge.title,description:ge.description,pre_minutes:ge.pre_minutes,cook_minutes:ge.cook_minutes,servings:ge.servings,heat:ge.heat,ingredients:(ge.recipe_ingredients??[]).map(be=>({id:be.ingredients?.id??be.ingredient_id,name:be.ingredients?.name??"Unnamed ingredient",quantity:be.quantity,unit:be.unit,defaultUnit:be.ingredients?.default_unit}))}));a(ye),l(!1)}return H(),()=>{M=!1}},[]);const P=async M=>{if(!n?.id||!M)return;y(M),f("");const{error:H}=await oe.from("menu_recipes").delete().eq("household_id",n.id).eq("recipe_id",M);if(H){f(H.message??"Unable to remove recipe."),y("");return}y(""),a(ee=>ee.filter(se=>se.id!==M))},F=(M,H)=>{b(M),N(H),x(!0)},K=async()=>{w&&(await P(w),x(!1),b(""),N(""))},pe=v.useMemo(()=>{const M=q.length>0?s.filter(te=>te.ingredients?.some(T=>q.includes(T.name))):s,H=X===""?null:Number.parseInt(X,10),se=[...H===null||Number.isNaN(H)?M:M.filter(te=>te.servings===H)].sort((te,T)=>{if(E==="cook-time"){const I=te.cook_minutes??Number.POSITIVE_INFINITY,J=T.cook_minutes??Number.POSITIVE_INFINITY;if(I!==J)return I-J}if(E==="heat-level"){const I=te.heat??Number.POSITIVE_INFINITY,J=T.heat??Number.POSITIVE_INFINITY;if(I!==J)return I-J}return(te.title||"Untitled Recipe").localeCompare(T.title||"Untitled Recipe")});return O==="desc"&&se.reverse(),se},[s,q,X,E,O]);return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Menu - Recipes"})}),d.jsx("div",{className:"flex flex-col gap-6",children:u?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading menu..."}):c?d.jsx("p",{className:"text-sm text-rose-300",children:c}):n?s.length===0?d.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["No menu recipes yet for ",n.name||"your household","."]})}):d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsxs("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:["Menu at ",n?.name||"your home"]}),d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["These are the recipes you picked and planned for. You can mark them off as you cook them, or plan your next batch of meals"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/plan",children:"here"}),"."]})]}),d.jsx(Ou,{sortBy:E,onSortByChange:U,sortDirection:O,onSortDirectionChange:L,selectedIngredients:q,onSelectedIngredientsChange:re,selectedServings:X,onSelectedServingsChange:Z,recipes:s}),pe.length===0?d.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:[d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"No menu recipes match this filter."}),d.jsx("p",{className:"text-xs text-sky-500 dark:text-sky-500",children:"Try another ingredient filter or update your menu."})]}):pe.map(M=>d.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-sky-100 bg-white/90 px-4 py-4 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20 md:flex-row md:items-start md:justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:M.title||"Untitled recipe"}),M.pre_minutes!==null&&M.pre_minutes!==void 0&&M.pre_minutes!==""||M.cook_minutes!==null&&M.cook_minutes!==void 0&&M.cook_minutes!==""||M.servings!==null&&M.servings!==void 0&&M.servings!==""||tu(M.heat)?d.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[M.pre_minutes!==null&&M.pre_minutes!==void 0&&M.pre_minutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",uf(M.pre_minutes)]}):null,M.cook_minutes!==null&&M.cook_minutes!==void 0&&M.cook_minutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",uf(M.cook_minutes)]}):null,M.servings!==null&&M.servings!==void 0&&M.servings!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",M.servings]}):null,tu(M.heat)?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:tu(M.heat)}):null]}):null,M.description?d.jsx("p",{className:"mt-1 text-sm text-sky-600 dark:text-sky-300",children:M.description}):null]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx(Se,{to:`/recipe/${M.id}/view`,className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"View"}),d.jsx("button",{type:"button",onClick:()=>F(M.id,"done"),disabled:m===M.id||g,className:"rounded-full border border-emerald-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 transition hover:border-emerald-400 hover:text-emerald-800 disabled:cursor-not-allowed disabled:opacity-60 dark:border-emerald-500/40 dark:text-emerald-200 dark:hover:border-emerald-400 dark:hover:text-emerald-100",children:"Done"}),d.jsx("button",{type:"button",onClick:()=>F(M.id,"delete"),disabled:m===M.id||g,className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 disabled:cursor-not-allowed disabled:opacity-60 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:m===M.id?"Removing...":"Delete"})]})]},M.id))]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view its menu."]})})}),g?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:S==="delete"?"Delete this recipe?":"Mark recipe as done?"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"This will remove the recipe from your menu."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{x(!1),b(""),N("")},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"button",onClick:K,disabled:m===w,className:S==="delete"?"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400":"rounded-full bg-emerald-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-emerald-500 dark:hover:bg-emerald-400",children:m===w?"Removing...":S==="delete"?"Delete":"Done"})]})]})}):null]})}function ru(n,t,s){const a=t||s||"",u=a.toLowerCase();return n==null||n===""?u==="count"?"":a:a?u==="count"?`${n}`:`${n} ${a}`:`${n}`}function Wn(n){return n==null||n===""?"":`${n} min`}function fr(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function ex(){const[n,t]=v.useState(null),[s,a]=v.useState([]),[u,l]=v.useState([]),[c,f]=v.useState([]),[m,y]=v.useState(new Map),[g,x]=v.useState(new Set),[w,b]=v.useState(!0),[S,N]=v.useState(""),[E,U]=v.useState(""),[O,L]=v.useState(""),[q,re]=v.useState("alphabetical"),[X,Z]=v.useState("asc"),[P,F]=v.useState([]),[K,pe]=v.useState(""),M=(T,I)=>{const J=new Set(T.map(ne=>ne.id)),z=new Set(T.flatMap(ne=>ne.ingredients.filter(ue=>ue.isSynergyCore).map(ue=>ue.id))),j=new Map,B=I.filter(ne=>!J.has(ne.id)).filter(ne=>ne.ingredients.some(ue=>ue.isSynergyCore&&z.has(ue.id))).map(ne=>{const ue=ne.ingredients.filter(ce=>ce.isSynergyCore&&z.has(ce.id)).map(ce=>ce.name);return j.set(ne.id,ue),ne});f(B),y(j)};v.useEffect(()=>{let T=!0;async function I(){b(!0),N("");const{data:J,error:z}=await oe.auth.getUser();if(!T)return;if(z){N(z.message??"Unable to load your account."),b(!1);return}const j=J?.user;if(!j){N("Please sign in to view your plan."),b(!1);return}const{data:B,error:ne}=await oe.from("household_members").select("household_id").eq("user_id",j.id).limit(1).maybeSingle();if(ne){N(ne.message??"Unable to load household membership."),b(!1);return}if(!B?.household_id){t(null),a([]),b(!1);return}const{data:ue,error:ce}=await oe.from("households").select("id, name").eq("id",B.household_id).single();if(ce){N(ce.message??"Unable to load household."),b(!1);return}t(ue??null);const{data:ye,error:ge}=await oe.from("plan_recipes").select("recipe_id").eq("household_id",B.household_id);if(ge){N(ge.message??"Unable to load plan recipes."),a([]),b(!1);return}const be=(ye??[]).map(Ne=>Ne.recipe_id).filter(Boolean);x(new Set(be));let je=[];if(be.length>0){const{data:Ne,error:De}=await oe.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, is_synergy_core ) )").in("id",be).order("title");if(De){N(De.message??"Unable to load planned recipes."),a([]),b(!1);return}const Oe=(Ne??[]).map(ze=>{const ct=(ze.recipe_ingredients??[]).map(et=>({id:et.ingredients?.id??et.ingredient_id,name:et.ingredients?.name??"Unnamed ingredient",quantity:et.quantity,unit:et.unit,defaultUnit:et.ingredients?.default_unit,isSynergyCore:et.ingredients?.is_synergy_core??!1,notes:et.notes})).sort((et,vr)=>et.name.localeCompare(vr.name));return{id:ze.id,title:ze.title||"Untitled recipe",description:ze.description,preMinutes:ze.pre_minutes,cookMinutes:ze.cook_minutes,servings:ze.servings,heat:ze.heat,ingredients:ct}});je=Oe,a(Oe)}else a([]);const{data:Be,error:ie}=await oe.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, is_synergy_core ) )").order("title");if(ie){N(ie.message??"Unable to load recipes."),l([]),b(!1);return}const Ke=(Be??[]).map(Ne=>{const De=(Ne.recipe_ingredients??[]).map(Oe=>({id:Oe.ingredients?.id??Oe.ingredient_id,name:Oe.ingredients?.name??"Unnamed ingredient",quantity:Oe.quantity,unit:Oe.unit,defaultUnit:Oe.ingredients?.default_unit,isSynergyCore:Oe.ingredients?.is_synergy_core??!1,notes:Oe.notes})).sort((Oe,ze)=>Oe.name.localeCompare(ze.name));return{id:Ne.id,title:Ne.title||"Untitled recipe",description:Ne.description,preMinutes:Ne.pre_minutes,cookMinutes:Ne.cook_minutes,servings:Ne.servings,heat:Ne.heat,ingredients:De}});l(Ke),M(je,Ke),b(!1)}return I(),()=>{T=!1}},[]);const H=async T=>{if(!n?.id||!T)return;U(T),N("");const{error:I}=await oe.from("plan_recipes").insert({household_id:n.id,recipe_id:T});if(I){N(I.message??"Unable to add recipe to plan."),U("");return}U(""),x(J=>new Set([...J,T])),a(J=>{const z=u.find(B=>B.id===T);if(!z)return J;const j=[...J,z];return M(j,u),j})},ee=async T=>{if(!n?.id||!T)return;L(T),N("");const{error:I}=await oe.from("plan_recipes").delete().eq("household_id",n.id).eq("recipe_id",T);if(I){N(I.message??"Unable to remove recipe from plan."),L("");return}L(""),x(J=>{const z=new Set(J);return z.delete(T),z}),a(J=>{const z=J.filter(j=>j.id!==T);return M(z,u),z})},se=v.useMemo(()=>u.filter(T=>!g.has(T.id)),[u,g]),te=v.useMemo(()=>{const T=P.length>0?se.filter(j=>j.ingredients.some(B=>P.includes(B.name))):se,I=K===""?null:Number.parseInt(K,10),z=[...I===null||Number.isNaN(I)?T:T.filter(j=>j.servings===I)].sort((j,B)=>{if(q==="cook-time"){const ne=j.cookMinutes??Number.POSITIVE_INFINITY,ue=B.cookMinutes??Number.POSITIVE_INFINITY;if(ne!==ue)return ne-ue}if(q==="heat-level"){const ne=j.heat??Number.POSITIVE_INFINITY,ue=B.heat??Number.POSITIVE_INFINITY;if(ne!==ue)return ne-ue}return j.title.localeCompare(B.title)});return X==="desc"&&z.reverse(),z},[P,K,q,X,se]);return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Plan - Recipes"})}),d.jsx("div",{className:"flex flex-col gap-6",children:w?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading plan..."}):S?d.jsx("p",{className:"text-sm text-rose-300",children:S}):n?d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Planned recipes"}),d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Planned recipes help you create a"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/shop",children:"shopping list"}),"."]}),d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Once you have purchased all the ingredients in your plan you can promote the plan to the menu."})]}),d.jsxs("span",{className:"hidden text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400 md:inline-block",children:[s.length," total"]})]}),s.length===0?d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["No planned recipes yet for ",n.name||"your household","."]}):d.jsx("div",{className:"flex flex-col gap-4",children:s.map(T=>d.jsx("div",{className:"rounded-xl border border-sky-100 bg-white/90 px-4 py-4 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20",children:d.jsxs("div",{className:"flex flex-col gap-3 md:grid md:grid-cols-[1fr_auto] md:items-start md:gap-x-4 md:gap-y-3",children:[d.jsxs("div",{className:"md:col-start-1 md:row-start-1",children:[d.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:T.title}),T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""||T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""||T.servings!==null&&T.servings!==void 0&&T.servings!==""||fr(T.heat)?d.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",Wn(T.preMinutes)]}):null,T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",Wn(T.cookMinutes)]}):null,T.servings!==null&&T.servings!==void 0&&T.servings!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",T.servings]}):null,fr(T.heat)?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:fr(T.heat)}):null]}):null]}),d.jsxs("details",{className:"md:col-start-1 md:row-start-2",children:[d.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),T.ingredients.length===0?d.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):d.jsx("ul",{className:"mt-3 grid list-disc gap-2 pl-5 text-sm text-sky-700 dark:text-sky-200 md:grid-cols-2 md:gap-x-6",children:T.ingredients.map(I=>d.jsxs("li",{children:[d.jsxs("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:[ru(I.quantity,I.unit,I.defaultUnit)," ",I.name]}),I.notes?d.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:I.notes}):null]},`${T.id}-${I.id}`))})]}),d.jsx("button",{type:"button",onClick:()=>ee(T.id),disabled:O===T.id,className:"w-full rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 disabled:cursor-not-allowed disabled:opacity-60 md:col-start-2 md:row-start-1 md:w-auto md:justify-self-end md:self-start md:py-1.5 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:O===T.id?"Removing...":"Remove"})]})},T.id))}),s.length>0?d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx(Se,{to:"/shop",className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"View shopping list"}),d.jsx(Se,{to:"/migrate",className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Ready to Cook"})]}):null,c.length>0?d.jsxs("section",{className:"flex flex-col gap-3",children:[d.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Synergy recipes"}),d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"These recipes share core ingredients with your plan."}),d.jsx("div",{className:"flex flex-col gap-3",children:c.map(T=>d.jsx("div",{className:"rounded-xl border border-sky-100 bg-white/90 px-4 py-3 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20",children:d.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:T.title}),T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""||T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""||T.servings!==null&&T.servings!==void 0&&T.servings!==""||fr(T.heat)?d.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",Wn(T.preMinutes)]}):null,T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",Wn(T.cookMinutes)]}):null,T.servings!==null&&T.servings!==void 0&&T.servings!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",T.servings]}):null,fr(T.heat)?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:fr(T.heat)}):null]}):null,m.get(T.id)?.length?d.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.get(T.id).map(I=>d.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:I},`${T.id}-${I}`))}):null,d.jsxs("details",{className:"mt-3",children:[d.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),T.ingredients.length===0?d.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):d.jsx("ul",{className:"mt-3 grid list-disc gap-2 pl-5 text-sm text-sky-700 dark:text-sky-200 md:grid-cols-2 md:gap-x-6",children:T.ingredients.map(I=>d.jsxs("li",{children:[d.jsxs("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:[ru(I.quantity,I.unit,I.defaultUnit)," ",I.name]}),I.notes?d.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:I.notes}):null]},`${T.id}-synergy-${I.id}`))})]})]}),d.jsx("button",{type:"button",onClick:()=>H(T.id),disabled:E===T.id,className:"w-full rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 md:w-auto dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:E===T.id?"Adding...":"Add"})]})},`synergy-${T.id}`))})]}):null,d.jsxs("section",{children:[d.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Add other recipes"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Review each recipe and add it to the plan."}),d.jsx(Ou,{className:"mt-4",sortBy:q,onSortByChange:re,sortDirection:X,onSortDirectionChange:Z,selectedIngredients:P,onSelectedIngredientsChange:F,selectedServings:K,onSelectedServingsChange:pe,recipes:se}),te.length===0?d.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No recipes available for this filter."}):d.jsx("div",{className:"mt-4 flex flex-col gap-4",children:te.map(T=>d.jsx("div",{className:"rounded-xl border border-sky-100 bg-white px-4 py-4 dark:border-sky-900 dark:bg-sky-950/70",children:d.jsxs("div",{className:"flex flex-col gap-3 md:grid md:grid-cols-[1fr_auto] md:items-start md:gap-x-4 md:gap-y-3",children:[d.jsxs("div",{className:"flex-1 md:col-start-1 md:row-start-1",children:[d.jsx("h3",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:T.title}),T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""||T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""||T.servings!==null&&T.servings!==void 0&&T.servings!==""||fr(T.heat)?d.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[T.preMinutes!==null&&T.preMinutes!==void 0&&T.preMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",Wn(T.preMinutes)]}):null,T.cookMinutes!==null&&T.cookMinutes!==void 0&&T.cookMinutes!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",Wn(T.cookMinutes)]}):null,T.servings!==null&&T.servings!==void 0&&T.servings!==""?d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",T.servings]}):null,fr(T.heat)?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:fr(T.heat)}):null]}):null,P.length>0?d.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:T.ingredients.filter(I=>P.includes(I.name)).map(I=>d.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:I.name},`${T.id}-filter-${I.id}`))}):null]}),d.jsxs("details",{className:"md:col-start-1 md:row-start-2",children:[d.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),T.ingredients.length===0?d.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):d.jsx("ul",{className:"mt-3 grid list-disc gap-2 pl-5 text-sm text-sky-700 dark:text-sky-200 md:grid-cols-2 md:gap-x-6",children:T.ingredients.map(I=>d.jsxs("li",{children:[d.jsxs("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:[ru(I.quantity,I.unit,I.defaultUnit)," ",I.name]}),I.notes?d.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:I.notes}):null]},`${T.id}-add-${I.id}`))})]}),d.jsx("button",{type:"button",onClick:()=>H(T.id),disabled:E===T.id,className:"w-full rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 md:col-start-2 md:row-start-1 md:w-auto md:justify-self-end md:self-start md:py-1.5 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:E===T.id?"Adding...":"Add"})]})},`add-${T.id}`))})]})]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view its plan."]})})})]})}function df(n){return n==null||n===""?"":`${n} min`}function tx(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function rx(){const[n,t]=v.useState([]),[s,a]=v.useState(!0),[u,l]=v.useState(""),[c,f]=v.useState(!1),[m,y]=v.useState(null),[g,x]=v.useState(""),[w,b]=v.useState(""),[S,N]=v.useState("alphabetical"),[E,U]=v.useState("asc"),[O,L]=v.useState([]),[q,re]=v.useState("");v.useEffect(()=>{let F=!0;async function K(){a(!0),l("");const{data:pe,error:M}=await oe.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( ingredients ( id, name ) )");if(F){if(M)l(M.message??"Unable to load recipes."),t([]);else{const H=(pe??[]).map(ee=>({...ee,ingredients:(ee.recipe_ingredients??[]).map(se=>({id:se.ingredients?.id??"",name:se.ingredients?.name??""})).filter(se=>se.name)}));t(H)}a(!1)}}return K(),()=>{F=!1}},[]);const X=F=>{F?.id&&(y(F),f(!0),b(""))},Z=async()=>{if(!m?.id)return;x(m.id),b("");const{error:F}=await oe.from("recipes").delete().eq("id",m.id);if(F){const K=F.code==="23503"||/foreign key|recipe_ingredients|recipe_steps|menu_recipes|plan_recipes|constraint/i.test(F.message||"");b(K?"Cannot delete this recipe because it is still used in related data.":F.message??"Unable to delete recipe."),x("");return}t(K=>K.filter(pe=>pe.id!==m.id)),x(""),f(!1),y(null),b("")},P=v.useMemo(()=>{const F=O.length>0?n.filter(H=>H.ingredients?.some(ee=>O.includes(ee.name))):n,K=q===""?null:Number.parseInt(q,10),M=[...K===null||Number.isNaN(K)?F:F.filter(H=>H.servings===K)].sort((H,ee)=>{if(S==="cook-time"){const se=H.cook_minutes??Number.POSITIVE_INFINITY,te=ee.cook_minutes??Number.POSITIVE_INFINITY;if(se!==te)return se-te}if(S==="heat-level"){const se=H.heat??Number.POSITIVE_INFINITY,te=ee.heat??Number.POSITIVE_INFINITY;if(se!==te)return se-te}return(H.title||"Untitled Recipe").localeCompare(ee.title||"Untitled Recipe")});return E==="desc"&&M.reverse(),M},[n,O,q,S,E]);return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Recipes - Recipes"})}),d.jsxs("div",{className:"flex flex-col gap-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"All Recipes"}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Recipes are shared with all users."})]}),d.jsx(Ou,{sortBy:S,onSortByChange:N,sortDirection:E,onSortDirectionChange:U,selectedIngredients:O,onSelectedIngredientsChange:L,selectedServings:q,onSelectedServingsChange:re,recipes:n}),s?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading recipes..."}):u?d.jsx("p",{className:"text-sm text-rose-300",children:u}):P.length===0?d.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:[d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"No recipes match this filter."}),d.jsx("p",{className:"text-xs text-sky-500 dark:text-sky-500",children:"Try another ingredient filter or add a new recipe."})]}):d.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[P.map(F=>{const K=[{label:"Prep",value:F.pre_minutes,display:df(F.pre_minutes)},{label:"Cook",value:F.cook_minutes,display:df(F.cook_minutes)},{label:"Serves",value:F.servings,display:F.servings}].filter(M=>M.value!==null&&M.value!==void 0&&M.value!==""),pe=tx(F.heat);return d.jsx("div",{className:"rounded-xl border border-sky-200 bg-white p-5 dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("div",{className:"flex h-full flex-col gap-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:F.title||"Untitled Recipe"}),O.length>0?d.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:F.ingredients.filter(M=>O.includes(M.name)).map(M=>d.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:M.name},`${F.id}-filter-${M.id||M.name}`))}):null,F.description?d.jsx("p",{className:"mt-1 text-sm text-sky-500 dark:text-sky-400",children:F.description}):null]}),K.length>0||pe?d.jsxs("div",{className:"mt-auto flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[K.map(M=>d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:[M.label," ",M.display]},M.label)),pe?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:pe}):null]}):null,d.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[d.jsx(Se,{to:`/recipe/${F.id}/view`,className:"rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"View"}),d.jsx(Se,{to:`/recipe/${F.id}/edit`,className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"}),d.jsx("button",{type:"button",onClick:()=>X(F),className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:"Delete"})]})]})},F.id)}),d.jsxs(Se,{to:"/create",className:"group flex flex-col items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 px-5 py-4 text-center transition hover:border-sky-400 hover:bg-sky-100 dark:border-sky-700 dark:bg-sky-900/40 dark:hover:border-sky-500 dark:hover:bg-sky-900/70",children:[d.jsx("span",{className:"text-3xl font-semibold leading-none text-sky-700 transition group-hover:text-sky-900 dark:text-sky-200 dark:group-hover:text-white",children:"+"}),d.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-600 dark:text-sky-300",children:"Create Recipe"})]})]})]}),c&&m?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Delete this recipe?"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to remove"," ",d.jsx("span",{className:"font-semibold",children:m.title||"Untitled Recipe"}),"."]}),w?d.jsx("p",{className:"mt-3 text-sm text-rose-300",children:w}):null,d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>{g||(f(!1),y(null),b(""))},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:!!g,children:"Cancel"}),d.jsx("button",{type:"button",onClick:Z,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400",disabled:!!g,children:g===m.id?"Deleting...":"Delete"})]})]})}):null]})}const cf=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"],Ks="Unclassified";function nx(n){return Number.isInteger(n)?n.toString():n.toFixed(2).replace(/\.?0+$/,"")}function sx(n,t){const s=encodeURIComponent(t?.trim()??"");return s?n==="Sainsburys"?`https://www.sainsburys.co.uk/gol-ui/SearchResults/${s}`:n==="Waitrose"?`https://www.waitrose.com/ecom/shop/search?searchTerm=${s}`:n==="Ocado"?`https://www.ocado.com/search?q=${s}`:n==="Asda"?`https://groceries.asda.com/search/${s}`:n==="Tesco"?`https://www.tesco.com/groceries/en-GB/search?query=${s}`:"":""}function hf(n){const t=new Map;(n??[]).forEach(l=>{const c=l.section?.trim()||Ks;t.has(c)||t.set(c,[]),t.get(c).push(l)});const s=cf.filter(l=>t.has(l)),a=Array.from(t.keys()).filter(l=>l!==Ks&&!cf.includes(l)).sort((l,c)=>l.localeCompare(c));return[...s,...a,...t.has(Ks)?[Ks]:[]].map(l=>({section:l,items:(t.get(l)??[]).slice().sort((c,f)=>c.name.localeCompare(f.name))}))}function ix(){const[n,t]=v.useState(null),[s,a]=v.useState([]),[u,l]=v.useState(!0),[c,f]=v.useState(""),[m,y]=v.useState(""),[g,x]=v.useState({}),[w,b]=v.useState(""),S=v.useMemo(()=>{const P=new Map;return s.forEach(F=>{F.ingredients.forEach(K=>{const pe=K.name||"Unnamed ingredient",M=K.unit||K.defaultUnit||"",H=`${pe}|||${M}`,ee=K.quantity===""||K.quantity===null?null:Number(K.quantity),se=Number.isFinite(ee);P.has(H)||P.set(H,{name:pe,unit:M,supermarketSection:K.supermarketSection||"",quantity:0,hasNumeric:!1,quantityNotes:[],notes:new Set});const te=P.get(H);se?(te.quantity+=ee,te.hasNumeric=!0):K.quantity!==null&&K.quantity!==void 0&&K.quantity!==""&&te.quantityNotes.push(String(K.quantity)),K.notes&&te.notes.add(K.notes),!te.supermarketSection&&K.supermarketSection&&(te.supermarketSection=K.supermarketSection)})}),Array.from(P.values()).map(F=>{const K=[];F.hasNumeric&&K.push(nx(F.quantity)),F.quantityNotes.length>0&&K.push(...F.quantityNotes);const pe=K.length>0?K.join(" + "):"",M=F.unit&&F.unit.toLowerCase()==="count"?"":F.unit,H=M?` ${M}`:"",ee=pe?`${pe}${H} ${F.name}`:F.name;return{...F,display:ee,notes:Array.from(F.notes).join("; "),section:F.supermarketSection||Ks}})},[s]),N=v.useMemo(()=>s.map(P=>({id:P.id,title:P.title})).filter(P=>P.title).sort((P,F)=>P.title.localeCompare(F.title)),[s]),E=v.useMemo(()=>N.map(P=>P.title),[N]),U=v.useMemo(()=>S.filter(P=>!g[`${P.name}|||${P.unit}`]),[S,g]),O=v.useMemo(()=>S.filter(P=>g[`${P.name}|||${P.unit}`]),[S,g]),L=v.useMemo(()=>hf(U),[U]),q=v.useMemo(()=>hf(O),[O]);v.useEffect(()=>{let P=!0;async function F(){l(!0),f("");const{data:K,error:pe}=await oe.auth.getUser();if(!P)return;if(pe){f(pe.message??"Unable to load your account."),l(!1);return}const M=K?.user;if(!M){f("Please sign in to view your shopping list."),l(!1);return}const{data:H,error:ee}=await oe.from("household_members").select("household_id").eq("user_id",M.id).limit(1).maybeSingle();if(ee){f(ee.message??"Unable to load household membership."),l(!1);return}if(!H?.household_id){t(null),a([]),l(!1);return}const{data:se,error:te}=await oe.from("households").select("id, name").eq("id",H.household_id).single();if(te){f(te.message??"Unable to load household."),l(!1);return}t(se??null);const{data:T,error:I}=await oe.from("plan_recipes").select("recipe_id").eq("household_id",H.household_id);if(I){f(I.message??"Unable to load plan recipes."),a([]),l(!1);return}const J=(T??[]).map(ne=>ne.recipe_id).filter(Boolean);if(J.length===0){a([]),l(!1);return}const{data:z,error:j}=await oe.from("recipes").select("id, title, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, supermarket_section ) )").in("id",J).order("title");if(j){f(j.message??"Unable to load planned recipes."),a([]),l(!1);return}const B=(z??[]).map(ne=>{const ue=(ne.recipe_ingredients??[]).map(ce=>({id:ce.ingredients?.id??ce.ingredient_id,name:ce.ingredients?.name??"Unnamed ingredient",quantity:ce.quantity,unit:ce.unit,defaultUnit:ce.ingredients?.default_unit,supermarketSection:ce.ingredients?.supermarket_section,notes:ce.notes})).sort((ce,ye)=>ce.name.localeCompare(ye.name));return{id:ne.id,title:ne.title||"Untitled recipe",ingredients:ue}});a(B),l(!1)}return F(),()=>{P=!1}},[]);const re=async()=>{if(U.length===0)return;const P=E.length>0?[`Recipes: ${E.join(", ")}`,""]:[],F=U.map(K=>{const pe=K.notes?` (${K.notes})`:"";return`- ${K.display}${pe}`});try{await navigator.clipboard.writeText([...P,...F].join(`
`)),y("Copied!"),setTimeout(()=>y(""),2e3)}catch{y("Copy failed"),setTimeout(()=>y(""),2e3)}},X=()=>{U.length!==0&&window.print()},Z=P=>{x(F=>({...F,[P]:!F[P]}))};return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:"Shop - Recipes"})}),d.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-area,
          .print-area * {
            visibility: visible;
          }
          .print-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .print-area > div:first-child {
            column-span: all;
            border: none !important;
            background: transparent !important;
            padding: 0 0 0.5rem 0 !important;
            color: #000 !important;
            font-size: 0.85rem !important;
            text-transform: none !important;
            letter-spacing: normal !important;
          }
          .print-area > div:first-child > div:first-child {
            color: #000 !important;
            font-weight: 400 !important;
            text-transform: none !important;
            letter-spacing: normal !important;
          }
          .print-area > div:first-child ul {
            border: none !important;
            background: transparent !important;
            padding: 0 0 0 1.25rem !important;
            color: #000 !important;
          }
          .print-area > div:first-child li {
            color: #000 !important;
          }
          .print-area > div:nth-child(2) {
            column-span: all;
            color: #000 !important;
            font-size: 0.8rem !important;
            text-transform: none !important;
            letter-spacing: normal !important;
            font-weight: 400 !important;
            margin: 0 0 0.35rem 0 !important;
          }
          .print-area ul {
            list-style: disc;
            padding-left: 1.5rem;
            column-count: 2;
            column-gap: 2.5rem;
          }
          .print-area li {
            border: none !important;
            background: transparent !important;
            padding: 0.15rem 0 !important;
          }
          .print-area span {
            color: #000 !important;
          }
          .print-area li,
          .print-area span {
            font-weight: 400 !important;
            font-size: 12px !important;
          }
          .no-print {
            display: none !important;
          }
          .print-only {
            display: block !important;
          }
        }
        .print-only {
          display: none;
        }
      `}),d.jsx("div",{className:"flex flex-col gap-6",children:u?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading shopping list..."}):c?d.jsx("p",{className:"text-sm text-rose-300",children:c}):n?d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Shopping List"}),d.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Tick off what's already in your kitchen, then copy what's left to send a helper, print it for a proper paper run, or pick a supermarket to quickly order online."}),d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["To change recipes on this list, update your"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/plan",children:"plan"}),"."]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 pb-2 md:pb-4",children:[m?d.jsx("span",{className:"no-print text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:m}):null,d.jsx("button",{type:"button",onClick:re,disabled:S.length===0,className:"no-print rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Copy"}),d.jsx("button",{type:"button",onClick:X,disabled:S.length===0,className:"no-print rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Print"}),S.length>0?d.jsx(Se,{to:"/migrate",className:"no-print rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Ready to Cook"}):null]})]}),N.length>0?d.jsxs("div",{className:"no-print flex flex-col gap-3",children:[d.jsx("div",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Recipes"}),d.jsx("ul",{className:"rounded-lg border border-sky-100 bg-white px-5 py-3 pl-8 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-200",children:N.map(P=>d.jsx("li",{className:"list-disc pl-1",children:d.jsx(Se,{to:`/recipe/${P.id}/view`,className:"underline decoration-sky-300 underline-offset-2 hover:text-sky-900 dark:decoration-sky-700 dark:hover:text-white",children:P.title})},P.id))})]}):null,N.length>0?d.jsxs("label",{className:"no-print mt-2 flex w-full max-w-md flex-col gap-3 text-lg font-semibold text-sky-900 dark:text-sky-100",children:["Online Supermarket",d.jsxs("select",{value:w,onChange:P=>b(P.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[d.jsx("option",{value:"",children:"None"}),d.jsx("option",{value:"Sainsburys",children:"Sainsburys"}),d.jsx("option",{value:"Waitrose",children:"Waitrose"}),d.jsx("option",{value:"Ocado",children:"Ocado"}),d.jsx("option",{value:"Asda",children:"Asda"}),d.jsx("option",{value:"Tesco",children:"Tesco"})]})]}):null,S.length===0?d.jsxs("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/40",children:[d.jsx("p",{className:"text-sm font-semibold text-sky-700 dark:text-sky-200",children:"No items yet."}),d.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Add recipes to your plan to generate a shopping list."}),d.jsx(Se,{to:"/plan",className:"mt-4 inline-flex rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Go to plan"})]}):d.jsxs("div",{className:"flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:[d.jsxs("div",{className:"print-area flex flex-col gap-3",children:[N.length>0?d.jsxs("div",{className:"print-only flex flex-col gap-2",children:[d.jsx("div",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:"Recipes:"}),d.jsx("ul",{className:"rounded-lg border border-sky-100 bg-white px-5 py-3 pl-8 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-200",children:N.map(P=>d.jsx("li",{className:"list-disc pl-1",children:d.jsx(Se,{to:`/recipe/${P.id}/view`,className:"underline decoration-sky-300 underline-offset-2 hover:text-sky-900 dark:decoration-sky-700 dark:hover:text-white",children:P.title})},P.id))})]}):null,d.jsx("h2",{className:"mt-2 text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Ingredients to Buy"}),d.jsx("div",{className:"rounded-lg border border-sky-100 bg-white px-4 py-4 dark:border-sky-800 dark:bg-sky-950/60",children:d.jsx("div",{className:"flex flex-col gap-4",children:L.map(P=>d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:P.section}),d.jsx("ul",{className:"divide-y divide-sky-200 dark:divide-sky-800",children:P.items.map(F=>{const K=`${F.name}|||${F.unit}`,pe=sx(w,F.name);return d.jsx("li",{className:"py-2",children:d.jsxs("label",{className:"flex w-full items-center gap-3",children:[d.jsx("input",{type:"checkbox",checked:!!g[K],onChange:()=>Z(K),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900 dark:border-sky-700 dark:text-white dark:focus:ring-white"}),d.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[d.jsxs("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:[F.display,F.notes?` (${F.notes})`:""]}),pe?d.jsx("a",{href:pe,target:"_blank",rel:"noreferrer","aria-label":`Search ${w} for ${F.name}`,title:`Search ${w}`,className:"no-print text-xs font-semibold text-sky-600 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-300 dark:decoration-sky-700 dark:hover:text-white",children:"(Buy)"}):null]})]})},K)})})]},`unchecked-${P.section}`))})})]}),O.length>0?d.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Ingredients You Already Have"}),d.jsx("div",{className:"rounded-lg border border-sky-100 bg-white px-4 py-4 dark:border-sky-800 dark:bg-sky-950/60",children:d.jsx("div",{className:"flex flex-col gap-4",children:q.map(P=>d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:P.section}),d.jsx("ul",{className:"divide-y divide-sky-200 dark:divide-sky-800",children:P.items.map(F=>{const K=`${F.name}|||${F.unit}`;return d.jsx("li",{className:"py-2 text-sky-500 dark:text-sky-400",children:d.jsxs("label",{className:"flex w-full items-center gap-3",children:[d.jsx("input",{type:"checkbox",checked:!!g[K],onChange:()=>Z(K),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900 dark:border-sky-700 dark:text-white dark:focus:ring-white"}),d.jsx("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:d.jsxs("span",{className:"font-semibold",children:[F.display,F.notes?` (${F.notes})`:""]})})]})},`checked-${K}`)})})]},`checked-${P.section}`))})})]}):null]})]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:d.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",d.jsx(Se,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view your shopping list."]})})})]})}const ax=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"];function Da(n){return n.trim().toLowerCase()}function ox(n){const t=new Map;return n.forEach(s=>{if(s?.id&&!t.has(s.id)){t.set(s.id,s);return}const a=s?.name?Da(s.name):null;a&&!t.has(a)&&t.set(a,s)}),Array.from(t.values())}function lx(n){const t=new Map;return n.forEach(s=>{if(s?.ingredient_id&&!t.has(s.ingredient_id)){t.set(s.ingredient_id,s);return}const a=s?.ingredients?.name?Da(s.ingredients.name):null;a&&!t.has(a)&&t.set(a,s)}),Array.from(t.values())}function ux({recipeId:n}){const[t,s]=v.useState(!0),[a,u]=v.useState(""),[l,c]=v.useState([]),[f,m]=v.useState(!1),[y,g]=v.useState(""),[x,w]=v.useState(""),[b,S]=v.useState(""),[N,E]=v.useState(""),[U,O]=v.useState(!1),[L,q]=v.useState(null),[re,X]=v.useState(null),[Z,P]=v.useState(""),[F,K]=v.useState(""),[pe,M]=v.useState(""),[H,ee]=v.useState({}),[se,te]=v.useState([]),[T,I]=v.useState(!1),[J,z]=v.useState(""),[j,B]=v.useState(!1),[ne,ue]=v.useState(""),[ce,ye]=v.useState(""),[ge,be]=v.useState([]),[je,Be]=v.useState(0),[ie,Ke]=v.useState(null),Ne=v.useMemo(()=>Da(y),[y]),De=v.useMemo(()=>Ne.length>0&&se.some(Y=>Da(Y.name)===Ne),[Ne,se]);async function Oe(){if(!n)return;s(!0),u("");const{data:Y,error:Ce}=await oe.from("recipe_ingredients").select("ingredient_id, quantity, unit, notes, ingredients ( id, name, default_unit, default_quantity, supermarket_section )").eq("recipe_id",n);if(Ce)u(Ce.message??"Unable to load ingredients."),c([]);else{const Je=(Y??[]).slice().sort((Ye,Le)=>{const fn=Ye.ingredients?.name??"",ss=Le.ingredients?.name??"";return fn.localeCompare(ss)});c(lx(Je))}s(!1)}v.useEffect(()=>{Oe()},[n]),v.useEffect(()=>{let Y=!0,Ce;async function Je(){if(!Ne){te([]),I(!1);return}I(!0);const{data:Ye,error:Le}=await oe.from("ingredients").select("id, name, default_unit, default_quantity, supermarket_section").ilike("name",`%${Ne}%`).order("name").limit(8);if(Y){if(Le){te([]),I(!1);return}te(ox(Ye??[])),I(!1)}}return Ce=setTimeout(()=>{Je()},1e3),()=>{Ce&&clearTimeout(Ce),Y=!1}},[Ne]),v.useEffect(()=>{q(null),X(null),P(""),K(""),M(""),ee({}),z("")},[Ne]);function ze(Y){if(Y===""||Y===null||Y===void 0)return null;const Ce=Number(Y);return Number.isNaN(Ce)?null:Ce}function ct(Y){if(Y===""||Y===null||Y===void 0)return null;const Ce=Number.parseInt(Y,10);return Number.isNaN(Ce)||String(Ce)!==String(Y).trim()||Ce<=0?null:Ce}function et(){g(""),w(""),S(""),E(""),O(!1),q(null),X(null),P(""),K(""),M(""),ee({}),te([]),m(!1)}function vr(){be([]),Be(0),Ke(null)}function sr(Y,Ce=ge){const Je=Ce[Y];Je&&(Be(Y),m(!0),g(Je.name),q(null),X(null),w(""),S(""),E(""),O(!1),P(""),K(""),M(""),ee({}),te([]),Ke({quantity:Je.quantity,unit:Je.unit}),z(`Imported ingredient ${Y+1} of ${Ce.length} loaded. Review, then add.`))}function xr(){B(!0),ye("")}function cn(){B(!1),ye("")}function li(){ye("");let Y;try{Y=JSON.parse(ne)}catch{ye("Invalid JSON. Please check and try again.");return}const Ce=Y?.ingredients;if(!Array.isArray(Ce)){ye("JSON must be an object with an `ingredients` array.");return}const Je=[];for(let Ye=0;Ye<Ce.length;Ye+=1){const Le=Ce[Ye];if(!Le||typeof Le!="object"||Array.isArray(Le)){ye(`Ingredient ${Ye+1} must be an object.`);return}if(typeof Le.name!="string"||!Le.name.trim()){ye(`Ingredient ${Ye+1} must include a non-empty name.`);return}if(Le.unit!==void 0&&Le.unit!==null&&typeof Le.unit!="string"){ye(`Ingredient ${Ye+1} has an invalid unit.`);return}if(Le.quantity!==void 0&&Le.quantity!==null&&typeof Le.quantity!="string"&&typeof Le.quantity!="number"){ye(`Ingredient ${Ye+1} has an invalid quantity.`);return}Je.push({name:Le.name.trim(),unit:(Le.unit??"").toString().trim(),quantity:Le.quantity===void 0||Le.quantity===null?"":String(Le.quantity).trim()})}if(Je.length===0){ye("No ingredients found in JSON.");return}be(Je),cn(),sr(0,Je)}async function rs(Y){if(!n)return;z("");const{error:Ce}=await oe.from("recipe_ingredients").insert({recipe_id:n,ingredient_id:Y,quantity:ze(Z),unit:F?.trim()||null,notes:pe.trim()||null});if(Ce){z(Ce.message??"Unable to add ingredient.");return}if(await Oe(),ge.length>0&&je<ge.length-1){sr(je+1);return}ge.length>0&&vr(),et()}async function ui(Y){if(!n||!Y)return;z("");const{error:Ce}=await oe.from("recipe_ingredients").delete().eq("recipe_id",n).eq("ingredient_id",Y);if(Ce){z(Ce.message??"Unable to remove ingredient.");return}await Oe()}async function di(){if(!Ne)return;z("");const Y=ct(b);if(String(b??"").trim()!==""&&Y===null){z("Default quantity must be a whole number greater than 0.");return}const{data:Je,error:Ye}=await oe.from("ingredients").insert({name:y.trim(),default_unit:x,default_quantity:Y,supermarket_section:N||null,is_synergy_core:U}).select("id").single();if(Ye){z(Ye.message??"Unable to create ingredient.");return}await rs(Je.id)}function ns(Y){z(""),q("existing"),X(Y),P(ie?.quantity!==void 0&&ie?.quantity!==null&&ie.quantity!==""?ie.quantity:Y.default_quantity??""),K(ie?.unit?.trim()||Y.default_unit||"count"),ee({})}function hn(){Ne&&(z(""),q("new"),X(null),P(ie?.quantity!==void 0&&ie?.quantity!==null?ie.quantity:""),K(ie?.unit?.trim()||x||"count"),w(ie?.unit?.trim()||x),ee({}))}function ci(Y){K(Y),L==="new"&&w(Y)}function qr(){const Y={};return(!Z||ze(Z)===null)&&(Y.quantity="Quantity is required."),F?.trim()||(Y.unit="Unit is required."),ee(Y),Object.keys(Y).length===0}return d.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[d.jsxs("header",{className:"mb-2 flex flex-wrap items-center justify-between gap-3",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Ingredients"}),d.jsx("button",{type:"button",onClick:xr,className:"rounded-lg border border-sky-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Add by JSON"})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsx("div",{className:"flex items-center justify-between gap-3",children:d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:t&&"Loading ingredients..."})}),a?d.jsx("p",{className:"text-sm text-rose-300",children:a}):null,l.length===0&&!t?d.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center text-sm text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-400",children:"No ingredients yet."}):null,l.length>0?d.jsx("ul",{className:"grid gap-2",children:l.map(Y=>d.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-sky-200 bg-white px-4 py-3 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-900/50 dark:text-sky-200",children:[d.jsx("span",{children:(()=>{const Ce=Y.ingredients?.name??"Unnamed ingredient";if(Y.quantity===null||Y.quantity===void 0)return Ce;const Je=Y.unit||Y.ingredients?.default_unit,Ye=Je?.toLowerCase().trim(),Le=Ye&&Ye!=="count";return`${[Y.quantity,Le?Je:null].filter(Boolean).join(" ")}  ${Ce}`})()}),d.jsx("button",{type:"button",onClick:()=>ui(Y.ingredient_id),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-semibold uppercase tracking-[0.12em] text-rose-600 transition hover:border-rose-300 hover:text-rose-700 dark:border-rose-900/60 dark:text-rose-300 dark:hover:border-rose-700 dark:hover:text-rose-200",children:"Delete"})]},Y.ingredient_id??Y.ingredients?.id??Y.ingredients?.name))}):null,f?d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("hr",{className:"my-4 border-sky-200 dark:border-sky-800"}),ge.length>0?d.jsxs("div",{className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-xs text-sky-600 dark:border-sky-700 dark:bg-sky-900/40 dark:text-sky-300",children:["Import queue: ",je+1," / ",ge.length]}):null,L===null?d.jsxs("label",{className:"form-label",children:["Ingredient name",d.jsx("input",{type:"text",value:y,onChange:Y=>g(Y.target.value),placeholder:"e.g. Smoked paprika",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none transition focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"})]}):null,d.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[L===null?d.jsxs(d.Fragment,{children:[d.jsxs("button",{type:"button",onClick:hn,disabled:!Ne||De,className:"w-full rounded-lg border border-dashed border-sky-300 px-3 py-2 text-left text-sm text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:border-sky-200 disabled:text-sky-400 dark:border-sky-600 dark:text-sky-200 dark:hover:border-sky-400 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-500",children:["Add new ingredient ",y.trim()||"",""]}),se.map(Y=>d.jsxs("button",{type:"button",onClick:()=>ns(Y),className:"w-full rounded-lg border border-sky-200 bg-white px-3 py-2 text-left text-sm text-sky-700 transition hover:border-sky-400 hover:bg-sky-50 dark:border-sky-800 dark:bg-sky-950/70 dark:text-sky-200 dark:hover:border-sky-600 dark:hover:bg-sky-900",children:["Use existing: ",Y.name]},Y.id))]}):null,L==="new"||L==="existing"?d.jsx("div",{className:"flex flex-col gap-3 text-center text-sm text-sky-700 dark:text-sky-200",children:d.jsxs("div",{className:"text-base font-semibold text-sky-800 dark:text-sky-200",children:["Adding ",re?.name||y.trim()||"ingredient"]})}):null]}),L==="new"||L==="existing"?d.jsxs("div",{className:"flex flex-col gap-3 text-left text-sm text-sky-700 dark:text-sky-200",children:[d.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[d.jsxs("label",{className:"form-label",children:["Recipe Quantity",d.jsx("input",{type:"number",inputMode:"decimal",value:Z,onChange:Y=>P(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"}),H.quantity?d.jsx("span",{className:"text-[11px] text-rose-500",children:H.quantity}):null]}),d.jsxs("label",{className:"form-label",children:["Recipe Unit",d.jsxs("select",{value:F,onChange:Y=>ci(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[d.jsx("option",{value:"",children:"Select unit"}),d.jsx("option",{value:"count",children:"count"}),d.jsx("option",{value:"g",children:"g"}),d.jsx("option",{value:"ml",children:"ml"}),d.jsx("option",{value:"tsp",children:"tsp"}),d.jsx("option",{value:"tbsp",children:"tbsp"}),d.jsx("option",{value:"cup",children:"cup"})]}),H.unit?d.jsx("span",{className:"text-[11px] text-rose-500",children:H.unit}):null]})]}),d.jsxs("label",{className:"form-label",children:["Recipe Ingredient Notes",d.jsx("input",{type:"text",value:pe,onChange:Y=>M(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"})]}),L==="new"?d.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[d.jsx("p",{className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-xs text-sky-600 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:"These optional settings apply to the ingredient itself (not just this recipe) and will affect every recipe that uses it."}),d.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[d.jsxs("label",{className:"form-label",children:["Default Unit",d.jsxs("select",{value:x,onChange:Y=>w(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[d.jsx("option",{value:"",children:"Select unit"}),d.jsx("option",{value:"count",children:"count"}),d.jsx("option",{value:"g",children:"g"}),d.jsx("option",{value:"ml",children:"ml"}),d.jsx("option",{value:"tsp",children:"tsp"}),d.jsx("option",{value:"tbsp",children:"tbsp"}),d.jsx("option",{value:"cup",children:"cup"})]})]}),d.jsxs("label",{className:"form-label",children:["Default Quantity",d.jsx("input",{type:"number",min:"1",step:"1",value:b,onChange:Y=>S(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",placeholder:"1"})]}),d.jsxs("label",{className:"form-label",children:["Supermarket Section",d.jsxs("select",{value:N,onChange:Y=>E(Y.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[d.jsx("option",{value:"",children:"Select section"}),ax.map(Y=>d.jsx("option",{value:Y,children:Y},Y))]})]}),d.jsxs("label",{className:"form-label",children:["Fresh (synergy core)",d.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100",children:[d.jsx("input",{type:"checkbox",checked:U,onChange:Y=>O(Y.target.checked),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-600 dark:bg-sky-950 dark:text-white dark:focus:ring-white/30"}),d.jsx("span",{children:U?"Yes":"No"})]})]})]})]}):null,d.jsx("button",{type:"button",onClick:()=>{qr()&&(L==="existing"&&re?rs(re.id):L==="new"&&di())},className:"mt-3 w-full rounded-lg border border-sky-300 bg-sky-900 px-3 py-2 text-sm font-semibold text-white transition hover:bg-sky-800 dark:border-sky-700 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100",children:L==="new"?"Add New Ingredient":"Add Ingredient"})]}):null,T?d.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-sky-500 dark:text-sky-400",children:[d.jsx("span",{className:"h-3 w-3 animate-spin rounded-full border border-sky-300 border-t-sky-900 dark:border-sky-600 dark:border-t-sky-300"}),"Searching ingredients"]}):null,J?d.jsx("p",{className:"mt-3 text-xs text-rose-300",children:J}):null]}):null,d.jsx("button",{type:"button",className:"w-full rounded-xl border border-sky-300 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",onClick:()=>{if(f){et();return}m(!0),z("")},children:f?"Cancel":"Add Ingredient"}),ge.length>0&&!f?d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>sr(je),className:"rounded-lg border border-sky-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Continue Imported"}),d.jsx("button",{type:"button",onClick:vr,className:"rounded-lg border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 dark:border-rose-900/60 dark:text-rose-300 dark:hover:border-rose-700 dark:hover:text-rose-200",children:"Clear Imported"})]}):null]}),j?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-3xl rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h3",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Add ingredients from JSON"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["Format: JSON object with an ",d.jsx("code",{children:"ingredients"})," array using"," ",d.jsx("code",{children:"{ name, unit, quantity, notes }"}),". The ",d.jsx("code",{children:"notes"})," ","value is ignored."]}),d.jsx("label",{className:"mt-4 block",children:d.jsx("textarea",{rows:14,value:ne,onChange:Y=>ue(Y.target.value),className:"w-full rounded-lg border border-sky-200 bg-white px-3 py-3 font-mono text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-sky-400",placeholder:`{
  "ingredients": [
    { "name": "Onion", "unit": "count", "quantity": 1, "notes": "" },
    { "name": "Olive oil", "unit": "tbsp", "quantity": 2, "notes": "optional" }
  ]
}`,autoFocus:!0})}),ce?d.jsx("p",{className:"mt-3 text-sm text-rose-500 dark:text-rose-300",children:ce}):null,d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:cn,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"button",onClick:li,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Load Ingredients"})]})]})}):null]})}function ff(n,t=""){return n==null||n===""?t:n}function nu(n,t){if(n===""||n===null||n===void 0)return"";const s=Number.parseInt(n,10);return Number.isNaN(s)||s<0?`${t} must be a non-negative number.`:String(s)!==String(n).trim()?`${t} must be a whole number.`:""}function dx(n){if(n===""||n===null||n===void 0)return"";const t=Number.parseInt(n,10);return Number.isNaN(t)||String(t)!==String(n).trim()?"Heat level must be a whole number.":t<0||t>3?"Heat level must be between 0 and 3.":""}function pf(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function cx({recipeDraft:n,setRecipeDraft:t,onSave:s,loading:a,saving:u,status:l}){const[c,f]=v.useState(!1),[m,y]=v.useState({}),g=v.useMemo(()=>Object.values(m).some(Boolean),[m]);function x(){f(!1),y({})}function w(){const S={title:n.title.trim()?"":"Title is required.",preMinutes:nu(n.preMinutes,"Prep time"),cookMinutes:nu(n.cookMinutes,"Cook time"),servings:nu(n.servings,"Servings"),heat:dx(n.heat)};return y(S),!Object.values(S).some(Boolean)}async function b(){if(w())try{await s(),f(!1)}catch(S){y(N=>({...N,form:S.message??"Unable to save recipe basics."}))}}return d.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[a?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading recipe..."}):c?d.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Title"}),d.jsx("input",{className:"rounded-lg border border-blue-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-blue-900/60 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-blue-300 dark:focus:ring-blue-400/30",value:n.title,onChange:S=>t(N=>({...N,title:S.target.value})),placeholder:"Smoky Lemon Pasta"}),m.title&&d.jsx("span",{className:"text-xs text-rose-300",children:m.title})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Servings"}),d.jsx("input",{type:"number",min:"0",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.servings,onChange:S=>t(N=>({...N,servings:S.target.value})),placeholder:"4"}),m.servings&&d.jsx("span",{className:"text-xs text-rose-300",children:m.servings})]}),d.jsxs("label",{className:"form-label md:col-span-2",children:[d.jsx("span",{children:"Description"}),d.jsx("textarea",{className:"min-h-[120px] rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.description,onChange:S=>t(N=>({...N,description:S.target.value})),placeholder:"Notes on flavor, pairings, or a quick story."})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Prep Time (min)"}),d.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.preMinutes,onChange:S=>t(N=>({...N,preMinutes:S.target.value})),placeholder:"15"}),m.preMinutes&&d.jsx("span",{className:"text-xs text-rose-300",children:m.preMinutes})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Cook Time (min)"}),d.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.cookMinutes,onChange:S=>t(N=>({...N,cookMinutes:S.target.value})),placeholder:"20"}),m.cookMinutes&&d.jsx("span",{className:"text-xs text-rose-300",children:m.cookMinutes})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("span",{children:"Heat Level"}),d.jsx("input",{type:"number",min:"0",max:"3",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.heat,onChange:S=>t(N=>({...N,heat:S.target.value})),placeholder:"0-3"}),m.heat&&d.jsx("span",{className:"text-xs text-rose-300",children:m.heat})]})]}):d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:ff(n.title,"Untitled Recipe")}),d.jsx("button",{type:"button",onClick:()=>f(!0),disabled:a||u,className:"rounded-full border border-sky-300 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"})]}),d.jsx("p",{className:"mt-2 text-base text-sky-600 dark:text-sky-300",children:ff(n.description,"No description yet.")})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[[["Serves",n.servings],["Prep Time",n.preMinutes],["Cook Time",n.cookMinutes]].filter(([,S])=>S!=null&&S!=="").map(([S,N])=>d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:bg-sky-900/70 dark:text-sky-200",children:[S,": ",N]},S)),pf(n.heat)?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:bg-sky-900/70 dark:text-sky-200",children:pf(n.heat)}):null]})]}),c&&d.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:b,disabled:u||a||g,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:u?"Saving...":"Save Basics"}),d.jsx("button",{type:"button",onClick:x,disabled:u||a,className:"rounded-full border border-sky-300 px-5 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),m.form&&d.jsx("span",{className:"text-sm text-rose-300",children:m.form}),l&&!m.form&&d.jsx("span",{className:"text-sm text-sky-500 dark:text-sky-400",children:l})]})]})}function hx(n){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"}).format(n)}function fx({recipeId:n}){const[t,s]=v.useState([]),[a,u]=v.useState(!0),[l,c]=v.useState(!1),[f,m]=v.useState(""),[y,g]=v.useState({}),[x,w]=v.useState(()=>new Set),[b,S]=v.useState(!1),[N,E]=v.useState(""),[U,O]=v.useState("");v.useEffect(()=>{let M=!0;async function H(){if(!n)return;u(!0),m("");const{data:ee,error:se}=await oe.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0});if(M){if(se)m(se.message??"Unable to load steps."),s([]);else{const te=(ee??[]).map(T=>({id:T.id,instruction:T.instruction??"",isHeading:!!T.is_heading}));s(te)}u(!1)}}return n&&H(),()=>{M=!1}},[n]);function L(M,H){s(ee=>ee.map((se,te)=>te===M?{...se,...H}:se))}function q(M,H){H<0||H>=t.length||s(ee=>{const se=ee.slice(),[te]=se.splice(M,1);return se.splice(H,0,te),se})}function re(){s(M=>[...M,{id:null,instruction:"",isHeading:!1}])}function X(M){s(H=>{const ee=H.slice(),[se]=ee.splice(M,1);return se?.id&&w(te=>{const T=new Set(te);return T.add(se.id),T}),ee})}function Z(){S(!0),O("")}function P(){S(!1),O("")}function F(){O("");let M;try{M=JSON.parse(N)}catch{O("Invalid JSON. Please check and try again.");return}const H=M?.steps;if(!Array.isArray(H)){O("JSON must be an object with a `steps` array.");return}const ee=[];for(let te=0;te<H.length;te+=1){const T=H[te];if(!T||typeof T!="object"||Array.isArray(T)){O(`Step ${te+1} must be an object with text and isHeading.`);return}if(typeof T.text!="string"||!T.text.trim()){O(`Step ${te+1} must include a non-empty text string.`);return}if(typeof T.isHeading!="boolean"){O(`Step ${te+1} must include an isHeading boolean.`);return}ee.push({id:null,instruction:T.text,isHeading:T.isHeading})}const se=t.map(te=>te.id).filter(Boolean);se.length>0&&w(te=>{const T=new Set(te);return se.forEach(I=>T.add(I)),T}),s(ee),g({}),m(`Loaded ${ee.length} step${ee.length===1?"":"s"} from JSON.`),P()}function K(M){const H={};return M.forEach((ee,se)=>{ee.instruction.trim()||(H[se]="Step text is required.")}),g(H),Object.keys(H).length===0}async function pe(){if(n){c(!0),m("");try{if(!K(t))throw new Error("Please fill in all step descriptions.");const M=t.map((I,J)=>({id:I.id,recipe_id:n,position:J+1,instruction:I.instruction.trim(),is_heading:I.isHeading})),H=M.filter(I=>I.id),ee=M.filter(I=>!I.id);if(x.size>0){const I=Array.from(x),{error:J}=await oe.from("recipe_steps").delete().in("id",I);if(J)throw J}if(H.length>0){const{error:I}=await oe.from("recipe_steps").upsert(H,{onConflict:"id"});if(I)throw I}if(ee.length>0){const I=ee.map(z=>({recipe_id:z.recipe_id,position:z.position,instruction:z.instruction,is_heading:z.is_heading})),{error:J}=await oe.from("recipe_steps").insert(I);if(J)throw J}w(new Set),m(`Steps saved at ${hx(new Date)}.`);const{data:se,error:te}=await oe.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0});if(te)throw te;const T=(se??[]).map(I=>({id:I.id,instruction:I.instruction??"",isHeading:!!I.is_heading}));s(T),g({})}catch(M){throw m(M.message??"Unable to save steps."),M}finally{c(!1)}}}return d.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[d.jsxs("header",{className:"mb-4 flex flex-wrap items-center justify-between gap-3",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Steps"}),d.jsx("button",{type:"button",onClick:Z,className:"rounded-lg border border-sky-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Add by JSON"})]}),d.jsxs("div",{className:"flex flex-col gap-4",children:[a?d.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading steps..."}):null,t.length===0&&!a?d.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center text-sm text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-400",children:"No steps yet. Add the first one below."}):null,t.length>0?d.jsx("ul",{className:"grid gap-3",children:t.map((M,H)=>d.jsx("li",{className:"rounded-xl border border-sky-200 bg-white p-4 text-sm text-sky-700 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-900/50 dark:text-sky-200",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[d.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-sky-400",children:["Step ",H+1]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{type:"button",onClick:()=>q(H,H-1),disabled:H===0,className:"rounded-md border border-sky-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-sky-500 transition hover:border-sky-300 hover:text-sky-700 disabled:cursor-not-allowed disabled:border-sky-100 disabled:text-sky-300 dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-600",children:"Up"}),d.jsx("button",{type:"button",onClick:()=>q(H,H+1),disabled:H===t.length-1,className:"rounded-md border border-sky-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-sky-500 transition hover:border-sky-300 hover:text-sky-700 disabled:cursor-not-allowed disabled:border-sky-100 disabled:text-sky-300 dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-600",children:"Down"}),d.jsx("button",{type:"button",onClick:()=>X(H),className:"rounded-md border border-rose-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-rose-600 transition hover:border-rose-300 hover:text-rose-700 dark:border-rose-900/60 dark:text-rose-300 dark:hover:border-rose-700 dark:hover:text-rose-200",children:"Delete"})]})]}),d.jsxs("label",{className:"form-label",children:[d.jsx("textarea",{rows:3,value:M.instruction,onChange:ee=>L(H,{instruction:ee.target.value}),className:"min-h-[72px] rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"}),y[H]?d.jsx("span",{className:"text-[11px] text-rose-500",children:y[H]}):null]}),d.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:[d.jsx("input",{type:"checkbox",checked:M.isHeading,onChange:ee=>L(H,{isHeading:ee.target.checked}),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-600 dark:bg-sky-950 dark:text-white dark:focus:ring-white/30"}),"Section heading"]})]})},M.id??`new-${H}`))}):null,d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:re,className:"rounded-lg border border-sky-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Add Step"}),d.jsx("button",{type:"button",onClick:pe,disabled:l,className:"rounded-lg border border-sky-300 bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700 dark:border-sky-700 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200",children:l?"Saving...":"Save Steps"}),f?d.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:f}):null]})]}),b?d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:d.jsxs("div",{className:"w-full max-w-3xl rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[d.jsx("h3",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Add steps from JSON"}),d.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["Format: JSON object with a ",d.jsx("code",{children:"steps"})," array of objects using"," ",d.jsx("code",{children:"{ text, isHeading }"}),"."]}),d.jsx("label",{className:"mt-4 block",children:d.jsx("textarea",{rows:14,value:N,onChange:M=>E(M.target.value),className:"w-full rounded-lg border border-sky-200 bg-white px-3 py-3 font-mono text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-sky-400",placeholder:`{
  "steps": [
    { "text": "Prep ingredients", "isHeading": true },
    { "text": "Slice onions", "isHeading": false }
  ]
}`,autoFocus:!0})}),U?d.jsx("p",{className:"mt-3 text-sm text-rose-500 dark:text-rose-300",children:U}):null,d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:P,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),d.jsx("button",{type:"button",onClick:F,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Add from JSON"})]})]})}):null]})}function Ra(n){if(n===""||n===null||n===void 0)return null;const t=Number.parseInt(n,10);return Number.isNaN(t)?null:t}function px(){const{recipeId:n}=jf(),[t,s]=v.useState(!0),[a,u]=v.useState(!1),[l,c]=v.useState(""),[f,m]=v.useState({title:"",description:"",preMinutes:"",cookMinutes:"",servings:"",heat:""});v.useEffect(()=>{let g=!0;async function x(){s(!0),c("");const{data:w,error:b}=await oe.from("recipes").select("title, description, pre_minutes, cook_minutes, servings, heat").eq("id",n).single();g&&(b?c(b.message??"Unable to load recipe details."):m({title:w?.title??"",description:w?.description??"",preMinutes:w?.pre_minutes??"",cookMinutes:w?.cook_minutes??"",servings:w?.servings??"",heat:w?.heat??""}),s(!1))}return n&&x(),()=>{g=!1}},[n]);async function y(){u(!0),c("");try{const g={title:f.title.trim(),description:f.description.trim(),pre_minutes:Ra(f.preMinutes),cook_minutes:Ra(f.cookMinutes),servings:Ra(f.servings),heat:Ra(f.heat)};if(!g.title)throw new Error("Recipe title is required.");const{error:x}=await oe.from("recipes").update(g).eq("id",n);if(x)throw x;c("Recipe basics saved.")}catch(g){throw c(g.message??"Unable to save recipe basics."),g}finally{u(!1)}}return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:f.title?.trim()?`${f.title.trim()}  Edit  Recipes`:"Edit Recipe  Recipes"})}),d.jsxs("div",{className:"flex w-full flex-col gap-8 text-left",children:[d.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Edit Recipe"}),d.jsx(cx,{recipeDraft:f,setRecipeDraft:m,onSave:y,loading:t,saving:a,status:l}),d.jsx(ux,{recipeId:n}),d.jsx(fx,{recipeId:n}),d.jsx("div",{className:"flex",children:d.jsx(Se,{to:`/recipe/${n}/view`,className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Finish"})})]})]})}function mx(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function yx(){const{recipeId:n}=jf(),[t,s]=v.useState(null),[a,u]=v.useState([]),[l,c]=v.useState([]),[f,m]=v.useState(!0),[y,g]=v.useState(""),[x,w]=v.useState(null),b=v.useMemo(()=>{let P=0;return l.map(F=>F.is_heading?{...F,displayIndex:null}:(P+=1,{...F,displayIndex:P}))},[l]),S=v.useMemo(()=>b.filter(P=>!P.is_heading),[b]),N=v.useMemo(()=>{const P=new Map;return S.forEach((F,K)=>{P.set(F.id,K)}),P},[S]);v.useEffect(()=>{if(b.length===0){w(null);return}const P=S[0];w(F=>F??P?.id??null)},[b,S]);const E=!!t?.description?.trim(),U=[{label:"Prep",value:t?.pre_minutes,display:L(t?.pre_minutes)},{label:"Cook",value:t?.cook_minutes,display:L(t?.cook_minutes)},{label:"Servings",value:t?.servings,display:t?.servings}].filter(P=>P.value!==null&&P.value!==void 0&&P.value!==""),O=mx(t?.heat);v.useEffect(()=>{let P=!0;async function F(){if(!n)return;m(!0),g("");const[K,pe,M]=await Promise.all([oe.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat").eq("id",n).single(),oe.from("recipe_ingredients").select("ingredient_id, quantity, unit, notes, ingredients ( id, name, default_unit )").eq("recipe_id",n),oe.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0})]);if(P){if(K.error?(g(K.error.message??"Unable to load recipe details."),s(null)):s(K.data??null),pe.error)g(pe.error.message??"Unable to load ingredients."),u([]);else{const H=(pe.data??[]).slice().sort((ee,se)=>{const te=ee.ingredients?.name??"",T=se.ingredients?.name??"";return te.localeCompare(T)});u(H)}M.error?(g(M.error.message??"Unable to load steps."),c([])):c(M.data??[]),m(!1)}}return F(),()=>{P=!1}},[n]);function L(P){return P==null||P===""?"":`${P} min`}function q(P){return P==null||P===""?"":Number.isInteger(Number(P))?`${Number(P)}`:`${P}`}function re(P){const F=P?.ingredients?.name??"Unknown ingredient",K=q(P?.quantity),pe=P?.unit||P?.ingredients?.default_unit||"",M=pe?.toLowerCase()==="count"?"":pe,H=P?.notes?.trim()||"",se=[[K,M].filter(Boolean).join(" "),H].filter(Boolean).join("  ");return{name:F,detail:se}}function X(P){if(!P)return null;const F=N.get(P);return F==null?null:S[F+1]?.id??null}function Z(P){if(!P)return null;const F=N.get(P);return F==null?null:S[F-1]?.id??null}return d.jsxs(d.Fragment,{children:[d.jsx(jt,{children:d.jsx("title",{children:t?.title?.trim()?`${t.title.trim()}  Recipes`:"Recipe  Recipes"})}),d.jsx("section",{className:"rounded-2xl bg-white/90 px-6 py-6 shadow-sm shadow-sky-900/5 backdrop-blur dark:bg-sky-950/60 dark:shadow-black/20",children:d.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1fr)_minmax(0,1.2fr)]",children:[d.jsx("div",{className:"md:col-span-2",children:d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-2xl font-semibold",children:t?.title||"Recipe Details"}),E?d.jsx("p",{className:"mt-2 max-w-2xl text-base text-sky-600 dark:text-sky-300",children:t.description}):null,U.length>0||O?d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[U.map(P=>d.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:[P.label," ",P.display]},P.label)),O?d.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:O}):null]}):null]}),d.jsx(Se,{to:`/recipe/${n}/edit`,className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Edit Recipe"})]})}),f?d.jsx("div",{className:"flex min-h-[40vh] items-center justify-center md:col-span-2",children:d.jsxs("div",{className:"flex flex-col items-center gap-3 text-sm text-sky-500 dark:text-sky-400",children:[d.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-sky-300 border-t-sky-900 dark:border-sky-700 dark:border-t-sky-200"}),"Loading recipe..."]})}):y?d.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700 dark:border-rose-900/60 dark:bg-rose-950/40 dark:text-rose-200 md:col-span-2",children:y}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"rounded-2xl bg-transparent",children:[d.jsx("h2",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"Ingredients"}),a.length===0?d.jsx("p",{className:"mt-5 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients added yet."}):d.jsx("ul",{className:"mt-5 space-y-3 text-sm text-sky-700 dark:text-sky-200",children:a.map(P=>{const F=re(P);return d.jsx("li",{className:"flex items-start gap-3",children:d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-sky-900 dark:text-sky-100",children:F.name}),F.detail?d.jsx("p",{className:"text-xs text-sky-500 dark:text-sky-400",children:F.detail}):null]})},P.ingredient_id)})})]}),d.jsxs("div",{className:"rounded-2xl bg-transparent",children:[d.jsx("h2",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"Steps"}),b.length===0?d.jsx("p",{className:"mt-5 text-sm text-sky-500 dark:text-sky-400",children:"No steps added yet."}):d.jsxs("div",{className:"mt-5 space-y-4",children:[d.jsx("ol",{className:"space-y-4 text-sm text-sky-700 dark:text-sky-200",children:b.map((P,F)=>P.is_heading?d.jsx("li",{className:"rounded-lg border border-dashed border-sky-200 bg-sky-50 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:P.instruction||"Section"},P.id):d.jsx("li",{className:"flex gap-3 rounded-lg px-2 py-1 transition",children:d.jsxs("button",{type:"button",onClick:()=>w(P.id),className:"flex flex-1 items-start gap-3 text-left",children:[d.jsx("span",{className:"mt-0.5 inline-flex min-w-8 items-center justify-center rounded-full border border-sky-200 px-2 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:text-sky-300",children:P.displayIndex}),d.jsx("span",{className:x===P.id?"text-base font-semibold text-sky-900 dark:text-sky-100":"",children:P.instruction})]})},P.id??`step-${F}`))}),d.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[d.jsx("button",{type:"button",onClick:()=>w(Z(x)),disabled:!Z(x),className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-sm shadow-sky-900/20 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700/50 disabled:text-sky-200 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200/60 dark:disabled:text-sky-400",children:"Prev Step"}),d.jsx("button",{type:"button",onClick:()=>w(X(x)),disabled:!X(x),className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-sm shadow-sky-900/20 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700/50 disabled:text-sky-200 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200/60 dark:disabled:text-sky-400",children:"Next Step"})]})]})]})]})]})})]})}function gx(){const[n,t]=v.useState(null),[s,a]=v.useState(!0),[u,l]=v.useState(!1),c=gr(),m=new Set(["/","/about","/contact","/login"]).has(c.pathname);return v.useEffect(()=>{let y=!0;async function g(){const{data:w}=await oe.auth.getUser();y&&(t(w?.user??null),a(!1))}const{data:x}=oe.auth.onAuthStateChange((w,b)=>{t(b?.user??null),a(!1)});return g(),()=>{y=!1,x?.subscription?.unsubscribe()}},[]),v.useEffect(()=>{l(!1)},[c.pathname]),d.jsxs("div",{className:"flex min-h-screen flex-col bg-sky-50 text-sky-900 dark:bg-sky-950 dark:text-sky-100",children:[d.jsx("header",{className:"border-b border-sky-200/70 bg-white/80 backdrop-blur dark:border-sky-800/70 dark:bg-sky-950/80",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-6 py-4",children:[d.jsx(Se,{className:"text-lg font-semibold tracking-tight",to:"/",children:" Recipes"}),d.jsxs("nav",{className:"hidden items-center gap-6 text-sm text-sky-600 dark:text-sky-300 md:flex",children:[d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/create",children:"Add"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/plan",children:"Plan"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/shop",children:"Shop"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/menu",children:"Cook"}),n?d.jsx("button",{type:"button",onClick:()=>oe.auth.signOut(),className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Log Out"}):d.jsx(Se,{className:"rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",to:"/login",children:"Log In"})]}),d.jsx("button",{type:"button",onClick:()=>l(y=>!y),className:"inline-flex items-center gap-2 rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 md:hidden dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white","aria-expanded":u,"aria-controls":"mobile-nav",children:"Menu"})]})}),u?d.jsxs("div",{className:"md:hidden",children:[d.jsx("div",{className:"fixed inset-0 z-40 bg-sky-950/60",role:"presentation",onClick:()=>l(!1)}),d.jsxs("div",{id:"mobile-nav",className:"fixed right-0 top-0 z-50 h-full w-full max-w-xs border-l border-sky-200 bg-white px-6 py-6 shadow-2xl shadow-black/20 dark:border-sky-800 dark:bg-sky-900",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"Navigation"}),d.jsx("button",{type:"button",onClick:()=>l(!1),className:"rounded-full border border-sky-200 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Close"})]}),d.jsxs("div",{className:"mt-6 flex flex-col gap-4 text-base text-sky-700 dark:text-sky-200",children:[d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/create",children:"Add"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/plan",children:"Plan"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/shop",children:"Shop"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/menu",children:"Cook"}),d.jsx("div",{className:"mt-4",children:n?d.jsx("button",{type:"button",onClick:()=>oe.auth.signOut(),className:"w-full rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Log Out"}):d.jsx(Se,{className:"inline-flex w-full justify-center rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",to:"/login",children:"Log In"})})]})]})]}):null,d.jsx("main",{className:"mx-auto w-full max-w-5xl flex-1 px-6 pt-6 pb-10",children:s?d.jsx("div",{className:"flex min-h-[40vh] items-center justify-center",children:d.jsxs("div",{className:"flex flex-col items-center gap-3 text-sm text-sky-500 dark:text-sky-400",children:[d.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-sky-300 border-t-sky-900 dark:border-sky-700 dark:border-t-sky-200"}),"Checking session"]})}):!n&&!m?d.jsx(ty,{to:"/login",replace:!0}):d.jsxs(ny,{children:[d.jsx(kt,{path:"/",element:d.jsx(Kv,{})}),d.jsx(kt,{path:"/about",element:d.jsx(ug,{})}),d.jsx(kt,{path:"/contact",element:d.jsx(zv,{})}),d.jsx(kt,{path:"/recipes",element:d.jsx(rx,{})}),d.jsx(kt,{path:"/create",element:d.jsx(Wv,{})}),d.jsx(kt,{path:"/ingredients",element:d.jsx(Qv,{})}),d.jsx(kt,{path:"/plan",element:d.jsx(ex,{})}),d.jsx(kt,{path:"/migrate",element:d.jsx(Xv,{})}),d.jsx(kt,{path:"/menu",element:d.jsx(Zv,{})}),d.jsx(kt,{path:"/shop",element:d.jsx(ix,{})}),d.jsx(kt,{path:"/household",element:d.jsx(Jv,{})}),d.jsx(kt,{path:"/recipe/:recipeId/edit",element:d.jsx(px,{})}),d.jsx(kt,{path:"/recipe/:recipeId/view",element:d.jsx(yx,{})}),d.jsx(kt,{path:"/login",element:d.jsx(Yv,{})})]})}),d.jsx("footer",{className:"mt-auto border-t border-sky-200/70 bg-white/80 backdrop-blur dark:border-sky-800/70 dark:bg-sky-950/80",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-4 px-6 py-6 text-sm text-sky-600 dark:text-sky-300 md:flex-row md:items-center md:justify-between",children:[d.jsx("div",{children:d.jsxs("p",{className:"text-sm font-semibold text-sky-900 dark:text-sky-100",children:["Made with  by"," ",d.jsx("a",{href:"https://github.com/doowyab/",target:"_blank",rel:"noreferrer",className:"underline decoration-sky-300 underline-offset-2 transition hover:text-sky-700 dark:decoration-sky-600 dark:hover:text-white",children:"doowyab"}),"."]})}),d.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.2em]",children:[d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/about",children:"About"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/contact",children:"Contact"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/recipes",children:"Recipes"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/ingredients",children:"Ingredients"}),d.jsx(Se,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/household",children:"Your Household"})]})]})})]})}im.createRoot(document.getElementById("root")).render(d.jsx(v.StrictMode,{children:d.jsx(Mf,{children:d.jsx(Ey,{children:d.jsx(gx,{})})})}));
