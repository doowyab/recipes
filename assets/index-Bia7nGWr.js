(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(u){if(u.ep)return;u.ep=!0;const l=s(u);fetch(u.href,l)}})();function Ea(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sl={exports:{}},Os={},jl={exports:{}},Se={};var dh;function J0(){if(dh)return Se;dh=1;var n=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),v=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(j,B,Z){this.props=j,this.context=B,this.refs=E,this.updater=Z||b}C.prototype.isReactComponent={},C.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},C.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function U(){}U.prototype=C.prototype;function I(j,B,Z){this.props=j,this.context=B,this.refs=E,this.updater=Z||b}var T=I.prototype=new U;T.constructor=I,S(T,C.prototype),T.isPureReactComponent=!0;var M=Array.isArray,W=Object.prototype.hasOwnProperty,V={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function O(j,B,Z){var ae,he={},be=null,je=null;if(B!=null)for(ae in B.ref!==void 0&&(je=B.ref),B.key!==void 0&&(be=""+B.key),B)W.call(B,ae)&&!Q.hasOwnProperty(ae)&&(he[ae]=B[ae]);var _e=arguments.length-2;if(_e===1)he.children=Z;else if(1<_e){for(var Ee=Array(_e),ze=0;ze<_e;ze++)Ee[ze]=arguments[ze+2];he.children=Ee}if(j&&j.defaultProps)for(ae in _e=j.defaultProps,_e)he[ae]===void 0&&(he[ae]=_e[ae]);return{$$typeof:n,type:j,key:be,ref:je,props:he,_owner:V.current}}function L(j,B){return{$$typeof:n,type:j.type,key:B,ref:j.ref,props:j.props,_owner:j._owner}}function K(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function ce(j){var B={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return B[Z]})}var re=/\/+/g;function oe(j,B){return typeof j=="object"&&j!==null&&j.key!=null?ce(""+j.key):B.toString(36)}function fe(j,B,Z,ae,he){var be=typeof j;(be==="undefined"||be==="boolean")&&(j=null);var je=!1;if(j===null)je=!0;else switch(be){case"string":case"number":je=!0;break;case"object":switch(j.$$typeof){case n:case t:je=!0}}if(je)return je=j,he=he(je),j=ae===""?"."+oe(je,0):ae,M(he)?(Z="",j!=null&&(Z=j.replace(re,"$&/")+"/"),fe(he,B,Z,"",function(ze){return ze})):he!=null&&(K(he)&&(he=L(he,Z+(!he.key||je&&je.key===he.key?"":(""+he.key).replace(re,"$&/")+"/")+j)),B.push(he)),1;if(je=0,ae=ae===""?".":ae+":",M(j))for(var _e=0;_e<j.length;_e++){be=j[_e];var Ee=ae+oe(be,_e);je+=fe(be,B,Z,Ee,he)}else if(Ee=w(j),typeof Ee=="function")for(j=Ee.call(j),_e=0;!(be=j.next()).done;)be=be.value,Ee=ae+oe(be,_e++),je+=fe(be,B,Z,Ee,he);else if(be==="object")throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return je}function xe(j,B,Z){if(j==null)return j;var ae=[],he=0;return fe(j,ae,"","",function(be){return B.call(Z,be,he++)}),ae}function pe(j){if(j._status===-1){var B=j._result;B=B(),B.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var P={current:null},F={transition:null},X={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:F,ReactCurrentOwner:V};function z(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:xe,forEach:function(j,B,Z){xe(j,function(){B.apply(this,arguments)},Z)},count:function(j){var B=0;return xe(j,function(){B++}),B},toArray:function(j){return xe(j,function(B){return B})||[]},only:function(j){if(!K(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Se.Component=C,Se.Fragment=s,Se.Profiler=u,Se.PureComponent=I,Se.StrictMode=a,Se.Suspense=m,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Se.act=z,Se.cloneElement=function(j,B,Z){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var ae=S({},j.props),he=j.key,be=j.ref,je=j._owner;if(B!=null){if(B.ref!==void 0&&(be=B.ref,je=V.current),B.key!==void 0&&(he=""+B.key),j.type&&j.type.defaultProps)var _e=j.type.defaultProps;for(Ee in B)W.call(B,Ee)&&!Q.hasOwnProperty(Ee)&&(ae[Ee]=B[Ee]===void 0&&_e!==void 0?_e[Ee]:B[Ee])}var Ee=arguments.length-2;if(Ee===1)ae.children=Z;else if(1<Ee){_e=Array(Ee);for(var ze=0;ze<Ee;ze++)_e[ze]=arguments[ze+2];ae.children=_e}return{$$typeof:n,type:j.type,key:he,ref:be,props:ae,_owner:je}},Se.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},Se.createElement=O,Se.createFactory=function(j){var B=O.bind(null,j);return B.type=j,B},Se.createRef=function(){return{current:null}},Se.forwardRef=function(j){return{$$typeof:f,render:j}},Se.isValidElement=K,Se.lazy=function(j){return{$$typeof:k,_payload:{_status:-1,_result:j},_init:pe}},Se.memo=function(j,B){return{$$typeof:y,type:j,compare:B===void 0?null:B}},Se.startTransition=function(j){var B=F.transition;F.transition={};try{j()}finally{F.transition=B}},Se.unstable_act=z,Se.useCallback=function(j,B){return P.current.useCallback(j,B)},Se.useContext=function(j){return P.current.useContext(j)},Se.useDebugValue=function(){},Se.useDeferredValue=function(j){return P.current.useDeferredValue(j)},Se.useEffect=function(j,B){return P.current.useEffect(j,B)},Se.useId=function(){return P.current.useId()},Se.useImperativeHandle=function(j,B,Z){return P.current.useImperativeHandle(j,B,Z)},Se.useInsertionEffect=function(j,B){return P.current.useInsertionEffect(j,B)},Se.useLayoutEffect=function(j,B){return P.current.useLayoutEffect(j,B)},Se.useMemo=function(j,B){return P.current.useMemo(j,B)},Se.useReducer=function(j,B,Z){return P.current.useReducer(j,B,Z)},Se.useRef=function(j){return P.current.useRef(j)},Se.useState=function(j){return P.current.useState(j)},Se.useSyncExternalStore=function(j,B,Z){return P.current.useSyncExternalStore(j,B,Z)},Se.useTransition=function(){return P.current.useTransition()},Se.version="18.3.1",Se}var hh;function cu(){return hh||(hh=1,jl.exports=J0()),jl.exports}var fh;function Q0(){if(fh)return Os;fh=1;var n=cu(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(f,m,y){var k,v={},w=null,b=null;y!==void 0&&(w=""+y),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(b=m.ref);for(k in m)a.call(m,k)&&!l.hasOwnProperty(k)&&(v[k]=m[k]);if(f&&f.defaultProps)for(k in m=f.defaultProps,m)v[k]===void 0&&(v[k]=m[k]);return{$$typeof:t,type:f,key:w,ref:b,props:v,_owner:u.current}}return Os.Fragment=s,Os.jsx=d,Os.jsxs=d,Os}var ph;function Y0(){return ph||(ph=1,Sl.exports=Q0()),Sl.exports}var c=Y0(),x=cu();const Lr=Ea(x);var aa={},El={exports:{}},vt={},Nl={exports:{}},Cl={};var mh;function X0(){return mh||(mh=1,(function(n){function t(F,X){var z=F.length;F.push(X);e:for(;0<z;){var j=z-1>>>1,B=F[j];if(0<u(B,X))F[j]=X,F[z]=B,z=j;else break e}}function s(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var X=F[0],z=F.pop();if(z!==X){F[0]=z;e:for(var j=0,B=F.length,Z=B>>>1;j<Z;){var ae=2*(j+1)-1,he=F[ae],be=ae+1,je=F[be];if(0>u(he,z))be<B&&0>u(je,he)?(F[j]=je,F[be]=z,j=be):(F[j]=he,F[ae]=z,j=ae);else if(be<B&&0>u(je,z))F[j]=je,F[be]=z,j=be;else break e}}return X}function u(F,X){var z=F.sortIndex-X.sortIndex;return z!==0?z:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();n.unstable_now=function(){return d.now()-f}}var m=[],y=[],k=1,v=null,w=3,b=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(F){for(var X=s(y);X!==null;){if(X.callback===null)a(y);else if(X.startTime<=F)a(y),X.sortIndex=X.expirationTime,t(m,X);else break;X=s(y)}}function M(F){if(E=!1,T(F),!S)if(s(m)!==null)S=!0,pe(W);else{var X=s(y);X!==null&&P(M,X.startTime-F)}}function W(F,X){S=!1,E&&(E=!1,U(O),O=-1),b=!0;var z=w;try{for(T(X),v=s(m);v!==null&&(!(v.expirationTime>X)||F&&!ce());){var j=v.callback;if(typeof j=="function"){v.callback=null,w=v.priorityLevel;var B=j(v.expirationTime<=X);X=n.unstable_now(),typeof B=="function"?v.callback=B:v===s(m)&&a(m),T(X)}else a(m);v=s(m)}if(v!==null)var Z=!0;else{var ae=s(y);ae!==null&&P(M,ae.startTime-X),Z=!1}return Z}finally{v=null,w=z,b=!1}}var V=!1,Q=null,O=-1,L=5,K=-1;function ce(){return!(n.unstable_now()-K<L)}function re(){if(Q!==null){var F=n.unstable_now();K=F;var X=!0;try{X=Q(!0,F)}finally{X?oe():(V=!1,Q=null)}}else V=!1}var oe;if(typeof I=="function")oe=function(){I(re)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,xe=fe.port2;fe.port1.onmessage=re,oe=function(){xe.postMessage(null)}}else oe=function(){C(re,0)};function pe(F){Q=F,V||(V=!0,oe())}function P(F,X){O=C(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,pe(W))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return s(m)},n.unstable_next=function(F){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var z=w;w=X;try{return F()}finally{w=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=w;w=F;try{return X()}finally{w=z}},n.unstable_scheduleCallback=function(F,X,z){var j=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,F={id:k++,callback:X,priorityLevel:F,startTime:z,expirationTime:B,sortIndex:-1},z>j?(F.sortIndex=z,t(y,F),s(m)===null&&F===s(y)&&(E?(U(O),O=-1):E=!0,P(M,z-j))):(F.sortIndex=B,t(m,F),S||b||(S=!0,pe(W))),F},n.unstable_shouldYield=ce,n.unstable_wrapCallback=function(F){var X=w;return function(){var z=w;w=X;try{return F.apply(this,arguments)}finally{w=z}}}})(Cl)),Cl}var yh;function Z0(){return yh||(yh=1,Nl.exports=X0()),Nl.exports}var gh;function em(){if(gh)return vt;gh=1;var n=cu(),t=Z0();function s(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function l(e,r){d(e,r),d(e+"Capture",r)}function d(e,r){for(u[e]=r,e=0;e<r.length;e++)a.add(r[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},v={};function w(e){return m.call(v,e)?!0:m.call(k,e)?!1:y.test(e)?v[e]=!0:(k[e]=!0,!1)}function b(e,r,i,o){if(i!==null&&i.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,r,i,o){if(r===null||typeof r>"u"||b(e,r,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(e,r,i,o,h,p,g){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=o,this.attributeNamespace=h,this.mustUseProperty=i,this.propertyName=e,this.type=r,this.sanitizeURL=p,this.removeEmptyString=g}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];C[r]=new E(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(U,I);C[r]=new E(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(U,I);C[r]=new E(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(U,I);C[r]=new E(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,r,i,o){var h=C.hasOwnProperty(r)?C[r]:null;(h!==null?h.type!==0:o||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(S(r,i,h,o)&&(i=null),o||h===null?w(r)&&(i===null?e.removeAttribute(r):e.setAttribute(r,""+i)):h.mustUseProperty?e[h.propertyName]=i===null?h.type===3?!1:"":i:(r=h.attributeName,o=h.attributeNamespace,i===null?e.removeAttribute(r):(h=h.type,i=h===3||h===4&&i===!0?"":""+i,o?e.setAttributeNS(o,r,i):e.setAttribute(r,i))))}var M=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),V=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),ce=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),P=Symbol.for("react.offscreen"),F=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var z=Object.assign,j;function B(e){if(j===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);j=r&&r[1]||""}return`
`+j+e}var Z=!1;function ae(e,r){if(!e||Z)return"";Z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(D){var o=D}Reflect.construct(e,[],r)}else{try{r.call()}catch(D){o=D}e.call(r.prototype)}else{try{throw Error()}catch(D){o=D}e()}}catch(D){if(D&&o&&typeof D.stack=="string"){for(var h=D.stack.split(`
`),p=o.stack.split(`
`),g=h.length-1,_=p.length-1;1<=g&&0<=_&&h[g]!==p[_];)_--;for(;1<=g&&0<=_;g--,_--)if(h[g]!==p[_]){if(g!==1||_!==1)do if(g--,_--,0>_||h[g]!==p[_]){var N=`
`+h[g].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),N}while(1<=g&&0<=_);break}}}finally{Z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function he(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=ae(e.type,!1),e;case 11:return e=ae(e.type.render,!1),e;case 1:return e=ae(e.type,!0),e;default:return""}}function be(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case V:return"Portal";case L:return"Profiler";case O:return"StrictMode";case oe:return"Suspense";case fe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ce:return(e.displayName||"Context")+".Consumer";case K:return(e._context.displayName||"Context")+".Provider";case re:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return r=e.displayName||null,r!==null?r:be(e.type)||"Memo";case pe:r=e._payload,e=e._init;try{return be(e(r))}catch{}}return null}function je(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(r);case 8:return r===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function _e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ze(e){var r=Ee(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),o=""+e[r];if(!e.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var h=i.get,p=i.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return h.call(this)},set:function(g){o=""+g,p.call(this,g)}}),Object.defineProperty(e,r,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function se(e){e._valueTracker||(e._valueTracker=ze(e))}function Ge(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var i=r.getValue(),o="";return e&&(o=Ee(e)?e.checked?"true":"false":e.value),e=o,e!==i?(r.setValue(e),!0):!1}function Re(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function J(e,r){var i=r.checked;return z({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function ge(e,r){var i=r.defaultValue==null?"":r.defaultValue,o=r.checked!=null?r.checked:r.defaultChecked;i=_e(r.value!=null?r.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Oe(e,r){r=r.checked,r!=null&&T(e,"checked",r,!1)}function Ue(e,r){Oe(e,r);var i=_e(r.value),o=r.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?fr(e,r.type,i):r.hasOwnProperty("defaultValue")&&fr(e,r.type,_e(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function qe(e,r,i){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var o=r.type;if(!(o!=="submit"&&o!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,i||r===e.value||(e.value=r),e.defaultValue=r}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function fr(e,r,i){(r!=="number"||Re(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var $r=Array.isArray;function nn(e,r,i,o){if(e=e.options,r){r={};for(var h=0;h<i.length;h++)r["$"+i[h]]=!0;for(i=0;i<e.length;i++)h=r.hasOwnProperty("$"+e[i].value),e[i].selected!==h&&(e[i].selected=h),h&&o&&(e[i].defaultSelected=!0)}else{for(i=""+_e(i),r=null,h=0;h<e.length;h++){if(e[h].value===i){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}r!==null||e[h].disabled||(r=e[h])}r!==null&&(r.selected=!0)}}function Aa(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(s(91));return z({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wu(e,r){var i=r.value;if(i==null){if(i=r.children,r=r.defaultValue,i!=null){if(r!=null)throw Error(s(92));if($r(i)){if(1<i.length)throw Error(s(93));i=i[0]}r=i}r==null&&(r=""),i=r}e._wrapperState={initialValue:_e(i)}}function bu(e,r){var i=_e(r.value),o=_e(r.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),r.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function _u(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Su(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ia(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Su(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xs,ju=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,i,o,h){MSApp.execUnsafeLocalFunction(function(){return e(r,i,o,h)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Xs=Xs||document.createElement("div"),Xs.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function Kn(e,r){if(r){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=r;return}}e.textContent=r}var Gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zf=["Webkit","ms","Moz","O"];Object.keys(Gn).forEach(function(e){Zf.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Gn[r]=Gn[e]})});function Eu(e,r,i){return r==null||typeof r=="boolean"||r===""?"":i||typeof r!="number"||r===0||Gn.hasOwnProperty(e)&&Gn[e]?(""+r).trim():r+"px"}function Nu(e,r){e=e.style;for(var i in r)if(r.hasOwnProperty(i)){var o=i.indexOf("--")===0,h=Eu(i,r[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,h):e[i]=h}}var ep=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(e,r){if(r){if(ep[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(s(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(s(61))}if(r.style!=null&&typeof r.style!="object")throw Error(s(62))}}function $a(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function Da(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ma=null,sn=null,an=null;function Cu(e){if(e=ys(e)){if(typeof Ma!="function")throw Error(s(280));var r=e.stateNode;r&&(r=wi(r),Ma(e.stateNode,e.type,r))}}function Tu(e){sn?an?an.push(e):an=[e]:sn=e}function Ru(){if(sn){var e=sn,r=an;if(an=sn=null,Cu(e),r)for(e=0;e<r.length;e++)Cu(r[e])}}function Ou(e,r){return e(r)}function Pu(){}var Fa=!1;function Au(e,r,i){if(Fa)return e(r,i);Fa=!0;try{return Ou(e,r,i)}finally{Fa=!1,(sn!==null||an!==null)&&(Pu(),Ru())}}function Jn(e,r){var i=e.stateNode;if(i===null)return null;var o=wi(i);if(o===null)return null;i=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var Ba=!1;if(f)try{var Qn={};Object.defineProperty(Qn,"passive",{get:function(){Ba=!0}}),window.addEventListener("test",Qn,Qn),window.removeEventListener("test",Qn,Qn)}catch{Ba=!1}function tp(e,r,i,o,h,p,g,_,N){var D=Array.prototype.slice.call(arguments,3);try{r.apply(i,D)}catch(H){this.onError(H)}}var Yn=!1,Zs=null,ei=!1,za=null,rp={onError:function(e){Yn=!0,Zs=e}};function np(e,r,i,o,h,p,g,_,N){Yn=!1,Zs=null,tp.apply(rp,arguments)}function sp(e,r,i,o,h,p,g,_,N){if(np.apply(this,arguments),Yn){if(Yn){var D=Zs;Yn=!1,Zs=null}else throw Error(s(198));ei||(ei=!0,za=D)}}function Ur(e){var r=e,i=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(i=r.return),e=r.return;while(e)}return r.tag===3?i:null}function Iu(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Lu(e){if(Ur(e)!==e)throw Error(s(188))}function ip(e){var r=e.alternate;if(!r){if(r=Ur(e),r===null)throw Error(s(188));return r!==e?null:e}for(var i=e,o=r;;){var h=i.return;if(h===null)break;var p=h.alternate;if(p===null){if(o=h.return,o!==null){i=o;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===i)return Lu(h),e;if(p===o)return Lu(h),r;p=p.sibling}throw Error(s(188))}if(i.return!==o.return)i=h,o=p;else{for(var g=!1,_=h.child;_;){if(_===i){g=!0,i=h,o=p;break}if(_===o){g=!0,o=h,i=p;break}_=_.sibling}if(!g){for(_=p.child;_;){if(_===i){g=!0,i=p,o=h;break}if(_===o){g=!0,o=p,i=h;break}_=_.sibling}if(!g)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:r}function $u(e){return e=ip(e),e!==null?Uu(e):null}function Uu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Uu(e);if(r!==null)return r;e=e.sibling}return null}var Du=t.unstable_scheduleCallback,Mu=t.unstable_cancelCallback,ap=t.unstable_shouldYield,op=t.unstable_requestPaint,Ve=t.unstable_now,lp=t.unstable_getCurrentPriorityLevel,qa=t.unstable_ImmediatePriority,Fu=t.unstable_UserBlockingPriority,ti=t.unstable_NormalPriority,up=t.unstable_LowPriority,Bu=t.unstable_IdlePriority,ri=null,Gt=null;function cp(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ri,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:fp,dp=Math.log,hp=Math.LN2;function fp(e){return e>>>=0,e===0?32:31-(dp(e)/hp|0)|0}var ni=64,si=4194304;function Xn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ii(e,r){var i=e.pendingLanes;if(i===0)return 0;var o=0,h=e.suspendedLanes,p=e.pingedLanes,g=i&268435455;if(g!==0){var _=g&~h;_!==0?o=Xn(_):(p&=g,p!==0&&(o=Xn(p)))}else g=i&~h,g!==0?o=Xn(g):p!==0&&(o=Xn(p));if(o===0)return 0;if(r!==0&&r!==o&&(r&h)===0&&(h=o&-o,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((o&4)!==0&&(o|=i&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=o;0<r;)i=31-$t(r),h=1<<i,o|=e[i],r&=~h;return o}function pp(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mp(e,r){for(var i=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,p=e.pendingLanes;0<p;){var g=31-$t(p),_=1<<g,N=h[g];N===-1?((_&i)===0||(_&o)!==0)&&(h[g]=pp(_,r)):N<=r&&(e.expiredLanes|=_),p&=~_}}function Ha(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zu(){var e=ni;return ni<<=1,(ni&4194240)===0&&(ni=64),e}function Wa(e){for(var r=[],i=0;31>i;i++)r.push(e);return r}function Zn(e,r,i){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-$t(r),e[r]=i}function yp(e,r){var i=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var h=31-$t(i),p=1<<h;r[h]=0,o[h]=-1,e[h]=-1,i&=~p}}function Va(e,r){var i=e.entangledLanes|=r;for(e=e.entanglements;i;){var o=31-$t(i),h=1<<o;h&r|e[o]&r&&(e[o]|=r),i&=~h}}var Pe=0;function qu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Hu,Ka,Wu,Vu,Ku,Ga=!1,ai=[],pr=null,mr=null,yr=null,es=new Map,ts=new Map,gr=[],gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gu(e,r){switch(e){case"focusin":case"focusout":pr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":es.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(r.pointerId)}}function rs(e,r,i,o,h,p){return e===null||e.nativeEvent!==p?(e={blockedOn:r,domEventName:i,eventSystemFlags:o,nativeEvent:p,targetContainers:[h]},r!==null&&(r=ys(r),r!==null&&Ka(r)),e):(e.eventSystemFlags|=o,r=e.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),e)}function kp(e,r,i,o,h){switch(r){case"focusin":return pr=rs(pr,e,r,i,o,h),!0;case"dragenter":return mr=rs(mr,e,r,i,o,h),!0;case"mouseover":return yr=rs(yr,e,r,i,o,h),!0;case"pointerover":var p=h.pointerId;return es.set(p,rs(es.get(p)||null,e,r,i,o,h)),!0;case"gotpointercapture":return p=h.pointerId,ts.set(p,rs(ts.get(p)||null,e,r,i,o,h)),!0}return!1}function Ju(e){var r=Dr(e.target);if(r!==null){var i=Ur(r);if(i!==null){if(r=i.tag,r===13){if(r=Iu(i),r!==null){e.blockedOn=r,Ku(e.priority,function(){Wu(i)});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var i=Qa(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);Ua=o,i.target.dispatchEvent(o),Ua=null}else return r=ys(i),r!==null&&Ka(r),e.blockedOn=i,!1;r.shift()}return!0}function Qu(e,r,i){oi(e)&&i.delete(r)}function vp(){Ga=!1,pr!==null&&oi(pr)&&(pr=null),mr!==null&&oi(mr)&&(mr=null),yr!==null&&oi(yr)&&(yr=null),es.forEach(Qu),ts.forEach(Qu)}function ns(e,r){e.blockedOn===r&&(e.blockedOn=null,Ga||(Ga=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vp)))}function ss(e){function r(h){return ns(h,e)}if(0<ai.length){ns(ai[0],e);for(var i=1;i<ai.length;i++){var o=ai[i];o.blockedOn===e&&(o.blockedOn=null)}}for(pr!==null&&ns(pr,e),mr!==null&&ns(mr,e),yr!==null&&ns(yr,e),es.forEach(r),ts.forEach(r),i=0;i<gr.length;i++)o=gr[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<gr.length&&(i=gr[0],i.blockedOn===null);)Ju(i),i.blockedOn===null&&gr.shift()}var on=M.ReactCurrentBatchConfig,li=!0;function xp(e,r,i,o){var h=Pe,p=on.transition;on.transition=null;try{Pe=1,Ja(e,r,i,o)}finally{Pe=h,on.transition=p}}function wp(e,r,i,o){var h=Pe,p=on.transition;on.transition=null;try{Pe=4,Ja(e,r,i,o)}finally{Pe=h,on.transition=p}}function Ja(e,r,i,o){if(li){var h=Qa(e,r,i,o);if(h===null)po(e,r,o,ui,i),Gu(e,o);else if(kp(h,e,r,i,o))o.stopPropagation();else if(Gu(e,o),r&4&&-1<gp.indexOf(e)){for(;h!==null;){var p=ys(h);if(p!==null&&Hu(p),p=Qa(e,r,i,o),p===null&&po(e,r,o,ui,i),p===h)break;h=p}h!==null&&o.stopPropagation()}else po(e,r,o,null,i)}}var ui=null;function Qa(e,r,i,o){if(ui=null,e=Da(o),e=Dr(e),e!==null)if(r=Ur(e),r===null)e=null;else if(i=r.tag,i===13){if(e=Iu(r),e!==null)return e;e=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return ui=e,null}function Yu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lp()){case qa:return 1;case Fu:return 4;case ti:case up:return 16;case Bu:return 536870912;default:return 16}default:return 16}}var kr=null,Ya=null,ci=null;function Xu(){if(ci)return ci;var e,r=Ya,i=r.length,o,h="value"in kr?kr.value:kr.textContent,p=h.length;for(e=0;e<i&&r[e]===h[e];e++);var g=i-e;for(o=1;o<=g&&r[i-o]===h[p-o];o++);return ci=h.slice(e,1<o?1-o:void 0)}function di(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function Zu(){return!1}function wt(e){function r(i,o,h,p,g){this._reactName=i,this._targetInst=h,this.type=o,this.nativeEvent=p,this.target=g,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(i=e[_],this[_]=i?i(p):p[_]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?hi:Zu,this.isPropagationStopped=Zu,this}return z(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),r}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=wt(ln),is=z({},ln,{view:0,detail:0}),bp=wt(is),Za,eo,as,fi=z({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==as&&(as&&e.type==="mousemove"?(Za=e.screenX-as.screenX,eo=e.screenY-as.screenY):eo=Za=0,as=e),Za)},movementY:function(e){return"movementY"in e?e.movementY:eo}}),ec=wt(fi),_p=z({},fi,{dataTransfer:0}),Sp=wt(_p),jp=z({},is,{relatedTarget:0}),to=wt(jp),Ep=z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),Np=wt(Ep),Cp=z({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tp=wt(Cp),Rp=z({},ln,{data:0}),tc=wt(Rp),Op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ap={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ip(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Ap[e])?!!r[e]:!1}function ro(){return Ip}var Lp=z({},is,{key:function(e){if(e.key){var r=Op[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=di(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(e){return e.type==="keypress"?di(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?di(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$p=wt(Lp),Up=z({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rc=wt(Up),Dp=z({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),Mp=wt(Dp),Fp=z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bp=wt(Fp),zp=z({},fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qp=wt(zp),Hp=[9,13,27,32],no=f&&"CompositionEvent"in window,os=null;f&&"documentMode"in document&&(os=document.documentMode);var Wp=f&&"TextEvent"in window&&!os,nc=f&&(!no||os&&8<os&&11>=os),sc=" ",ic=!1;function ac(e,r){switch(e){case"keyup":return Hp.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var un=!1;function Vp(e,r){switch(e){case"compositionend":return oc(r);case"keypress":return r.which!==32?null:(ic=!0,sc);case"textInput":return e=r.data,e===sc&&ic?null:e;default:return null}}function Kp(e,r){if(un)return e==="compositionend"||!no&&ac(e,r)?(e=Xu(),ci=Ya=kr=null,un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return nc&&r.locale!=="ko"?null:r.data;default:return null}}var Gp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lc(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Gp[e.type]:r==="textarea"}function uc(e,r,i,o){Tu(o),r=ki(r,"onChange"),0<r.length&&(i=new Xa("onChange","change",null,i,o),e.push({event:i,listeners:r}))}var ls=null,us=null;function Jp(e){Nc(e,0)}function pi(e){var r=pn(e);if(Ge(r))return e}function Qp(e,r){if(e==="change")return r}var cc=!1;if(f){var so;if(f){var io="oninput"in document;if(!io){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),io=typeof dc.oninput=="function"}so=io}else so=!1;cc=so&&(!document.documentMode||9<document.documentMode)}function hc(){ls&&(ls.detachEvent("onpropertychange",fc),us=ls=null)}function fc(e){if(e.propertyName==="value"&&pi(us)){var r=[];uc(r,us,e,Da(e)),Au(Jp,r)}}function Yp(e,r,i){e==="focusin"?(hc(),ls=r,us=i,ls.attachEvent("onpropertychange",fc)):e==="focusout"&&hc()}function Xp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pi(us)}function Zp(e,r){if(e==="click")return pi(r)}function e0(e,r){if(e==="input"||e==="change")return pi(r)}function t0(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Ut=typeof Object.is=="function"?Object.is:t0;function cs(e,r){if(Ut(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var h=i[o];if(!m.call(r,h)||!Ut(e[h],r[h]))return!1}return!0}function pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mc(e,r){var i=pc(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=r&&o>=r)return{node:i,offset:r-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=pc(i)}}function yc(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?yc(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function gc(){for(var e=window,r=Re();r instanceof e.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)e=r.contentWindow;else break;r=Re(e.document)}return r}function ao(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function r0(e){var r=gc(),i=e.focusedElem,o=e.selectionRange;if(r!==i&&i&&i.ownerDocument&&yc(i.ownerDocument.documentElement,i)){if(o!==null&&ao(i)){if(r=o.start,e=o.end,e===void 0&&(e=r),"selectionStart"in i)i.selectionStart=r,i.selectionEnd=Math.min(e,i.value.length);else if(e=(r=i.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var h=i.textContent.length,p=Math.min(o.start,h);o=o.end===void 0?p:Math.min(o.end,h),!e.extend&&p>o&&(h=o,o=p,p=h),h=mc(i,p);var g=mc(i,o);h&&g&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),e.removeAllRanges(),p>o?(e.addRange(r),e.extend(g.node,g.offset)):(r.setEnd(g.node,g.offset),e.addRange(r)))}}for(r=[],e=i;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<r.length;i++)e=r[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var n0=f&&"documentMode"in document&&11>=document.documentMode,cn=null,oo=null,ds=null,lo=!1;function kc(e,r,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;lo||cn==null||cn!==Re(o)||(o=cn,"selectionStart"in o&&ao(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ds&&cs(ds,o)||(ds=o,o=ki(oo,"onSelect"),0<o.length&&(r=new Xa("onSelect","select",null,r,i),e.push({event:r,listeners:o}),r.target=cn)))}function mi(e,r){var i={};return i[e.toLowerCase()]=r.toLowerCase(),i["Webkit"+e]="webkit"+r,i["Moz"+e]="moz"+r,i}var dn={animationend:mi("Animation","AnimationEnd"),animationiteration:mi("Animation","AnimationIteration"),animationstart:mi("Animation","AnimationStart"),transitionend:mi("Transition","TransitionEnd")},uo={},vc={};f&&(vc=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);function yi(e){if(uo[e])return uo[e];if(!dn[e])return e;var r=dn[e],i;for(i in r)if(r.hasOwnProperty(i)&&i in vc)return uo[e]=r[i];return e}var xc=yi("animationend"),wc=yi("animationiteration"),bc=yi("animationstart"),_c=yi("transitionend"),Sc=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vr(e,r){Sc.set(e,r),l(r,[e])}for(var co=0;co<jc.length;co++){var ho=jc[co],s0=ho.toLowerCase(),i0=ho[0].toUpperCase()+ho.slice(1);vr(s0,"on"+i0)}vr(xc,"onAnimationEnd"),vr(wc,"onAnimationIteration"),vr(bc,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(_c,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a0=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function Ec(e,r,i){var o=e.type||"unknown-event";e.currentTarget=i,sp(o,r,void 0,e),e.currentTarget=null}function Nc(e,r){r=(r&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],h=o.event;o=o.listeners;e:{var p=void 0;if(r)for(var g=o.length-1;0<=g;g--){var _=o[g],N=_.instance,D=_.currentTarget;if(_=_.listener,N!==p&&h.isPropagationStopped())break e;Ec(h,_,D),p=N}else for(g=0;g<o.length;g++){if(_=o[g],N=_.instance,D=_.currentTarget,_=_.listener,N!==p&&h.isPropagationStopped())break e;Ec(h,_,D),p=N}}}if(ei)throw e=za,ei=!1,za=null,e}function Le(e,r){var i=r[xo];i===void 0&&(i=r[xo]=new Set);var o=e+"__bubble";i.has(o)||(Cc(r,e,2,!1),i.add(o))}function fo(e,r,i){var o=0;r&&(o|=4),Cc(i,e,o,r)}var gi="_reactListening"+Math.random().toString(36).slice(2);function fs(e){if(!e[gi]){e[gi]=!0,a.forEach(function(i){i!=="selectionchange"&&(a0.has(i)||fo(i,!1,e),fo(i,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[gi]||(r[gi]=!0,fo("selectionchange",!1,r))}}function Cc(e,r,i,o){switch(Yu(r)){case 1:var h=xp;break;case 4:h=wp;break;default:h=Ja}i=h.bind(null,r,i,e),h=void 0,!Ba||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(r,i,{capture:!0,passive:h}):e.addEventListener(r,i,!0):h!==void 0?e.addEventListener(r,i,{passive:h}):e.addEventListener(r,i,!1)}function po(e,r,i,o,h){var p=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var _=o.stateNode.containerInfo;if(_===h||_.nodeType===8&&_.parentNode===h)break;if(g===4)for(g=o.return;g!==null;){var N=g.tag;if((N===3||N===4)&&(N=g.stateNode.containerInfo,N===h||N.nodeType===8&&N.parentNode===h))return;g=g.return}for(;_!==null;){if(g=Dr(_),g===null)return;if(N=g.tag,N===5||N===6){o=p=g;continue e}_=_.parentNode}}o=o.return}Au(function(){var D=p,H=Da(i),G=[];e:{var q=Sc.get(e);if(q!==void 0){var ee=Xa,ie=e;switch(e){case"keypress":if(di(i)===0)break e;case"keydown":case"keyup":ee=$p;break;case"focusin":ie="focus",ee=to;break;case"focusout":ie="blur",ee=to;break;case"beforeblur":case"afterblur":ee=to;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Sp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Mp;break;case xc:case wc:case bc:ee=Np;break;case _c:ee=Bp;break;case"scroll":ee=bp;break;case"wheel":ee=qp;break;case"copy":case"cut":case"paste":ee=Tp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=rc}var le=(r&4)!==0,Ke=!le&&e==="scroll",A=le?q!==null?q+"Capture":null:q;le=[];for(var R=D,$;R!==null;){$=R;var Y=$.stateNode;if($.tag===5&&Y!==null&&($=Y,A!==null&&(Y=Jn(R,A),Y!=null&&le.push(ps(R,Y,$)))),Ke)break;R=R.return}0<le.length&&(q=new ee(q,ie,null,i,H),G.push({event:q,listeners:le}))}}if((r&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",q&&i!==Ua&&(ie=i.relatedTarget||i.fromElement)&&(Dr(ie)||ie[Zt]))break e;if((ee||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,ee?(ie=i.relatedTarget||i.toElement,ee=D,ie=ie?Dr(ie):null,ie!==null&&(Ke=Ur(ie),ie!==Ke||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ee=null,ie=D),ee!==ie)){if(le=ec,Y="onMouseLeave",A="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(le=rc,Y="onPointerLeave",A="onPointerEnter",R="pointer"),Ke=ee==null?q:pn(ee),$=ie==null?q:pn(ie),q=new le(Y,R+"leave",ee,i,H),q.target=Ke,q.relatedTarget=$,Y=null,Dr(H)===D&&(le=new le(A,R+"enter",ie,i,H),le.target=$,le.relatedTarget=Ke,Y=le),Ke=Y,ee&&ie)t:{for(le=ee,A=ie,R=0,$=le;$;$=hn($))R++;for($=0,Y=A;Y;Y=hn(Y))$++;for(;0<R-$;)le=hn(le),R--;for(;0<$-R;)A=hn(A),$--;for(;R--;){if(le===A||A!==null&&le===A.alternate)break t;le=hn(le),A=hn(A)}le=null}else le=null;ee!==null&&Tc(G,q,ee,le,!1),ie!==null&&Ke!==null&&Tc(G,Ke,ie,le,!0)}}e:{if(q=D?pn(D):window,ee=q.nodeName&&q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&q.type==="file")var ue=Qp;else if(lc(q))if(cc)ue=e0;else{ue=Xp;var me=Yp}else(ee=q.nodeName)&&ee.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ue=Zp);if(ue&&(ue=ue(e,D))){uc(G,ue,i,H);break e}me&&me(e,q,D),e==="focusout"&&(me=q._wrapperState)&&me.controlled&&q.type==="number"&&fr(q,"number",q.value)}switch(me=D?pn(D):window,e){case"focusin":(lc(me)||me.contentEditable==="true")&&(cn=me,oo=D,ds=null);break;case"focusout":ds=oo=cn=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,kc(G,i,H);break;case"selectionchange":if(n0)break;case"keydown":case"keyup":kc(G,i,H)}var ye;if(no)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else un?ac(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(nc&&i.locale!=="ko"&&(un||we!=="onCompositionStart"?we==="onCompositionEnd"&&un&&(ye=Xu()):(kr=H,Ya="value"in kr?kr.value:kr.textContent,un=!0)),me=ki(D,we),0<me.length&&(we=new tc(we,e,null,i,H),G.push({event:we,listeners:me}),ye?we.data=ye:(ye=oc(i),ye!==null&&(we.data=ye)))),(ye=Wp?Vp(e,i):Kp(e,i))&&(D=ki(D,"onBeforeInput"),0<D.length&&(H=new tc("onBeforeInput","beforeinput",null,i,H),G.push({event:H,listeners:D}),H.data=ye))}Nc(G,r)})}function ps(e,r,i){return{instance:e,listener:r,currentTarget:i}}function ki(e,r){for(var i=r+"Capture",o=[];e!==null;){var h=e,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Jn(e,i),p!=null&&o.unshift(ps(e,p,h)),p=Jn(e,r),p!=null&&o.push(ps(e,p,h))),e=e.return}return o}function hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tc(e,r,i,o,h){for(var p=r._reactName,g=[];i!==null&&i!==o;){var _=i,N=_.alternate,D=_.stateNode;if(N!==null&&N===o)break;_.tag===5&&D!==null&&(_=D,h?(N=Jn(i,p),N!=null&&g.unshift(ps(i,N,_))):h||(N=Jn(i,p),N!=null&&g.push(ps(i,N,_)))),i=i.return}g.length!==0&&e.push({event:r,listeners:g})}var o0=/\r\n?/g,l0=/\u0000|\uFFFD/g;function Rc(e){return(typeof e=="string"?e:""+e).replace(o0,`
`).replace(l0,"")}function vi(e,r,i){if(r=Rc(r),Rc(e)!==r&&i)throw Error(s(425))}function xi(){}var mo=null,yo=null;function go(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,u0=typeof clearTimeout=="function"?clearTimeout:void 0,Oc=typeof Promise=="function"?Promise:void 0,c0=typeof queueMicrotask=="function"?queueMicrotask:typeof Oc<"u"?function(e){return Oc.resolve(null).then(e).catch(d0)}:ko;function d0(e){setTimeout(function(){throw e})}function vo(e,r){var i=r,o=0;do{var h=i.nextSibling;if(e.removeChild(i),h&&h.nodeType===8)if(i=h.data,i==="/$"){if(o===0){e.removeChild(h),ss(r);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=h}while(i);ss(r)}function xr(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Pc(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return e;r--}else i==="/$"&&r++}e=e.previousSibling}return null}var fn=Math.random().toString(36).slice(2),Jt="__reactFiber$"+fn,ms="__reactProps$"+fn,Zt="__reactContainer$"+fn,xo="__reactEvents$"+fn,h0="__reactListeners$"+fn,f0="__reactHandles$"+fn;function Dr(e){var r=e[Jt];if(r)return r;for(var i=e.parentNode;i;){if(r=i[Zt]||i[Jt]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(e=Pc(e);e!==null;){if(i=e[Jt])return i;e=Pc(e)}return r}e=i,i=e.parentNode}return null}function ys(e){return e=e[Jt]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function wi(e){return e[ms]||null}var wo=[],mn=-1;function wr(e){return{current:e}}function $e(e){0>mn||(e.current=wo[mn],wo[mn]=null,mn--)}function Ae(e,r){mn++,wo[mn]=e.current,e.current=r}var br={},ot=wr(br),pt=wr(!1),Mr=br;function yn(e,r){var i=e.type.contextTypes;if(!i)return br;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in i)h[p]=r[p];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=h),h}function mt(e){return e=e.childContextTypes,e!=null}function bi(){$e(pt),$e(ot)}function Ac(e,r,i){if(ot.current!==br)throw Error(s(168));Ae(ot,r),Ae(pt,i)}function Ic(e,r,i){var o=e.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var h in o)if(!(h in r))throw Error(s(108,je(e)||"Unknown",h));return z({},i,o)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||br,Mr=ot.current,Ae(ot,e),Ae(pt,pt.current),!0}function Lc(e,r,i){var o=e.stateNode;if(!o)throw Error(s(169));i?(e=Ic(e,r,Mr),o.__reactInternalMemoizedMergedChildContext=e,$e(pt),$e(ot),Ae(ot,e)):$e(pt),Ae(pt,i)}var er=null,Si=!1,bo=!1;function $c(e){er===null?er=[e]:er.push(e)}function p0(e){Si=!0,$c(e)}function _r(){if(!bo&&er!==null){bo=!0;var e=0,r=Pe;try{var i=er;for(Pe=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}er=null,Si=!1}catch(h){throw er!==null&&(er=er.slice(e+1)),Du(qa,_r),h}finally{Pe=r,bo=!1}}return null}var gn=[],kn=0,ji=null,Ei=0,Ct=[],Tt=0,Fr=null,tr=1,rr="";function Br(e,r){gn[kn++]=Ei,gn[kn++]=ji,ji=e,Ei=r}function Uc(e,r,i){Ct[Tt++]=tr,Ct[Tt++]=rr,Ct[Tt++]=Fr,Fr=e;var o=tr;e=rr;var h=32-$t(o)-1;o&=~(1<<h),i+=1;var p=32-$t(r)+h;if(30<p){var g=h-h%5;p=(o&(1<<g)-1).toString(32),o>>=g,h-=g,tr=1<<32-$t(r)+h|i<<h|o,rr=p+e}else tr=1<<p|i<<h|o,rr=e}function _o(e){e.return!==null&&(Br(e,1),Uc(e,1,0))}function So(e){for(;e===ji;)ji=gn[--kn],gn[kn]=null,Ei=gn[--kn],gn[kn]=null;for(;e===Fr;)Fr=Ct[--Tt],Ct[Tt]=null,rr=Ct[--Tt],Ct[Tt]=null,tr=Ct[--Tt],Ct[Tt]=null}var bt=null,_t=null,De=!1,Dt=null;function Dc(e,r){var i=At(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=e,r=e.deletions,r===null?(e.deletions=[i],e.flags|=16):r.push(i)}function Mc(e,r){switch(e.tag){case 5:var i=e.type;return r=r.nodeType!==1||i.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,bt=e,_t=xr(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,bt=e,_t=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(i=Fr!==null?{id:tr,overflow:rr}:null,e.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=At(18,null,null,0),i.stateNode=r,i.return=e,e.child=i,bt=e,_t=null,!0):!1;default:return!1}}function jo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eo(e){if(De){var r=_t;if(r){var i=r;if(!Mc(e,r)){if(jo(e))throw Error(s(418));r=xr(i.nextSibling);var o=bt;r&&Mc(e,r)?Dc(o,i):(e.flags=e.flags&-4097|2,De=!1,bt=e)}}else{if(jo(e))throw Error(s(418));e.flags=e.flags&-4097|2,De=!1,bt=e}}}function Fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function Ni(e){if(e!==bt)return!1;if(!De)return Fc(e),De=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!go(e.type,e.memoizedProps)),r&&(r=_t)){if(jo(e))throw Bc(),Error(s(418));for(;r;)Dc(e,r),r=xr(r.nextSibling)}if(Fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(r===0){_t=xr(e.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++}e=e.nextSibling}_t=null}}else _t=bt?xr(e.stateNode.nextSibling):null;return!0}function Bc(){for(var e=_t;e;)e=xr(e.nextSibling)}function vn(){_t=bt=null,De=!1}function No(e){Dt===null?Dt=[e]:Dt.push(e)}var m0=M.ReactCurrentBatchConfig;function gs(e,r,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var o=i.stateNode}if(!o)throw Error(s(147,e));var h=o,p=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(g){var _=h.refs;g===null?delete _[p]:_[p]=g},r._stringRef=p,r)}if(typeof e!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function Ci(e,r){throw e=Object.prototype.toString.call(r),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function zc(e){var r=e._init;return r(e._payload)}function qc(e){function r(A,R){if(e){var $=A.deletions;$===null?(A.deletions=[R],A.flags|=16):$.push(R)}}function i(A,R){if(!e)return null;for(;R!==null;)r(A,R),R=R.sibling;return null}function o(A,R){for(A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function h(A,R){return A=Or(A,R),A.index=0,A.sibling=null,A}function p(A,R,$){return A.index=$,e?($=A.alternate,$!==null?($=$.index,$<R?(A.flags|=2,R):$):(A.flags|=2,R)):(A.flags|=1048576,R)}function g(A){return e&&A.alternate===null&&(A.flags|=2),A}function _(A,R,$,Y){return R===null||R.tag!==6?(R=kl($,A.mode,Y),R.return=A,R):(R=h(R,$),R.return=A,R)}function N(A,R,$,Y){var ue=$.type;return ue===Q?H(A,R,$.props.children,Y,$.key):R!==null&&(R.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===pe&&zc(ue)===R.type)?(Y=h(R,$.props),Y.ref=gs(A,R,$),Y.return=A,Y):(Y=Xi($.type,$.key,$.props,null,A.mode,Y),Y.ref=gs(A,R,$),Y.return=A,Y)}function D(A,R,$,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==$.containerInfo||R.stateNode.implementation!==$.implementation?(R=vl($,A.mode,Y),R.return=A,R):(R=h(R,$.children||[]),R.return=A,R)}function H(A,R,$,Y,ue){return R===null||R.tag!==7?(R=Jr($,A.mode,Y,ue),R.return=A,R):(R=h(R,$),R.return=A,R)}function G(A,R,$){if(typeof R=="string"&&R!==""||typeof R=="number")return R=kl(""+R,A.mode,$),R.return=A,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case W:return $=Xi(R.type,R.key,R.props,null,A.mode,$),$.ref=gs(A,null,R),$.return=A,$;case V:return R=vl(R,A.mode,$),R.return=A,R;case pe:var Y=R._init;return G(A,Y(R._payload),$)}if($r(R)||X(R))return R=Jr(R,A.mode,$,null),R.return=A,R;Ci(A,R)}return null}function q(A,R,$,Y){var ue=R!==null?R.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ue!==null?null:_(A,R,""+$,Y);if(typeof $=="object"&&$!==null){switch($.$$typeof){case W:return $.key===ue?N(A,R,$,Y):null;case V:return $.key===ue?D(A,R,$,Y):null;case pe:return ue=$._init,q(A,R,ue($._payload),Y)}if($r($)||X($))return ue!==null?null:H(A,R,$,Y,null);Ci(A,$)}return null}function ee(A,R,$,Y,ue){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return A=A.get($)||null,_(R,A,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case W:return A=A.get(Y.key===null?$:Y.key)||null,N(R,A,Y,ue);case V:return A=A.get(Y.key===null?$:Y.key)||null,D(R,A,Y,ue);case pe:var me=Y._init;return ee(A,R,$,me(Y._payload),ue)}if($r(Y)||X(Y))return A=A.get($)||null,H(R,A,Y,ue,null);Ci(R,Y)}return null}function ie(A,R,$,Y){for(var ue=null,me=null,ye=R,we=R=0,rt=null;ye!==null&&we<$.length;we++){ye.index>we?(rt=ye,ye=null):rt=ye.sibling;var Te=q(A,ye,$[we],Y);if(Te===null){ye===null&&(ye=rt);break}e&&ye&&Te.alternate===null&&r(A,ye),R=p(Te,R,we),me===null?ue=Te:me.sibling=Te,me=Te,ye=rt}if(we===$.length)return i(A,ye),De&&Br(A,we),ue;if(ye===null){for(;we<$.length;we++)ye=G(A,$[we],Y),ye!==null&&(R=p(ye,R,we),me===null?ue=ye:me.sibling=ye,me=ye);return De&&Br(A,we),ue}for(ye=o(A,ye);we<$.length;we++)rt=ee(ye,A,we,$[we],Y),rt!==null&&(e&&rt.alternate!==null&&ye.delete(rt.key===null?we:rt.key),R=p(rt,R,we),me===null?ue=rt:me.sibling=rt,me=rt);return e&&ye.forEach(function(Pr){return r(A,Pr)}),De&&Br(A,we),ue}function le(A,R,$,Y){var ue=X($);if(typeof ue!="function")throw Error(s(150));if($=ue.call($),$==null)throw Error(s(151));for(var me=ue=null,ye=R,we=R=0,rt=null,Te=$.next();ye!==null&&!Te.done;we++,Te=$.next()){ye.index>we?(rt=ye,ye=null):rt=ye.sibling;var Pr=q(A,ye,Te.value,Y);if(Pr===null){ye===null&&(ye=rt);break}e&&ye&&Pr.alternate===null&&r(A,ye),R=p(Pr,R,we),me===null?ue=Pr:me.sibling=Pr,me=Pr,ye=rt}if(Te.done)return i(A,ye),De&&Br(A,we),ue;if(ye===null){for(;!Te.done;we++,Te=$.next())Te=G(A,Te.value,Y),Te!==null&&(R=p(Te,R,we),me===null?ue=Te:me.sibling=Te,me=Te);return De&&Br(A,we),ue}for(ye=o(A,ye);!Te.done;we++,Te=$.next())Te=ee(ye,A,we,Te.value,Y),Te!==null&&(e&&Te.alternate!==null&&ye.delete(Te.key===null?we:Te.key),R=p(Te,R,we),me===null?ue=Te:me.sibling=Te,me=Te);return e&&ye.forEach(function(G0){return r(A,G0)}),De&&Br(A,we),ue}function Ke(A,R,$,Y){if(typeof $=="object"&&$!==null&&$.type===Q&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case W:e:{for(var ue=$.key,me=R;me!==null;){if(me.key===ue){if(ue=$.type,ue===Q){if(me.tag===7){i(A,me.sibling),R=h(me,$.props.children),R.return=A,A=R;break e}}else if(me.elementType===ue||typeof ue=="object"&&ue!==null&&ue.$$typeof===pe&&zc(ue)===me.type){i(A,me.sibling),R=h(me,$.props),R.ref=gs(A,me,$),R.return=A,A=R;break e}i(A,me);break}else r(A,me);me=me.sibling}$.type===Q?(R=Jr($.props.children,A.mode,Y,$.key),R.return=A,A=R):(Y=Xi($.type,$.key,$.props,null,A.mode,Y),Y.ref=gs(A,R,$),Y.return=A,A=Y)}return g(A);case V:e:{for(me=$.key;R!==null;){if(R.key===me)if(R.tag===4&&R.stateNode.containerInfo===$.containerInfo&&R.stateNode.implementation===$.implementation){i(A,R.sibling),R=h(R,$.children||[]),R.return=A,A=R;break e}else{i(A,R);break}else r(A,R);R=R.sibling}R=vl($,A.mode,Y),R.return=A,A=R}return g(A);case pe:return me=$._init,Ke(A,R,me($._payload),Y)}if($r($))return ie(A,R,$,Y);if(X($))return le(A,R,$,Y);Ci(A,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,R!==null&&R.tag===6?(i(A,R.sibling),R=h(R,$),R.return=A,A=R):(i(A,R),R=kl($,A.mode,Y),R.return=A,A=R),g(A)):i(A,R)}return Ke}var xn=qc(!0),Hc=qc(!1),Ti=wr(null),Ri=null,wn=null,Co=null;function To(){Co=wn=Ri=null}function Ro(e){var r=Ti.current;$e(Ti),e._currentValue=r}function Oo(e,r,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),e===i)break;e=e.return}}function bn(e,r){Ri=e,Co=wn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(yt=!0),e.firstContext=null)}function Rt(e){var r=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:r,next:null},wn===null){if(Ri===null)throw Error(s(308));wn=e,Ri.dependencies={lanes:0,firstContext:e}}else wn=wn.next=e;return r}var zr=null;function Po(e){zr===null?zr=[e]:zr.push(e)}function Wc(e,r,i,o){var h=r.interleaved;return h===null?(i.next=i,Po(r)):(i.next=h.next,h.next=i),r.interleaved=i,nr(e,o)}function nr(e,r){e.lanes|=r;var i=e.alternate;for(i!==null&&(i.lanes|=r),i=e,e=e.return;e!==null;)e.childLanes|=r,i=e.alternate,i!==null&&(i.childLanes|=r),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Sr=!1;function Ao(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vc(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function jr(e,r,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ne&2)!==0){var h=o.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),o.pending=r,nr(e,i)}return h=o.interleaved,h===null?(r.next=r,Po(o)):(r.next=h.next,h.next=r),o.interleaved=r,nr(e,i)}function Oi(e,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var o=r.lanes;o&=e.pendingLanes,i|=o,r.lanes=i,Va(e,i)}}function Kc(e,r){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var h=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?h=p=g:p=p.next=g,i=i.next}while(i!==null);p===null?h=p=r:p=p.next=r}else h=p=r;i={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=r:e.next=r,i.lastBaseUpdate=r}function Pi(e,r,i,o){var h=e.updateQueue;Sr=!1;var p=h.firstBaseUpdate,g=h.lastBaseUpdate,_=h.shared.pending;if(_!==null){h.shared.pending=null;var N=_,D=N.next;N.next=null,g===null?p=D:g.next=D,g=N;var H=e.alternate;H!==null&&(H=H.updateQueue,_=H.lastBaseUpdate,_!==g&&(_===null?H.firstBaseUpdate=D:_.next=D,H.lastBaseUpdate=N))}if(p!==null){var G=h.baseState;g=0,H=D=N=null,_=p;do{var q=_.lane,ee=_.eventTime;if((o&q)===q){H!==null&&(H=H.next={eventTime:ee,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var ie=e,le=_;switch(q=r,ee=i,le.tag){case 1:if(ie=le.payload,typeof ie=="function"){G=ie.call(ee,G,q);break e}G=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=le.payload,q=typeof ie=="function"?ie.call(ee,G,q):ie,q==null)break e;G=z({},G,q);break e;case 2:Sr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,q=h.effects,q===null?h.effects=[_]:q.push(_))}else ee={eventTime:ee,lane:q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},H===null?(D=H=ee,N=G):H=H.next=ee,g|=q;if(_=_.next,_===null){if(_=h.shared.pending,_===null)break;q=_,_=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(H===null&&(N=G),h.baseState=N,h.firstBaseUpdate=D,h.lastBaseUpdate=H,r=h.shared.interleaved,r!==null){h=r;do g|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Wr|=g,e.lanes=g,e.memoizedState=G}}function Gc(e,r,i){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var o=e[r],h=o.callback;if(h!==null){if(o.callback=null,o=i,typeof h!="function")throw Error(s(191,h));h.call(o)}}}var ks={},Qt=wr(ks),vs=wr(ks),xs=wr(ks);function qr(e){if(e===ks)throw Error(s(174));return e}function Io(e,r){switch(Ae(xs,r),Ae(vs,e),Ae(Qt,ks),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Ia(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Ia(r,e)}$e(Qt),Ae(Qt,r)}function _n(){$e(Qt),$e(vs),$e(xs)}function Jc(e){qr(xs.current);var r=qr(Qt.current),i=Ia(r,e.type);r!==i&&(Ae(vs,e),Ae(Qt,i))}function Lo(e){vs.current===e&&($e(Qt),$e(vs))}var Fe=wr(0);function Ai(e){for(var r=e;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var $o=[];function Uo(){for(var e=0;e<$o.length;e++)$o[e]._workInProgressVersionPrimary=null;$o.length=0}var Ii=M.ReactCurrentDispatcher,Do=M.ReactCurrentBatchConfig,Hr=0,Be=null,Ye=null,et=null,Li=!1,ws=!1,bs=0,y0=0;function lt(){throw Error(s(321))}function Mo(e,r){if(r===null)return!1;for(var i=0;i<r.length&&i<e.length;i++)if(!Ut(e[i],r[i]))return!1;return!0}function Fo(e,r,i,o,h,p){if(Hr=p,Be=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Ii.current=e===null||e.memoizedState===null?x0:w0,e=i(o,h),ws){p=0;do{if(ws=!1,bs=0,25<=p)throw Error(s(301));p+=1,et=Ye=null,r.updateQueue=null,Ii.current=b0,e=i(o,h)}while(ws)}if(Ii.current=Di,r=Ye!==null&&Ye.next!==null,Hr=0,et=Ye=Be=null,Li=!1,r)throw Error(s(300));return e}function Bo(){var e=bs!==0;return bs=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Be.memoizedState=et=e:et=et.next=e,et}function Ot(){if(Ye===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var r=et===null?Be.memoizedState:et.next;if(r!==null)et=r,Ye=e;else{if(e===null)throw Error(s(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Be.memoizedState=et=e:et=et.next=e}return et}function _s(e,r){return typeof r=="function"?r(e):r}function zo(e){var r=Ot(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=Ye,h=o.baseQueue,p=i.pending;if(p!==null){if(h!==null){var g=h.next;h.next=p.next,p.next=g}o.baseQueue=h=p,i.pending=null}if(h!==null){p=h.next,o=o.baseState;var _=g=null,N=null,D=p;do{var H=D.lane;if((Hr&H)===H)N!==null&&(N=N.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),o=D.hasEagerState?D.eagerState:e(o,D.action);else{var G={lane:H,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};N===null?(_=N=G,g=o):N=N.next=G,Be.lanes|=H,Wr|=H}D=D.next}while(D!==null&&D!==p);N===null?g=o:N.next=_,Ut(o,r.memoizedState)||(yt=!0),r.memoizedState=o,r.baseState=g,r.baseQueue=N,i.lastRenderedState=o}if(e=i.interleaved,e!==null){h=e;do p=h.lane,Be.lanes|=p,Wr|=p,h=h.next;while(h!==e)}else h===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function qo(e){var r=Ot(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,h=i.pending,p=r.memoizedState;if(h!==null){i.pending=null;var g=h=h.next;do p=e(p,g.action),g=g.next;while(g!==h);Ut(p,r.memoizedState)||(yt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),i.lastRenderedState=p}return[p,o]}function Qc(){}function Yc(e,r){var i=Be,o=Ot(),h=r(),p=!Ut(o.memoizedState,h);if(p&&(o.memoizedState=h,yt=!0),o=o.queue,Ho(ed.bind(null,i,o,e),[e]),o.getSnapshot!==r||p||et!==null&&et.memoizedState.tag&1){if(i.flags|=2048,Ss(9,Zc.bind(null,i,o,h,r),void 0,null),tt===null)throw Error(s(349));(Hr&30)!==0||Xc(i,r,h)}return h}function Xc(e,r,i){e.flags|=16384,e={getSnapshot:r,value:i},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.stores=[e]):(i=r.stores,i===null?r.stores=[e]:i.push(e))}function Zc(e,r,i,o){r.value=i,r.getSnapshot=o,td(r)&&rd(e)}function ed(e,r,i){return i(function(){td(r)&&rd(e)})}function td(e){var r=e.getSnapshot;e=e.value;try{var i=r();return!Ut(e,i)}catch{return!0}}function rd(e){var r=nr(e,1);r!==null&&zt(r,e,1,-1)}function nd(e){var r=Yt();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:e},r.queue=e,e=e.dispatch=v0.bind(null,Be,e),[r.memoizedState,e]}function Ss(e,r,i,o){return e={tag:e,create:r,destroy:i,deps:o,next:null},r=Be.updateQueue,r===null?(r={lastEffect:null,stores:null},Be.updateQueue=r,r.lastEffect=e.next=e):(i=r.lastEffect,i===null?r.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,r.lastEffect=e)),e}function sd(){return Ot().memoizedState}function $i(e,r,i,o){var h=Yt();Be.flags|=e,h.memoizedState=Ss(1|r,i,void 0,o===void 0?null:o)}function Ui(e,r,i,o){var h=Ot();o=o===void 0?null:o;var p=void 0;if(Ye!==null){var g=Ye.memoizedState;if(p=g.destroy,o!==null&&Mo(o,g.deps)){h.memoizedState=Ss(r,i,p,o);return}}Be.flags|=e,h.memoizedState=Ss(1|r,i,p,o)}function id(e,r){return $i(8390656,8,e,r)}function Ho(e,r){return Ui(2048,8,e,r)}function ad(e,r){return Ui(4,2,e,r)}function od(e,r){return Ui(4,4,e,r)}function ld(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function ud(e,r,i){return i=i!=null?i.concat([e]):null,Ui(4,4,ld.bind(null,r,e),i)}function Wo(){}function cd(e,r){var i=Ot();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&Mo(r,o[1])?o[0]:(i.memoizedState=[e,r],e)}function dd(e,r){var i=Ot();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&Mo(r,o[1])?o[0]:(e=e(),i.memoizedState=[e,r],e)}function hd(e,r,i){return(Hr&21)===0?(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=i):(Ut(i,r)||(i=zu(),Be.lanes|=i,Wr|=i,e.baseState=!0),r)}function g0(e,r){var i=Pe;Pe=i!==0&&4>i?i:4,e(!0);var o=Do.transition;Do.transition={};try{e(!1),r()}finally{Pe=i,Do.transition=o}}function fd(){return Ot().memoizedState}function k0(e,r,i){var o=Tr(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},pd(e))md(r,i);else if(i=Wc(e,r,i,o),i!==null){var h=ht();zt(i,e,o,h),yd(i,r,o)}}function v0(e,r,i){var o=Tr(e),h={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(pd(e))md(r,h);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var g=r.lastRenderedState,_=p(g,i);if(h.hasEagerState=!0,h.eagerState=_,Ut(_,g)){var N=r.interleaved;N===null?(h.next=h,Po(r)):(h.next=N.next,N.next=h),r.interleaved=h;return}}catch{}i=Wc(e,r,h,o),i!==null&&(h=ht(),zt(i,e,o,h),yd(i,r,o))}}function pd(e){var r=e.alternate;return e===Be||r!==null&&r===Be}function md(e,r){ws=Li=!0;var i=e.pending;i===null?r.next=r:(r.next=i.next,i.next=r),e.pending=r}function yd(e,r,i){if((i&4194240)!==0){var o=r.lanes;o&=e.pendingLanes,i|=o,r.lanes=i,Va(e,i)}}var Di={readContext:Rt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},x0={readContext:Rt,useCallback:function(e,r){return Yt().memoizedState=[e,r===void 0?null:r],e},useContext:Rt,useEffect:id,useImperativeHandle:function(e,r,i){return i=i!=null?i.concat([e]):null,$i(4194308,4,ld.bind(null,r,e),i)},useLayoutEffect:function(e,r){return $i(4194308,4,e,r)},useInsertionEffect:function(e,r){return $i(4,2,e,r)},useMemo:function(e,r){var i=Yt();return r=r===void 0?null:r,e=e(),i.memoizedState=[e,r],e},useReducer:function(e,r,i){var o=Yt();return r=i!==void 0?i(r):r,o.memoizedState=o.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},o.queue=e,e=e.dispatch=k0.bind(null,Be,e),[o.memoizedState,e]},useRef:function(e){var r=Yt();return e={current:e},r.memoizedState=e},useState:nd,useDebugValue:Wo,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=nd(!1),r=e[0];return e=g0.bind(null,e[1]),Yt().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,i){var o=Be,h=Yt();if(De){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),tt===null)throw Error(s(349));(Hr&30)!==0||Xc(o,r,i)}h.memoizedState=i;var p={value:i,getSnapshot:r};return h.queue=p,id(ed.bind(null,o,p,e),[e]),o.flags|=2048,Ss(9,Zc.bind(null,o,p,i,r),void 0,null),i},useId:function(){var e=Yt(),r=tt.identifierPrefix;if(De){var i=rr,o=tr;i=(o&~(1<<32-$t(o)-1)).toString(32)+i,r=":"+r+"R"+i,i=bs++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=y0++,r=":"+r+"r"+i.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},w0={readContext:Rt,useCallback:cd,useContext:Rt,useEffect:Ho,useImperativeHandle:ud,useInsertionEffect:ad,useLayoutEffect:od,useMemo:dd,useReducer:zo,useRef:sd,useState:function(){return zo(_s)},useDebugValue:Wo,useDeferredValue:function(e){var r=Ot();return hd(r,Ye.memoizedState,e)},useTransition:function(){var e=zo(_s)[0],r=Ot().memoizedState;return[e,r]},useMutableSource:Qc,useSyncExternalStore:Yc,useId:fd,unstable_isNewReconciler:!1},b0={readContext:Rt,useCallback:cd,useContext:Rt,useEffect:Ho,useImperativeHandle:ud,useInsertionEffect:ad,useLayoutEffect:od,useMemo:dd,useReducer:qo,useRef:sd,useState:function(){return qo(_s)},useDebugValue:Wo,useDeferredValue:function(e){var r=Ot();return Ye===null?r.memoizedState=e:hd(r,Ye.memoizedState,e)},useTransition:function(){var e=qo(_s)[0],r=Ot().memoizedState;return[e,r]},useMutableSource:Qc,useSyncExternalStore:Yc,useId:fd,unstable_isNewReconciler:!1};function Mt(e,r){if(e&&e.defaultProps){r=z({},r),e=e.defaultProps;for(var i in e)r[i]===void 0&&(r[i]=e[i]);return r}return r}function Vo(e,r,i,o){r=e.memoizedState,i=i(o,r),i=i==null?r:z({},r,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Mi={isMounted:function(e){return(e=e._reactInternals)?Ur(e)===e:!1},enqueueSetState:function(e,r,i){e=e._reactInternals;var o=ht(),h=Tr(e),p=sr(o,h);p.payload=r,i!=null&&(p.callback=i),r=jr(e,p,h),r!==null&&(zt(r,e,h,o),Oi(r,e,h))},enqueueReplaceState:function(e,r,i){e=e._reactInternals;var o=ht(),h=Tr(e),p=sr(o,h);p.tag=1,p.payload=r,i!=null&&(p.callback=i),r=jr(e,p,h),r!==null&&(zt(r,e,h,o),Oi(r,e,h))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var i=ht(),o=Tr(e),h=sr(i,o);h.tag=2,r!=null&&(h.callback=r),r=jr(e,h,o),r!==null&&(zt(r,e,o,i),Oi(r,e,o))}};function gd(e,r,i,o,h,p,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,p,g):r.prototype&&r.prototype.isPureReactComponent?!cs(i,o)||!cs(h,p):!0}function kd(e,r,i){var o=!1,h=br,p=r.contextType;return typeof p=="object"&&p!==null?p=Rt(p):(h=mt(r)?Mr:ot.current,o=r.contextTypes,p=(o=o!=null)?yn(e,h):br),r=new r(i,p),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Mi,e.stateNode=r,r._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=p),r}function vd(e,r,i,o){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,o),r.state!==e&&Mi.enqueueReplaceState(r,r.state,null)}function Ko(e,r,i,o){var h=e.stateNode;h.props=i,h.state=e.memoizedState,h.refs={},Ao(e);var p=r.contextType;typeof p=="object"&&p!==null?h.context=Rt(p):(p=mt(r)?Mr:ot.current,h.context=yn(e,p)),h.state=e.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(Vo(e,r,p,i),h.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Mi.enqueueReplaceState(h,h.state,null),Pi(e,i,h,o),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function Sn(e,r){try{var i="",o=r;do i+=he(o),o=o.return;while(o);var h=i}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:e,source:r,stack:h,digest:null}}function Go(e,r,i){return{value:e,source:null,stack:i??null,digest:r??null}}function Jo(e,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var _0=typeof WeakMap=="function"?WeakMap:Map;function xd(e,r,i){i=sr(-1,i),i.tag=3,i.payload={element:null};var o=r.value;return i.callback=function(){Vi||(Vi=!0,cl=o),Jo(e,r)},i}function wd(e,r,i){i=sr(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var h=r.value;i.payload=function(){return o(h)},i.callback=function(){Jo(e,r)}}var p=e.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){Jo(e,r),typeof o!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var g=r.stack;this.componentDidCatch(r.value,{componentStack:g!==null?g:""})}),i}function bd(e,r,i){var o=e.pingCache;if(o===null){o=e.pingCache=new _0;var h=new Set;o.set(r,h)}else h=o.get(r),h===void 0&&(h=new Set,o.set(r,h));h.has(i)||(h.add(i),e=U0.bind(null,e,r,i),r.then(e,e))}function _d(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Sd(e,r,i,o,h){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=sr(-1,1),r.tag=2,jr(i,r,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=h,e)}var S0=M.ReactCurrentOwner,yt=!1;function dt(e,r,i,o){r.child=e===null?Hc(r,null,i,o):xn(r,e.child,i,o)}function jd(e,r,i,o,h){i=i.render;var p=r.ref;return bn(r,h),o=Fo(e,r,i,o,p,h),i=Bo(),e!==null&&!yt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,ir(e,r,h)):(De&&i&&_o(r),r.flags|=1,dt(e,r,o,h),r.child)}function Ed(e,r,i,o,h){if(e===null){var p=i.type;return typeof p=="function"&&!gl(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=p,Nd(e,r,p,o,h)):(e=Xi(i.type,null,o,r,r.mode,h),e.ref=r.ref,e.return=r,r.child=e)}if(p=e.child,(e.lanes&h)===0){var g=p.memoizedProps;if(i=i.compare,i=i!==null?i:cs,i(g,o)&&e.ref===r.ref)return ir(e,r,h)}return r.flags|=1,e=Or(p,o),e.ref=r.ref,e.return=r,r.child=e}function Nd(e,r,i,o,h){if(e!==null){var p=e.memoizedProps;if(cs(p,o)&&e.ref===r.ref)if(yt=!1,r.pendingProps=o=p,(e.lanes&h)!==0)(e.flags&131072)!==0&&(yt=!0);else return r.lanes=e.lanes,ir(e,r,h)}return Qo(e,r,i,o,h)}function Cd(e,r,i){var o=r.pendingProps,h=o.children,p=e!==null?e.memoizedState:null;if(o.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(En,St),St|=i;else{if((i&1073741824)===0)return e=p!==null?p.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Ae(En,St),St|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=p!==null?p.baseLanes:i,Ae(En,St),St|=o}else p!==null?(o=p.baseLanes|i,r.memoizedState=null):o=i,Ae(En,St),St|=o;return dt(e,r,h,i),r.child}function Td(e,r){var i=r.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function Qo(e,r,i,o,h){var p=mt(i)?Mr:ot.current;return p=yn(r,p),bn(r,h),i=Fo(e,r,i,o,p,h),o=Bo(),e!==null&&!yt?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~h,ir(e,r,h)):(De&&o&&_o(r),r.flags|=1,dt(e,r,i,h),r.child)}function Rd(e,r,i,o,h){if(mt(i)){var p=!0;_i(r)}else p=!1;if(bn(r,h),r.stateNode===null)Bi(e,r),kd(r,i,o),Ko(r,i,o,h),o=!0;else if(e===null){var g=r.stateNode,_=r.memoizedProps;g.props=_;var N=g.context,D=i.contextType;typeof D=="object"&&D!==null?D=Rt(D):(D=mt(i)?Mr:ot.current,D=yn(r,D));var H=i.getDerivedStateFromProps,G=typeof H=="function"||typeof g.getSnapshotBeforeUpdate=="function";G||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==o||N!==D)&&vd(r,g,o,D),Sr=!1;var q=r.memoizedState;g.state=q,Pi(r,o,g,h),N=r.memoizedState,_!==o||q!==N||pt.current||Sr?(typeof H=="function"&&(Vo(r,i,H,o),N=r.memoizedState),(_=Sr||gd(r,i,_,o,q,N,D))?(G||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=N),g.props=o,g.state=N,g.context=D,o=_):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{g=r.stateNode,Vc(e,r),_=r.memoizedProps,D=r.type===r.elementType?_:Mt(r.type,_),g.props=D,G=r.pendingProps,q=g.context,N=i.contextType,typeof N=="object"&&N!==null?N=Rt(N):(N=mt(i)?Mr:ot.current,N=yn(r,N));var ee=i.getDerivedStateFromProps;(H=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_!==G||q!==N)&&vd(r,g,o,N),Sr=!1,q=r.memoizedState,g.state=q,Pi(r,o,g,h);var ie=r.memoizedState;_!==G||q!==ie||pt.current||Sr?(typeof ee=="function"&&(Vo(r,i,ee,o),ie=r.memoizedState),(D=Sr||gd(r,i,D,o,q,ie,N)||!1)?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,ie,N),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,ie,N)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=ie),g.props=o,g.state=ie,g.context=N,o=D):(typeof g.componentDidUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&q===e.memoizedState||(r.flags|=1024),o=!1)}return Yo(e,r,i,o,p,h)}function Yo(e,r,i,o,h,p){Td(e,r);var g=(r.flags&128)!==0;if(!o&&!g)return h&&Lc(r,i,!1),ir(e,r,p);o=r.stateNode,S0.current=r;var _=g&&typeof i.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,e!==null&&g?(r.child=xn(r,e.child,null,p),r.child=xn(r,null,_,p)):dt(e,r,_,p),r.memoizedState=o.state,h&&Lc(r,i,!0),r.child}function Od(e){var r=e.stateNode;r.pendingContext?Ac(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ac(e,r.context,!1),Io(e,r.containerInfo)}function Pd(e,r,i,o,h){return vn(),No(h),r.flags|=256,dt(e,r,i,o),r.child}var Xo={dehydrated:null,treeContext:null,retryLane:0};function Zo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ad(e,r,i){var o=r.pendingProps,h=Fe.current,p=!1,g=(r.flags&128)!==0,_;if((_=g)||(_=e!==null&&e.memoizedState===null?!1:(h&2)!==0),_?(p=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),Ae(Fe,h&1),e===null)return Eo(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(g=o.children,e=o.fallback,p?(o=r.mode,p=r.child,g={mode:"hidden",children:g},(o&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=g):p=Zi(g,o,0,null),e=Jr(e,o,i,null),p.return=r,e.return=r,p.sibling=e,r.child=p,r.child.memoizedState=Zo(i),r.memoizedState=Xo,e):el(r,g));if(h=e.memoizedState,h!==null&&(_=h.dehydrated,_!==null))return j0(e,r,g,o,_,h,i);if(p){p=o.fallback,g=r.mode,h=e.child,_=h.sibling;var N={mode:"hidden",children:o.children};return(g&1)===0&&r.child!==h?(o=r.child,o.childLanes=0,o.pendingProps=N,r.deletions=null):(o=Or(h,N),o.subtreeFlags=h.subtreeFlags&14680064),_!==null?p=Or(_,p):(p=Jr(p,g,i,null),p.flags|=2),p.return=r,o.return=r,o.sibling=p,r.child=o,o=p,p=r.child,g=e.child.memoizedState,g=g===null?Zo(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},p.memoizedState=g,p.childLanes=e.childLanes&~i,r.memoizedState=Xo,o}return p=e.child,e=p.sibling,o=Or(p,{mode:"visible",children:o.children}),(r.mode&1)===0&&(o.lanes=i),o.return=r,o.sibling=null,e!==null&&(i=r.deletions,i===null?(r.deletions=[e],r.flags|=16):i.push(e)),r.child=o,r.memoizedState=null,o}function el(e,r){return r=Zi({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Fi(e,r,i,o){return o!==null&&No(o),xn(r,e.child,null,i),e=el(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function j0(e,r,i,o,h,p,g){if(i)return r.flags&256?(r.flags&=-257,o=Go(Error(s(422))),Fi(e,r,g,o)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(p=o.fallback,h=r.mode,o=Zi({mode:"visible",children:o.children},h,0,null),p=Jr(p,h,g,null),p.flags|=2,o.return=r,p.return=r,o.sibling=p,r.child=o,(r.mode&1)!==0&&xn(r,e.child,null,g),r.child.memoizedState=Zo(g),r.memoizedState=Xo,p);if((r.mode&1)===0)return Fi(e,r,g,null);if(h.data==="$!"){if(o=h.nextSibling&&h.nextSibling.dataset,o)var _=o.dgst;return o=_,p=Error(s(419)),o=Go(p,o,void 0),Fi(e,r,g,o)}if(_=(g&e.childLanes)!==0,yt||_){if(o=tt,o!==null){switch(g&-g){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(o.suspendedLanes|g))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,nr(e,h),zt(o,e,h,-1))}return yl(),o=Go(Error(s(421))),Fi(e,r,g,o)}return h.data==="$?"?(r.flags|=128,r.child=e.child,r=D0.bind(null,e),h._reactRetry=r,null):(e=p.treeContext,_t=xr(h.nextSibling),bt=r,De=!0,Dt=null,e!==null&&(Ct[Tt++]=tr,Ct[Tt++]=rr,Ct[Tt++]=Fr,tr=e.id,rr=e.overflow,Fr=r),r=el(r,o.children),r.flags|=4096,r)}function Id(e,r,i){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r),Oo(e.return,r,i)}function tl(e,r,i,o,h){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=o,p.tail=i,p.tailMode=h)}function Ld(e,r,i){var o=r.pendingProps,h=o.revealOrder,p=o.tail;if(dt(e,r,o.children,i),o=Fe.current,(o&2)!==0)o=o&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Id(e,i,r);else if(e.tag===19)Id(e,i,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ae(Fe,o),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(i=r.child,h=null;i!==null;)e=i.alternate,e!==null&&Ai(e)===null&&(h=i),i=i.sibling;i=h,i===null?(h=r.child,r.child=null):(h=i.sibling,i.sibling=null),tl(r,!1,h,i,p);break;case"backwards":for(i=null,h=r.child,r.child=null;h!==null;){if(e=h.alternate,e!==null&&Ai(e)===null){r.child=h;break}e=h.sibling,h.sibling=i,i=h,h=e}tl(r,!0,i,null,p);break;case"together":tl(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bi(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function ir(e,r,i){if(e!==null&&(r.dependencies=e.dependencies),Wr|=r.lanes,(i&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(s(153));if(r.child!==null){for(e=r.child,i=Or(e,e.pendingProps),r.child=i,i.return=r;e.sibling!==null;)e=e.sibling,i=i.sibling=Or(e,e.pendingProps),i.return=r;i.sibling=null}return r.child}function E0(e,r,i){switch(r.tag){case 3:Od(r),vn();break;case 5:Jc(r);break;case 1:mt(r.type)&&_i(r);break;case 4:Io(r,r.stateNode.containerInfo);break;case 10:var o=r.type._context,h=r.memoizedProps.value;Ae(Ti,o._currentValue),o._currentValue=h;break;case 13:if(o=r.memoizedState,o!==null)return o.dehydrated!==null?(Ae(Fe,Fe.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Ad(e,r,i):(Ae(Fe,Fe.current&1),e=ir(e,r,i),e!==null?e.sibling:null);Ae(Fe,Fe.current&1);break;case 19:if(o=(i&r.childLanes)!==0,(e.flags&128)!==0){if(o)return Ld(e,r,i);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ae(Fe,Fe.current),o)break;return null;case 22:case 23:return r.lanes=0,Cd(e,r,i)}return ir(e,r,i)}var $d,rl,Ud,Dd;$d=function(e,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},rl=function(){},Ud=function(e,r,i,o){var h=e.memoizedProps;if(h!==o){e=r.stateNode,qr(Qt.current);var p=null;switch(i){case"input":h=J(e,h),o=J(e,o),p=[];break;case"select":h=z({},h,{value:void 0}),o=z({},o,{value:void 0}),p=[];break;case"textarea":h=Aa(e,h),o=Aa(e,o),p=[];break;default:typeof h.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=xi)}La(i,o);var g;i=null;for(D in h)if(!o.hasOwnProperty(D)&&h.hasOwnProperty(D)&&h[D]!=null)if(D==="style"){var _=h[D];for(g in _)_.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(u.hasOwnProperty(D)?p||(p=[]):(p=p||[]).push(D,null));for(D in o){var N=o[D];if(_=h?.[D],o.hasOwnProperty(D)&&N!==_&&(N!=null||_!=null))if(D==="style")if(_){for(g in _)!_.hasOwnProperty(g)||N&&N.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in N)N.hasOwnProperty(g)&&_[g]!==N[g]&&(i||(i={}),i[g]=N[g])}else i||(p||(p=[]),p.push(D,i)),i=N;else D==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,_=_?_.__html:void 0,N!=null&&_!==N&&(p=p||[]).push(D,N)):D==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(D,""+N):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(u.hasOwnProperty(D)?(N!=null&&D==="onScroll"&&Le("scroll",e),p||_===N||(p=[])):(p=p||[]).push(D,N))}i&&(p=p||[]).push("style",i);var D=p;(r.updateQueue=D)&&(r.flags|=4)}},Dd=function(e,r,i,o){i!==o&&(r.flags|=4)};function js(e,r){if(!De)switch(e.tailMode){case"hidden":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function ut(e){var r=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(r)for(var h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags&14680064,o|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)i|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=i,r}function N0(e,r,i){var o=r.pendingProps;switch(So(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return mt(r.type)&&bi(),ut(r),null;case 3:return o=r.stateNode,_n(),$e(pt),$e(ot),Uo(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ni(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Dt!==null&&(fl(Dt),Dt=null))),rl(e,r),ut(r),null;case 5:Lo(r);var h=qr(xs.current);if(i=r.type,e!==null&&r.stateNode!=null)Ud(e,r,i,o,h),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(e=qr(Qt.current),Ni(r)){o=r.stateNode,i=r.type;var p=r.memoizedProps;switch(o[Jt]=r,o[ms]=p,e=(r.mode&1)!==0,i){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(h=0;h<hs.length;h++)Le(hs[h],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":ge(o,p),Le("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Le("invalid",o);break;case"textarea":wu(o,p),Le("invalid",o)}La(i,p),h=null;for(var g in p)if(p.hasOwnProperty(g)){var _=p[g];g==="children"?typeof _=="string"?o.textContent!==_&&(p.suppressHydrationWarning!==!0&&vi(o.textContent,_,e),h=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(p.suppressHydrationWarning!==!0&&vi(o.textContent,_,e),h=["children",""+_]):u.hasOwnProperty(g)&&_!=null&&g==="onScroll"&&Le("scroll",o)}switch(i){case"input":se(o),qe(o,p,!0);break;case"textarea":se(o),_u(o);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(o.onclick=xi)}o=h,r.updateQueue=o,o!==null&&(r.flags|=4)}else{g=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Su(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(i,{is:o.is}):(e=g.createElement(i),i==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,i),e[Jt]=r,e[ms]=o,$d(e,r,!1,!1),r.stateNode=e;e:{switch(g=$a(i,o),i){case"dialog":Le("cancel",e),Le("close",e),h=o;break;case"iframe":case"object":case"embed":Le("load",e),h=o;break;case"video":case"audio":for(h=0;h<hs.length;h++)Le(hs[h],e);h=o;break;case"source":Le("error",e),h=o;break;case"img":case"image":case"link":Le("error",e),Le("load",e),h=o;break;case"details":Le("toggle",e),h=o;break;case"input":ge(e,o),h=J(e,o),Le("invalid",e);break;case"option":h=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},h=z({},o,{value:void 0}),Le("invalid",e);break;case"textarea":wu(e,o),h=Aa(e,o),Le("invalid",e);break;default:h=o}La(i,h),_=h;for(p in _)if(_.hasOwnProperty(p)){var N=_[p];p==="style"?Nu(e,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&ju(e,N)):p==="children"?typeof N=="string"?(i!=="textarea"||N!=="")&&Kn(e,N):typeof N=="number"&&Kn(e,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(u.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Le("scroll",e):N!=null&&T(e,p,N,g))}switch(i){case"input":se(e),qe(e,o,!1);break;case"textarea":se(e),_u(e);break;case"option":o.value!=null&&e.setAttribute("value",""+_e(o.value));break;case"select":e.multiple=!!o.multiple,p=o.value,p!=null?nn(e,!!o.multiple,p,!1):o.defaultValue!=null&&nn(e,!!o.multiple,o.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=xi)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return ut(r),null;case 6:if(e&&r.stateNode!=null)Dd(e,r,e.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(s(166));if(i=qr(xs.current),qr(Qt.current),Ni(r)){if(o=r.stateNode,i=r.memoizedProps,o[Jt]=r,(p=o.nodeValue!==i)&&(e=bt,e!==null))switch(e.tag){case 3:vi(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vi(o.nodeValue,i,(e.mode&1)!==0)}p&&(r.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Jt]=r,r.stateNode=o}return ut(r),null;case 13:if($e(Fe),o=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&_t!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Bc(),vn(),r.flags|=98560,p=!1;else if(p=Ni(r),o!==null&&o.dehydrated!==null){if(e===null){if(!p)throw Error(s(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Jt]=r}else vn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),p=!1}else Dt!==null&&(fl(Dt),Dt=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=i,r):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Fe.current&1)!==0?Xe===0&&(Xe=3):yl())),r.updateQueue!==null&&(r.flags|=4),ut(r),null);case 4:return _n(),rl(e,r),e===null&&fs(r.stateNode.containerInfo),ut(r),null;case 10:return Ro(r.type._context),ut(r),null;case 17:return mt(r.type)&&bi(),ut(r),null;case 19:if($e(Fe),p=r.memoizedState,p===null)return ut(r),null;if(o=(r.flags&128)!==0,g=p.rendering,g===null)if(o)js(p,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(g=Ai(e),g!==null){for(r.flags|=128,js(p,!1),o=g.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),r.subtreeFlags=0,o=i,i=r.child;i!==null;)p=i,e=o,p.flags&=14680066,g=p.alternate,g===null?(p.childLanes=0,p.lanes=e,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=g.childLanes,p.lanes=g.lanes,p.child=g.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=g.memoizedProps,p.memoizedState=g.memoizedState,p.updateQueue=g.updateQueue,p.type=g.type,e=g.dependencies,p.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Ae(Fe,Fe.current&1|2),r.child}e=e.sibling}p.tail!==null&&Ve()>Nn&&(r.flags|=128,o=!0,js(p,!1),r.lanes=4194304)}else{if(!o)if(e=Ai(g),e!==null){if(r.flags|=128,o=!0,i=e.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),js(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!De)return ut(r),null}else 2*Ve()-p.renderingStartTime>Nn&&i!==1073741824&&(r.flags|=128,o=!0,js(p,!1),r.lanes=4194304);p.isBackwards?(g.sibling=r.child,r.child=g):(i=p.last,i!==null?i.sibling=g:r.child=g,p.last=g)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ve(),r.sibling=null,i=Fe.current,Ae(Fe,o?i&1|2:i&1),r):(ut(r),null);case 22:case 23:return ml(),o=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(r.flags|=8192),o&&(r.mode&1)!==0?(St&1073741824)!==0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),null;case 24:return null;case 25:return null}throw Error(s(156,r.tag))}function C0(e,r){switch(So(r),r.tag){case 1:return mt(r.type)&&bi(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return _n(),$e(pt),$e(ot),Uo(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Lo(r),null;case 13:if($e(Fe),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(s(340));vn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return $e(Fe),null;case 4:return _n(),null;case 10:return Ro(r.type._context),null;case 22:case 23:return ml(),null;case 24:return null;default:return null}}var zi=!1,ct=!1,T0=typeof WeakSet=="function"?WeakSet:Set,ne=null;function jn(e,r){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){He(e,r,o)}else i.current=null}function nl(e,r,i){try{i()}catch(o){He(e,r,o)}}var Md=!1;function R0(e,r){if(mo=li,e=gc(),ao(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var h=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var g=0,_=-1,N=-1,D=0,H=0,G=e,q=null;t:for(;;){for(var ee;G!==i||h!==0&&G.nodeType!==3||(_=g+h),G!==p||o!==0&&G.nodeType!==3||(N=g+o),G.nodeType===3&&(g+=G.nodeValue.length),(ee=G.firstChild)!==null;)q=G,G=ee;for(;;){if(G===e)break t;if(q===i&&++D===h&&(_=g),q===p&&++H===o&&(N=g),(ee=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=ee}i=_===-1||N===-1?null:{start:_,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(yo={focusedElem:e,selectionRange:i},li=!1,ne=r;ne!==null;)if(r=ne,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,ne=e;else for(;ne!==null;){r=ne;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var le=ie.memoizedProps,Ke=ie.memoizedState,A=r.stateNode,R=A.getSnapshotBeforeUpdate(r.elementType===r.type?le:Mt(r.type,le),Ke);A.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var $=r.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Y){He(r,r.return,Y)}if(e=r.sibling,e!==null){e.return=r.return,ne=e;break}ne=r.return}return ie=Md,Md=!1,ie}function Es(e,r,i){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&e)===e){var p=h.destroy;h.destroy=void 0,p!==void 0&&nl(r,i,p)}h=h.next}while(h!==o)}}function qi(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==r)}}function sl(e){var r=e.ref;if(r!==null){var i=e.stateNode;e.tag,e=i,typeof r=="function"?r(e):r.current=e}}function Fd(e){var r=e.alternate;r!==null&&(e.alternate=null,Fd(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Jt],delete r[ms],delete r[xo],delete r[h0],delete r[f0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bd(e){return e.tag===5||e.tag===3||e.tag===4}function zd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function il(e,r,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?i.nodeType===8?i.parentNode.insertBefore(e,r):i.insertBefore(e,r):(i.nodeType===8?(r=i.parentNode,r.insertBefore(e,i)):(r=i,r.appendChild(e)),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=xi));else if(o!==4&&(e=e.child,e!==null))for(il(e,r,i),e=e.sibling;e!==null;)il(e,r,i),e=e.sibling}function al(e,r,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,r?i.insertBefore(e,r):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(al(e,r,i),e=e.sibling;e!==null;)al(e,r,i),e=e.sibling}var nt=null,Ft=!1;function Er(e,r,i){for(i=i.child;i!==null;)qd(e,r,i),i=i.sibling}function qd(e,r,i){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ri,i)}catch{}switch(i.tag){case 5:ct||jn(i,r);case 6:var o=nt,h=Ft;nt=null,Er(e,r,i),nt=o,Ft=h,nt!==null&&(Ft?(e=nt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):nt.removeChild(i.stateNode));break;case 18:nt!==null&&(Ft?(e=nt,i=i.stateNode,e.nodeType===8?vo(e.parentNode,i):e.nodeType===1&&vo(e,i),ss(e)):vo(nt,i.stateNode));break;case 4:o=nt,h=Ft,nt=i.stateNode.containerInfo,Ft=!0,Er(e,r,i),nt=o,Ft=h;break;case 0:case 11:case 14:case 15:if(!ct&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){h=o=o.next;do{var p=h,g=p.destroy;p=p.tag,g!==void 0&&((p&2)!==0||(p&4)!==0)&&nl(i,r,g),h=h.next}while(h!==o)}Er(e,r,i);break;case 1:if(!ct&&(jn(i,r),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(_){He(i,r,_)}Er(e,r,i);break;case 21:Er(e,r,i);break;case 22:i.mode&1?(ct=(o=ct)||i.memoizedState!==null,Er(e,r,i),ct=o):Er(e,r,i);break;default:Er(e,r,i)}}function Hd(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new T0),r.forEach(function(o){var h=M0.bind(null,e,o);i.has(o)||(i.add(o),o.then(h,h))})}}function Bt(e,r){var i=r.deletions;if(i!==null)for(var o=0;o<i.length;o++){var h=i[o];try{var p=e,g=r,_=g;e:for(;_!==null;){switch(_.tag){case 5:nt=_.stateNode,Ft=!1;break e;case 3:nt=_.stateNode.containerInfo,Ft=!0;break e;case 4:nt=_.stateNode.containerInfo,Ft=!0;break e}_=_.return}if(nt===null)throw Error(s(160));qd(p,g,h),nt=null,Ft=!1;var N=h.alternate;N!==null&&(N.return=null),h.return=null}catch(D){He(h,r,D)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Wd(r,e),r=r.sibling}function Wd(e,r){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(r,e),Xt(e),o&4){try{Es(3,e,e.return),qi(3,e)}catch(le){He(e,e.return,le)}try{Es(5,e,e.return)}catch(le){He(e,e.return,le)}}break;case 1:Bt(r,e),Xt(e),o&512&&i!==null&&jn(i,i.return);break;case 5:if(Bt(r,e),Xt(e),o&512&&i!==null&&jn(i,i.return),e.flags&32){var h=e.stateNode;try{Kn(h,"")}catch(le){He(e,e.return,le)}}if(o&4&&(h=e.stateNode,h!=null)){var p=e.memoizedProps,g=i!==null?i.memoizedProps:p,_=e.type,N=e.updateQueue;if(e.updateQueue=null,N!==null)try{_==="input"&&p.type==="radio"&&p.name!=null&&Oe(h,p),$a(_,g);var D=$a(_,p);for(g=0;g<N.length;g+=2){var H=N[g],G=N[g+1];H==="style"?Nu(h,G):H==="dangerouslySetInnerHTML"?ju(h,G):H==="children"?Kn(h,G):T(h,H,G,D)}switch(_){case"input":Ue(h,p);break;case"textarea":bu(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ee=p.value;ee!=null?nn(h,!!p.multiple,ee,!1):q!==!!p.multiple&&(p.defaultValue!=null?nn(h,!!p.multiple,p.defaultValue,!0):nn(h,!!p.multiple,p.multiple?[]:"",!1))}h[ms]=p}catch(le){He(e,e.return,le)}}break;case 6:if(Bt(r,e),Xt(e),o&4){if(e.stateNode===null)throw Error(s(162));h=e.stateNode,p=e.memoizedProps;try{h.nodeValue=p}catch(le){He(e,e.return,le)}}break;case 3:if(Bt(r,e),Xt(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ss(r.containerInfo)}catch(le){He(e,e.return,le)}break;case 4:Bt(r,e),Xt(e);break;case 13:Bt(r,e),Xt(e),h=e.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(ul=Ve())),o&4&&Hd(e);break;case 22:if(H=i!==null&&i.memoizedState!==null,e.mode&1?(ct=(D=ct)||H,Bt(r,e),ct=D):Bt(r,e),Xt(e),o&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!H&&(e.mode&1)!==0)for(ne=e,H=e.child;H!==null;){for(G=ne=H;ne!==null;){switch(q=ne,ee=q.child,q.tag){case 0:case 11:case 14:case 15:Es(4,q,q.return);break;case 1:jn(q,q.return);var ie=q.stateNode;if(typeof ie.componentWillUnmount=="function"){o=q,i=q.return;try{r=o,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(le){He(o,i,le)}}break;case 5:jn(q,q.return);break;case 22:if(q.memoizedState!==null){Gd(G);continue}}ee!==null?(ee.return=q,ne=ee):Gd(G)}H=H.sibling}e:for(H=null,G=e;;){if(G.tag===5){if(H===null){H=G;try{h=G.stateNode,D?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(_=G.stateNode,N=G.memoizedProps.style,g=N!=null&&N.hasOwnProperty("display")?N.display:null,_.style.display=Eu("display",g))}catch(le){He(e,e.return,le)}}}else if(G.tag===6){if(H===null)try{G.stateNode.nodeValue=D?"":G.memoizedProps}catch(le){He(e,e.return,le)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===e)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===e)break e;for(;G.sibling===null;){if(G.return===null||G.return===e)break e;H===G&&(H=null),G=G.return}H===G&&(H=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Bt(r,e),Xt(e),o&4&&Hd(e);break;case 21:break;default:Bt(r,e),Xt(e)}}function Xt(e){var r=e.flags;if(r&2){try{e:{for(var i=e.return;i!==null;){if(Bd(i)){var o=i;break e}i=i.return}throw Error(s(160))}switch(o.tag){case 5:var h=o.stateNode;o.flags&32&&(Kn(h,""),o.flags&=-33);var p=zd(e);al(e,p,h);break;case 3:case 4:var g=o.stateNode.containerInfo,_=zd(e);il(e,_,g);break;default:throw Error(s(161))}}catch(N){He(e,e.return,N)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function O0(e,r,i){ne=e,Vd(e)}function Vd(e,r,i){for(var o=(e.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&o){var g=h.memoizedState!==null||zi;if(!g){var _=h.alternate,N=_!==null&&_.memoizedState!==null||ct;_=zi;var D=ct;if(zi=g,(ct=N)&&!D)for(ne=h;ne!==null;)g=ne,N=g.child,g.tag===22&&g.memoizedState!==null?Jd(h):N!==null?(N.return=g,ne=N):Jd(h);for(;p!==null;)ne=p,Vd(p),p=p.sibling;ne=h,zi=_,ct=D}Kd(e)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ne=p):Kd(e)}}function Kd(e){for(;ne!==null;){var r=ne;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ct||qi(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!ct)if(i===null)o.componentDidMount();else{var h=r.elementType===r.type?i.memoizedProps:Mt(r.type,i.memoizedProps);o.componentDidUpdate(h,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Gc(r,p,o);break;case 3:var g=r.updateQueue;if(g!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}Gc(r,g,i)}break;case 5:var _=r.stateNode;if(i===null&&r.flags&4){i=_;var N=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&i.focus();break;case"img":N.src&&(i.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var D=r.alternate;if(D!==null){var H=D.memoizedState;if(H!==null){var G=H.dehydrated;G!==null&&ss(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}ct||r.flags&512&&sl(r)}catch(q){He(r,r.return,q)}}if(r===e){ne=null;break}if(i=r.sibling,i!==null){i.return=r.return,ne=i;break}ne=r.return}}function Gd(e){for(;ne!==null;){var r=ne;if(r===e){ne=null;break}var i=r.sibling;if(i!==null){i.return=r.return,ne=i;break}ne=r.return}}function Jd(e){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{qi(4,r)}catch(N){He(r,i,N)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var h=r.return;try{o.componentDidMount()}catch(N){He(r,h,N)}}var p=r.return;try{sl(r)}catch(N){He(r,p,N)}break;case 5:var g=r.return;try{sl(r)}catch(N){He(r,g,N)}}}catch(N){He(r,r.return,N)}if(r===e){ne=null;break}var _=r.sibling;if(_!==null){_.return=r.return,ne=_;break}ne=r.return}}var P0=Math.ceil,Hi=M.ReactCurrentDispatcher,ol=M.ReactCurrentOwner,Pt=M.ReactCurrentBatchConfig,Ne=0,tt=null,Je=null,st=0,St=0,En=wr(0),Xe=0,Ns=null,Wr=0,Wi=0,ll=0,Cs=null,gt=null,ul=0,Nn=1/0,ar=null,Vi=!1,cl=null,Nr=null,Ki=!1,Cr=null,Gi=0,Ts=0,dl=null,Ji=-1,Qi=0;function ht(){return(Ne&6)!==0?Ve():Ji!==-1?Ji:Ji=Ve()}function Tr(e){return(e.mode&1)===0?1:(Ne&2)!==0&&st!==0?st&-st:m0.transition!==null?(Qi===0&&(Qi=zu()),Qi):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Yu(e.type)),e)}function zt(e,r,i,o){if(50<Ts)throw Ts=0,dl=null,Error(s(185));Zn(e,i,o),((Ne&2)===0||e!==tt)&&(e===tt&&((Ne&2)===0&&(Wi|=i),Xe===4&&Rr(e,st)),kt(e,o),i===1&&Ne===0&&(r.mode&1)===0&&(Nn=Ve()+500,Si&&_r()))}function kt(e,r){var i=e.callbackNode;mp(e,r);var o=ii(e,e===tt?st:0);if(o===0)i!==null&&Mu(i),e.callbackNode=null,e.callbackPriority=0;else if(r=o&-o,e.callbackPriority!==r){if(i!=null&&Mu(i),r===1)e.tag===0?p0(Yd.bind(null,e)):$c(Yd.bind(null,e)),c0(function(){(Ne&6)===0&&_r()}),i=null;else{switch(qu(o)){case 1:i=qa;break;case 4:i=Fu;break;case 16:i=ti;break;case 536870912:i=Bu;break;default:i=ti}i=ih(i,Qd.bind(null,e))}e.callbackPriority=r,e.callbackNode=i}}function Qd(e,r){if(Ji=-1,Qi=0,(Ne&6)!==0)throw Error(s(327));var i=e.callbackNode;if(Cn()&&e.callbackNode!==i)return null;var o=ii(e,e===tt?st:0);if(o===0)return null;if((o&30)!==0||(o&e.expiredLanes)!==0||r)r=Yi(e,o);else{r=o;var h=Ne;Ne|=2;var p=Zd();(tt!==e||st!==r)&&(ar=null,Nn=Ve()+500,Kr(e,r));do try{L0();break}catch(_){Xd(e,_)}while(!0);To(),Hi.current=p,Ne=h,Je!==null?r=0:(tt=null,st=0,r=Xe)}if(r!==0){if(r===2&&(h=Ha(e),h!==0&&(o=h,r=hl(e,h))),r===1)throw i=Ns,Kr(e,0),Rr(e,o),kt(e,Ve()),i;if(r===6)Rr(e,o);else{if(h=e.current.alternate,(o&30)===0&&!A0(h)&&(r=Yi(e,o),r===2&&(p=Ha(e),p!==0&&(o=p,r=hl(e,p))),r===1))throw i=Ns,Kr(e,0),Rr(e,o),kt(e,Ve()),i;switch(e.finishedWork=h,e.finishedLanes=o,r){case 0:case 1:throw Error(s(345));case 2:Gr(e,gt,ar);break;case 3:if(Rr(e,o),(o&130023424)===o&&(r=ul+500-Ve(),10<r)){if(ii(e,0)!==0)break;if(h=e.suspendedLanes,(h&o)!==o){ht(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=ko(Gr.bind(null,e,gt,ar),r);break}Gr(e,gt,ar);break;case 4:if(Rr(e,o),(o&4194240)===o)break;for(r=e.eventTimes,h=-1;0<o;){var g=31-$t(o);p=1<<g,g=r[g],g>h&&(h=g),o&=~p}if(o=h,o=Ve()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*P0(o/1960))-o,10<o){e.timeoutHandle=ko(Gr.bind(null,e,gt,ar),o);break}Gr(e,gt,ar);break;case 5:Gr(e,gt,ar);break;default:throw Error(s(329))}}}return kt(e,Ve()),e.callbackNode===i?Qd.bind(null,e):null}function hl(e,r){var i=Cs;return e.current.memoizedState.isDehydrated&&(Kr(e,r).flags|=256),e=Yi(e,r),e!==2&&(r=gt,gt=i,r!==null&&fl(r)),e}function fl(e){gt===null?gt=e:gt.push.apply(gt,e)}function A0(e){for(var r=e;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var h=i[o],p=h.getSnapshot;h=h.value;try{if(!Ut(p(),h))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Rr(e,r){for(r&=~ll,r&=~Wi,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var i=31-$t(r),o=1<<i;e[i]=-1,r&=~o}}function Yd(e){if((Ne&6)!==0)throw Error(s(327));Cn();var r=ii(e,0);if((r&1)===0)return kt(e,Ve()),null;var i=Yi(e,r);if(e.tag!==0&&i===2){var o=Ha(e);o!==0&&(r=o,i=hl(e,o))}if(i===1)throw i=Ns,Kr(e,0),Rr(e,r),kt(e,Ve()),i;if(i===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Gr(e,gt,ar),kt(e,Ve()),null}function pl(e,r){var i=Ne;Ne|=1;try{return e(r)}finally{Ne=i,Ne===0&&(Nn=Ve()+500,Si&&_r())}}function Vr(e){Cr!==null&&Cr.tag===0&&(Ne&6)===0&&Cn();var r=Ne;Ne|=1;var i=Pt.transition,o=Pe;try{if(Pt.transition=null,Pe=1,e)return e()}finally{Pe=o,Pt.transition=i,Ne=r,(Ne&6)===0&&_r()}}function ml(){St=En.current,$e(En)}function Kr(e,r){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,u0(i)),Je!==null)for(i=Je.return;i!==null;){var o=i;switch(So(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&bi();break;case 3:_n(),$e(pt),$e(ot),Uo();break;case 5:Lo(o);break;case 4:_n();break;case 13:$e(Fe);break;case 19:$e(Fe);break;case 10:Ro(o.type._context);break;case 22:case 23:ml()}i=i.return}if(tt=e,Je=e=Or(e.current,null),st=St=r,Xe=0,Ns=null,ll=Wi=Wr=0,gt=Cs=null,zr!==null){for(r=0;r<zr.length;r++)if(i=zr[r],o=i.interleaved,o!==null){i.interleaved=null;var h=o.next,p=i.pending;if(p!==null){var g=p.next;p.next=h,o.next=g}i.pending=o}zr=null}return e}function Xd(e,r){do{var i=Je;try{if(To(),Ii.current=Di,Li){for(var o=Be.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}Li=!1}if(Hr=0,et=Ye=Be=null,ws=!1,bs=0,ol.current=null,i===null||i.return===null){Xe=1,Ns=r,Je=null;break}e:{var p=e,g=i.return,_=i,N=r;if(r=st,_.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var D=N,H=_,G=H.tag;if((H.mode&1)===0&&(G===0||G===11||G===15)){var q=H.alternate;q?(H.updateQueue=q.updateQueue,H.memoizedState=q.memoizedState,H.lanes=q.lanes):(H.updateQueue=null,H.memoizedState=null)}var ee=_d(g);if(ee!==null){ee.flags&=-257,Sd(ee,g,_,p,r),ee.mode&1&&bd(p,D,r),r=ee,N=D;var ie=r.updateQueue;if(ie===null){var le=new Set;le.add(N),r.updateQueue=le}else ie.add(N);break e}else{if((r&1)===0){bd(p,D,r),yl();break e}N=Error(s(426))}}else if(De&&_.mode&1){var Ke=_d(g);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),Sd(Ke,g,_,p,r),No(Sn(N,_));break e}}p=N=Sn(N,_),Xe!==4&&(Xe=2),Cs===null?Cs=[p]:Cs.push(p),p=g;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var A=xd(p,N,r);Kc(p,A);break e;case 1:_=N;var R=p.type,$=p.stateNode;if((p.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Nr===null||!Nr.has($)))){p.flags|=65536,r&=-r,p.lanes|=r;var Y=wd(p,_,r);Kc(p,Y);break e}}p=p.return}while(p!==null)}th(i)}catch(ue){r=ue,Je===i&&i!==null&&(Je=i=i.return);continue}break}while(!0)}function Zd(){var e=Hi.current;return Hi.current=Di,e===null?Di:e}function yl(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||(Wr&268435455)===0&&(Wi&268435455)===0||Rr(tt,st)}function Yi(e,r){var i=Ne;Ne|=2;var o=Zd();(tt!==e||st!==r)&&(ar=null,Kr(e,r));do try{I0();break}catch(h){Xd(e,h)}while(!0);if(To(),Ne=i,Hi.current=o,Je!==null)throw Error(s(261));return tt=null,st=0,Xe}function I0(){for(;Je!==null;)eh(Je)}function L0(){for(;Je!==null&&!ap();)eh(Je)}function eh(e){var r=sh(e.alternate,e,St);e.memoizedProps=e.pendingProps,r===null?th(e):Je=r,ol.current=null}function th(e){var r=e;do{var i=r.alternate;if(e=r.return,(r.flags&32768)===0){if(i=N0(i,r,St),i!==null){Je=i;return}}else{if(i=C0(i,r),i!==null){i.flags&=32767,Je=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Je=null;return}}if(r=r.sibling,r!==null){Je=r;return}Je=r=e}while(r!==null);Xe===0&&(Xe=5)}function Gr(e,r,i){var o=Pe,h=Pt.transition;try{Pt.transition=null,Pe=1,$0(e,r,i,o)}finally{Pt.transition=h,Pe=o}return null}function $0(e,r,i,o){do Cn();while(Cr!==null);if((Ne&6)!==0)throw Error(s(327));i=e.finishedWork;var h=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var p=i.lanes|i.childLanes;if(yp(e,p),e===tt&&(Je=tt=null,st=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Ki||(Ki=!0,ih(ti,function(){return Cn(),null})),p=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||p){p=Pt.transition,Pt.transition=null;var g=Pe;Pe=1;var _=Ne;Ne|=4,ol.current=null,R0(e,i),Wd(i,e),r0(yo),li=!!mo,yo=mo=null,e.current=i,O0(i),op(),Ne=_,Pe=g,Pt.transition=p}else e.current=i;if(Ki&&(Ki=!1,Cr=e,Gi=h),p=e.pendingLanes,p===0&&(Nr=null),cp(i.stateNode),kt(e,Ve()),r!==null)for(o=e.onRecoverableError,i=0;i<r.length;i++)h=r[i],o(h.value,{componentStack:h.stack,digest:h.digest});if(Vi)throw Vi=!1,e=cl,cl=null,e;return(Gi&1)!==0&&e.tag!==0&&Cn(),p=e.pendingLanes,(p&1)!==0?e===dl?Ts++:(Ts=0,dl=e):Ts=0,_r(),null}function Cn(){if(Cr!==null){var e=qu(Gi),r=Pt.transition,i=Pe;try{if(Pt.transition=null,Pe=16>e?16:e,Cr===null)var o=!1;else{if(e=Cr,Cr=null,Gi=0,(Ne&6)!==0)throw Error(s(331));var h=Ne;for(Ne|=4,ne=e.current;ne!==null;){var p=ne,g=p.child;if((ne.flags&16)!==0){var _=p.deletions;if(_!==null){for(var N=0;N<_.length;N++){var D=_[N];for(ne=D;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:Es(8,H,p)}var G=H.child;if(G!==null)G.return=H,ne=G;else for(;ne!==null;){H=ne;var q=H.sibling,ee=H.return;if(Fd(H),H===D){ne=null;break}if(q!==null){q.return=ee,ne=q;break}ne=ee}}}var ie=p.alternate;if(ie!==null){var le=ie.child;if(le!==null){ie.child=null;do{var Ke=le.sibling;le.sibling=null,le=Ke}while(le!==null)}}ne=p}}if((p.subtreeFlags&2064)!==0&&g!==null)g.return=p,ne=g;else e:for(;ne!==null;){if(p=ne,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Es(9,p,p.return)}var A=p.sibling;if(A!==null){A.return=p.return,ne=A;break e}ne=p.return}}var R=e.current;for(ne=R;ne!==null;){g=ne;var $=g.child;if((g.subtreeFlags&2064)!==0&&$!==null)$.return=g,ne=$;else e:for(g=R;ne!==null;){if(_=ne,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:qi(9,_)}}catch(ue){He(_,_.return,ue)}if(_===g){ne=null;break e}var Y=_.sibling;if(Y!==null){Y.return=_.return,ne=Y;break e}ne=_.return}}if(Ne=h,_r(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ri,e)}catch{}o=!0}return o}finally{Pe=i,Pt.transition=r}}return!1}function rh(e,r,i){r=Sn(i,r),r=xd(e,r,1),e=jr(e,r,1),r=ht(),e!==null&&(Zn(e,1,r),kt(e,r))}function He(e,r,i){if(e.tag===3)rh(e,e,i);else for(;r!==null;){if(r.tag===3){rh(r,e,i);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Nr===null||!Nr.has(o))){e=Sn(i,e),e=wd(r,e,1),r=jr(r,e,1),e=ht(),r!==null&&(Zn(r,1,e),kt(r,e));break}}r=r.return}}function U0(e,r,i){var o=e.pingCache;o!==null&&o.delete(r),r=ht(),e.pingedLanes|=e.suspendedLanes&i,tt===e&&(st&i)===i&&(Xe===4||Xe===3&&(st&130023424)===st&&500>Ve()-ul?Kr(e,0):ll|=i),kt(e,r)}function nh(e,r){r===0&&((e.mode&1)===0?r=1:(r=si,si<<=1,(si&130023424)===0&&(si=4194304)));var i=ht();e=nr(e,r),e!==null&&(Zn(e,r,i),kt(e,i))}function D0(e){var r=e.memoizedState,i=0;r!==null&&(i=r.retryLane),nh(e,i)}function M0(e,r){var i=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(i=h.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(s(314))}o!==null&&o.delete(r),nh(e,i)}var sh;sh=function(e,r,i){if(e!==null)if(e.memoizedProps!==r.pendingProps||pt.current)yt=!0;else{if((e.lanes&i)===0&&(r.flags&128)===0)return yt=!1,E0(e,r,i);yt=(e.flags&131072)!==0}else yt=!1,De&&(r.flags&1048576)!==0&&Uc(r,Ei,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;Bi(e,r),e=r.pendingProps;var h=yn(r,ot.current);bn(r,i),h=Fo(null,r,o,e,h,i);var p=Bo();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,mt(o)?(p=!0,_i(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ao(r),h.updater=Mi,r.stateNode=h,h._reactInternals=r,Ko(r,o,e,i),r=Yo(null,r,o,!0,p,i)):(r.tag=0,De&&p&&_o(r),dt(null,r,h,i),r=r.child),r;case 16:o=r.elementType;e:{switch(Bi(e,r),e=r.pendingProps,h=o._init,o=h(o._payload),r.type=o,h=r.tag=B0(o),e=Mt(o,e),h){case 0:r=Qo(null,r,o,e,i);break e;case 1:r=Rd(null,r,o,e,i);break e;case 11:r=jd(null,r,o,e,i);break e;case 14:r=Ed(null,r,o,Mt(o.type,e),i);break e}throw Error(s(306,o,""))}return r;case 0:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Mt(o,h),Qo(e,r,o,h,i);case 1:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Mt(o,h),Rd(e,r,o,h,i);case 3:e:{if(Od(r),e===null)throw Error(s(387));o=r.pendingProps,p=r.memoizedState,h=p.element,Vc(e,r),Pi(r,o,null,i);var g=r.memoizedState;if(o=g.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Sn(Error(s(423)),r),r=Pd(e,r,o,i,h);break e}else if(o!==h){h=Sn(Error(s(424)),r),r=Pd(e,r,o,i,h);break e}else for(_t=xr(r.stateNode.containerInfo.firstChild),bt=r,De=!0,Dt=null,i=Hc(r,null,o,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(vn(),o===h){r=ir(e,r,i);break e}dt(e,r,o,i)}r=r.child}return r;case 5:return Jc(r),e===null&&Eo(r),o=r.type,h=r.pendingProps,p=e!==null?e.memoizedProps:null,g=h.children,go(o,h)?g=null:p!==null&&go(o,p)&&(r.flags|=32),Td(e,r),dt(e,r,g,i),r.child;case 6:return e===null&&Eo(r),null;case 13:return Ad(e,r,i);case 4:return Io(r,r.stateNode.containerInfo),o=r.pendingProps,e===null?r.child=xn(r,null,o,i):dt(e,r,o,i),r.child;case 11:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Mt(o,h),jd(e,r,o,h,i);case 7:return dt(e,r,r.pendingProps,i),r.child;case 8:return dt(e,r,r.pendingProps.children,i),r.child;case 12:return dt(e,r,r.pendingProps.children,i),r.child;case 10:e:{if(o=r.type._context,h=r.pendingProps,p=r.memoizedProps,g=h.value,Ae(Ti,o._currentValue),o._currentValue=g,p!==null)if(Ut(p.value,g)){if(p.children===h.children&&!pt.current){r=ir(e,r,i);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var _=p.dependencies;if(_!==null){g=p.child;for(var N=_.firstContext;N!==null;){if(N.context===o){if(p.tag===1){N=sr(-1,i&-i),N.tag=2;var D=p.updateQueue;if(D!==null){D=D.shared;var H=D.pending;H===null?N.next=N:(N.next=H.next,H.next=N),D.pending=N}}p.lanes|=i,N=p.alternate,N!==null&&(N.lanes|=i),Oo(p.return,i,r),_.lanes|=i;break}N=N.next}}else if(p.tag===10)g=p.type===r.type?null:p.child;else if(p.tag===18){if(g=p.return,g===null)throw Error(s(341));g.lanes|=i,_=g.alternate,_!==null&&(_.lanes|=i),Oo(g,i,r),g=p.sibling}else g=p.child;if(g!==null)g.return=p;else for(g=p;g!==null;){if(g===r){g=null;break}if(p=g.sibling,p!==null){p.return=g.return,g=p;break}g=g.return}p=g}dt(e,r,h.children,i),r=r.child}return r;case 9:return h=r.type,o=r.pendingProps.children,bn(r,i),h=Rt(h),o=o(h),r.flags|=1,dt(e,r,o,i),r.child;case 14:return o=r.type,h=Mt(o,r.pendingProps),h=Mt(o.type,h),Ed(e,r,o,h,i);case 15:return Nd(e,r,r.type,r.pendingProps,i);case 17:return o=r.type,h=r.pendingProps,h=r.elementType===o?h:Mt(o,h),Bi(e,r),r.tag=1,mt(o)?(e=!0,_i(r)):e=!1,bn(r,i),kd(r,o,h),Ko(r,o,h,i),Yo(null,r,o,!0,e,i);case 19:return Ld(e,r,i);case 22:return Cd(e,r,i)}throw Error(s(156,r.tag))};function ih(e,r){return Du(e,r)}function F0(e,r,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,r,i,o){return new F0(e,r,i,o)}function gl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function B0(e){if(typeof e=="function")return gl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===re)return 11;if(e===xe)return 14}return 2}function Or(e,r){var i=e.alternate;return i===null?(i=At(e.tag,r,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Xi(e,r,i,o,h,p){var g=2;if(o=e,typeof e=="function")gl(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Q:return Jr(i.children,h,p,r);case O:g=8,h|=8;break;case L:return e=At(12,i,r,h|2),e.elementType=L,e.lanes=p,e;case oe:return e=At(13,i,r,h),e.elementType=oe,e.lanes=p,e;case fe:return e=At(19,i,r,h),e.elementType=fe,e.lanes=p,e;case P:return Zi(i,h,p,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:g=10;break e;case ce:g=9;break e;case re:g=11;break e;case xe:g=14;break e;case pe:g=16,o=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return r=At(g,i,r,h),r.elementType=e,r.type=o,r.lanes=p,r}function Jr(e,r,i,o){return e=At(7,e,o,r),e.lanes=i,e}function Zi(e,r,i,o){return e=At(22,e,o,r),e.elementType=P,e.lanes=i,e.stateNode={isHidden:!1},e}function kl(e,r,i){return e=At(6,e,null,r),e.lanes=i,e}function vl(e,r,i){return r=At(4,e.children!==null?e.children:[],e.key,r),r.lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function z0(e,r,i,o,h){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=o,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function xl(e,r,i,o,h,p,g,_,N){return e=new z0(e,r,i,_,N),r===1?(r=1,p===!0&&(r|=8)):r=0,p=At(3,null,null,r),e.current=p,p.stateNode=e,p.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(p),e}function q0(e,r,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:o==null?null:""+o,children:e,containerInfo:r,implementation:i}}function ah(e){if(!e)return br;e=e._reactInternals;e:{if(Ur(e)!==e||e.tag!==1)throw Error(s(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(mt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(s(171))}if(e.tag===1){var i=e.type;if(mt(i))return Ic(e,i,r)}return r}function oh(e,r,i,o,h,p,g,_,N){return e=xl(i,o,!0,e,h,p,g,_,N),e.context=ah(null),i=e.current,o=ht(),h=Tr(i),p=sr(o,h),p.callback=r??null,jr(i,p,h),e.current.lanes=h,Zn(e,h,o),kt(e,o),e}function ea(e,r,i,o){var h=r.current,p=ht(),g=Tr(h);return i=ah(i),r.context===null?r.context=i:r.pendingContext=i,r=sr(p,g),r.payload={element:e},o=o===void 0?null:o,o!==null&&(r.callback=o),e=jr(h,r,g),e!==null&&(zt(e,h,g,p),Oi(e,h,g)),g}function ta(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function lh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<r?i:r}}function wl(e,r){lh(e,r),(e=e.alternate)&&lh(e,r)}function H0(){return null}var uh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bl(e){this._internalRoot=e}ra.prototype.render=bl.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(s(409));ea(e,r,null,null)},ra.prototype.unmount=bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Vr(function(){ea(null,e,null,null)}),r[Zt]=null}};function ra(e){this._internalRoot=e}ra.prototype.unstable_scheduleHydration=function(e){if(e){var r=Vu();e={blockedOn:null,target:e,priority:r};for(var i=0;i<gr.length&&r!==0&&r<gr[i].priority;i++);gr.splice(i,0,e),i===0&&Ju(e)}};function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function na(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ch(){}function W0(e,r,i,o,h){if(h){if(typeof o=="function"){var p=o;o=function(){var D=ta(g);p.call(D)}}var g=oh(r,o,e,0,null,!1,!1,"",ch);return e._reactRootContainer=g,e[Zt]=g.current,fs(e.nodeType===8?e.parentNode:e),Vr(),g}for(;h=e.lastChild;)e.removeChild(h);if(typeof o=="function"){var _=o;o=function(){var D=ta(N);_.call(D)}}var N=xl(e,0,!1,null,null,!1,!1,"",ch);return e._reactRootContainer=N,e[Zt]=N.current,fs(e.nodeType===8?e.parentNode:e),Vr(function(){ea(r,N,i,o)}),N}function sa(e,r,i,o,h){var p=i._reactRootContainer;if(p){var g=p;if(typeof h=="function"){var _=h;h=function(){var N=ta(g);_.call(N)}}ea(r,g,e,h)}else g=W0(i,r,e,h,o);return ta(g)}Hu=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var i=Xn(r.pendingLanes);i!==0&&(Va(r,i|1),kt(r,Ve()),(Ne&6)===0&&(Nn=Ve()+500,_r()))}break;case 13:Vr(function(){var o=nr(e,1);if(o!==null){var h=ht();zt(o,e,1,h)}}),wl(e,1)}},Ka=function(e){if(e.tag===13){var r=nr(e,134217728);if(r!==null){var i=ht();zt(r,e,134217728,i)}wl(e,134217728)}},Wu=function(e){if(e.tag===13){var r=Tr(e),i=nr(e,r);if(i!==null){var o=ht();zt(i,e,r,o)}wl(e,r)}},Vu=function(){return Pe},Ku=function(e,r){var i=Pe;try{return Pe=e,r()}finally{Pe=i}},Ma=function(e,r,i){switch(r){case"input":if(Ue(e,i),r=i.name,i.type==="radio"&&r!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<i.length;r++){var o=i[r];if(o!==e&&o.form===e.form){var h=wi(o);if(!h)throw Error(s(90));Ge(o),Ue(o,h)}}}break;case"textarea":bu(e,i);break;case"select":r=i.value,r!=null&&nn(e,!!i.multiple,r,!1)}},Ou=pl,Pu=Vr;var V0={usingClientEntryPoint:!1,Events:[ys,pn,wi,Tu,Ru,pl]},Rs={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K0={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$u(e),e===null?null:e.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||H0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{ri=ia.inject(K0),Gt=ia}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0,vt.createPortal=function(e,r){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_l(r))throw Error(s(200));return q0(e,r,null,i)},vt.createRoot=function(e,r){if(!_l(e))throw Error(s(299));var i=!1,o="",h=uh;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=xl(e,1,!1,null,null,i,!1,o,h),e[Zt]=r.current,fs(e.nodeType===8?e.parentNode:e),new bl(r)},vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=$u(r),e=e===null?null:e.stateNode,e},vt.flushSync=function(e){return Vr(e)},vt.hydrate=function(e,r,i){if(!na(r))throw Error(s(200));return sa(null,e,r,!0,i)},vt.hydrateRoot=function(e,r,i){if(!_l(e))throw Error(s(405));var o=i!=null&&i.hydratedSources||null,h=!1,p="",g=uh;if(i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),r=oh(r,null,e,1,i??null,h,!1,p,g),e[Zt]=r.current,fs(e),o)for(e=0;e<o.length;e++)i=o[e],h=i._getVersion,h=h(i._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[i,h]:r.mutableSourceEagerHydrationData.push(i,h);return new ra(r)},vt.render=function(e,r,i){if(!na(r))throw Error(s(200));return sa(null,e,r,!1,i)},vt.unmountComponentAtNode=function(e){if(!na(e))throw Error(s(40));return e._reactRootContainer?(Vr(function(){sa(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1},vt.unstable_batchedUpdates=pl,vt.unstable_renderSubtreeIntoContainer=function(e,r,i,o){if(!na(i))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return sa(e,r,i,!1,o)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var kh;function tm(){if(kh)return El.exports;kh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),El.exports=em(),El.exports}var vh;function rm(){if(vh)return aa;vh=1;var n=tm();return aa.createRoot=n.createRoot,aa.hydrateRoot=n.hydrateRoot,aa}var nm=rm();var xh="popstate";function sm(n={}){function t(u,l){let{pathname:d="/",search:f="",hash:m=""}=rn(u.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Gl("",{pathname:d,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(u,l){let d=u.document.querySelector("base"),f="";if(d&&d.getAttribute("href")){let m=u.location.href,y=m.indexOf("#");f=y===-1?m:m.slice(0,y)}return f+"#"+(typeof l=="string"?l:Fs(l))}function a(u,l){Lt(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return am(t,s,a,n)}function Me(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function Lt(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function im(){return Math.random().toString(36).substring(2,10)}function wh(n,t){return{usr:n.state,key:n.key,idx:t}}function Gl(n,t,s=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?rn(t):t,state:s,key:t&&t.key||a||im()}}function Fs({pathname:n="/",search:t="",hash:s=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function rn(n){let t={};if(n){let s=n.indexOf("#");s>=0&&(t.hash=n.substring(s),n=n.substring(0,s));let a=n.indexOf("?");a>=0&&(t.search=n.substring(a),n=n.substring(0,a)),n&&(t.pathname=n)}return t}function am(n,t,s,a={}){let{window:u=document.defaultView,v5Compat:l=!1}=a,d=u.history,f="POP",m=null,y=k();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function k(){return(d.state||{idx:null}).idx}function v(){f="POP";let C=k(),U=C==null?null:C-y;y=C,m&&m({action:f,location:E.location,delta:U})}function w(C,U){f="PUSH";let I=Gl(E.location,C,U);s&&s(I,C),y=k()+1;let T=wh(I,y),M=E.createHref(I);try{d.pushState(T,"",M)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;u.location.assign(M)}l&&m&&m({action:f,location:E.location,delta:1})}function b(C,U){f="REPLACE";let I=Gl(E.location,C,U);s&&s(I,C),y=k();let T=wh(I,y),M=E.createHref(I);d.replaceState(T,"",M),l&&m&&m({action:f,location:E.location,delta:0})}function S(C){return om(C)}let E={get action(){return f},get location(){return n(u,d)},listen(C){if(m)throw new Error("A history only accepts one active listener");return u.addEventListener(xh,v),m=C,()=>{u.removeEventListener(xh,v),m=null}},createHref(C){return t(u,C)},createURL:S,encodeLocation(C){let U=S(C);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:b,go(C){return d.go(C)}};return E}function om(n,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Me(s,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Fs(n);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function cf(n,t,s="/"){return lm(n,t,s,!1)}function lm(n,t,s,a){let u=typeof t=="string"?rn(t):t,l=cr(u.pathname||"/",s);if(l==null)return null;let d=df(n);um(d);let f=null;for(let m=0;f==null&&m<d.length;++m){let y=xm(l);f=km(d[m],y,a)}return f}function df(n,t=[],s=[],a="",u=!1){let l=(d,f,m=u,y)=>{let k={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(k.relativePath.startsWith("/")){if(!k.relativePath.startsWith(a)&&m)return;Me(k.relativePath.startsWith(a),`Absolute route path "${k.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(a.length)}let v=ur([a,k.relativePath]),w=s.concat(k);d.children&&d.children.length>0&&(Me(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),df(d.children,t,w,v,m)),!(d.path==null&&!d.index)&&t.push({path:v,score:ym(v,d.index),routesMeta:w})};return n.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let m of hf(d.path))l(d,f,!0,m)}),t}function hf(n){let t=n.split("/");if(t.length===0)return[];let[s,...a]=t,u=s.endsWith("?"),l=s.replace(/\?$/,"");if(a.length===0)return u?[l,""]:[l];let d=hf(a.join("/")),f=[];return f.push(...d.map(m=>m===""?l:[l,m].join("/"))),u&&f.push(...d),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function um(n){n.sort((t,s)=>t.score!==s.score?s.score-t.score:gm(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var cm=/^:[\w-]+$/,dm=3,hm=2,fm=1,pm=10,mm=-2,bh=n=>n==="*";function ym(n,t){let s=n.split("/"),a=s.length;return s.some(bh)&&(a+=mm),t&&(a+=hm),s.filter(u=>!bh(u)).reduce((u,l)=>u+(cm.test(l)?dm:l===""?fm:pm),a)}function gm(n,t){return n.length===t.length&&n.slice(0,-1).every((a,u)=>a===t[u])?n[n.length-1]-t[t.length-1]:0}function km(n,t,s=!1){let{routesMeta:a}=n,u={},l="/",d=[];for(let f=0;f<a.length;++f){let m=a[f],y=f===a.length-1,k=l==="/"?t:t.slice(l.length)||"/",v=wa({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},k),w=m.route;if(!v&&y&&s&&!a[a.length-1].route.index&&(v=wa({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},k)),!v)return null;Object.assign(u,v.params),d.push({params:u,pathname:ur([l,v.pathname]),pathnameBase:Sm(ur([l,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(l=ur([l,v.pathnameBase]))}return d}function wa(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,a]=vm(n.path,n.caseSensitive,n.end),u=t.match(s);if(!u)return null;let l=u[0],d=l.replace(/(.)\/+$/,"$1"),f=u.slice(1);return{params:a.reduce((y,{paramName:k,isOptional:v},w)=>{if(k==="*"){let S=f[w]||"";d=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const b=f[w];return v&&!b?y[k]=void 0:y[k]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:d,pattern:n}}function vm(n,t=!1,s=!0){Lt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,m)=>(a.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),u+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":n!==""&&n!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),a]}function xm(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function cr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=n.charAt(s);return a&&a!=="/"?null:n.slice(s)||"/"}var wm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bm(n,t="/"){let{pathname:s,search:a="",hash:u=""}=typeof n=="string"?rn(n):n,l;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?l=_h(s.substring(1),"/"):l=_h(s,t)):l=t,{pathname:l,search:jm(a),hash:Em(u)}}function _h(n,t){let s=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function Tl(n,t,s,a){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _m(n){return n.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function du(n){let t=_m(n);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function hu(n,t,s,a=!1){let u;typeof n=="string"?u=rn(n):(u={...n},Me(!u.pathname||!u.pathname.includes("?"),Tl("?","pathname","search",u)),Me(!u.pathname||!u.pathname.includes("#"),Tl("#","pathname","hash",u)),Me(!u.search||!u.search.includes("#"),Tl("#","search","hash",u)));let l=n===""||u.pathname==="",d=l?"/":u.pathname,f;if(d==null)f=s;else{let v=t.length-1;if(!a&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),v-=1;u.pathname=w.join("/")}f=v>=0?t[v]:"/"}let m=bm(u,f),y=d&&d!=="/"&&d.endsWith("/"),k=(l||d===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(y||k)&&(m.pathname+="/"),m}var ur=n=>n.join("/").replace(/\/\/+/g,"/"),Sm=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jm=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Em=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Nm=class{constructor(n,t,s,a=!1){this.status=n,this.statusText=t||"",this.internal=a,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Cm(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Tm(n){return n.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ff=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pf(n,t){let s=n;if(typeof s!="string"||!wm.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let a=s,u=!1;if(ff)try{let l=new URL(window.location.href),d=s.startsWith("//")?new URL(l.protocol+s):new URL(s),f=cr(d.pathname,t);d.origin===l.origin&&f!=null?s=f+d.search+d.hash:u=!0}catch{Lt(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:u,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var mf=["POST","PUT","PATCH","DELETE"];new Set(mf);var Rm=["GET",...mf];new Set(Rm);var Hn=x.createContext(null);Hn.displayName="DataRouter";var Na=x.createContext(null);Na.displayName="DataRouterState";var Om=x.createContext(!1),yf=x.createContext({isTransitioning:!1});yf.displayName="ViewTransition";var Pm=x.createContext(new Map);Pm.displayName="Fetchers";var Am=x.createContext(null);Am.displayName="Await";var Nt=x.createContext(null);Nt.displayName="Navigation";var Gs=x.createContext(null);Gs.displayName="Location";var Kt=x.createContext({outlet:null,matches:[],isDataRoute:!1});Kt.displayName="Route";var fu=x.createContext(null);fu.displayName="RouteError";var gf="REACT_ROUTER_ERROR",Im="REDIRECT",Lm="ROUTE_ERROR_RESPONSE";function $m(n){if(n.startsWith(`${gf}:${Im}:{`))try{let t=JSON.parse(n.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Um(n){if(n.startsWith(`${gf}:${Lm}:{`))try{let t=JSON.parse(n.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Nm(t.status,t.statusText,t.data)}catch{}}function Dm(n,{relative:t}={}){Me(Wn(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=x.useContext(Nt),{hash:u,pathname:l,search:d}=Qs(n,{relative:t}),f=l;return s!=="/"&&(f=l==="/"?s:ur([s,l])),a.createHref({pathname:f,search:d,hash:u})}function Wn(){return x.useContext(Gs)!=null}function dr(){return Me(Wn(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Gs).location}var kf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vf(n){x.useContext(Nt).static||x.useLayoutEffect(n)}function Js(){let{isDataRoute:n}=x.useContext(Kt);return n?Ym():Mm()}function Mm(){Me(Wn(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Hn),{basename:t,navigator:s}=x.useContext(Nt),{matches:a}=x.useContext(Kt),{pathname:u}=dr(),l=JSON.stringify(du(a)),d=x.useRef(!1);return vf(()=>{d.current=!0}),x.useCallback((m,y={})=>{if(Lt(d.current,kf),!d.current)return;if(typeof m=="number"){s.go(m);return}let k=hu(m,JSON.parse(l),u,y.relative==="path");n==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:ur([t,k.pathname])),(y.replace?s.replace:s.push)(k,y.state,y)},[t,s,l,u,n])}x.createContext(null);function xf(){let{matches:n}=x.useContext(Kt),t=n[n.length-1];return t?t.params:{}}function Qs(n,{relative:t}={}){let{matches:s}=x.useContext(Kt),{pathname:a}=dr(),u=JSON.stringify(du(s));return x.useMemo(()=>hu(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function Fm(n,t){return wf(n,t)}function wf(n,t,s,a,u){Me(Wn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=x.useContext(Nt),{matches:d}=x.useContext(Kt),f=d[d.length-1],m=f?f.params:{},y=f?f.pathname:"/",k=f?f.pathnameBase:"/",v=f&&f.route;{let I=v&&v.path||"";_f(y,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let w=dr(),b;if(t){let I=typeof t=="string"?rn(t):t;Me(k==="/"||I.pathname?.startsWith(k),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${k}" but pathname "${I.pathname}" was given in the \`location\` prop.`),b=I}else b=w;let S=b.pathname||"/",E=S;if(k!=="/"){let I=k.replace(/^\//,"").split("/");E="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let C=cf(n,{pathname:E});Lt(v||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Lt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Wm(C&&C.map(I=>Object.assign({},I,{params:Object.assign({},m,I.params),pathname:ur([k,l.encodeLocation?l.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?k:ur([k,l.encodeLocation?l.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),d,s,a,u);return t&&U?x.createElement(Gs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},U):U}function Bm(){let n=Qm(),t=Cm(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),s?x.createElement("pre",{style:u},s):null,d)}var zm=x.createElement(Bm,null),bf=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const s=Um(n.digest);s&&(n=s)}let t=n!==void 0?x.createElement(Kt.Provider,{value:this.props.routeContext},x.createElement(fu.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?x.createElement(qm,{error:n},t):t}};bf.contextType=Om;var Rl=new WeakMap;function qm({children:n,error:t}){let{basename:s}=x.useContext(Nt);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=$m(t.digest);if(a){let u=Rl.get(t);if(u)throw u;let l=pf(a.location,s);if(ff&&!Rl.get(t))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Rl.set(t,d),d}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function Hm({routeContext:n,match:t,children:s}){let a=x.useContext(Hn);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(Kt.Provider,{value:n},s)}function Wm(n,t=[],s=null,a=null,u=null){if(n==null){if(!s)return null;if(s.errors)n=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let l=n,d=s?.errors;if(d!=null){let k=l.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Me(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,k+1))}let f=!1,m=-1;if(s)for(let k=0;k<l.length;k++){let v=l[k];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=k),v.route.id){let{loaderData:w,errors:b}=s,S=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!b||b[v.route.id]===void 0);if(v.route.lazy||S){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let y=s&&a?(k,v)=>{a(k,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:Tm(s.matches),errorInfo:v})}:void 0;return l.reduceRight((k,v,w)=>{let b,S=!1,E=null,C=null;s&&(b=d&&v.route.id?d[v.route.id]:void 0,E=v.route.errorElement||zm,f&&(m<0&&w===0?(_f("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):m===w&&(S=!0,C=v.route.hydrateFallbackElement||null)));let U=t.concat(l.slice(0,w+1)),I=()=>{let T;return b?T=E:S?T=C:v.route.Component?T=x.createElement(v.route.Component,null):v.route.element?T=v.route.element:T=k,x.createElement(Hm,{match:v,routeContext:{outlet:k,matches:U,isDataRoute:s!=null},children:T})};return s&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?x.createElement(bf,{location:s.location,revalidation:s.revalidation,component:E,error:b,children:I(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:y}):I()},null)}function pu(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vm(n){let t=x.useContext(Hn);return Me(t,pu(n)),t}function Km(n){let t=x.useContext(Na);return Me(t,pu(n)),t}function Gm(n){let t=x.useContext(Kt);return Me(t,pu(n)),t}function mu(n){let t=Gm(n),s=t.matches[t.matches.length-1];return Me(s.route.id,`${n} can only be used on routes that contain a unique "id"`),s.route.id}function Jm(){return mu("useRouteId")}function Qm(){let n=x.useContext(fu),t=Km("useRouteError"),s=mu("useRouteError");return n!==void 0?n:t.errors?.[s]}function Ym(){let{router:n}=Vm("useNavigate"),t=mu("useNavigate"),s=x.useRef(!1);return vf(()=>{s.current=!0}),x.useCallback(async(u,l={})=>{Lt(s.current,kf),s.current&&(typeof u=="number"?await n.navigate(u):await n.navigate(u,{fromRouteId:t,...l}))},[n,t])}var Sh={};function _f(n,t,s){!t&&!Sh[n]&&(Sh[n]=!0,Lt(!1,s))}x.memo(Xm);function Xm({routes:n,future:t,state:s,onError:a}){return wf(n,void 0,s,a,t)}function Zm({to:n,replace:t,state:s,relative:a}){Me(Wn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=x.useContext(Nt);Lt(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=x.useContext(Kt),{pathname:d}=dr(),f=Js(),m=hu(n,du(l),d,a==="path"),y=JSON.stringify(m);return x.useEffect(()=>{f(JSON.parse(y),{replace:t,state:s,relative:a})},[f,y,a,t,s]),null}function ft(n){Me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ey({basename:n="/",children:t=null,location:s,navigationType:a="POP",navigator:u,static:l=!1,unstable_useTransitions:d}){Me(!Wn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=x.useMemo(()=>({basename:f,navigator:u,static:l,unstable_useTransitions:d,future:{}}),[f,u,l,d]);typeof s=="string"&&(s=rn(s));let{pathname:y="/",search:k="",hash:v="",state:w=null,key:b="default"}=s,S=x.useMemo(()=>{let E=cr(y,f);return E==null?null:{location:{pathname:E,search:k,hash:v,state:w,key:b},navigationType:a}},[f,y,k,v,w,b,a]);return Lt(S!=null,`<Router basename="${f}"> is not able to match the URL "${y}${k}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:x.createElement(Nt.Provider,{value:m},x.createElement(Gs.Provider,{children:t,value:S}))}function ty({children:n,location:t}){return Fm(Jl(n),t)}function Jl(n,t=[]){let s=[];return x.Children.forEach(n,(a,u)=>{if(!x.isValidElement(a))return;let l=[...t,u];if(a.type===x.Fragment){s.push.apply(s,Jl(a.props.children,l));return}Me(a.type===ft,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Me(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Jl(a.props.children,l)),s.push(d)}),s}var ka="get",va="application/x-www-form-urlencoded";function Ca(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ry(n){return Ca(n)&&n.tagName.toLowerCase()==="button"}function ny(n){return Ca(n)&&n.tagName.toLowerCase()==="form"}function sy(n){return Ca(n)&&n.tagName.toLowerCase()==="input"}function iy(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ay(n,t){return n.button===0&&(!t||t==="_self")&&!iy(n)}var oa=null;function oy(){if(oa===null)try{new FormData(document.createElement("form"),0),oa=!1}catch{oa=!0}return oa}var ly=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ol(n){return n!=null&&!ly.has(n)?(Lt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${va}"`),null):n}function uy(n,t){let s,a,u,l,d;if(ny(n)){let f=n.getAttribute("action");a=f?cr(f,t):null,s=n.getAttribute("method")||ka,u=Ol(n.getAttribute("enctype"))||va,l=new FormData(n)}else if(ry(n)||sy(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(a=m?cr(m,t):null,s=n.getAttribute("formmethod")||f.getAttribute("method")||ka,u=Ol(n.getAttribute("formenctype"))||Ol(f.getAttribute("enctype"))||va,l=new FormData(f,n),!oy()){let{name:y,type:k,value:v}=n;if(k==="image"){let w=y?`${y}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else y&&l.append(y,v)}}else{if(Ca(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=ka,a=null,u=va,d=n}return l&&u==="text/plain"&&(d=l,l=void 0),{action:a,method:s.toLowerCase(),encType:u,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yu(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function cy(n,t,s,a){let u=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${a}`:u.pathname=`${u.pathname}.${a}`:u.pathname==="/"?u.pathname=`_root.${a}`:t&&cr(u.pathname,t)==="/"?u.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${a}`,u}async function dy(n,t){if(n.id in t)return t[n.id];try{let s=await import(n.module);return t[n.id]=s,s}catch(s){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hy(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function fy(n,t,s){let a=await Promise.all(n.map(async u=>{let l=t.routes[u.route.id];if(l){let d=await dy(l,s);return d.links?d.links():[]}return[]}));return gy(a.flat(1).filter(hy).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function jh(n,t,s,a,u,l){let d=(m,y)=>s[y]?m.route.id!==s[y].route.id:!0,f=(m,y)=>s[y].pathname!==m.pathname||s[y].route.path?.endsWith("*")&&s[y].params["*"]!==m.params["*"];return l==="assets"?t.filter((m,y)=>d(m,y)||f(m,y)):l==="data"?t.filter((m,y)=>{let k=a.routes[m.route.id];if(!k||!k.hasLoader)return!1;if(d(m,y)||f(m,y))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function py(n,t,{includeHydrateFallback:s}={}){return my(n.map(a=>{let u=t.routes[a.route.id];if(!u)return[];let l=[u.module];return u.clientActionModule&&(l=l.concat(u.clientActionModule)),u.clientLoaderModule&&(l=l.concat(u.clientLoaderModule)),s&&u.hydrateFallbackModule&&(l=l.concat(u.hydrateFallbackModule)),u.imports&&(l=l.concat(u.imports)),l}).flat(1))}function my(n){return[...new Set(n)]}function yy(n){let t={},s=Object.keys(n).sort();for(let a of s)t[a]=n[a];return t}function gy(n,t){let s=new Set;return new Set(t),n.reduce((a,u)=>{let l=JSON.stringify(yy(u));return s.has(l)||(s.add(l),a.push({key:l,link:u})),a},[])}function Sf(){let n=x.useContext(Hn);return yu(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function ky(){let n=x.useContext(Na);return yu(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gu=x.createContext(void 0);gu.displayName="FrameworkContext";function jf(){let n=x.useContext(gu);return yu(n,"You must render this element inside a <HydratedRouter> element"),n}function vy(n,t){let s=x.useContext(gu),[a,u]=x.useState(!1),[l,d]=x.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:y,onMouseLeave:k,onTouchStart:v}=t,w=x.useRef(null);x.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let E=U=>{U.forEach(I=>{d(I.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return w.current&&C.observe(w.current),()=>{C.disconnect()}}},[n]),x.useEffect(()=>{if(a){let E=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(E)}}},[a]);let b=()=>{u(!0)},S=()=>{u(!1),d(!1)};return s?n!=="intent"?[l,w,{}]:[l,w,{onFocus:Ps(f,b),onBlur:Ps(m,S),onMouseEnter:Ps(y,b),onMouseLeave:Ps(k,S),onTouchStart:Ps(v,b)}]:[!1,w,{}]}function Ps(n,t){return s=>{n&&n(s),s.defaultPrevented||t(s)}}function xy({page:n,...t}){let{router:s}=Sf(),a=x.useMemo(()=>cf(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?x.createElement(by,{page:n,matches:a,...t}):null}function wy(n){let{manifest:t,routeModules:s}=jf(),[a,u]=x.useState([]);return x.useEffect(()=>{let l=!1;return fy(n,t,s).then(d=>{l||u(d)}),()=>{l=!0}},[n,t,s]),a}function by({page:n,matches:t,...s}){let a=dr(),{future:u,manifest:l,routeModules:d}=jf(),{basename:f}=Sf(),{loaderData:m,matches:y}=ky(),k=x.useMemo(()=>jh(n,t,y,l,a,"data"),[n,t,y,l,a]),v=x.useMemo(()=>jh(n,t,y,l,a,"assets"),[n,t,y,l,a]),w=x.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let E=new Set,C=!1;if(t.forEach(I=>{let T=l.routes[I.route.id];!T||!T.hasLoader||(!k.some(M=>M.route.id===I.route.id)&&I.route.id in m&&d[I.route.id]?.shouldRevalidate||T.hasClientLoader?C=!0:E.add(I.route.id))}),E.size===0)return[];let U=cy(n,f,u.unstable_trailingSlashAwareDataRequests,"data");return C&&E.size>0&&U.searchParams.set("_routes",t.filter(I=>E.has(I.route.id)).map(I=>I.route.id).join(",")),[U.pathname+U.search]},[f,u.unstable_trailingSlashAwareDataRequests,m,a,l,k,t,n,d]),b=x.useMemo(()=>py(v,l),[v,l]),S=wy(v);return x.createElement(x.Fragment,null,w.map(E=>x.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),b.map(E=>x.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),S.map(({key:E,link:C})=>x.createElement("link",{key:E,nonce:s.nonce,...C,crossOrigin:C.crossOrigin??s.crossOrigin})))}function _y(...n){return t=>{n.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Sy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sy&&(window.__reactRouterVersion="7.13.0")}catch{}function jy({basename:n,children:t,unstable_useTransitions:s,window:a}){let u=x.useRef();u.current==null&&(u.current=sm({window:a,v5Compat:!0}));let l=u.current,[d,f]=x.useState({action:l.action,location:l.location}),m=x.useCallback(y=>{s===!1?f(y):x.startTransition(()=>f(y))},[s]);return x.useLayoutEffect(()=>l.listen(m),[l,m]),x.createElement(ey,{basename:n,children:t,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:s})}var Ef=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=x.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:u,reloadDocument:l,replace:d,state:f,target:m,to:y,preventScrollReset:k,viewTransition:v,unstable_defaultShouldRevalidate:w,...b},S){let{basename:E,unstable_useTransitions:C}=x.useContext(Nt),U=typeof y=="string"&&Ef.test(y),I=pf(y,E);y=I.to;let T=Dm(y,{relative:u}),[M,W,V]=vy(a,b),Q=Ty(y,{replace:d,state:f,target:m,preventScrollReset:k,relative:u,viewTransition:v,unstable_defaultShouldRevalidate:w,unstable_useTransitions:C});function O(K){t&&t(K),K.defaultPrevented||Q(K)}let L=x.createElement("a",{...b,...V,href:I.absoluteURL||T,onClick:I.isExternal||l?t:O,ref:_y(S,W),target:m,"data-discover":!U&&s==="render"?"true":void 0});return M&&!U?x.createElement(x.Fragment,null,L,x.createElement(xy,{page:T})):L});Ce.displayName="Link";var Ey=x.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:u=!1,style:l,to:d,viewTransition:f,children:m,...y},k){let v=Qs(d,{relative:y.relative}),w=dr(),b=x.useContext(Na),{navigator:S,basename:E}=x.useContext(Nt),C=b!=null&&Iy(v)&&f===!0,U=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,I=w.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(I=I.toLowerCase(),T=T?T.toLowerCase():null,U=U.toLowerCase()),T&&E&&(T=cr(T,E)||T);const M=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let W=I===U||!u&&I.startsWith(U)&&I.charAt(M)==="/",V=T!=null&&(T===U||!u&&T.startsWith(U)&&T.charAt(U.length)==="/"),Q={isActive:W,isPending:V,isTransitioning:C},O=W?t:void 0,L;typeof a=="function"?L=a(Q):L=[a,W?"active":null,V?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(Q):l;return x.createElement(Ce,{...y,"aria-current":O,className:L,ref:k,style:K,to:d,viewTransition:f},typeof m=="function"?m(Q):m)});Ey.displayName="NavLink";var Ny=x.forwardRef(({discover:n="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:u,state:l,method:d=ka,action:f,onSubmit:m,relative:y,preventScrollReset:k,viewTransition:v,unstable_defaultShouldRevalidate:w,...b},S)=>{let{unstable_useTransitions:E}=x.useContext(Nt),C=Py(),U=Ay(f,{relative:y}),I=d.toLowerCase()==="get"?"get":"post",T=typeof f=="string"&&Ef.test(f),M=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let V=W.nativeEvent.submitter,Q=V?.getAttribute("formmethod")||d,O=()=>C(V||W.currentTarget,{fetcherKey:t,method:Q,navigate:s,replace:u,state:l,relative:y,preventScrollReset:k,viewTransition:v,unstable_defaultShouldRevalidate:w});E&&s!==!1?x.startTransition(()=>O()):O()};return x.createElement("form",{ref:S,method:I,action:U,onSubmit:a?m:M,...b,"data-discover":!T&&n==="render"?"true":void 0})});Ny.displayName="Form";function Cy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nf(n){let t=x.useContext(Hn);return Me(t,Cy(n)),t}function Ty(n,{target:t,replace:s,state:a,preventScrollReset:u,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let y=Js(),k=dr(),v=Qs(n,{relative:l});return x.useCallback(w=>{if(ay(w,t)){w.preventDefault();let b=s!==void 0?s:Fs(k)===Fs(v),S=()=>y(n,{replace:b,state:a,preventScrollReset:u,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:f});m?x.startTransition(()=>S()):S()}},[k,y,v,s,a,t,n,u,l,d,f,m])}var Ry=0,Oy=()=>`__${String(++Ry)}__`;function Py(){let{router:n}=Nf("useSubmit"),{basename:t}=x.useContext(Nt),s=Jm(),a=n.fetch,u=n.navigate;return x.useCallback(async(l,d={})=>{let{action:f,method:m,encType:y,formData:k,body:v}=uy(l,t);if(d.navigate===!1){let w=d.fetcherKey||Oy();await a(w,s,d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:k,body:v,formMethod:d.method||m,formEncType:d.encType||y,flushSync:d.flushSync})}else await u(d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:k,body:v,formMethod:d.method||m,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:s,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,u,t,s])}function Ay(n,{relative:t}={}){let{basename:s}=x.useContext(Nt),a=x.useContext(Kt);Me(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),l={...Qs(n||".",{relative:t})},d=dr();if(n==null){l.search=d.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(k=>k==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let k=f.toString();l.search=k?`?${k}`:""}}return(!n||n===".")&&u.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:ur([s,l.pathname])),Fs(l)}function Iy(n,{relative:t}={}){let s=x.useContext(yf);Me(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Nf("useViewTransitionState"),u=Qs(n,{relative:t});if(!s.isTransitioning)return!1;let l=cr(s.currentLocation.pathname,a)||s.currentLocation.pathname,d=cr(s.nextLocation.pathname,a)||s.nextLocation.pathname;return wa(u.pathname,d)!=null||wa(u.pathname,l)!=null}var Pl,Eh;function Ly(){if(Eh)return Pl;Eh=1;var n=typeof Element<"u",t=typeof Map=="function",s=typeof Set=="function",a=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function u(l,d){if(l===d)return!0;if(l&&d&&typeof l=="object"&&typeof d=="object"){if(l.constructor!==d.constructor)return!1;var f,m,y;if(Array.isArray(l)){if(f=l.length,f!=d.length)return!1;for(m=f;m--!==0;)if(!u(l[m],d[m]))return!1;return!0}var k;if(t&&l instanceof Map&&d instanceof Map){if(l.size!==d.size)return!1;for(k=l.entries();!(m=k.next()).done;)if(!d.has(m.value[0]))return!1;for(k=l.entries();!(m=k.next()).done;)if(!u(m.value[1],d.get(m.value[0])))return!1;return!0}if(s&&l instanceof Set&&d instanceof Set){if(l.size!==d.size)return!1;for(k=l.entries();!(m=k.next()).done;)if(!d.has(m.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(d)){if(f=l.length,f!=d.length)return!1;for(m=f;m--!==0;)if(l[m]!==d[m])return!1;return!0}if(l.constructor===RegExp)return l.source===d.source&&l.flags===d.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof d.valueOf=="function")return l.valueOf()===d.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof d.toString=="function")return l.toString()===d.toString();if(y=Object.keys(l),f=y.length,f!==Object.keys(d).length)return!1;for(m=f;m--!==0;)if(!Object.prototype.hasOwnProperty.call(d,y[m]))return!1;if(n&&l instanceof Element)return!1;for(m=f;m--!==0;)if(!((y[m]==="_owner"||y[m]==="__v"||y[m]==="__o")&&l.$$typeof)&&!u(l[y[m]],d[y[m]]))return!1;return!0}return l!==l&&d!==d}return Pl=function(d,f){try{return u(d,f)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},Pl}var $y=Ly();const Uy=Ea($y);var Al,Nh;function Dy(){if(Nh)return Al;Nh=1;var n=function(t,s,a,u,l,d,f,m){if(!t){var y;if(s===void 0)y=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var k=[a,u,l,d,f,m],v=0;y=new Error(s.replace(/%s/g,function(){return k[v++]})),y.name="Invariant Violation"}throw y.framesToPop=1,y}};return Al=n,Al}var My=Dy();const Ch=Ea(My);var Il,Th;function Fy(){return Th||(Th=1,Il=function(t,s,a,u){var l=a?a.call(u,t,s):void 0;if(l!==void 0)return!!l;if(t===s)return!0;if(typeof t!="object"||!t||typeof s!="object"||!s)return!1;var d=Object.keys(t),f=Object.keys(s);if(d.length!==f.length)return!1;for(var m=Object.prototype.hasOwnProperty.bind(s),y=0;y<d.length;y++){var k=d[y];if(!m(k))return!1;var v=t[k],w=s[k];if(l=a?a.call(u,v,w,k):void 0,l===!1||l===void 0&&v!==w)return!1}return!0}),Il}var By=Fy();const zy=Ea(By);var Cf=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(Cf||{}),Ll={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Rh=Object.values(Cf),ku={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},qy=Object.entries(ku).reduce((n,[t,s])=>(n[s]=t,n),{}),Vt="data-rh",Bn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},zn=(n,t)=>{for(let s=n.length-1;s>=0;s-=1){const a=n[s];if(Object.prototype.hasOwnProperty.call(a,t))return a[t]}return null},Hy=n=>{let t=zn(n,"title");const s=zn(n,Bn.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),s&&t)return s.replace(/%s/g,()=>t);const a=zn(n,Bn.DEFAULT_TITLE);return t||a||void 0},Wy=n=>zn(n,Bn.ON_CHANGE_CLIENT_STATE)||(()=>{}),$l=(n,t)=>t.filter(s=>typeof s[n]<"u").map(s=>s[n]).reduce((s,a)=>({...s,...a}),{}),Vy=(n,t)=>t.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,a)=>{if(!s.length){const u=Object.keys(a);for(let l=0;l<u.length;l+=1){const f=u[l].toLowerCase();if(n.indexOf(f)!==-1&&a[f])return s.concat(a)}}return s},[]),Ky=n=>console&&typeof console.warn=="function"&&console.warn(n),As=(n,t,s)=>{const a={};return s.filter(u=>Array.isArray(u[n])?!0:(typeof u[n]<"u"&&Ky(`Helmet: ${n} should be of type "Array". Instead found type "${typeof u[n]}"`),!1)).map(u=>u[n]).reverse().reduce((u,l)=>{const d={};l.filter(m=>{let y;const k=Object.keys(m);for(let w=0;w<k.length;w+=1){const b=k[w],S=b.toLowerCase();t.indexOf(S)!==-1&&!(y==="rel"&&m[y].toLowerCase()==="canonical")&&!(S==="rel"&&m[S].toLowerCase()==="stylesheet")&&(y=S),t.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(y=b)}if(!y||!m[y])return!1;const v=m[y].toLowerCase();return a[y]||(a[y]={}),d[y]||(d[y]={}),a[y][v]?!1:(d[y][v]=!0,!0)}).reverse().forEach(m=>u.push(m));const f=Object.keys(d);for(let m=0;m<f.length;m+=1){const y=f[m],k={...a[y],...d[y]};a[y]=k}return u},[]).reverse()},Gy=(n,t)=>{if(Array.isArray(n)&&n.length){for(let s=0;s<n.length;s+=1)if(n[s][t])return!0}return!1},Jy=n=>({baseTag:Vy(["href"],n),bodyAttributes:$l("bodyAttributes",n),defer:zn(n,Bn.DEFER),encode:zn(n,Bn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:$l("htmlAttributes",n),linkTags:As("link",["rel","href"],n),metaTags:As("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:As("noscript",["innerHTML"],n),onChangeClientState:Wy(n),scriptTags:As("script",["src","innerHTML"],n),styleTags:As("style",["cssText"],n),title:Hy(n),titleAttributes:$l("titleAttributes",n),prioritizeSeoTags:Gy(n,Bn.PRIORITIZE_SEO_TAGS)}),Tf=n=>Array.isArray(n)?n.join(""):n,Qy=(n,t)=>{const s=Object.keys(n);for(let a=0;a<s.length;a+=1)if(t[s[a]]&&t[s[a]].includes(n[s[a]]))return!0;return!1},Ul=(n,t)=>Array.isArray(n)?n.reduce((s,a)=>(Qy(a,t)?s.priority.push(a):s.default.push(a),s),{priority:[],default:[]}):{default:n,priority:[]},Oh=(n,t)=>({...n,[t]:void 0}),Yy=["noscript","script","style"],Ql=(n,t=!0)=>t===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Rf=n=>Object.keys(n).reduce((t,s)=>{const a=typeof n[s]<"u"?`${s}="${n[s]}"`:`${s}`;return t?`${t} ${a}`:a},""),Xy=(n,t,s,a)=>{const u=Rf(s),l=Tf(t);return u?`<${n} ${Vt}="true" ${u}>${Ql(l,a)}</${n}>`:`<${n} ${Vt}="true">${Ql(l,a)}</${n}>`},Zy=(n,t,s=!0)=>t.reduce((a,u)=>{const l=u,d=Object.keys(l).filter(y=>!(y==="innerHTML"||y==="cssText")).reduce((y,k)=>{const v=typeof l[k]>"u"?k:`${k}="${Ql(l[k],s)}"`;return y?`${y} ${v}`:v},""),f=l.innerHTML||l.cssText||"",m=Yy.indexOf(n)===-1;return`${a}<${n} ${Vt}="true" ${d}${m?"/>":`>${f}</${n}>`}`},""),Of=(n,t={})=>Object.keys(n).reduce((s,a)=>{const u=ku[a];return s[u||a]=n[a],s},t),eg=(n,t,s)=>{const a={key:t,[Vt]:!0},u=Of(s,a);return[Lr.createElement("title",u,t)]},xa=(n,t)=>t.map((s,a)=>{const u={key:a,[Vt]:!0};return Object.keys(s).forEach(l=>{const f=ku[l]||l;if(f==="innerHTML"||f==="cssText"){const m=s.innerHTML||s.cssText;u.dangerouslySetInnerHTML={__html:m}}else u[f]=s[l]}),Lr.createElement(n,u)}),It=(n,t,s=!0)=>{switch(n){case"title":return{toComponent:()=>eg(n,t.title,t.titleAttributes),toString:()=>Xy(n,t.title,t.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Of(t),toString:()=>Rf(t)};default:return{toComponent:()=>xa(n,t),toString:()=>Zy(n,t,s)}}},tg=({metaTags:n,linkTags:t,scriptTags:s,encode:a})=>{const u=Ul(n,Ll.meta),l=Ul(t,Ll.link),d=Ul(s,Ll.script);return{priorityMethods:{toComponent:()=>[...xa("meta",u.priority),...xa("link",l.priority),...xa("script",d.priority)],toString:()=>`${It("meta",u.priority,a)} ${It("link",l.priority,a)} ${It("script",d.priority,a)}`},metaTags:u.default,linkTags:l.default,scriptTags:d.default}},rg=n=>{const{baseTag:t,bodyAttributes:s,encode:a=!0,htmlAttributes:u,noscriptTags:l,styleTags:d,title:f="",titleAttributes:m,prioritizeSeoTags:y}=n;let{linkTags:k,metaTags:v,scriptTags:w}=n,b={toComponent:()=>{},toString:()=>""};return y&&({priorityMethods:b,linkTags:k,metaTags:v,scriptTags:w}=tg(n)),{priority:b,base:It("base",t,a),bodyAttributes:It("bodyAttributes",s,a),htmlAttributes:It("htmlAttributes",u,a),link:It("link",k,a),meta:It("meta",v,a),noscript:It("noscript",l,a),script:It("script",w,a),style:It("style",d,a),title:It("title",{title:f,titleAttributes:m},a)}},Yl=rg,la=[],Pf=!!(typeof window<"u"&&window.document&&window.document.createElement),Xl=class{instances=[];canUseDOM=Pf;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?la:this.instances,add:n=>{(this.canUseDOM?la:this.instances).push(n)},remove:n=>{const t=(this.canUseDOM?la:this.instances).indexOf(n);(this.canUseDOM?la:this.instances).splice(t,1)}}};constructor(n,t){this.context=n,this.canUseDOM=t||!1,t||(n.helmet=Yl({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},ng={},Af=Lr.createContext(ng),If=class Lf extends x.Component{static canUseDOM=Pf;helmetData;constructor(t){super(t),this.helmetData=new Xl(this.props.context||{},Lf.canUseDOM)}render(){return Lr.createElement(Af.Provider,{value:this.helmetData.value},this.props.children)}},Tn=(n,t)=>{const s=document.head||document.querySelector("head"),a=s.querySelectorAll(`${n}[${Vt}]`),u=[].slice.call(a),l=[];let d;return t&&t.length&&t.forEach(f=>{const m=document.createElement(n);for(const y in f)if(Object.prototype.hasOwnProperty.call(f,y))if(y==="innerHTML")m.innerHTML=f.innerHTML;else if(y==="cssText")m.styleSheet?m.styleSheet.cssText=f.cssText:m.appendChild(document.createTextNode(f.cssText));else{const k=y,v=typeof f[k]>"u"?"":f[k];m.setAttribute(y,v)}m.setAttribute(Vt,"true"),u.some((y,k)=>(d=k,m.isEqualNode(y)))?u.splice(d,1):l.push(m)}),u.forEach(f=>f.parentNode?.removeChild(f)),l.forEach(f=>s.appendChild(f)),{oldTags:u,newTags:l}},Zl=(n,t)=>{const s=document.getElementsByTagName(n)[0];if(!s)return;const a=s.getAttribute(Vt),u=a?a.split(","):[],l=[...u],d=Object.keys(t);for(const f of d){const m=t[f]||"";s.getAttribute(f)!==m&&s.setAttribute(f,m),u.indexOf(f)===-1&&u.push(f);const y=l.indexOf(f);y!==-1&&l.splice(y,1)}for(let f=l.length-1;f>=0;f-=1)s.removeAttribute(l[f]);u.length===l.length?s.removeAttribute(Vt):s.getAttribute(Vt)!==d.join(",")&&s.setAttribute(Vt,d.join(","))},sg=(n,t)=>{typeof n<"u"&&document.title!==n&&(document.title=Tf(n)),Zl("title",t)},Ph=(n,t)=>{const{baseTag:s,bodyAttributes:a,htmlAttributes:u,linkTags:l,metaTags:d,noscriptTags:f,onChangeClientState:m,scriptTags:y,styleTags:k,title:v,titleAttributes:w}=n;Zl("body",a),Zl("html",u),sg(v,w);const b={baseTag:Tn("base",s),linkTags:Tn("link",l),metaTags:Tn("meta",d),noscriptTags:Tn("noscript",f),scriptTags:Tn("script",y),styleTags:Tn("style",k)},S={},E={};Object.keys(b).forEach(C=>{const{newTags:U,oldTags:I}=b[C];U.length&&(S[C]=U),I.length&&(E[C]=b[C].oldTags)}),t&&t(),m(n,S,E)},Is=null,ig=n=>{Is&&cancelAnimationFrame(Is),n.defer?Is=requestAnimationFrame(()=>{Ph(n,()=>{Is=null})}):(Ph(n),Is=null)},ag=ig,Ah=class extends x.Component{rendered=!1;shouldComponentUpdate(n){return!zy(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:t}=this.props.context;let s=null;const a=Jy(n.get().map(u=>{const l={...u.props};return delete l.context,l}));If.canUseDOM?ag(a):Yl&&(s=Yl(a)),t(s)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},xt=class extends x.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!Uy(Oh(this.props,"helmetData"),Oh(n,"helmetData"))}mapNestedChildrenToProps(n,t){if(!t)return null;switch(n.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,t,s,a){return{...t,[n.type]:[...t[n.type]||[],{...s,...this.mapNestedChildrenToProps(n,a)}]}}mapObjectTypeChildren(n,t,s,a){switch(n.type){case"title":return{...t,[n.type]:a,titleAttributes:{...s}};case"body":return{...t,bodyAttributes:{...s}};case"html":return{...t,htmlAttributes:{...s}};default:return{...t,[n.type]:{...s}}}}mapArrayTypeChildrenToProps(n,t){let s={...t};return Object.keys(n).forEach(a=>{s={...s,[a]:n[a]}}),s}warnOnInvalidChildren(n,t){return Ch(Rh.some(s=>n.type===s),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Rh.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),Ch(!t||typeof t=="string"||Array.isArray(t)&&!t.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,t){let s={};return Lr.Children.forEach(n,a=>{if(!a||!a.props)return;const{children:u,...l}=a.props,d=Object.keys(l).reduce((m,y)=>(m[qy[y]||y]=l[y],m),{});let{type:f}=a;switch(typeof f=="symbol"?f=f.toString():this.warnOnInvalidChildren(a,u),f){case"Symbol(react.fragment)":t=this.mapChildrenToProps(u,t);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(a,s,d,u);break;default:t=this.mapObjectTypeChildren(a,t,d,u);break}}),this.mapArrayTypeChildrenToProps(s,t)}render(){const{children:n,...t}=this.props;let s={...t},{helmetData:a}=t;if(n&&(s=this.mapChildrenToProps(n,s)),a&&!(a instanceof Xl)){const u=a;a=new Xl(u.context,!0),delete s.helmetData}return a?Lr.createElement(Ah,{...s,context:a.value}):Lr.createElement(Af.Consumer,null,u=>Lr.createElement(Ah,{...s,context:u}))}};function og(){return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"About - Recipes"})}),c.jsxs("div",{className:"flex flex-col gap-10",children:[c.jsxs("section",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"About"}),c.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"This site was created as a personal project, to help speed up the process of weekly meal planning. No subscriptions, no adverts, no SEO."})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100 md:text-2xl",children:"Stack"}),c.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"The frontend is Vite + React, hosted on GitHub Pages."}),c.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:["The backend is"," ",c.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noreferrer",className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:"Supabase"})," ","with a hosted PostgreSQL database."]}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"The application was written with the assistance of ChatGPT Codex."})]})]})]})}function Ta(n,t){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&t.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(n);u<a.length;u++)t.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(n,a[u])&&(s[a[u]]=n[a[u]]);return s}function lg(n,t,s,a){function u(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function f(k){try{y(a.next(k))}catch(v){d(v)}}function m(k){try{y(a.throw(k))}catch(v){d(v)}}function y(k){k.done?l(k.value):u(k.value).then(f,m)}y((a=a.apply(n,t||[])).next())})}const ug=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class vu extends Error{constructor(t,s="FunctionsError",a){super(t),this.name=s,this.context=a}}class cg extends vu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ih extends vu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Lh extends vu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var eu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(eu||(eu={}));class dg{constructor(t,{headers:s={},customFetch:a,region:u=eu.Any}={}){this.url=t,this.headers=s,this.region=u,this.fetch=ug(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return lg(this,arguments,void 0,function*(s,a={}){var u;let l,d;try{const{headers:f,method:m,body:y,signal:k,timeout:v}=a;let w={},{region:b}=a;b||(b=this.region);const S=new URL(`${this.url}/${s}`);b&&b!=="any"&&(w["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let E;y&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",E=y):typeof y=="string"?(w["Content-Type"]="text/plain",E=y):typeof FormData<"u"&&y instanceof FormData?E=y:(w["Content-Type"]="application/json",E=JSON.stringify(y)):y&&typeof y!="string"&&!(typeof Blob<"u"&&y instanceof Blob)&&!(y instanceof ArrayBuffer)&&!(typeof FormData<"u"&&y instanceof FormData)?E=JSON.stringify(y):E=y;let C=k;v&&(d=new AbortController,l=setTimeout(()=>d.abort(),v),k?(C=d.signal,k.addEventListener("abort",()=>d.abort())):C=d.signal);const U=yield this.fetch(S.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),f),body:E,signal:C}).catch(W=>{throw new cg(W)}),I=U.headers.get("x-relay-error");if(I&&I==="true")throw new Ih(U);if(!U.ok)throw new Lh(U);let T=((u=U.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),M;return T==="application/json"?M=yield U.json():T==="application/octet-stream"||T==="application/pdf"?M=yield U.blob():T==="text/event-stream"?M=U:T==="multipart/form-data"?M=yield U.formData():M=yield U.text(),{data:M,error:null,response:U}}catch(f){return{data:null,error:f,response:f instanceof Lh||f instanceof Ih?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var hg=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},fg=class{constructor(n){var t,s,a;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(a=n.urlLengthLimit)!==null&&a!==void 0?a:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,f=null,m=null,y=l.status,k=l.statusText;if(l.ok){var v,w;if(s.method!=="HEAD"){var b;const U=await l.text();U===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((b=s.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?f=U:f=JSON.parse(U))}const E=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),C=(w=l.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");E&&C&&C.length>1&&(m=parseInt(C[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,y=406,k="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var S;const E=await l.text();try{d=JSON.parse(E),Array.isArray(d)&&l.status===404&&(f=[],d=null,y=200,k="OK")}catch{l.status===404&&E===""?(y=204,k="No Content"):d={message:E}}if(d&&s.isMaybeSingle&&(!(d==null||(S=d.details)===null||S===void 0)&&S.includes("0 rows"))&&(d=null,y=200,k="OK"),d&&s.shouldThrowOnError)throw new hg(d)}return{error:d,data:f,count:m,status:y,statusText:k}});return this.shouldThrowOnError||(u=u.catch(l=>{var d;let f="",m="",y="";const k=l?.cause;if(k){var v,w,b,S;const U=(v=k?.message)!==null&&v!==void 0?v:"",I=(w=k?.code)!==null&&w!==void 0?w:"";f=`${(b=l?.name)!==null&&b!==void 0?b:"FetchError"}: ${l?.message}`,f+=`

Caused by: ${(S=k?.name)!==null&&S!==void 0?S:"Error"}: ${U}`,I&&(f+=` (${I})`),k?.stack&&(f+=`
${k.stack}`)}else{var E;f=(E=l?.stack)!==null&&E!==void 0?E:""}const C=this.url.toString().length;return l?.name==="AbortError"||l?.code==="ABORT_ERR"?(y="",m="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(k?.name==="HeadersOverflowError"||k?.code==="UND_ERR_HEADERS_OVERFLOW")&&(y="",m="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(m+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(d=l?.name)!==null&&d!==void 0?d:"FetchError"}: ${l?.message}`,details:f,hint:m,code:y},data:null,count:null,status:0,statusText:""}})),u.then(n,t)}returns(){return this}overrideTypes(){return this}},pg=class extends fg{select(n){let t=!1;const s=(n??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:a,referencedTable:u=a}={}){const l=u?`${u}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:a=s}={}){const u=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(l,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:a=!1,wal:u=!1,format:l="text"}={}){var d;const f=[n?"analyze":null,t?"verbose":null,s?"settings":null,a?"buffers":null,u?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${m}"; options=${f};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const $h=new RegExp("[,()]");var Un=class extends pg{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(a=>typeof a=="string"&&$h.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(a=>typeof a=="string"&&$h.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:a}={}){let u="";a==="plain"?u="pl":a==="phrase"?u="ph":a==="websearch"&&(u="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${u}fts${l}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},mg=class{constructor(n,{headers:t={},schema:s,fetch:a,urlLengthLimit:u=8e3}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=a,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:s=!1,count:a}=t??{},u=s?"HEAD":"GET";let l=!1;const d=(n??"*").split("").map(y=>/\s/.test(y)&&!l?"":(y==='"'&&(l=!l),y)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",d),a&&m.append("Prefer",`count=${a}`),new Un({method:u,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:t,defaultToNull:s=!0}={}){var a;const u="POST",{url:l,headers:d}=this.cloneRequestState();if(t&&d.append("Prefer",`count=${t}`),s||d.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(f.length>0){const m=[...new Set(f)].map(y=>`"${y}"`);l.searchParams.set("columns",m.join(","))}}return new Un({method:u,url:l,headers:d,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:a,defaultToNull:u=!0}={}){var l;const d="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&f.searchParams.set("on_conflict",t),a&&m.append("Prefer",`count=${a}`),u||m.append("Prefer","missing=default"),Array.isArray(n)){const y=n.reduce((k,v)=>k.concat(Object.keys(v)),[]);if(y.length>0){const k=[...new Set(y)].map(v=>`"${v}"`);f.searchParams.set("columns",k.join(","))}}return new Un({method:d,url:f,headers:m,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:t}={}){var s;const a="PATCH",{url:u,headers:l}=this.cloneRequestState();return t&&l.append("Prefer",`count=${t}`),new Un({method:a,url:u,headers:l,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var t;const s="DELETE",{url:a,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new Un({method:s,url:a,headers:u,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Bs(n){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(n)}function yg(n,t){if(Bs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(Bs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function gg(n){var t=yg(n,"string");return Bs(t)=="symbol"?t:t+""}function kg(n,t,s){return(t=gg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Uh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function ua(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Uh(Object(s),!0).forEach(function(a){kg(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Uh(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}var vg=class $f{constructor(t,{headers:s={},schema:a,fetch:u,timeout:l,urlLengthLimit:d=8e3}={}){this.url=t,this.headers=new Headers(s),this.schemaName=a,this.urlLengthLimit=d;const f=u??globalThis.fetch;l!==void 0&&l>0?this.fetch=(m,y)=>{const k=new AbortController,v=setTimeout(()=>k.abort(),l),w=y?.signal;if(w){if(w.aborted)return clearTimeout(v),f(m,y);const b=()=>{clearTimeout(v),k.abort()};return w.addEventListener("abort",b,{once:!0}),f(m,ua(ua({},y),{},{signal:k.signal})).finally(()=>{clearTimeout(v),w.removeEventListener("abort",b)})}return f(m,ua(ua({},y),{},{signal:k.signal})).finally(()=>clearTimeout(v))}:this.fetch=f}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new mg(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new $f(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,s={},{head:a=!1,get:u=!1,count:l}={}){var d;let f;const m=new URL(`${this.url}/rpc/${t}`);let y;const k=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(k)),v=a&&Object.values(s).some(k);v?(f="POST",y=s):a||u?(f=a?"HEAD":"GET",Object.entries(s).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{m.searchParams.append(b,S)})):(f="POST",y=s);const w=new Headers(this.headers);return v?w.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&w.set("Prefer",`count=${l}`),new Un({method:f,url:m,headers:w,schema:this.schemaName,body:y,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}};class xg{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const a=s.versions;if(a&&a.node){const u=a.node,l=parseInt(u.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const a=this.getWebSocketConstructor();return new a(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wg="2.94.1",bg=`realtime-js/${wg}`,_g="1.0.0",Uf="2.0.0",Dh=Uf,tu=1e4,Sg=1e3,jg=100;var Ar;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ar||(Ar={}));var Ze;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ze||(Ze={}));var Wt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Wt||(Wt={}));var ru;(function(n){n.websocket="websocket"})(ru||(ru={}));var Zr;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Zr||(Zr={}));class Eg{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let a=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,a;const u=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(t){var s,a;const u=(a=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&a!==void 0?a:{},d=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(t,s,a){var u,l;const d=t.topic,f=(u=t.ref)!==null&&u!==void 0?u:"",m=(l=t.join_ref)!==null&&l!==void 0?l:"",y=t.payload.event,k=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(k).length===0?"":JSON.stringify(k);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+d.length+y.length+v.length,b=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(b),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,m.length),S.setUint8(E++,f.length),S.setUint8(E++,d.length),S.setUint8(E++,y.length),S.setUint8(E++,v.length),S.setUint8(E++,s),Array.from(m,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(f,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(d,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(y,U=>S.setUint8(E++,U.charCodeAt(0))),Array.from(v,U=>S.setUint8(E++,U.charCodeAt(0)));var C=new Uint8Array(b.byteLength+a.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(a),b.byteLength),C.buffer}decode(t,s){if(this._isArrayBuffer(t)){let a=this._binaryDecode(t);return s(a)}if(typeof t=="string"){const a=JSON.parse(t),[u,l,d,f,m]=a;return s({join_ref:u,ref:l,topic:d,event:f,payload:m})}return s({})}_binaryDecode(t){const s=new DataView(t),a=s.getUint8(0),u=new TextDecoder;if(a===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,s,u)}_decodeUserBroadcast(t,s,a){const u=s.getUint8(1),l=s.getUint8(2),d=s.getUint8(3),f=s.getUint8(4);let m=this.HEADER_LENGTH+4;const y=a.decode(t.slice(m,m+u));m=m+u;const k=a.decode(t.slice(m,m+l));m=m+l;const v=a.decode(t.slice(m,m+d));m=m+d;const w=t.slice(m,t.byteLength),b=f===this.JSON_ENCODING?JSON.parse(a.decode(w)):w,S={type:this.BROADCAST_EVENT,event:k,payload:b};return d>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([a])=>s.includes(a)))}}class Df{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ie||(Ie={}));const Mh=(n,t,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((l,d)=>(l[d]=Ng(d,n,t,u),l),{}):{}},Ng=(n,t,s,a)=>{const u=t.find(f=>f.name===n),l=u?.type,d=s[n];return l&&!a.includes(l)?Mf(l,d):nu(d)},Mf=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return Og(t,s)}switch(n){case Ie.bool:return Cg(t);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return Tg(t);case Ie.json:case Ie.jsonb:return Rg(t);case Ie.timestamp:return Pg(t);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return nu(t);default:return nu(t)}},nu=n=>n,Cg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Tg=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Rg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},Og=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,a=n[s];if(n[0]==="{"&&a==="}"){let l;const d=n.slice(1,s);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(f=>Mf(t,f))}return n},Pg=n=>typeof n=="string"?n.replace(" ","T"):n,Ff=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Dl{constructor(t,s,a={},u=tu){this.channel=t,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var a;return this._hasReceived(t)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Fh;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Fh||(Fh={}));class Ds{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:l,onLeave:d,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ds.syncState(this.state,u,l,d),this.pendingDiffs.forEach(m=>{this.state=Ds.syncDiff(this.state,m,l,d)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},u=>{const{onJoin:l,onLeave:d,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Ds.syncDiff(this.state,u,l,d),f())}),this.onJoin((u,l,d)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:l,newPresences:d})}),this.onLeave((u,l,d)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,a,u){const l=this.cloneDeep(t),d=this.transformState(s),f={},m={};return this.map(l,(y,k)=>{d[y]||(m[y]=k)}),this.map(d,(y,k)=>{const v=l[y];if(v){const w=k.map(C=>C.presence_ref),b=v.map(C=>C.presence_ref),S=k.filter(C=>b.indexOf(C.presence_ref)<0),E=v.filter(C=>w.indexOf(C.presence_ref)<0);S.length>0&&(f[y]=S),E.length>0&&(m[y]=E)}else f[y]=k}),this.syncDiff(l,{joins:f,leaves:m},a,u)}static syncDiff(t,s,a,u){const{joins:l,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(l,(f,m)=>{var y;const k=(y=t[f])!==null&&y!==void 0?y:[];if(t[f]=this.cloneDeep(m),k.length>0){const v=t[f].map(b=>b.presence_ref),w=k.filter(b=>v.indexOf(b.presence_ref)<0);t[f].unshift(...w)}a(f,k,m)}),this.map(d,(f,m)=>{let y=t[f];if(!y)return;const k=m.map(v=>v.presence_ref);y=y.filter(v=>k.indexOf(v.presence_ref)<0),t[f]=y,u(f,y,m),y.length===0&&delete t[f]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(a=>s(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,a)=>{const u=t[a];return"metas"in u?s[a]=u.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):s[a]=u,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bh;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Bh||(Bh={}));var Ms;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ms||(Ms={}));var lr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(lr||(lr={}));class Fn{constructor(t,s={config:{}},a){var u,l;if(this.topic=t,this.params=s,this.socket=a,this.bindings={},this.state=Ze.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Dl(this,Wt.join,this.params,this.timeout),this.rejoinTimer=new Df(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ze.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ze.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Ze.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wt.reply,{},(d,f)=>{this._trigger(this._replyEventName(f),d)}),this.presence=new Ds(this),this.broadcastEndpointURL=Ff(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var a,u,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ze.closed){const{config:{broadcast:d,presence:f,private:m}}=this.params,y=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(b=>b.filter))!==null&&u!==void 0?u:[],k=!!this.bindings[Ms.PRESENCE]&&this.bindings[Ms.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},w={broadcast:d,presence:Object.assign(Object.assign({},f),{enabled:k}),postgres_changes:y,private:m};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(b=>t?.(lr.CHANNEL_ERROR,b)),this._onClose(()=>t?.(lr.CLOSED)),this.updateJoinPayload(Object.assign({config:w},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t?.(lr.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(S=E?.length)!==null&&S!==void 0?S:0,U=[];for(let I=0;I<C;I++){const T=E[I],{filter:{event:M,schema:W,table:V,filter:Q}}=T,O=b&&b[I];if(O&&O.event===M&&Fn.isFilterValueEqual(O.schema,W)&&Fn.isFilterValueEqual(O.table,V)&&Fn.isFilterValueEqual(O.filter,Q))U.push(Object.assign(Object.assign({},T),{id:O.id}));else{this.unsubscribe(),this.state=Ze.errored,t?.(lr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,t&&t(lr.SUBSCRIBED);return}}).receive("error",b=>{this.state=Ze.errored,t?.(lr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t?.(lr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,a){return this.state===Ze.joined&&t===Ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,a)}async httpSend(t,s,a={}){var u;if(s==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(u=a.timeout)!==null&&u!==void 0?u:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const y=await f.json();m=y.error||y.message||m}catch{}return Promise.reject(new Error(m))}async send(t,s={}){var a,u;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=t,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=y.body)===null||u===void 0?void 0:u.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,f,m;const y=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((m=(f=(d=this.params)===null||d===void 0?void 0:d.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),y.receive("ok",()=>l("ok")),y.receive("error",()=>l("error")),y.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ze.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new Dl(this,Wt.leave,{},t),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ze.closed,this.bindings={}}async _fetchWithTimeout(t,s,a){const u=new AbortController,l=setTimeout(()=>u.abort(),a),d=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(l),d}_push(t,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Dl(this,t,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>jg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,a){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,a){var u,l;const d=t.toLocaleLowerCase(),{close:f,error:m,leave:y,join:k}=Wt;if(a&&[f,m,y,k].indexOf(d)>=0&&a!==this._joinRef())return;let w=this._onMessage(d,s,a);if(s&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(b=>{var S,E,C;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(E=b.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===d}).map(b=>b.callback(w,a)):(l=this.bindings[d])===null||l===void 0||l.filter(b=>{var S,E,C,U,I,T;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in b){const M=b.id,W=(S=b.filter)===null||S===void 0?void 0:S.event;return M&&((E=s.ids)===null||E===void 0?void 0:E.includes(M))&&(W==="*"||W?.toLocaleLowerCase()===((C=s.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const M=(I=(U=b?.filter)===null||U===void 0?void 0:U.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return M==="*"||M===((T=s?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===d}).map(b=>{if(typeof w=="object"&&"ids"in w){const S=w.data,{schema:E,table:C,commit_timestamp:U,type:I,errors:T}=S;w=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:U,eventType:I,new:{},old:{},errors:T}),this._getPayloadRecords(S))}b.callback(w,a)})}_isClosed(){return this.state===Ze.closed}_isJoined(){return this.state===Ze.joined}_isJoining(){return this.state===Ze.joining}_isLeaving(){return this.state===Ze.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,a){const u=t.toLocaleLowerCase(),l={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(l):this.bindings[u]=[l],this}_off(t,s){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var l;return!(((l=u.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===a&&Fn.isEqual(u.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const a in t)if(t[a]!==s[a])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wt.close,{},t)}_onError(t){this._on(Wt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ze.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Mh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Mh(t.columns,t.old_record)),s}}const Ml=()=>{},ca={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ag=[1e3,2e3,5e3,1e4],Ig=1e4,Lg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $g{constructor(t,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tu,this.transport=null,this.heartbeatIntervalMs=ca.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ml,this.ref=0,this.reconnectTimer=null,this.vsn=Dh,this.logger=Ml,this.conn=null,this.sendBuffer=[],this.serializer=new Eg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...l)=>u(...l):(...l)=>fetch(...l),!(!((a=s?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${ru.websocket}`,this.httpEndpoint=Ff(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xg.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,a){this.logger(t,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Ar.connecting:return Zr.Connecting;case Ar.open:return Zr.Open;case Ar.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const a=`realtime:${t}`,u=this.getChannels().find(l=>l.topic===a);if(u)return u;{const l=new Fn(`realtime:${t}`,s,this);return this.channels.push(l),l}}push(t){const{topic:s,event:a,payload:u,ref:l}=t,d=()=>{this.encode(t,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${s} ${a} (${l})`,u),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Sg,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},ca.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const y=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",y)}catch(k){this.log("error","error in heartbeat callback",k)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:u,payload:l,ref:d}=s,f=d?`(${d})`:"",m=l.status||"";this.log("receive",`${m} ${a} ${u} ${f}`.trim(),l),this.channels.filter(y=>y._isMember(a)).forEach(y=>y._trigger(u,l,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ar.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ar.open||this.conn.readyState===Ar.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const a=t.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${t}${a}${u}`}_workerObjectUrl(t){let s;if(t)s=t;else{const a=new Blob([Lg],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,a=!1;if(t)s=t,a=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),s=this.accessTokenValue}else s=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(u=>{const l={access_token:s,version:bg};s&&u.updateJoinPayload(l),u.joinedOnce&&u._isJoined()&&u._push(Wt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${t} callback`,u)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Df(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ca.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,a,u,l,d,f,m,y,k,v,w,b;switch(this.transport=(s=t?.transport)!==null&&s!==void 0?s:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:tu,this.heartbeatIntervalMs=(u=t?.heartbeatIntervalMs)!==null&&u!==void 0?u:ca.HEARTBEAT_INTERVAL,this.worker=(l=t?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=t?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(f=t?.heartbeatCallback)!==null&&f!==void 0?f:Ml,this.vsn=(m=t?.vsn)!==null&&m!==void 0?m:Dh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=t?.reconnectAfterMs)!==null&&y!==void 0?y:(S=>Ag[S-1]||Ig),this.vsn){case _g:this.encode=(k=t?.encode)!==null&&k!==void 0?k:((S,E)=>E(JSON.stringify(S))),this.decode=(v=t?.decode)!==null&&v!==void 0?v:((S,E)=>E(JSON.parse(S)));break;case Uf:this.encode=(w=t?.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(b=t?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var zs=class extends Error{constructor(n,t){super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ug(n,t,s){const a=new URL(t,n);if(s)for(const[u,l]of Object.entries(s))l!==void 0&&a.searchParams.set(u,l);return a.toString()}async function Dg(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Mg(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:a,query:u,body:l,headers:d}){const f=Ug(n.baseUrl,a,u),m=await Dg(n.auth),y=await t(f,{method:s,headers:{...l?{"Content-Type":"application/json"}:{},...m,...d},body:l?JSON.stringify(l):void 0}),k=await y.text(),v=(y.headers.get("content-type")||"").includes("application/json"),w=v&&k?JSON.parse(k):k;if(!y.ok){const b=v?w:void 0,S=b?.error;throw new zs(S?.message??`Request failed with status ${y.status}`,{status:y.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:y.status,headers:y.headers,data:w}}}}function da(n){return n.join("")}var Fg=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:da(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${da(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${da(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${da(n.namespace)}`}),!0}catch(t){if(t instanceof zs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof zs&&s.status===409)return;throw s}}};function Rn(n){return n.join("")}var Bg=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rn(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof zs&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof zs&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},zg=class{constructor(n){let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Mg({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new Fg(this.client,t),this.tableOps=new Bg(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},Ra=class extends Error{constructor(n,t="storage",s,a){super(n),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=a}};function Oa(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ha=class extends Ra{constructor(n,t,s,a="storage"){super(n,a,t,s),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bf=class extends Ra{constructor(n,t,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const qg=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Hg=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},su=n=>{if(Array.isArray(n))return n.map(s=>su(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[u]=su(a)}),t},Wg=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function qs(n){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(n)}function Vg(n,t){if(qs(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(qs(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Kg(n){var t=Vg(n,"string");return qs(t)=="symbol"?t:t+""}function Gg(n,t,s){return(t=Kg(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function zh(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function ve(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?zh(Object(s),!0).forEach(function(a){Gg(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):zh(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const qh=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},Jg=async(n,t,s,a)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!s?.noResolveJson){const u=n,l=u.status||500;if(typeof u.json=="function")u.json().then(d=>{const f=d?.statusCode||d?.code||l+"";t(new ha(qh(d),l,f,a))}).catch(()=>{if(a==="vectors"){const d=l+"";t(new ha(u.statusText||`HTTP ${l} error`,l,d,a))}else{const d=l+"";t(new ha(u.statusText||`HTTP ${l} error`,l,d,a))}});else{const d=l+"";t(new ha(u.statusText||`HTTP ${l} error`,l,d,a))}}else t(new Bf(qh(n),n,a))},Qg=(n,t,s,a)=>{const u={method:n,headers:t?.headers||{}};return n==="GET"||n==="HEAD"||!a?ve(ve({},u),s):(Hg(a)?(u.headers=ve({"Content-Type":"application/json"},t?.headers),u.body=JSON.stringify(a)):u.body=a,t?.duplex&&(u.duplex=t.duplex),ve(ve({},u),s))};async function Ls(n,t,s,a,u,l,d){return new Promise((f,m)=>{n(s,Qg(t,a,u,l)).then(y=>{if(!y.ok)throw y;if(a?.noResolveJson)return y;if(d==="vectors"){const k=y.headers.get("content-type");if(y.headers.get("content-length")==="0"||y.status===204)return{};if(!k||!k.includes("application/json"))return{}}return y.json()}).then(y=>f(y)).catch(y=>Jg(y,m,a,d))})}function zf(n="storage"){return{get:async(t,s,a,u)=>Ls(t,"GET",s,a,u,void 0,n),post:async(t,s,a,u,l)=>Ls(t,"POST",s,u,l,a,n),put:async(t,s,a,u,l)=>Ls(t,"PUT",s,u,l,a,n),head:async(t,s,a,u)=>Ls(t,"HEAD",s,ve(ve({},a),{},{noResolveJson:!0}),u,void 0,n),remove:async(t,s,a,u,l)=>Ls(t,"DELETE",s,u,l,a,n)}}const Yg=zf("storage"),{get:Hs,post:Ht,put:iu,head:Xg,remove:xu}=Yg,Et=zf("vectors");var Vn=class{constructor(n,t={},s,a="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.fetch=qg(s),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var t=this;try{return{data:await n(),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Oa(s))return{data:null,error:s};throw s}}},Zg=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Oa(t))return{data:null,error:t};throw t}}};let qf;qf=Symbol.toStringTag;var ek=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[qf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zg(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(Oa(t))return{data:null,error:t};throw t}}};const tk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var rk=class extends Vn{constructor(n,t={},s,a){super(n,t,a,"storage"),this.bucketId=s}async uploadOrUpdate(n,t,s,a){var u=this;return u.handleOperation(async()=>{let l;const d=ve(ve({},Hh),a);let f=ve(ve({},u.headers),n==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),m&&l.append("metadata",u.encodeMetadata(m)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),m&&!l.has("metadata")&&l.append("metadata",u.encodeMetadata(m))):(l=s,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType,m&&(f["x-metadata"]=u.toBase64(u.encodeMetadata(m))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),a?.headers&&(f=ve(ve({},f),a.headers));const y=u._removeEmptyFolders(t),k=u._getFinalPath(y),v=await(n=="PUT"?iu:Ht)(u.fetch,`${u.url}/object/${k}`,l,ve({headers:f},d?.duplex?{duplex:d.duplex}:{}));return{path:y,id:v.Id,fullPath:v.Key}})}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,a){var u=this;const l=u._removeEmptyFolders(n),d=u._getFinalPath(l),f=new URL(u.url+`/object/upload/sign/${d}`);return f.searchParams.set("token",t),u.handleOperation(async()=>{let m;const y=ve({upsert:Hh.upsert},a),k=ve(ve({},u.headers),{"x-upsert":String(y.upsert)});return typeof Blob<"u"&&s instanceof Blob?(m=new FormData,m.append("cacheControl",y.cacheControl),m.append("",s)):typeof FormData<"u"&&s instanceof FormData?(m=s,m.append("cacheControl",y.cacheControl)):(m=s,k["cache-control"]=`max-age=${y.cacheControl}`,k["content-type"]=y.contentType),{path:l,fullPath:(await iu(u.fetch,f.toString(),m,{headers:k})).Key}})}async createSignedUploadUrl(n,t){var s=this;return s.handleOperation(async()=>{let a=s._getFinalPath(n);const u=ve({},s.headers);t?.upsert&&(u["x-upsert"]="true");const l=await Ht(s.fetch,`${s.url}/object/upload/sign/${a}`,{},{headers:u}),d=new URL(s.url+l.url),f=d.searchParams.get("token");if(!f)throw new Ra("No token returned by API");return{signedUrl:d.toString(),path:n,token:f}})}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var a=this;return a.handleOperation(async()=>await Ht(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:a.headers}))}async copy(n,t,s){var a=this;return a.handleOperation(async()=>({path:(await Ht(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(n,t,s){var a=this;return a.handleOperation(async()=>{let u=a._getFinalPath(n),l=await Ht(a.fetch,`${a.url}/object/sign/${u}`,ve({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:a.headers});const d=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${a.url}${l.signedURL}${d}`)}})}async createSignedUrls(n,t,s){var a=this;return a.handleOperation(async()=>{const u=await Ht(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:t,paths:n},{headers:a.headers}),l=s?.download?`&download=${s.download===!0?"":s.download}`:"";return u.map(d=>ve(ve({},d),{},{signedUrl:d.signedURL?encodeURI(`${a.url}${d.signedURL}${l}`):null}))})}download(n,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(t?.transform||{}),u=a?`?${a}`:"",l=this._getFinalPath(n),d=()=>Hs(this.fetch,`${this.url}/${s}/${l}${u}`,{headers:this.headers,noResolveJson:!0});return new ek(d,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);return t.handleOperation(async()=>su(await Hs(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})))}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await Xg(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(a){if(t.shouldThrowOnError)throw a;if(Oa(a)&&a instanceof Bf){const u=a.originalError;if([400,404].includes(u?.status))return{data:!1,error:a}}throw a}}getPublicUrl(n,t){const s=this._getFinalPath(n),a=[],u=t?.download?`download=${t.download===!0?"":t.download}`:"";u!==""&&a.push(u);const l=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${f}`)}}}async remove(n){var t=this;return t.handleOperation(async()=>await xu(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}))}async list(n,t,s){var a=this;return a.handleOperation(async()=>{const u=ve(ve(ve({},tk),t),{},{prefix:n||""});return await Ht(a.fetch,`${a.url}/object/list/${a.bucketId}`,u,{headers:a.headers},s)})}async listV2(n,t){var s=this;return s.handleOperation(async()=>{const a=ve({},n);return await Ht(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,a,{headers:s.headers},t)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const nk="2.94.1",Ys={"X-Client-Info":`storage-js/${nk}`};var sk=class extends Vn{constructor(n,t={},s,a){const u=new URL(n);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const l=u.href.replace(/\/$/,""),d=ve(ve({},Ys),t);super(l,d,s,"storage")}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=t.listBucketOptionsToQueryString(n);return await Hs(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers})})}async getBucket(n){var t=this;return t.handleOperation(async()=>await Hs(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}))}async createBucket(n,t={public:!1}){var s=this;return s.handleOperation(async()=>await Ht(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,t){var s=this;return s.handleOperation(async()=>await iu(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var t=this;return t.handleOperation(async()=>await Ht(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await xu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},ik=class extends Vn{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=ve(ve({},Ys),t);super(a,u,s,"storage")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Ht(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}))}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=new URLSearchParams;n?.limit!==void 0&&s.set("limit",n.limit.toString()),n?.offset!==void 0&&s.set("offset",n.offset.toString()),n?.sortColumn&&s.set("sortColumn",n.sortColumn),n?.sortOrder&&s.set("sortOrder",n.sortOrder),n?.search&&s.set("search",n.search);const a=s.toString(),u=a?`${t.url}/bucket?${a}`:`${t.url}/bucket`;return await Hs(t.fetch,u,{headers:t.headers})})}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await xu(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}from(n){var t=this;if(!Wg(n))throw new Ra("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new zg({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(s,{get(u,l){const d=u[l];return typeof d!="function"?d:async(...f)=>{try{return{data:await d.apply(u,f),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},ak=class extends Vn{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=ve(ve({},Ys),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async createIndex(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{})}async getIndex(n,t){var s=this;return s.handleOperation(async()=>await Et.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}))}async listIndexes(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}))}async deleteIndex(n,t){var s=this;return s.handleOperation(async()=>await Et.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{})}},ok=class extends Vn{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=ve(ve({},Ys),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async putVectors(n){var t=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{})}async getVectors(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}))}async listVectors(n){var t=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}))}async queryVectors(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}))}async deleteVectors(n){var t=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{})}},lk=class extends Vn{constructor(n,t={},s){const a=n.replace(/\/$/,""),u=ve(ve({},Ys),{},{"Content-Type":"application/json"},t);super(a,u,s,"vectors")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}async getBucket(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}))}async listBuckets(n={}){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Et.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}},uk=class extends lk{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new ck(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},ck=class extends ak{constructor(n,t,s,a){super(n,t,a),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new dk(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},dk=class extends ok{constructor(n,t,s,a,u){super(n,t,u),this.vectorBucketName=s,this.indexName=a}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,ve(ve({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},hk=class extends sk{constructor(n,t={},s,a){super(n,t,s,a)}from(n){return new rk(this.url,this.headers,n,this.fetch)}get vectors(){return new uk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ik(this.url+"/iceberg",this.headers,this.fetch)}};const Hf="2.94.1",Dn=30*1e3,au=3,Fl=au*Dn,fk="http://localhost:9999",pk="supabase.auth.token",mk={"X-Client-Info":`gotrue-js/${Hf}`},ou="X-Supabase-Api-Version",Wf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gk=600*1e3;class Ws extends Error{constructor(t,s,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function de(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class kk extends Ws{constructor(t,s,a){super(t,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function vk(n){return de(n)&&n.name==="AuthApiError"}class en extends Ws{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class hr extends Ws{constructor(t,s,a,u){super(t,a,u),this.name=s,this.status=a}}class jt extends hr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Bl(n){return de(n)&&n.name==="AuthSessionMissingError"}class On extends hr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fa extends hr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class pa extends hr{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xk(n){return de(n)&&n.name==="AuthImplicitGrantRedirectError"}class Wh extends hr{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wk extends hr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class lu extends hr{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function zl(n){return de(n)&&n.name==="AuthRetryableFetchError"}class Vh extends hr{constructor(t,s,a){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class uu extends hr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ba="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kh=` 	
\r=`.split(""),bk=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<Kh.length;t+=1)n[Kh[t].charCodeAt(0)]=-2;for(let t=0;t<ba.length;t+=1)n[ba[t].charCodeAt(0)]=t;return n})();function Gh(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(ba[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;s(ba[a]),t.queuedBits-=6}}function Vf(n,t,s){const a=bk[n];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Jh(n){const t=[],s=d=>{t.push(String.fromCodePoint(d))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},l=d=>{jk(d,a,s)};for(let d=0;d<n.length;d+=1)Vf(n.charCodeAt(d),u,l);return t.join("")}function _k(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Sk(n,t){for(let s=0;s<n.length;s+=1){let a=n.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(n.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}_k(a,t)}}function jk(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let a=1;a<6;a+=1)if((n>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function qn(n){const t=[],s={queue:0,queuedBits:0},a=u=>{t.push(u)};for(let u=0;u<n.length;u+=1)Vf(n.charCodeAt(u),s,a);return new Uint8Array(t)}function Ek(n){const t=[];return Sk(n,s=>t.push(s)),new Uint8Array(t)}function tn(n){const t=[],s={queue:0,queuedBits:0},a=u=>{t.push(u)};return n.forEach(u=>Gh(u,s,a)),Gh(null,s,a),t.join("")}function Nk(n){return Math.round(Date.now()/1e3)+n}function Ck(){return Symbol("auth-callback")}const at=()=>typeof window<"u"&&typeof document<"u",Qr={tested:!1,writable:!1},Kf=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Qr.tested)return Qr.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Qr.tested=!0,Qr.writable=!0}catch{Qr.tested=!0,Qr.writable=!1}return Qr.writable};function Tk(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,l)=>{t[l]=u})}catch{}return s.searchParams.forEach((a,u)=>{t[u]=a}),t}const Gf=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Rk=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Mn=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},Yr=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},it=async(n,t)=>{await n.removeItem(t)};class Pa{constructor(){this.promise=new Pa.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Pa.promiseConstructor=Promise;function ma(n){const t=n.split(".");if(t.length!==3)throw new uu("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!yk.test(t[a]))throw new uu("JWT not in base64url format");return{header:JSON.parse(Jh(t[0])),payload:JSON.parse(Jh(t[1])),signature:qn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Ok(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function Pk(n,t){return new Promise((a,u)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await n(l);if(!t(l,null,d)){a(d);return}}catch(d){if(!t(l,d)){u(d);return}}})()})}function Ak(n){return("0"+n.toString(16)).substr(-2)}function Ik(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let l=0;l<56;l++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(t),Array.from(t,Ak).join("")}async function Lk(n){const s=new TextEncoder().encode(n),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(l=>String.fromCharCode(l)).join("")}async function $k(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await Lk(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pn(n,t,s=!1){const a=Ik();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await Mn(n,`${t}-code-verifier`,u);const l=await $k(a);return[l,a===l?"plain":"s256"]}const Uk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Dk(n){const t=n.headers.get(ou);if(!t||!t.match(Uk))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Mk(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function Fk(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function An(n){if(!Bk.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ql(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function zk(n,t){return new Proxy(n,{get:(s,a,u)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const l=a.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,a,u)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,a,u)}})}function Qh(n){return JSON.parse(JSON.stringify(n))}const Xr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),qk=[502,503,504];async function Yh(n){var t;if(!Rk(n))throw new lu(Xr(n),0);if(qk.includes(n.status))throw new lu(Xr(n),n.status);let s;try{s=await n.json()}catch(l){throw new en(Xr(l),l)}let a;const u=Dk(n);if(u&&u.getTime()>=Wf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new Vh(Xr(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new jt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new Vh(Xr(s),n.status,s.weak_password.reasons);throw new kk(Xr(s),n.status||500,a)}const Hk=(n,t,s,a)=>{const u={method:n,headers:t?.headers||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function ke(n,t,s,a){var u;const l=Object.assign({},a?.headers);l[ou]||(l[ou]=Wf["2024-01-01"].name),a?.jwt&&(l.Authorization=`Bearer ${a.jwt}`);const d=(u=a?.query)!==null&&u!==void 0?u:{};a?.redirectTo&&(d.redirect_to=a.redirectTo);const f=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await Wk(n,t,s+f,{headers:l,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(m):{data:Object.assign({},m),error:null}}async function Wk(n,t,s,a,u,l){const d=Hk(t,a,u,l);let f;try{f=await n(s,Object.assign({},d))}catch(m){throw console.error(m),new lu(Xr(m),0)}if(f.ok||await Yh(f),a?.noResolveJson)return f;try{return await f.json()}catch(m){await Yh(m)}}function qt(n){var t;let s=null;Gk(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=Nk(n.expires_in)));const a=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:a},error:null}}function Xh(n){const t=qt(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Ir(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Vk(n){return{data:n,error:null}}function Kk(n){const{action_link:t,email_otp:s,hashed_token:a,redirect_to:u,verification_type:l}=n,d=Ta(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:t,email_otp:s,hashed_token:a,redirect_to:u,verification_type:l},m=Object.assign({},d);return{data:{properties:f,user:m},error:null}}function Zh(n){return n}function Gk(n){return n.access_token&&n.refresh_token&&n.expires_in}const Hl=["global","local","others"];class Jk{constructor({url:t="",headers:s={},fetch:a}){this.url=t,this.headers=s,this.fetch=Gf(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=Hl[0]){if(Hl.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hl.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(de(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,s={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ir})}catch(a){if(de(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:s}=t,a=Ta(t,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a?.newEmail,delete u.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Kk,redirectTo:s?.redirectTo})}catch(s){if(de(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ir})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,a,u,l,d,f,m;try{const y={nextPage:null,lastPage:0,total:0},k=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&l!==void 0?l:""},xform:Zh});if(k.error)throw k.error;const v=await k.json(),w=(d=k.headers.get("x-total-count"))!==null&&d!==void 0?d:0,b=(m=(f=k.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);y[`${C}Page`]=E}),y.total=parseInt(w)),{data:Object.assign(Object.assign({},v),y),error:null}}catch(y){if(de(y))return{data:{users:[]},error:y};throw y}}async getUserById(t){An(t);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ir})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){An(t);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ir})}catch(a){if(de(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,s=!1){An(t);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ir})}catch(a){if(de(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){An(t.userId);try{const{data:s,error:a}=await ke(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteFactor(t){An(t.userId),An(t.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,a,u,l,d,f,m;try{const y={nextPage:null,lastPage:0,total:0},k=await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=t?.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(l=(u=t?.perPage)===null||u===void 0?void 0:u.toString())!==null&&l!==void 0?l:""},xform:Zh});if(k.error)throw k.error;const v=await k.json(),w=(d=k.headers.get("x-total-count"))!==null&&d!==void 0?d:0,b=(m=(f=k.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return b.length>0&&(b.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);y[`${C}Page`]=E}),y.total=parseInt(w)),{data:Object.assign(Object.assign({},v),y),error:null}}catch(y){if(de(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(de(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}}function ef(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const In={debug:!!(globalThis&&Kf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Qk extends Jf{}async function Yk(n,t,s){In.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),In.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){In.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await s()}finally{In.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(t===0)throw In.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Qk(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(In.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Xk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qf(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Zk(n){return parseInt(n,16)}function ev(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function tv(n){var t;const{chainId:s,domain:a,expirationTime:u,issuedAt:l=new Date,nonce:d,notBefore:f,requestId:m,resources:y,scheme:k,uri:v,version:w}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const b=Qf(n.address),S=k?`${k}://${a}`:a,E=n.statement?`${n.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${b}

${E}`;let U=`URI: ${v}
Version: ${w}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(u&&(U+=`
Expiration Time: ${u.toISOString()}`),f&&(U+=`
Not Before: ${f.toISOString()}`),m&&(U+=`
Request ID: ${m}`),y){let I=`
Resources:`;for(const T of y){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);I+=`
- ${T}`}U+=I}return`${C}
${U}`}class Qe extends Error{constructor({message:t,code:s,cause:a,name:u}){var l;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(l=u??(a instanceof Error?a.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=s}}class _a extends Qe{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function rv({error:n,options:t}){var s,a,u;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=l.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const d=window.location.hostname;if(Yf(d)){if(l.rp.id!==d)return new Qe({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function nv({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(Yf(a)){if(s.rpId!==a)return new Qe({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class sv{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const iv=new sv;function av(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:a}=n,u=Ta(n,["challenge","user","excludeCredentials"]),l=qn(t).buffer,d=Object.assign(Object.assign({},s),{id:qn(s.id).buffer}),f=Object.assign(Object.assign({},u),{challenge:l,user:d});if(a&&a.length>0){f.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const y=a[m];f.excludeCredentials[m]=Object.assign(Object.assign({},y),{id:qn(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return f}function ov(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,a=Ta(n,["challenge","allowCredentials"]),u=qn(t).buffer,l=Object.assign(Object.assign({},a),{challenge:u});if(s&&s.length>0){l.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];l.allowCredentials[d]=Object.assign(Object.assign({},f),{id:qn(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function lv(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:tn(new Uint8Array(n.response.attestationObject)),clientDataJSON:tn(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function uv(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,a=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:tn(new Uint8Array(u.authenticatorData)),clientDataJSON:tn(new Uint8Array(u.clientDataJSON)),signature:tn(new Uint8Array(u.signature)),userHandle:u.userHandle?tn(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Yf(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function tf(){var n,t;return!!(at()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function cv(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _a("Browser returned unexpected credential type",t)}:{data:null,error:new _a("Empty credential response",t)}}catch(t){return{data:null,error:rv({error:t,options:n})}}}async function dv(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new _a("Browser returned unexpected credential type",t)}:{data:null,error:new _a("Empty credential response",t)}}catch(t){return{data:null,error:nv({error:t,options:n})}}}const hv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sa(...n){const t=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),s=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),a={};for(const u of n)if(u)for(const l in u){const d=u[l];if(d!==void 0)if(Array.isArray(d))a[l]=d;else if(s(d))a[l]=d;else if(t(d)){const f=a[l];t(f)?a[l]=Sa(f,d):a[l]=Sa(d)}else a[l]=d}return a}function pv(n,t){return Sa(hv,n,t||{})}function mv(n,t){return Sa(fv,n,t||{})}class yv{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:a,signal:u},l){var d;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!f)return{data:null,error:m};const y=u??iv.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:k}=f.webauthn.credential_options.publicKey;if(!k.name){const v=a;if(v)k.name=`${k.id}:${v}`;else{const b=(await this.client.getUser()).data.user,S=((d=b?.user_metadata)===null||d===void 0?void 0:d.name)||b?.email||b?.id||"User";k.name=`${k.id}:${S}`}}k.displayName||(k.displayName=k.name)}switch(f.webauthn.type){case"create":{const k=pv(f.webauthn.credential_options.publicKey,l?.create),{data:v,error:w}=await cv({publicKey:k,signal:y});return v?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const k=mv(f.webauthn.credential_options.publicKey,l?.request),{data:v,error:w}=await dv(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:k,signal:y}));return v?{data:{factorId:t,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(f){return de(f)?{data:null,error:f}:{data:null,error:new en("Unexpected error in challenge",f)}}}async _verify({challengeId:t,factorId:s,webauthn:a}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},l){if(!s)return{data:null,error:new Ws("rpId is required for WebAuthn authentication")};try{if(!tf())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:a},signal:u},{request:l});if(!d)return{data:null,error:f};const{webauthn:m}=d;return this._verify({factorId:t,challengeId:d.challengeId,webauthn:{type:m.type,rpId:s,rpOrigins:a,credential_response:m.credential_response}})}catch(d){return de(d)?{data:null,error:d}:{data:null,error:new en("Unexpected error in authenticate",d)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},l){if(!s)return{data:null,error:new Ws("rpId is required for WebAuthn registration")};try{if(!tf())return{data:null,error:new en("Browser does not support WebAuthn",null)};const{data:d,error:f}=await this._enroll({friendlyName:t});if(!d)return await this.client.mfa.listFactors().then(k=>{var v;return(v=k.data)===null||v===void 0?void 0:v.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===t&&w.status!=="unverified")}).then(k=>k?this.client.mfa.unenroll({factorId:k?.id}):void 0),{data:null,error:f};const{data:m,error:y}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:a},signal:u},{create:l});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:s,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:y}}catch(d){return de(d)?{data:null,error:d}:{data:null,error:new en("Unexpected error in register",d)}}}}Xk();const gv={url:fk,storageKey:pk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function rf(n,t,s){return await s()}const Ln={};class Vs{get jwks(){var t,s;return(s=(t=Ln[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Ln[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ln[this.storageKey]=Object.assign(Object.assign({},Ln[this.storageKey]),{cachedAt:t})}constructor(t){var s,a,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},gv),t);if(this.storageKey=l.storageKey,this.instanceID=(s=Vs.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Vs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&at()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Jk({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Gf(l.fetch),this.lock=l.lock||rf,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&at()&&(!((a=globalThis?.navigator)===null||a===void 0)&&a.locks)?this.lock=Yk:this.lock=rf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new yv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Kf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ef(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=ef(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Hf}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},a="none";if(at()&&(s=Tk(window.location.href),this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce")),at()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:l}=await this._getSessionFromURL(s,a);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),xk(l)){const m=(t=l.details)===null||t===void 0?void 0:t.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:d,redirectType:f}=u;return this._debug("#_initialize()","detected session in URL",d,"redirect type",f),await this._saveSession(d),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return de(s)?this._returnResult({error:s}):this._returnResult({error:new en("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,a,u;try{const l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=t?.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=t?.options)===null||u===void 0?void 0:u.captchaToken}},xform:qt}),{data:d,error:f}=l;if(f||!d)return this._returnResult({data:{user:null,session:null},error:f});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var s,a,u;try{let l;if("email"in t){const{email:k,password:v,options:w}=t;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Pn(this.storage,this.storageKey)),l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:k,password:v,data:(s=w?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:b,code_challenge_method:S},xform:qt})}else if("phone"in t){const{phone:k,password:v,options:w}=t;l=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:k,password:v,data:(a=w?.data)!==null&&a!==void 0?a:{},channel:(u=w?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:qt})}else throw new fa("You must provide either an email or phone number and a password");const{data:d,error:f}=l;if(f||!d)return await it(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=d.session,y=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(l){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let s;if("email"in t){const{email:l,password:d,options:f}=t;s=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Xh})}else if("phone"in t){const{phone:l,password:d,options:f}=t;s=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Xh})}else throw new fa("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!a||!a.session||!a.user){const l=new On;return this._returnResult({data:{user:null,session:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,a,u,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,a,u,l,d,f,m,y,k,v,w;let b,S;if("message"in t)b=t.message,S=t.signature;else{const{chain:E,wallet:C,statement:U,options:I}=t;let T;if(at())if(typeof C=="object")T=C;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")T=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=C}const M=new URL((s=I?.url)!==null&&s!==void 0?s:window.location.href),W=await T.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=Qf(W[0]);let Q=(a=I?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!Q){const L=await T.request({method:"eth_chainId"});Q=Zk(L)}const O={domain:M.host,address:V,statement:U,uri:M.href,version:"1",chainId:Q,nonce:(u=I?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(d=(l=I?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(f=I?.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=I?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(y=I?.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(k=I?.signInWithEthereum)===null||k===void 0?void 0:k.resources};b=tv(O),S=await T.request({method:"personal_sign",params:[ev(b),V]})}try{const{data:E,error:C}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=t.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:qt});if(C)throw C;if(!E||!E.session||!E.user){const U=new On;return this._returnResult({data:{user:null,session:null},error:U})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(de(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(t){var s,a,u,l,d,f,m,y,k,v,w,b;let S,E;if("message"in t)S=t.message,E=t.signature;else{const{chain:C,wallet:U,statement:I,options:T}=t;let M;if(at())if(typeof U=="object")M=U;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))M=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=U}const W=new URL((s=T?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in M&&M.signIn){const V=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),I?{statement:I}:null));let Q;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")Q=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)Q=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)S=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),E=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${W.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(u=(a=T?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((l=T?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((d=T?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((f=T?.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((m=T?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((y=T?.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((v=(k=T?.signInWithSolana)===null||k===void 0?void 0:k.resources)===null||v===void 0)&&v.length?["Resources",...T.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const V=await M.signMessage(new TextEncoder().encode(S),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=V}}try{const{data:C,error:U}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:tn(E)},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:qt});if(U)throw U;if(!C||!C.session||!C.user){const I=new On;return this._returnResult({data:{user:null,session:null},error:I})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:U})}catch(C){if(de(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(t){const s=await Yr(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{if(!a&&this.flowType==="pkce")throw new wk;const{data:l,error:d}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:qt});if(await it(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const f=new On;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:u??null}),error:d})}catch(l){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:s,provider:a,token:u,access_token:l,nonce:d}=t,f=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:qt}),{data:m,error:y}=f;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m||!m.session||!m.user){const k=new On;return this._returnResult({data:{user:null,session:null},error:k})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:y})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,a,u,l,d;try{if("email"in t){const{email:f,options:m}=t;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await Pn(this.storage,this.storageKey));const{error:v}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(s=m?.data)!==null&&s!==void 0?s:{},create_user:(a=m?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:y,code_challenge_method:k},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:f,options:m}=t,{data:y,error:k}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(u=m?.data)!==null&&u!==void 0?u:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y?.message_id},error:k})}throw new fa("You must provide either an email or phone number.")}catch(f){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(t){var s,a;try{let u,l;"options"in t&&(u=(s=t.options)===null||s===void 0?void 0:s.redirectTo,l=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:d,error:f}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:u,xform:qt});if(f)throw f;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,y=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:y,session:m},error:null})}catch(u){if(de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(t){var s,a,u,l,d;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Pn(this.storage,this.storageKey));const y=await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=t?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:Vk});return!((l=y.data)===null||l===void 0)&&l.url&&at()&&!(!((d=t.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(f){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;if(a)throw a;if(!s)throw new jt;const{error:u}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:a,type:u,options:l}=t,{error:d}=await ke(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in t){const{phone:a,type:u,options:l}=t,{data:d,error:f}=await ke(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:f})}throw new fa("You must provide either an email or phone number and a type")}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Yr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Fl:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const d=await Yr(this.userStorage,this.storageKey+"-user");d?.user?t.user=d.user:t.user=ql()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};t.user=zk(t.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:u,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ir}):await this._useSession(async s=>{var a,u,l;const{data:d,error:f}=s;if(f)throw f;return!(!((a=d.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&l!==void 0?l:void 0,xform:Ir})})}catch(s){if(de(s))return Bl(s)&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async a=>{const{data:u,error:l}=a;if(l)throw l;if(!u.session)throw new jt;const d=u.session;let f=null,m=null;this.flowType==="pkce"&&t.email!=null&&([f,m]=await Pn(this.storage,this.storageKey));const{data:y,error:k}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:f,code_challenge_method:m}),jwt:d.access_token,xform:Ir});if(k)throw k;return d.user=y.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(a){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jt;const s=Date.now()/1e3;let a=s,u=!0,l=null;const{payload:d}=ma(t.access_token);if(d.exp&&(a=d.exp,u=a<=s),u){const{data:f,error:m}=await this._callRefreshToken(t.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:m}=await this._getUser(t.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});l={access_token:t.access_token,refresh_token:t.refresh_token,user:f.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(s){if(de(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var a;if(!t){const{data:d,error:f}=s;if(f)throw f;t=(a=d.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new jt;const{data:u,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(de(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!at())throw new pa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new pa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Wh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Wh("No code detected.");const{data:I,error:T}=await this._exchangeCodeForSession(t.code);if(T)throw T;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:l,refresh_token:d,expires_in:f,expires_at:m,token_type:y}=t;if(!l||!f||!d||!y)throw new pa("No session defined in URL");const k=Math.round(Date.now()/1e3),v=parseInt(f);let w=k+v;m&&(w=parseInt(m));const b=w-k;b*1e3<=Dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const S=w-v;k-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,w,k):k-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,w,k);const{data:E,error:C}=await this._getUser(l);if(C)throw C;const U={provider_token:a,provider_refresh_token:u,access_token:l,expires_in:v,expires_at:w,refresh_token:d,token_type:y,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:U,redirectType:t.type},error:null})}catch(a){if(de(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Yr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l&&!Bl(l))return this._returnResult({error:l});const d=(a=u.session)===null||a===void 0?void 0:a.access_token;if(d){const{error:f}=await this.admin.signOut(d,t);if(f&&!(vk(f)&&(f.status===404||f.status===401||f.status===403)||Bl(f)))return this._returnResult({error:f})}return t!=="others"&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=Ck(),a={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async s=>{var a,u;try{const{data:{session:l},error:d}=s;if(d)throw d;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((u=this.stateChangeEmitters.get(t))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await Pn(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(l){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:a,error:u}=await this._useSession(async l=>{var d,f,m,y,k;const{data:v,error:w}=l;if(w)throw w;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(d=t.options)===null||d===void 0?void 0:d.redirectTo,scopes:(f=t.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=t.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",b,{headers:this.headers,jwt:(k=(y=v.session)===null||y===void 0?void 0:y.access_token)!==null&&k!==void 0?k:void 0})});if(u)throw u;return at()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a?.url),this._returnResult({data:{provider:t.provider,url:a?.url},error:null})}catch(a){if(de(a))return this._returnResult({data:{provider:t.provider,url:null},error:a});throw a}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var a;try{const{error:u,data:{session:l}}=s;if(u)throw u;const{options:d,provider:f,token:m,access_token:y,nonce:k}=t,v=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=l?.access_token)!==null&&a!==void 0?a:void 0,body:{provider:f,id_token:m,access_token:y,nonce:k,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:qt}),{data:w,error:b}=v;return b?this._returnResult({data:{user:null,session:null},error:b}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new On}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:b}))}catch(u){if(await it(this.storage,`${this.storageKey}-code-verifier`),de(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var a,u;const{data:l,error:d}=s;if(d)throw d;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(u=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await Pk(async u=>(u>0&&await Ok(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qt})),(u,l)=>{const d=200*Math.pow(2,u);return l&&zl(l)&&Date.now()+d-a<Dn})}catch(a){if(this._debug(s,"error",a),de(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",a),at()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await Yr(this.storage,this.storageKey);if(u&&this.userStorage){let d=await Yr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:u.user},await Mn(this.userStorage,this.storageKey+"-user",d)),u.user=(t=d?.user)!==null&&t!==void 0?t:ql()}else if(u&&!u.user&&!u.user){const d=await Yr(this.storage,this.storageKey+"-user");d&&d?.user?(u.user=d.user,await it(this.storage,this.storageKey+"-user"),await Mn(this.storage,this.storageKey,u)):u.user=ql()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const l=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Fl;if(this._debug(a,`session has${l?"":" not"} expired with margin of ${Fl}s`),l){if(this.autoRefreshToken&&u.refresh_token){const{error:d}=await this._callRefreshToken(u.refresh_token);d&&(console.error(d),zl(d)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:f}=await this._getUser(u.access_token);!f&&d?.user?(u.user=d.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(a,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var s,a;if(!t)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Pa;const{data:l,error:d}=await this._refreshAccessToken(t);if(d)throw d;if(!l.session)throw new jt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(u,"error",l),de(l)){const d={data:null,error:l};return zl(l)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(l),l}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(t,s,a=!0){const u=`#_notifyAllSubscribers(${t})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:s});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(t,s)}catch(m){l.push(m)}});if(await Promise.all(d),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(u,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await it(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await Mn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const l=Qh(u);await Mn(this.storage,this.storageKey,l)}else{const u=Qh(s);await Mn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await it(this.storage,this.storageKey),await it(this.storage,this.storageKey+"-code-verifier"),await it(this.storage,this.storageKey+"-user"),this.userStorage&&await it(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&at()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Dn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-t)/Dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Dn}ms, refresh threshold is ${au} ticks`),u<=au&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Jf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[l,d]=await Pn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});u.push(f.toString())}if(a?.queryParams){const l=new URLSearchParams(a.queryParams);u.push(l.toString())}return a?.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${u.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;return l?this._returnResult({data:null,error:l}):await ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var a,u;const{data:l,error:d}=s;if(d)return this._returnResult({data:null,error:d});const f=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:m,error:y}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=l?.session)===null||a===void 0?void 0:a.access_token});return y?this._returnResult({data:null,error:y}):(t.factorType==="totp"&&m.type==="totp"&&(!((u=m?.totp)===null||u===void 0)&&u.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?lv(t.webauthn.credential_response):uv(t.webauthn.credential_response)})}:{code:t.code}),{data:f,error:m}=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:d,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:l}=s;if(l)return this._returnResult({data:null,error:l});const d=await ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=u?.session)===null||a===void 0?void 0:a.access_token});if(d.error)return d;const{data:f}=d;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:av(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ov(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:a}=await this._challenge({factorId:t.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:a}=await this.getUser();if(a)return{data:null,error:a};const u={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=s?.factors)!==null&&t!==void 0?t:[])u.all.push(l),l.status==="verified"&&u[l.factor_type].push(l);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(t){var s,a,u,l;if(t)try{const{payload:b}=ma(t);let S=null;b.aal&&(S=b.aal);let E=S;const{data:{user:C},error:U}=await this.getUser(t);if(U)return this._returnResult({data:null,error:U});((a=(s=C?.factors)===null||s===void 0?void 0:s.filter(M=>M.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(E="aal2");const T=b.amr||[];return{data:{currentLevel:S,nextLevel:E,currentAuthenticationMethods:T},error:null}}catch(b){if(de(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:d},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=ma(d.access_token);let y=null;m.aal&&(y=m.aal);let k=y;((l=(u=d.user.factors)===null||u===void 0?void 0:u.filter(b=>b.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(k="aal2");const w=m.amr||[];return{data:{currentLevel:y,nextLevel:k,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?await ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new jt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:u},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!u)return this._returnResult({data:null,error:new jt});const d=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&at()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(a){if(de(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(t,s){try{return await this._useSession(async a=>{const{data:{session:u},error:l}=a;if(l)return this._returnResult({data:null,error:l});if(!u)return this._returnResult({data:null,error:new jt});const d=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return d.data&&d.data.redirect_url&&at()&&!s?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(a){if(de(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await ke(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new jt})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:a},error:u}=s;return u?this._returnResult({data:null,error:u}):a?(await ke(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jt})})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let a=s.keys.find(f=>f.kid===t);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(f=>f.kid===t),a&&this.jwks_cached_at+gk>u)return a;const{data:l,error:d}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=u,a=l.keys.find(f=>f.kid===t),!a)?null:a}async getClaims(t,s={}){try{let a=t;if(!a){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});a=b.session.access_token}const{header:u,payload:l,signature:d,raw:{header:f,payload:m}}=ma(a);s?.allowExpired||Mk(l.exp);const y=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!y){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:l,header:u,signature:d},error:null}}const k=Fk(u.alg),v=await crypto.subtle.importKey("jwk",y,k,!0,["verify"]);if(!await crypto.subtle.verify(k,v,d,Ek(`${f}.${m}`)))throw new uu("Invalid JWT signature");return{data:{claims:l,header:u,signature:d},error:null}}catch(a){if(de(a))return this._returnResult({data:null,error:a});throw a}}}Vs.nextInstanceID={};const kv=Vs,vv="2.94.1";let $s="";typeof Deno<"u"?$s="deno":typeof document<"u"?$s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$s="react-native":$s="node";const xv={"X-Client-Info":`supabase-js-${$s}/${vv}`},wv={headers:xv},bv={schema:"public"},_v={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Sv={};function Ks(n){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(n)}function jv(n,t){if(Ks(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,t);if(Ks(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Ev(n){var t=jv(n,"string");return Ks(t)=="symbol"?t:t+""}function Nv(n,t,s){return(t=Ev(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function nf(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);t&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),s.push.apply(s,a)}return s}function We(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?nf(Object(s),!0).forEach(function(a){Nv(n,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):nf(Object(s)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(s,a))})}return n}const Cv=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),Tv=()=>Headers,Rv=(n,t,s)=>{const a=Cv(s),u=Tv();return async(l,d)=>{var f;const m=(f=await t())!==null&&f!==void 0?f:n;let y=new u(d?.headers);return y.has("apikey")||y.set("apikey",n),y.has("Authorization")||y.set("Authorization",`Bearer ${m}`),a(l,We(We({},d),{},{headers:y}))}};function Ov(n){return n.endsWith("/")?n:n+"/"}function Pv(n,t){var s,a;const{db:u,auth:l,realtime:d,global:f}=n,{db:m,auth:y,realtime:k,global:v}=t,w={db:We(We({},m),u),auth:We(We({},y),l),realtime:We(We({},k),d),storage:{},global:We(We(We({},v),f),{},{headers:We(We({},(s=v?.headers)!==null&&s!==void 0?s:{}),(a=f?.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function Av(n){const t=n?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ov(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Iv=class extends kv{constructor(n){super(n)}},Lv=class{constructor(n,t,s){var a,u;this.supabaseUrl=n,this.supabaseKey=t;const l=Av(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:bv,realtime:Sv,auth:We(We({},_v),{},{storageKey:d}),global:wv},m=Pv(s??{},f);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=m.global.headers)!==null&&u!==void 0?u:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(k,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var y;this.auth=this._initSupabaseAuthClient((y=m.auth)!==null&&y!==void 0?y:{},this.headers,m.global.fetch)}this.fetch=Rv(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(We({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(k=>this.realtime.setAuth(k)).catch(k=>console.warn("Failed to set initial Realtime auth token:",k)),this.rest=new vg(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new hk(this.storageUrl.href,this.headers,this.fetch,s?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new dg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:a}=await n.auth.getSession();return(t=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:u,storageKey:l,flowType:d,lock:f,debug:m,throwOnError:y},k,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Iv({url:this.authUrl.href,headers:We(We({},w),k),storageKey:l,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:u,flowType:d,lock:f,debug:m,throwOnError:y,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new $g(this.realtimeUrl.href,We(We({},n),{},{params:We(We({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t?.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $v=(n,t,s)=>new Lv(n,t,s);function Uv(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Uv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Dv="https://mipuxwumpzfzvoxnimuv.supabase.co",Mv="sb_publishable_KNtL05U6y-qfX6Jb0xS6Fg_YM7f0vPu",te=$v(Dv,Mv);function Fv(){const[n,t]=x.useState(!1);return x.useEffect(()=>{let s=!0;async function a(){const{data:l}=await te.auth.getUser();s&&t(!!l?.user)}const{data:u}=te.auth.onAuthStateChange((l,d)=>{t(!!d?.user)});return a(),()=>{s=!1,u?.subscription?.unsubscribe()}},[]),c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Contact - Recipes"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Contact"}),n?c.jsxs("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:["If you have any questions or find any issues let me know at"," ",c.jsx("a",{href:"mailto:josh.baywood@outlook.com",className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:"josh.baywood@outlook.com"}),"."]}):c.jsx("p",{className:"mt-4 text-sm text-sky-600 dark:text-sky-300 md:text-base",children:"This website is developed for friends and family. We aren't taking any external invitations at this time."})]})]})}function ya(n){if(n===""||n===null||n===void 0)return null;const t=Number.parseInt(n,10);return Number.isNaN(t)?null:t}function Bv(n){return n==null?!0:Number.isInteger(n)&&n>=0&&n<=3}function zv({recipeDraft:n,setRecipeDraft:t,onSave:s,saving:a,status:u}){return c.jsxs("section",{className:"p-0",children:[c.jsxs("header",{className:"mb-6",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"New Recipe"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Add the basics now, then build out ingredients and steps next."})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Title"}),c.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.title,onChange:l=>t(d=>({...d,title:l.target.value})),placeholder:"Smoky Lemon Pasta"})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Servings"}),c.jsx("input",{type:"number",min:"0",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.servings,onChange:l=>t(d=>({...d,servings:l.target.value})),placeholder:"4"})]}),c.jsxs("label",{className:"form-label md:col-span-2",children:[c.jsx("span",{children:"Description"}),c.jsx("textarea",{className:"min-h-[120px] rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.description,onChange:l=>t(d=>({...d,description:l.target.value})),placeholder:"Notes on flavor, pairings, or a quick story."})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Prep Time (min)"}),c.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.preMinutes,onChange:l=>t(d=>({...d,preMinutes:l.target.value})),placeholder:"15"})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Cook Time (min)"}),c.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.cookMinutes,onChange:l=>t(d=>({...d,cookMinutes:l.target.value})),placeholder:"20"})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Heat Level"}),c.jsx("input",{type:"number",min:"0",max:"3",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.heat,onChange:l=>t(d=>({...d,heat:l.target.value})),placeholder:"0-3"})]})]}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:s,disabled:a,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:a?"Saving...":"Create Recipe"}),u&&c.jsx("span",{className:"text-sm text-sky-500 dark:text-sky-400",children:u})]})]})}function qv(){const n=Js(),[t,s]=x.useState({title:"",description:"",preMinutes:"",cookMinutes:"",servings:"",heat:""}),[a,u]=x.useState(!1),[l,d]=x.useState("");async function f(){const{data:y,error:k}=await te.auth.getUser();if(k||!y?.user)throw new Error("You need to be signed in to save recipes.");return y.user.id}async function m(){u(!0),d("");try{const y=await f(),k={title:t.title.trim(),description:t.description.trim(),owner_id:y,pre_minutes:ya(t.preMinutes),cook_minutes:ya(t.cookMinutes),servings:ya(t.servings),heat:ya(t.heat)};if(!k.title)throw new Error("Recipe title is required.");if(!Bv(k.heat))throw new Error("Heat level must be between 0 and 3.");const{data:v,error:w}=await te.from("recipes").insert(k).select("id").single();if(w)throw w;n(`/recipe/${v.id}/edit`)}catch(y){d(y.message??"Unable to save recipe.")}finally{u(!1)}}return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Create Recipe  Recipes"})}),c.jsx("div",{className:"flex w-full flex-col gap-10 text-left",children:c.jsx(zv,{recipeDraft:t,setRecipeDraft:s,onSave:m,saving:a,status:l})})]})}const Hv="/recipes/assets/ella-olsson-KPDbRyFOTnE-unsplash-BzfSK5tG.jpg";function Wv(){return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Home - Recipes"})}),c.jsxs("div",{className:"flex flex-col gap-8 pb-4",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-sky-200/80 bg-gradient-to-br from-white via-sky-50 to-cyan-100 p-6 shadow-xl shadow-black/10 dark:border-sky-800/70 dark:from-sky-950 dark:via-sky-900 dark:to-cyan-950/80 dark:shadow-black/30 md:p-10",children:[c.jsx("div",{className:"pointer-events-none absolute -top-20 -right-16 h-52 w-52 rounded-full bg-cyan-300/25 blur-3xl dark:bg-cyan-400/10"}),c.jsx("div",{className:"pointer-events-none absolute -bottom-16 -left-10 h-40 w-40 rounded-full bg-sky-300/35 blur-2xl dark:bg-sky-500/10"}),c.jsxs("div",{className:"relative grid gap-8 md:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)] md:items-center",children:[c.jsxs("div",{className:"space-y-5",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-sky-700 dark:text-sky-300",children:"Meal Planning, Finally Simpler"}),c.jsx("h1",{className:"max-w-2xl text-3xl font-semibold leading-tight text-sky-950 dark:text-white md:text-5xl",children:"Planning meals is hard when your recipes live everywhere."}),c.jsx("p",{className:"max-w-xl text-base text-sky-700 dark:text-sky-200 md:text-lg",children:"Wouldn't it be easier if all your recipes were in one place, your favorites were easy to plan, and new synergies surfaced from fresh ingredients you already use?"})]}),c.jsx("div",{className:"h-[20rem] overflow-hidden rounded-2xl border border-sky-200 bg-white/70 shadow-lg shadow-black/10 dark:border-sky-800 dark:bg-sky-950/60 md:h-[24rem]",children:c.jsx("img",{src:Hv,alt:"Prepared meal ingredients and dishes arranged for planning and cooking",className:"block h-full w-full object-cover object-center",loading:"lazy"})})]})]}),c.jsxs("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-5",children:[c.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"1. Store"}),c.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Add your favorite recipes"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Keep your best meals in one place instead of juggling notes, links, and screenshots."})]}),c.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"2. Plan"}),c.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Plan out your next week"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Build your week quickly from the recipes you already trust."})]}),c.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"3. Discover"}),c.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Get smart recipe suggestions"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Discover recipes that synergize with ingredients you already plan to use."})]}),c.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"4. Shop"}),c.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Go shopping with an automated list"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Check what you already have and buy only what you need."})]}),c.jsxs("article",{className:"rounded-2xl border border-sky-200 bg-white p-5 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"5. Cook"}),c.jsx("h2",{className:"mt-2 text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Cook from your planned recipes"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"No bookmarking or remembering what to make next."})]})]})]})]})}function Vv(){const[n,t]=x.useState(""),[s,a]=x.useState([]),[u,l]=x.useState([]),[d,f]=x.useState(!0),[m,y]=x.useState(""),[k,v]=x.useState(""),[w,b]=x.useState(!1),[S,E]=x.useState(!1),[C,U]=x.useState(""),[I,T]=x.useState(!1),[M,W]=x.useState(null),[V,Q]=x.useState(!1),[O,L]=x.useState(""),[K,ce]=x.useState(!1),[re,oe]=x.useState(null),fe=x.useCallback(async()=>{f(!0),y("");const{data:j,error:B}=await te.auth.getUser();if(B){y(B.message??"Unable to load your account."),f(!1);return}const Z=j?.user;if(!Z){y("Please sign in to view your households."),f(!1);return}t(Z.id);const{data:ae,error:he}=await te.from("household_members").select("household_id").eq("user_id",Z.id);if(he){y(he.message??"Unable to load household membership."),f(!1);return}const be=(ae??[]).map(Ee=>Ee.household_id).filter(Boolean);if(be.length>0){const{data:Ee,error:ze}=await te.from("households").select("id, name").in("id",be).order("name");if(ze){y(ze.message??"Unable to load households."),f(!1);return}a(Ee??[]),l([]),f(!1);return}const{data:je,error:_e}=await te.from("households").select("id, name").order("name");if(_e){y(_e.message??"Unable to load households."),f(!1);return}a([]),l(je??[]),f(!1)},[]);x.useEffect(()=>{fe()},[fe]);const xe=async j=>{if(!n||!j)return;v(j),y("");const{error:B}=await te.from("household_members").insert({user_id:n,household_id:j});if(B){y(B.message??"Unable to join household."),v("");return}v(""),fe()},pe=async j=>{if(!n||!j)return;L(j),y("");const{error:B}=await te.from("household_members").delete().eq("user_id",n).eq("household_id",j);if(B){y(B.message??"Unable to leave household."),L("");return}L(""),fe()},P=j=>{oe(j),ce(!0)},F=async()=>{re?.id&&(await pe(re.id),ce(!1),oe(null))},X=async j=>{if(j.preventDefault(),!C.trim())return;T(!0),y("");const{data:B,error:Z}=await te.from("households").insert({name:C.trim()}).select("id, name").single();if(Z){y(Z.message??"Unable to create household."),T(!1);return}T(!1),b(!1),U(""),W(B??null),E(!0),fe()},z=async()=>{if(!M?.id||!n)return;Q(!0),y("");const{error:j}=await te.from("household_members").insert({user_id:n,household_id:M.id});if(j){y(j.message??"Unable to join household."),Q(!1);return}Q(!1),E(!1),W(null),fe()};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Household - Recipes"})}),c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Your Household"}),d?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading households..."}):m?c.jsx("p",{className:"text-sm text-rose-300",children:m}):s.length>0?c.jsx("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 backdrop-blur dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:c.jsx("div",{className:"flex flex-col gap-4",children:s.map(j=>c.jsx("div",{className:"flex flex-col gap-4",children:c.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:["You are part of the ",j.name||"Untitled household"," household."]}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Now you can meal plan together, share menus, and generate shopping lists."})]}),c.jsx("button",{type:"button",onClick:()=>P(j),disabled:O===j.id||K,className:"w-full rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-70 md:w-auto md:self-start dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white",children:O===j.id?"Leaving":"Leave"})]})},j.id))})}):c.jsxs("section",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"You are not in a household yet"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Pick a household to join and start planning together."}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-between gap-3 text-left",children:[c.jsx("span",{className:"text-sm font-semibold text-sky-700 dark:text-sky-200",children:"All households"}),c.jsx("button",{type:"button",onClick:()=>b(!0),className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Create household"})]}),u.length===0?c.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No households available right now."}):c.jsx("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:u.map(j=>c.jsxs("button",{type:"button",onClick:()=>xe(j.id),disabled:k===j.id,className:"flex items-center justify-between rounded-xl border border-sky-200 bg-white px-4 py-3 text-left text-sm font-semibold text-sky-800 transition hover:border-sky-400 hover:bg-sky-100 disabled:cursor-not-allowed disabled:opacity-70 dark:border-sky-800 dark:bg-sky-950/70 dark:text-sky-100 dark:hover:border-sky-600 dark:hover:bg-sky-900",children:[c.jsx("span",{children:j.name||"Untitled household"}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:k===j.id?"Joining":"Join"})]},j.id))})]})]}),w?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Create a household"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Give your household a name so others can find it."}),c.jsxs("form",{onSubmit:X,className:"mt-6 flex flex-col gap-4",children:[c.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Name",c.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:C,onChange:j=>U(j.target.value),placeholder:"Sunday Supper Club",autoFocus:!0})]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{b(!1),U("")},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:!C.trim()||I,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:I?"Creating...":"Create household"})]})]})]})}):null,S&&M?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Join your new household?"}),c.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You just created ",c.jsx("span",{className:"font-semibold",children:M.name}),". Want to join it now?"]}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{E(!1),W(null)},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Not now"}),c.jsx("button",{type:"button",onClick:z,disabled:V,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:V?"Joining...":"Join household"})]})]})}):null,K&&re?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Leave this household?"}),c.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to leave ",re.name||"Untitled household",". You can rejoin later if needed."]}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{ce(!1),oe(null)},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),c.jsx("button",{type:"button",onClick:F,disabled:O===re.id,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-rose-500 dark:hover:bg-rose-400",children:O===re.id?"Leaving...":"Leave household"})]})]})}):null]})}const Kv=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"];async function Wl(){const[{data:n,error:t},{data:s,error:a}]=await Promise.all([te.from("ingredients").select("id, name, is_synergy_core, default_unit, default_quantity, supermarket_section").order("name",{ascending:!0}),te.from("recipe_ingredients").select("ingredient_id")]);if(t)return{error:t.message??"Unable to load ingredients.",data:[]};if(a)return{error:a.message??"Unable to load ingredient usage.",data:[]};const u=new Map;return(s??[]).forEach(d=>{const f=d?.ingredient_id;f&&u.set(f,(u.get(f)??0)+1)}),{error:"",data:(n??[]).map(d=>({...d,usageCount:u.get(d.id)??0}))}}function Gv(){const[n,t]=x.useState([]),[s,a]=x.useState(!0),[u,l]=x.useState(""),[d,f]=x.useState(null),[m,y]=x.useState(""),[k,v]=x.useState(""),[w,b]=x.useState(""),[S,E]=x.useState(""),[C,U]=x.useState(!1),[I,T]=x.useState(!1),[M,W]=x.useState(""),[V,Q]=x.useState(""),[O,L]=x.useState(null),[K,ce]=x.useState(!1),[re,oe]=x.useState(""),[fe,xe]=x.useState(null),[pe,P]=x.useState([]),[F,X]=x.useState(!1),[z,j]=x.useState(""),B=x.useMemo(()=>{const se=n.length;return se===1?"1 ingredient":`${se} ingredients`},[n]);x.useEffect(()=>{let se=!0;async function Ge(){a(!0),l("");const{data:Re,error:J}=await Wl();se&&(J?(l(J),t(Re??[])):t(Re??[]),a(!1))}return Ge(),()=>{se=!1}},[]);const Z=se=>{f(se),y(se.name||""),v(se.default_unit||""),b(se.default_quantity??""),E(se.supermarket_section||""),U(!!se.is_synergy_core),W("")},ae=()=>{I||(f(null),W(""))},he=se=>{L(se),oe("")},be=()=>{K||(L(null),oe(""))},je=async se=>{if(se.preventDefault(),!d?.id)return;const Ge=m.trim(),Re=k.trim(),J=String(w??"").trim()!=="",ge=J?Number.parseInt(w,10):null;if(!Ge){W("Ingredient name is required.");return}if(J&&Number.isNaN(ge)||J&&String(ge)!==String(w).trim()||J&&ge<=0){W("Default quantity must be a whole number greater than 0.");return}T(!0),W(""),Q("");const{error:Oe}=await te.from("ingredients").update({name:Ge,default_unit:Re||null,default_quantity:ge,supermarket_section:S||null,is_synergy_core:C}).eq("id",d.id);if(Oe){W(Oe.message??"Unable to save ingredient."),T(!1);return}const{data:Ue,error:qe}=await Wl();if(qe){W(qe||"Saved, but failed to refresh ingredients."),T(!1);return}t(Ue??[]),f(null),T(!1),Q(`Saved ${Ge}.`),setTimeout(()=>{Q("")},2500)},_e=async()=>{if(!O?.id)return;const se=O.name||"ingredient";ce(!0),oe(""),Q("");const{error:Ge}=await te.from("ingredients").delete().eq("id",O.id);if(Ge){const ge=Ge.code==="23503"||/foreign key|recipe_ingredients|constraint/i.test(Ge.message||"");oe(ge?"Cannot delete this ingredient because it is used in one or more recipes.":Ge.message??"Unable to delete ingredient."),ce(!1);return}const{data:Re,error:J}=await Wl();if(J){oe(J||"Deleted, but failed to refresh ingredients."),ce(!1);return}t(Re??[]),L(null),ce(!1),Q(`Deleted ${se}.`),setTimeout(()=>{Q("")},2500)},Ee=async se=>{if(!se?.id||!se.usageCount)return;xe(se),P([]),X(!0),j("");const{data:Ge,error:Re}=await te.from("recipe_ingredients").select("recipes ( id, title )").eq("ingredient_id",se.id);if(Re){j(Re.message??"Unable to load recipes for this ingredient."),X(!1);return}const J=new Map;(Ge??[]).forEach(Oe=>{const Ue=Oe?.recipes;Ue?.id&&J.set(Ue.id,{id:Ue.id,title:Ue.title||"Untitled recipe"})});const ge=Array.from(J.values()).sort((Oe,Ue)=>Oe.title.localeCompare(Ue.title));P(ge),X(!1)},ze=()=>{F||(xe(null),P([]),j(""))};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Ingredients - Recipes"})}),c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"flex flex-wrap items-end justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Ingredients"}),c.jsx("p",{className:"mt-1 text-sm text-sky-600 dark:text-sky-300",children:"All ingredients defined in your database."})]}),c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:B})]}),V?c.jsx("p",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 dark:border-emerald-500/40 dark:bg-emerald-900/20 dark:text-emerald-200",children:V}):null,s?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading ingredients..."}):u?c.jsx("p",{className:"text-sm text-rose-300",children:u}):n.length===0?c.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"No ingredients found."})}):c.jsx("div",{className:"overflow-hidden rounded-2xl border border-sky-200 bg-white shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-950/65 dark:shadow-black/20",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-left text-sm",children:[c.jsx("thead",{className:"border-b border-sky-200 bg-sky-50 text-xs font-semibold uppercase tracking-[0.18em] text-sky-600 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Name"}),c.jsx("th",{className:"px-4 py-3",children:"Default Unit"}),c.jsx("th",{className:"px-4 py-3",children:"Default Quantity"}),c.jsx("th",{className:"px-4 py-3",children:"Supermarket Section"}),c.jsx("th",{className:"px-4 py-3",children:"Synergy Core"}),c.jsx("th",{className:"px-4 py-3",children:"Used"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Action"})]})}),c.jsx("tbody",{children:n.map(se=>c.jsxs("tr",{className:"border-b border-sky-100/80 text-sky-800 last:border-0 dark:border-sky-800/70 dark:text-sky-100",children:[c.jsx("td",{className:"px-4 py-3 font-semibold",children:se.name||"Unnamed ingredient"}),c.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:se.default_unit||""}),c.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:se.default_quantity||""}),c.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:se.supermarket_section||""}),c.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:se.is_synergy_core?"Yes":"No"}),c.jsx("td",{className:"px-4 py-3 text-sky-600 dark:text-sky-300",children:se.usageCount>0?c.jsx("button",{type:"button",onClick:()=>Ee(se),className:"font-semibold text-sky-700 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-200 dark:decoration-sky-600 dark:hover:text-white",children:se.usageCount}):c.jsx("span",{children:se.usageCount})}),c.jsx("td",{className:"px-4 py-3 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{type:"button",onClick:()=>Z(se),className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"}),c.jsx("button",{type:"button",onClick:()=>he(se),className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:"Delete"})]})})]},se.id))})]})})})]}),d?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Edit ingredient"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Update details for this ingredient."}),c.jsxs("form",{onSubmit:je,className:"mt-6 flex flex-col gap-4",children:[c.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Name",c.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:m,onChange:se=>y(se.target.value),placeholder:"Tomato",autoFocus:!0})]}),c.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Default unit",c.jsx("input",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:k,onChange:se=>v(se.target.value),placeholder:"g"})]}),c.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Default quantity",c.jsx("input",{type:"number",min:"1",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:w,onChange:se=>b(se.target.value),placeholder:"1"})]}),c.jsxs("label",{className:"flex flex-col gap-2 text-sm font-semibold text-sky-800 dark:text-sky-100",children:["Supermarket section",c.jsxs("select",{className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",value:S,onChange:se=>E(se.target.value),children:[c.jsx("option",{value:"",children:"Select section"}),Kv.map(se=>c.jsx("option",{value:se,children:se},se))]})]}),c.jsxs("label",{className:"flex items-center gap-3 text-sm font-semibold text-sky-800 dark:text-sky-100",children:[c.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-200",checked:C,onChange:se=>U(se.target.checked)}),"Is synergy core ingredient"]}),M?c.jsx("p",{className:"text-sm text-rose-300",children:M}):null,c.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:ae,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:I,children:"Cancel"}),c.jsx("button",{type:"submit",disabled:I||!m.trim(),className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-70 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:I?"Saving...":"Save changes"})]})]})]})}):null,O?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Delete this ingredient?"}),c.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to remove"," ",c.jsx("span",{className:"font-semibold",children:O.name||"this ingredient"}),"."]}),re?c.jsx("p",{className:"mt-3 text-sm text-rose-300",children:re}):null,c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:be,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:K,children:"Cancel"}),c.jsx("button",{type:"button",onClick:_e,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400",disabled:K,children:K?"Deleting...":"Delete"})]})]})}):null,fe?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-lg rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsxs("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:[fe.name||"This ingredient"," is used in"," ",fe.usageCount," recipe",fe.usageCount===1?"":"s","."]}),F?c.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"Loading recipes..."}):z?c.jsx("p",{className:"mt-4 text-sm text-rose-300",children:z}):pe.length===0?c.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No recipes found for this ingredient."}):c.jsx("ul",{className:"mt-4 max-h-72 list-disc overflow-auto pl-6 text-sm text-sky-700 dark:text-sky-200",children:pe.map(se=>c.jsx("li",{className:"py-1",children:c.jsx(Ce,{to:`/recipe/${se.id}/view`,className:"transition hover:text-sky-900 hover:underline dark:hover:text-white",children:se.title})},se.id))}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{type:"button",onClick:ze,className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:F,children:"Close"})})]})}):null]})}function Jv(){const[n,t]=x.useState(""),[s,a]=x.useState(!1),[u,l]=x.useState(null),[d,f]=x.useState(null),m=Js(),y=new URL("/recipes/",window.location.origin).toString();x.useEffect(()=>{let v=!0;async function w(){const{data:S}=await te.auth.getUser();v&&S?.user&&m("/",{replace:!0})}const{data:b}=te.auth.onAuthStateChange((S,E)=>{E?.user&&m("/",{replace:!0})});return w(),()=>{v=!1,b?.subscription?.unsubscribe()}},[m]);const k=async v=>{v.preventDefault(),a(!0),l(null),f(null);const{error:w}=await te.auth.signInWithOtp({email:n,options:{emailRedirectTo:y}});w?f(w.message):l("Check your email for your magic link!"),a(!1)};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Sign In  Recipes"})}),c.jsxs("div",{className:"flex min-h-[60vh] flex-col items-center justify-center gap-6 text-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-sky-500 dark:text-sky-400",children:"Account"}),c.jsx("h1",{className:"text-2xl font-semibold",children:"Friends & Family Access"}),c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["This app is shared with friends and family only. Want access to build your own lists?"," ",c.jsx(Ce,{className:"text-sky-900 underline dark:text-white",to:"/contact",children:"Reach out"})," ","and we'll help."]})]}),c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white/80 p-6 text-left shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[u?c.jsxs("div",{className:"mb-5 rounded-xl border border-emerald-200 bg-emerald-50 p-4 text-center text-emerald-900 dark:border-emerald-900/70 dark:bg-emerald-950/50 dark:text-emerald-100",children:[c.jsx("p",{className:"font-medium",children:u}),c.jsx("p",{className:"mt-1 text-xs text-emerald-700/80 dark:text-emerald-200/80",children:"This link expires in 1 hour."})]}):null,d?c.jsx("div",{className:"mb-5 rounded-xl border border-rose-200 bg-rose-50 p-4 text-center text-rose-900 dark:border-rose-900/70 dark:bg-rose-950/50 dark:text-rose-100",children:c.jsx("p",{className:"font-medium",children:d})}):null,c.jsxs("form",{className:"space-y-5",onSubmit:k,children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",htmlFor:"email",children:c.jsx("span",{children:"Email address"})}),c.jsx("input",{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:v=>t(v.target.value),required:!0,className:"w-full rounded-xl border border-sky-200 bg-white px-4 py-3 text-sky-900 placeholder:text-sky-400 focus:border-sky-900 focus:outline-none focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-sky-500 dark:focus:border-white dark:focus:ring-white/40"})]}),c.jsx("button",{type:"submit",disabled:s,className:"flex w-full items-center justify-center gap-2 rounded-xl bg-sky-900 px-6 py-3 font-semibold text-white shadow-lg shadow-black/10 transition hover:-transky-y-0.5 hover:bg-sky-800 disabled:transky-y-0 disabled:cursor-not-allowed disabled:bg-sky-300 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:s?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-sky-200/40 border-t-sky-200 dark:border-sky-900/40 dark:border-t-sky-900"}),"Sending..."]}):"Send Magic Link"})]}),c.jsx("p",{className:"mt-5 text-center text-xs text-sky-500 dark:text-sky-400",children:"No password required. We'll email you a secure sign-in link."})]})]})]})}function Qv(){const n=Js(),[t,s]=x.useState(null),[a,u]=x.useState([]),[l,d]=x.useState([]),[f,m]=x.useState(!0),[y,k]=x.useState(""),[v,w]=x.useState(!1),[b,S]=x.useState(""),[E,C]=x.useState(!1);x.useEffect(()=>{let T=!0;async function M(){m(!0),k("");const{data:W,error:V}=await te.auth.getUser();if(!T)return;if(V){k(V.message??"Unable to load your account."),m(!1);return}const Q=W?.user;if(!Q){k("Please sign in to manage your menu."),m(!1);return}const{data:O,error:L}=await te.from("household_members").select("household_id").eq("user_id",Q.id).limit(1).maybeSingle();if(L){k(L.message??"Unable to load household membership."),m(!1);return}if(!O?.household_id){s(null),u([]),d([]),m(!1);return}const{data:K,error:ce}=await te.from("households").select("id, name").eq("id",O.household_id).single();if(ce){k(ce.message??"Unable to load household."),m(!1);return}s(K??null);const[re,oe]=await Promise.all([te.from("plan_recipes").select("recipe_id").eq("household_id",O.household_id),te.from("menu_recipes").select("recipe_id").eq("household_id",O.household_id)]);if(re.error){k(re.error.message??"Unable to load plan recipes."),m(!1);return}if(oe.error){k(oe.error.message??"Unable to load menu recipes."),m(!1);return}const fe=(re.data??[]).map(X=>X.recipe_id).filter(Boolean),xe=(oe.data??[]).map(X=>X.recipe_id).filter(Boolean),[pe,P]=await Promise.all([fe.length>0?te.from("recipes").select("id, title").in("id",fe).order("title"):Promise.resolve({data:[],error:null}),xe.length>0?te.from("recipes").select("id, title").in("id",xe).order("title"):Promise.resolve({data:[],error:null})]);if(pe.error){k(pe.error.message??"Unable to load plan recipes."),m(!1);return}if(P.error){k(P.error.message??"Unable to load menu recipes."),m(!1);return}const F=X=>(X??[]).map(z=>({id:z.id,title:z.title||"Untitled recipe"}));u(F(pe.data)),d(F(P.data)),m(!1)}return M(),()=>{T=!1}},[]);const U=T=>{S(T),w(!0)},I=async()=>{if(!t?.id||a.length===0)return;C(!0),k("");const T=a.map(W=>W.id);if(b==="replace"){const{error:W}=await te.from("menu_recipes").delete().eq("household_id",t.id);if(W){k(W.message??"Unable to replace menu recipes."),C(!1);return}}if(b==="add"||b==="replace"){const W=new Set(l.map(Q=>Q.id)),V=T.filter(Q=>b==="replace"||!W.has(Q)).map(Q=>({household_id:t.id,recipe_id:Q}));if(V.length>0){const{error:Q}=await te.from("menu_recipes").insert(V);if(Q){k(Q.message??"Unable to update menu recipes."),C(!1);return}}}const{error:M}=await te.from("plan_recipes").delete().eq("household_id",t.id);if(M){k(M.message??"Unable to clear plan recipes."),C(!1);return}C(!1),w(!1),n("/menu",{replace:!0})};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Move to Menu - Recipes"})}),c.jsx("div",{className:"flex flex-col gap-6",children:f?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading menu migration..."}):y?c.jsx("p",{className:"text-sm text-rose-300",children:y}):t?c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Ready to start cooking?"}),c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Once you have purchased the ingredients for your planned meals, you can add them to your ready to go menu."}),c.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_auto_1fr] lg:items-start",children:[c.jsxs("section",{children:[c.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Planned recipes"}),a.length===0?c.jsx("p",{className:"mt-3 text-sm text-sky-600 dark:text-sky-300",children:"No recipes in the plan yet."}):c.jsx("ul",{className:"mt-4 flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:a.map(T=>c.jsx("li",{className:"rounded-lg border border-sky-100 bg-white px-3 py-2 font-semibold text-sky-900 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-100",children:T.title},T.id))})]}),c.jsx("div",{className:"flex items-center justify-center text-2xl font-semibold text-sky-400 dark:text-sky-600",children:""}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Menu recipes"}),l.length===0?c.jsx("p",{className:"mt-3 text-sm text-sky-600 dark:text-sky-300",children:"No recipes on the menu yet."}):c.jsx("ul",{className:"mt-4 flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:l.map(T=>c.jsx("li",{className:"rounded-lg border border-sky-100 bg-white px-3 py-2 font-semibold text-sky-900 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-100",children:T.title},T.id))})]})]}),c.jsxs("section",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>U("add"),disabled:a.length===0,className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Add plan to menu"}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"or"}),c.jsx("button",{type:"button",onClick:()=>U("replace"),disabled:a.length===0,className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Replace menu with plan"})]})]}):c.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to manage its menu."]})})}),v?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Confirm menu update"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:b==="replace"?"This will replace every recipe on the menu with your current plan.":"This will add planned recipes to the menu and keep what is already there."}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>w(!1),className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),c.jsx("button",{type:"button",onClick:I,disabled:E,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:E?"Working...":"Confirm"})]})]})}):null]})}function Yv(){const[n,t]=x.useState(null),[s,a]=x.useState([]),[u,l]=x.useState(!0),[d,f]=x.useState(""),[m,y]=x.useState(""),[k,v]=x.useState(!1),[w,b]=x.useState(""),[S,E]=x.useState("");x.useEffect(()=>{let T=!0;async function M(){l(!0),f("");const{data:W,error:V}=await te.auth.getUser();if(!T)return;if(V){f(V.message??"Unable to load your account."),l(!1);return}const Q=W?.user;if(!Q){f("Please sign in to view your menu."),l(!1);return}const{data:O,error:L}=await te.from("household_members").select("household_id").eq("user_id",Q.id).limit(1).maybeSingle();if(L){f(L.message??"Unable to load household membership."),l(!1);return}if(!O?.household_id){t(null),a([]),l(!1);return}const{data:K,error:ce}=await te.from("households").select("id, name").eq("id",O.household_id).single();if(ce){f(ce.message??"Unable to load household."),l(!1);return}t(K??null);const{data:re,error:oe}=await te.from("menu_recipes").select("recipe_id").eq("household_id",O.household_id);if(oe){f(oe.message??"Unable to load menu recipes."),a([]),l(!1);return}const fe=(re??[]).map(P=>P.recipe_id).filter(Boolean);if(fe.length===0){a([]),l(!1);return}const{data:xe,error:pe}=await te.from("recipes").select("id, title, description").in("id",fe).order("title");if(pe){f(pe.message??"Unable to load menu recipes."),a([]),l(!1);return}a(xe??[]),l(!1)}return M(),()=>{T=!1}},[]);const C=async T=>{if(!n?.id||!T)return;y(T),f("");const{error:M}=await te.from("menu_recipes").delete().eq("household_id",n.id).eq("recipe_id",T);if(M){f(M.message??"Unable to remove recipe."),y("");return}y(""),a(W=>W.filter(V=>V.id!==T))},U=(T,M)=>{b(T),E(M),v(!0)},I=async()=>{w&&(await C(w),v(!1),b(""),E(""))};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Menu - Recipes"})}),c.jsx("div",{className:"flex flex-col gap-6",children:u?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading menu..."}):d?c.jsx("p",{className:"text-sm text-rose-300",children:d}):n?s.length===0?c.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["No menu recipes yet for ",n.name||"your household","."]})}):c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:["Menu at ",n?.name||"your home"]}),c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["These are the recipes you picked and planned for. You can mark them off as you cook them, or plan your next batch of meals"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/plan",children:"here"}),"."]})]}),s.map(T=>c.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-sky-100 bg-white/90 px-4 py-4 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:T.title||"Untitled recipe"}),T.description?c.jsx("p",{className:"mt-1 text-sm text-sky-600 dark:text-sky-300",children:T.description}):null]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx(Ce,{to:`/recipe/${T.id}/view`,className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"View"}),c.jsx("button",{type:"button",onClick:()=>U(T.id,"done"),disabled:m===T.id||k,className:"rounded-full border border-emerald-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 transition hover:border-emerald-400 hover:text-emerald-800 disabled:cursor-not-allowed disabled:opacity-60 dark:border-emerald-500/40 dark:text-emerald-200 dark:hover:border-emerald-400 dark:hover:text-emerald-100",children:"Done"}),c.jsx("button",{type:"button",onClick:()=>U(T.id,"delete"),disabled:m===T.id||k,className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 disabled:cursor-not-allowed disabled:opacity-60 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:m===T.id?"Removing...":"Delete"})]})]},T.id))]}):c.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view its menu."]})})}),k?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:S==="delete"?"Delete this recipe?":"Mark recipe as done?"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"This will remove the recipe from your menu."}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{v(!1),b(""),E("")},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),c.jsx("button",{type:"button",onClick:I,disabled:m===w,className:S==="delete"?"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400":"rounded-full bg-emerald-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-emerald-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-emerald-500 dark:hover:bg-emerald-400",children:m===w?"Removing...":S==="delete"?"Delete":"Done"})]})]})}):null]})}function Xf({sortBy:n,onSortByChange:t,sortDirection:s,onSortDirectionChange:a,selectedIngredients:u,onSelectedIngredientsChange:l,selectedServings:d,onSelectedServingsChange:f,recipes:m,className:y=""}){const k=x.useMemo(()=>{const S=new Set;return(m??[]).forEach(E=>{(E.ingredients??[]).forEach(C=>{const U=C?.name?.trim();U&&S.add(U)})}),Array.from(S).sort((E,C)=>E.localeCompare(C))},[m]),v=x.useMemo(()=>new Set(u??[]),[u]),w=x.useMemo(()=>{const S=new Set;return(m??[]).forEach(E=>{const C=E?.servings;C==null||C===""||S.add(C)}),Array.from(S).sort((E,C)=>E-C)},[m]),b=S=>{const E=v.has(S)?(u??[]).filter(C=>C!==S):[...u??[],S];l(E)};return c.jsxs("div",{className:`flex flex-col gap-3 md:flex-row md:items-end ${y}`.trim(),children:[c.jsxs("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:["Sort by",c.jsxs("select",{value:n,onChange:S=>t(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[c.jsx("option",{value:"alphabetical",children:"Alphabetical"}),c.jsx("option",{value:"cook-time",children:"Cook time"}),c.jsx("option",{value:"heat-level",children:"Heat level"})]})]}),c.jsxs("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:["Direction",c.jsxs("select",{value:s,onChange:S=>a(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[c.jsx("option",{value:"asc",children:"Ascending"}),c.jsx("option",{value:"desc",children:"Descending"})]})]}),c.jsxs("label",{className:"flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:["Serves",c.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[c.jsx("option",{value:"",children:"Any"}),w.map(S=>c.jsx("option",{value:String(S),children:S},S))]})]}),c.jsxs("div",{className:"flex min-w-[16rem] flex-col gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:[c.jsx("span",{children:"Ingredients"}),c.jsxs("details",{className:"group relative",children:[c.jsx("summary",{className:"cursor-pointer list-none rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none transition hover:border-sky-400 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100",children:u?.length?`${u.length} selected`:"All ingredients"}),c.jsxs("div",{className:"absolute z-20 mt-2 w-80 max-w-[90vw] rounded-lg border border-sky-200 bg-white p-3 shadow-xl shadow-black/10 dark:border-sky-800 dark:bg-sky-950 dark:shadow-black/30",children:[c.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[c.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:"Select one or more"}),c.jsx("button",{type:"button",onClick:()=>l([]),className:"rounded-full border border-sky-200 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Clear"})]}),k.length===0?c.jsx("p",{className:"text-xs normal-case tracking-normal text-sky-500 dark:text-sky-400",children:"No ingredients available."}):c.jsx("ul",{className:"max-h-56 overflow-auto pr-1 text-sm normal-case tracking-normal text-sky-800 dark:text-sky-100",children:k.map(S=>c.jsx("li",{children:c.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded px-2 py-1.5 hover:bg-sky-50 dark:hover:bg-sky-900/60",children:[c.jsx("input",{type:"checkbox",checked:v.has(S),onChange:()=>b(S),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-700 dark:bg-sky-900 dark:text-sky-200"}),c.jsx("span",{children:S})]})},S))})]})]})]})]})}function Vl(n,t,s){return n==null||n===""?t||s||"":t?`${n} ${t}`:s?`${n} ${s}`:`${n}`}function $n(n){return n==null||n===""?"":`${n} min`}function or(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function Xv(){const[n,t]=x.useState(null),[s,a]=x.useState([]),[u,l]=x.useState([]),[d,f]=x.useState([]),[m,y]=x.useState(new Map),[k,v]=x.useState(new Set),[w,b]=x.useState(!0),[S,E]=x.useState(""),[C,U]=x.useState(""),[I,T]=x.useState(""),[M,W]=x.useState("alphabetical"),[V,Q]=x.useState("asc"),[O,L]=x.useState([]),[K,ce]=x.useState(""),re=(P,F)=>{const X=new Set(P.map(Z=>Z.id)),z=new Set(P.flatMap(Z=>Z.ingredients.filter(ae=>ae.isSynergyCore).map(ae=>ae.id))),j=new Map,B=F.filter(Z=>!X.has(Z.id)).filter(Z=>Z.ingredients.some(ae=>ae.isSynergyCore&&z.has(ae.id))).map(Z=>{const ae=Z.ingredients.filter(he=>he.isSynergyCore&&z.has(he.id)).map(he=>he.name);return j.set(Z.id,ae),Z});f(B),y(j)};x.useEffect(()=>{let P=!0;async function F(){b(!0),E("");const{data:X,error:z}=await te.auth.getUser();if(!P)return;if(z){E(z.message??"Unable to load your account."),b(!1);return}const j=X?.user;if(!j){E("Please sign in to view your plan."),b(!1);return}const{data:B,error:Z}=await te.from("household_members").select("household_id").eq("user_id",j.id).limit(1).maybeSingle();if(Z){E(Z.message??"Unable to load household membership."),b(!1);return}if(!B?.household_id){t(null),a([]),b(!1);return}const{data:ae,error:he}=await te.from("households").select("id, name").eq("id",B.household_id).single();if(he){E(he.message??"Unable to load household."),b(!1);return}t(ae??null);const{data:be,error:je}=await te.from("plan_recipes").select("recipe_id").eq("household_id",B.household_id);if(je){E(je.message??"Unable to load plan recipes."),a([]),b(!1);return}const _e=(be??[]).map(Re=>Re.recipe_id).filter(Boolean);v(new Set(_e));let Ee=[];if(_e.length>0){const{data:Re,error:J}=await te.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, is_synergy_core ) )").in("id",_e).order("title");if(J){E(J.message??"Unable to load planned recipes."),a([]),b(!1);return}const ge=(Re??[]).map(Oe=>{const Ue=(Oe.recipe_ingredients??[]).map(qe=>({id:qe.ingredients?.id??qe.ingredient_id,name:qe.ingredients?.name??"Unnamed ingredient",quantity:qe.quantity,unit:qe.unit,defaultUnit:qe.ingredients?.default_unit,isSynergyCore:qe.ingredients?.is_synergy_core??!1,notes:qe.notes})).sort((qe,fr)=>qe.name.localeCompare(fr.name));return{id:Oe.id,title:Oe.title||"Untitled recipe",description:Oe.description,preMinutes:Oe.pre_minutes,cookMinutes:Oe.cook_minutes,servings:Oe.servings,heat:Oe.heat,ingredients:Ue}});Ee=ge,a(ge)}else a([]);const{data:ze,error:se}=await te.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, is_synergy_core ) )").order("title");if(se){E(se.message??"Unable to load recipes."),l([]),b(!1);return}const Ge=(ze??[]).map(Re=>{const J=(Re.recipe_ingredients??[]).map(ge=>({id:ge.ingredients?.id??ge.ingredient_id,name:ge.ingredients?.name??"Unnamed ingredient",quantity:ge.quantity,unit:ge.unit,defaultUnit:ge.ingredients?.default_unit,isSynergyCore:ge.ingredients?.is_synergy_core??!1,notes:ge.notes})).sort((ge,Oe)=>ge.name.localeCompare(Oe.name));return{id:Re.id,title:Re.title||"Untitled recipe",description:Re.description,preMinutes:Re.pre_minutes,cookMinutes:Re.cook_minutes,servings:Re.servings,heat:Re.heat,ingredients:J}});l(Ge),re(Ee,Ge),b(!1)}return F(),()=>{P=!1}},[]);const oe=async P=>{if(!n?.id||!P)return;U(P),E("");const{error:F}=await te.from("plan_recipes").insert({household_id:n.id,recipe_id:P});if(F){E(F.message??"Unable to add recipe to plan."),U("");return}U(""),v(X=>new Set([...X,P])),a(X=>{const z=u.find(B=>B.id===P);if(!z)return X;const j=[...X,z];return re(j,u),j})},fe=async P=>{if(!n?.id||!P)return;T(P),E("");const{error:F}=await te.from("plan_recipes").delete().eq("household_id",n.id).eq("recipe_id",P);if(F){E(F.message??"Unable to remove recipe from plan."),T("");return}T(""),v(X=>{const z=new Set(X);return z.delete(P),z}),a(X=>{const z=X.filter(j=>j.id!==P);return re(z,u),z})},xe=x.useMemo(()=>u.filter(P=>!k.has(P.id)),[u,k]),pe=x.useMemo(()=>{const P=O.length>0?xe.filter(j=>j.ingredients.some(B=>O.includes(B.name))):xe,F=K===""?null:Number.parseInt(K,10),z=[...F===null||Number.isNaN(F)?P:P.filter(j=>j.servings===F)].sort((j,B)=>{if(M==="cook-time"){const Z=j.cookMinutes??Number.POSITIVE_INFINITY,ae=B.cookMinutes??Number.POSITIVE_INFINITY;if(Z!==ae)return Z-ae}if(M==="heat-level"){const Z=j.heat??Number.POSITIVE_INFINITY,ae=B.heat??Number.POSITIVE_INFINITY;if(Z!==ae)return Z-ae}return j.title.localeCompare(B.title)});return V==="desc"&&z.reverse(),z},[O,K,M,V,xe]);return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Plan - Recipes"})}),c.jsx("div",{className:"flex flex-col gap-6",children:w?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading plan..."}):S?c.jsx("p",{className:"text-sm text-rose-300",children:S}):n?c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Planned recipes"}),c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Planned recipes help you create a"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/shop",children:"shopping list"}),"."]}),c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Once you have purchased all the ingredients in your plan you can promote the plan to the menu."})]}),c.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:[s.length," total"]})]}),s.length===0?c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["No planned recipes yet for ",n.name||"your household","."]}):c.jsx("div",{className:"flex flex-col gap-4",children:s.map(P=>c.jsxs("div",{className:"rounded-xl border border-sky-100 bg-white/90 px-4 py-4 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20",children:[c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:P.title}),P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""||P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""||P.servings!==null&&P.servings!==void 0&&P.servings!==""||or(P.heat)?c.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",$n(P.preMinutes)]}):null,P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",$n(P.cookMinutes)]}):null,P.servings!==null&&P.servings!==void 0&&P.servings!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",P.servings]}):null,or(P.heat)?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:or(P.heat)}):null]}):null]}),c.jsx("button",{type:"button",onClick:()=>fe(P.id),disabled:I===P.id,className:"w-full rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 disabled:cursor-not-allowed disabled:opacity-60 md:w-auto dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:I===P.id?"Removing...":"Remove"})]}),c.jsxs("details",{className:"mt-4",children:[c.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),P.ingredients.length===0?c.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):c.jsx("ul",{className:"mt-3 flex flex-wrap gap-2 text-sm text-sky-700 dark:text-sky-200",children:P.ingredients.map(F=>c.jsxs("li",{className:"flex items-center gap-2 rounded-full border border-sky-100 bg-sky-50 px-3 py-1.5 dark:border-sky-900 dark:bg-sky-900/50",children:[c.jsx("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:F.name}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:Vl(F.quantity,F.unit,F.defaultUnit)}),F.notes?c.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:F.notes}):null]},`${P.id}-${F.id}`))})]})]},P.id))}),s.length>0?c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx(Ce,{to:"/shop",className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"View shopping list"}),c.jsx(Ce,{to:"/migrate",className:"rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Move to menu"})]}):null,d.length>0?c.jsxs("section",{className:"flex flex-col gap-3",children:[c.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Synergy recipes"}),c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"These recipes share core ingredients with your plan."}),c.jsx("div",{className:"flex flex-col gap-3",children:d.map(P=>c.jsx("div",{className:"rounded-xl border border-sky-100 bg-white/90 px-4 py-3 shadow-sm shadow-black/5 backdrop-blur dark:border-sky-900 dark:bg-sky-950/70 dark:shadow-black/20",children:c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:P.title}),P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""||P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""||P.servings!==null&&P.servings!==void 0&&P.servings!==""||or(P.heat)?c.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",$n(P.preMinutes)]}):null,P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",$n(P.cookMinutes)]}):null,P.servings!==null&&P.servings!==void 0&&P.servings!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",P.servings]}):null,or(P.heat)?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:or(P.heat)}):null]}):null,m.get(P.id)?.length?c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.get(P.id).map(F=>c.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:F},`${P.id}-${F}`))}):null,c.jsxs("details",{className:"mt-3",children:[c.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),P.ingredients.length===0?c.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):c.jsx("ul",{className:"mt-3 flex flex-wrap gap-2 text-sm text-sky-700 dark:text-sky-200",children:P.ingredients.map(F=>c.jsxs("li",{className:"flex items-center gap-2 rounded-full border border-sky-100 bg-sky-50 px-3 py-1.5 dark:border-sky-900 dark:bg-sky-900/50",children:[c.jsx("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:F.name}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:Vl(F.quantity,F.unit,F.defaultUnit)}),F.notes?c.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:F.notes}):null]},`${P.id}-synergy-${F.id}`))})]})]}),c.jsx("button",{type:"button",onClick:()=>oe(P.id),disabled:C===P.id,className:"w-full rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 md:w-auto dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:C===P.id?"Adding...":"Add"})]})},`synergy-${P.id}`))})]}):null,c.jsxs("section",{children:[c.jsx("h2",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:"Add other recipes"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Review each recipe and add it to the plan."}),c.jsx(Xf,{className:"mt-4",sortBy:M,onSortByChange:W,sortDirection:V,onSortDirectionChange:Q,selectedIngredients:O,onSelectedIngredientsChange:L,selectedServings:K,onSelectedServingsChange:ce,recipes:xe}),pe.length===0?c.jsx("p",{className:"mt-4 text-sm text-sky-500 dark:text-sky-400",children:"No recipes available for this filter."}):c.jsx("div",{className:"mt-4 flex flex-col gap-4",children:pe.map(P=>c.jsxs("div",{className:"rounded-xl border border-sky-100 bg-white px-4 py-4 dark:border-sky-900 dark:bg-sky-950/70",children:[c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-base font-semibold text-sky-900 dark:text-sky-100",children:P.title}),P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""||P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""||P.servings!==null&&P.servings!==void 0&&P.servings!==""||or(P.heat)?c.jsxs("div",{className:"mt-2 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[P.preMinutes!==null&&P.preMinutes!==void 0&&P.preMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Prep ",$n(P.preMinutes)]}):null,P.cookMinutes!==null&&P.cookMinutes!==void 0&&P.cookMinutes!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Cook ",$n(P.cookMinutes)]}):null,P.servings!==null&&P.servings!==void 0&&P.servings!==""?c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:["Serves ",P.servings]}):null,or(P.heat)?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:or(P.heat)}):null]}):null,O.length>0?c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:P.ingredients.filter(F=>O.includes(F.name)).map(F=>c.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:F.name},`${P.id}-filter-${F.id}`))}):null]}),c.jsx("button",{type:"button",onClick:()=>oe(P.id),disabled:C===P.id,className:"w-full rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 md:w-auto dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:C===P.id?"Adding...":"Add"})]}),c.jsx("div",{className:"mt-4",children:c.jsxs("details",{children:[c.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-sky-700 transition hover:text-sky-900 dark:text-sky-200 dark:hover:text-white",children:"Ingredients"}),P.ingredients.length===0?c.jsx("p",{className:"mt-3 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients listed."}):c.jsx("ul",{className:"mt-3 flex flex-wrap gap-2 text-sm text-sky-700 dark:text-sky-200",children:P.ingredients.map(F=>c.jsxs("li",{className:"flex items-center gap-2 rounded-full border border-sky-100 bg-sky-50 px-3 py-1.5 dark:border-sky-900 dark:bg-sky-900/50",children:[c.jsx("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:F.name}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-600 dark:text-sky-300",children:Vl(F.quantity,F.unit,F.defaultUnit)}),F.notes?c.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:F.notes}):null]},`${P.id}-add-${F.id}`))})]})})]},`add-${P.id}`))})]})]}):c.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view its plan."]})})})]})}function sf(n){return n==null||n===""?"":`${n} min`}function Zv(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function ex(){const[n,t]=x.useState([]),[s,a]=x.useState(!0),[u,l]=x.useState(""),[d,f]=x.useState(!1),[m,y]=x.useState(null),[k,v]=x.useState(""),[w,b]=x.useState(""),[S,E]=x.useState("alphabetical"),[C,U]=x.useState("asc"),[I,T]=x.useState([]),[M,W]=x.useState("");x.useEffect(()=>{let L=!0;async function K(){a(!0),l("");const{data:ce,error:re}=await te.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat, recipe_ingredients ( ingredients ( id, name ) )");if(L){if(re)l(re.message??"Unable to load recipes."),t([]);else{const oe=(ce??[]).map(fe=>({...fe,ingredients:(fe.recipe_ingredients??[]).map(xe=>({id:xe.ingredients?.id??"",name:xe.ingredients?.name??""})).filter(xe=>xe.name)}));t(oe)}a(!1)}}return K(),()=>{L=!1}},[]);const V=L=>{L?.id&&(y(L),f(!0),b(""))},Q=async()=>{if(!m?.id)return;v(m.id),b("");const{error:L}=await te.from("recipes").delete().eq("id",m.id);if(L){const K=L.code==="23503"||/foreign key|recipe_ingredients|recipe_steps|menu_recipes|plan_recipes|constraint/i.test(L.message||"");b(K?"Cannot delete this recipe because it is still used in related data.":L.message??"Unable to delete recipe."),v("");return}t(K=>K.filter(ce=>ce.id!==m.id)),v(""),f(!1),y(null),b("")},O=x.useMemo(()=>{const L=I.length>0?n.filter(oe=>oe.ingredients?.some(fe=>I.includes(fe.name))):n,K=M===""?null:Number.parseInt(M,10),re=[...K===null||Number.isNaN(K)?L:L.filter(oe=>oe.servings===K)].sort((oe,fe)=>{if(S==="cook-time"){const xe=oe.cook_minutes??Number.POSITIVE_INFINITY,pe=fe.cook_minutes??Number.POSITIVE_INFINITY;if(xe!==pe)return xe-pe}if(S==="heat-level"){const xe=oe.heat??Number.POSITIVE_INFINITY,pe=fe.heat??Number.POSITIVE_INFINITY;if(xe!==pe)return xe-pe}return(oe.title||"Untitled Recipe").localeCompare(fe.title||"Untitled Recipe")});return C==="desc"&&re.reverse(),re},[n,I,M,S,C]);return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Recipes - Recipes"})}),c.jsxs("div",{className:"flex flex-col gap-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"All Recipes"}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Recipes are shared with all users."})]}),c.jsx(Xf,{sortBy:S,onSortByChange:E,sortDirection:C,onSortDirectionChange:U,selectedIngredients:I,onSelectedIngredientsChange:T,selectedServings:M,onSelectedServingsChange:W,recipes:n}),s?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading recipes..."}):u?c.jsx("p",{className:"text-sm text-rose-300",children:u}):O.length===0?c.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:[c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"No recipes match this filter."}),c.jsx("p",{className:"text-xs text-sky-500 dark:text-sky-500",children:"Try another ingredient filter or add a new recipe."})]}):c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[O.map(L=>{const K=[{label:"Prep",value:L.pre_minutes,display:sf(L.pre_minutes)},{label:"Cook",value:L.cook_minutes,display:sf(L.cook_minutes)},{label:"Serves",value:L.servings,display:L.servings}].filter(re=>re.value!==null&&re.value!==void 0&&re.value!==""),ce=Zv(L.heat);return c.jsx("div",{className:"rounded-xl border border-sky-200 bg-white p-5 dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("div",{className:"flex h-full flex-col gap-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-sky-900 dark:text-sky-100",children:L.title||"Untitled Recipe"}),I.length>0?c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.ingredients.filter(re=>I.includes(re.name)).map(re=>c.jsx("span",{className:"rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-700 dark:border-emerald-700/60 dark:bg-emerald-900/40 dark:text-emerald-200",children:re.name},`${L.id}-filter-${re.id||re.name}`))}):null,L.description?c.jsx("p",{className:"mt-1 text-sm text-sky-500 dark:text-sky-400",children:L.description}):null]}),K.length>0||ce?c.jsxs("div",{className:"mt-auto flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[K.map(re=>c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:[re.label," ",re.display]},re.label)),ce?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:ce}):null]}):null,c.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[c.jsx(Ce,{to:`/recipe/${L.id}/view`,className:"rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"View"}),c.jsx(Ce,{to:`/recipe/${L.id}/edit`,className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"}),c.jsx("button",{type:"button",onClick:()=>V(L),className:"rounded-full border border-rose-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-rose-600 transition hover:border-rose-400 hover:text-rose-700 dark:border-rose-500/40 dark:text-rose-200 dark:hover:border-rose-400 dark:hover:text-rose-100",children:"Delete"})]})]})},L.id)}),c.jsxs(Ce,{to:"/create",className:"group flex flex-col items-center justify-center gap-2 rounded-xl border border-dashed border-sky-300 bg-sky-50 px-5 py-4 text-center transition hover:border-sky-400 hover:bg-sky-100 dark:border-sky-700 dark:bg-sky-900/40 dark:hover:border-sky-500 dark:hover:bg-sky-900/70",children:[c.jsx("span",{className:"text-3xl font-semibold leading-none text-sky-700 transition group-hover:text-sky-900 dark:text-sky-200 dark:group-hover:text-white",children:"+"}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-sky-600 dark:text-sky-300",children:"Create Recipe"})]})]})]}),d&&m?c.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-sky-950/60 px-6",children:c.jsxs("div",{className:"w-full max-w-md rounded-2xl border border-sky-200 bg-white p-6 shadow-2xl dark:border-sky-800 dark:bg-sky-950",children:[c.jsx("h2",{className:"text-xl font-semibold text-sky-900 dark:text-sky-100",children:"Delete this recipe?"}),c.jsxs("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:["You are about to remove"," ",c.jsx("span",{className:"font-semibold",children:m.title||"Untitled Recipe"}),"."]}),w?c.jsx("p",{className:"mt-3 text-sm text-rose-300",children:w}):null,c.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>{k||(f(!1),y(null),b(""))},className:"rounded-full border border-sky-200 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",disabled:!!k,children:"Cancel"}),c.jsx("button",{type:"button",onClick:Q,className:"rounded-full bg-rose-600 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-rose-500 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-rose-500 dark:hover:bg-rose-400",disabled:!!k,children:k===m.id?"Deleting...":"Delete"})]})]})}):null]})}const af=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"],Us="Unclassified";function tx(n){return Number.isInteger(n)?n.toString():n.toFixed(2).replace(/\.?0+$/,"")}function rx(n,t){const s=encodeURIComponent(t?.trim()??"");return s?n==="Sainsburys"?`https://www.sainsburys.co.uk/gol-ui/SearchResults/${s}`:n==="Waitrose"?`https://www.waitrose.com/ecom/shop/search?searchTerm=${s}`:n==="Ocado"?`https://www.ocado.com/search?q=${s}`:n==="Asda"?`https://groceries.asda.com/search/${s}`:n==="Tesco"?`https://www.tesco.com/groceries/en-GB/search?query=${s}`:"":""}function of(n){const t=new Map;(n??[]).forEach(l=>{const d=l.section?.trim()||Us;t.has(d)||t.set(d,[]),t.get(d).push(l)});const s=af.filter(l=>t.has(l)),a=Array.from(t.keys()).filter(l=>l!==Us&&!af.includes(l)).sort((l,d)=>l.localeCompare(d));return[...s,...a,...t.has(Us)?[Us]:[]].map(l=>({section:l,items:(t.get(l)??[]).slice().sort((d,f)=>d.name.localeCompare(f.name))}))}function nx(){const[n,t]=x.useState(null),[s,a]=x.useState([]),[u,l]=x.useState(!0),[d,f]=x.useState(""),[m,y]=x.useState(""),[k,v]=x.useState({}),[w,b]=x.useState(""),S=x.useMemo(()=>{const O=new Map;return s.forEach(L=>{L.ingredients.forEach(K=>{const ce=K.name||"Unnamed ingredient",re=K.unit||K.defaultUnit||"",oe=`${ce}|||${re}`,fe=K.quantity===""||K.quantity===null?null:Number(K.quantity),xe=Number.isFinite(fe);O.has(oe)||O.set(oe,{name:ce,unit:re,supermarketSection:K.supermarketSection||"",quantity:0,hasNumeric:!1,quantityNotes:[],notes:new Set});const pe=O.get(oe);xe?(pe.quantity+=fe,pe.hasNumeric=!0):K.quantity!==null&&K.quantity!==void 0&&K.quantity!==""&&pe.quantityNotes.push(String(K.quantity)),K.notes&&pe.notes.add(K.notes),!pe.supermarketSection&&K.supermarketSection&&(pe.supermarketSection=K.supermarketSection)})}),Array.from(O.values()).map(L=>{const K=[];L.hasNumeric&&K.push(tx(L.quantity)),L.quantityNotes.length>0&&K.push(...L.quantityNotes);const ce=K.length>0?K.join(" + "):"",re=L.unit?` ${L.unit}`:"",oe=ce?`${ce}${re} ${L.name}`:L.name;return{...L,display:oe,notes:Array.from(L.notes).join("; "),section:L.supermarketSection||Us}})},[s]),E=x.useMemo(()=>s.map(O=>({id:O.id,title:O.title})).filter(O=>O.title).sort((O,L)=>O.title.localeCompare(L.title)),[s]),C=x.useMemo(()=>E.map(O=>O.title),[E]),U=x.useMemo(()=>S.filter(O=>!k[`${O.name}|||${O.unit}`]),[S,k]),I=x.useMemo(()=>S.filter(O=>k[`${O.name}|||${O.unit}`]),[S,k]),T=x.useMemo(()=>of(U),[U]),M=x.useMemo(()=>of(I),[I]);x.useEffect(()=>{let O=!0;async function L(){l(!0),f("");const{data:K,error:ce}=await te.auth.getUser();if(!O)return;if(ce){f(ce.message??"Unable to load your account."),l(!1);return}const re=K?.user;if(!re){f("Please sign in to view your shopping list."),l(!1);return}const{data:oe,error:fe}=await te.from("household_members").select("household_id").eq("user_id",re.id).limit(1).maybeSingle();if(fe){f(fe.message??"Unable to load household membership."),l(!1);return}if(!oe?.household_id){t(null),a([]),l(!1);return}const{data:xe,error:pe}=await te.from("households").select("id, name").eq("id",oe.household_id).single();if(pe){f(pe.message??"Unable to load household."),l(!1);return}t(xe??null);const{data:P,error:F}=await te.from("plan_recipes").select("recipe_id").eq("household_id",oe.household_id);if(F){f(F.message??"Unable to load plan recipes."),a([]),l(!1);return}const X=(P??[]).map(Z=>Z.recipe_id).filter(Boolean);if(X.length===0){a([]),l(!1);return}const{data:z,error:j}=await te.from("recipes").select("id, title, recipe_ingredients ( quantity, unit, notes, ingredients ( id, name, default_unit, supermarket_section ) )").in("id",X).order("title");if(j){f(j.message??"Unable to load planned recipes."),a([]),l(!1);return}const B=(z??[]).map(Z=>{const ae=(Z.recipe_ingredients??[]).map(he=>({id:he.ingredients?.id??he.ingredient_id,name:he.ingredients?.name??"Unnamed ingredient",quantity:he.quantity,unit:he.unit,defaultUnit:he.ingredients?.default_unit,supermarketSection:he.ingredients?.supermarket_section,notes:he.notes})).sort((he,be)=>he.name.localeCompare(be.name));return{id:Z.id,title:Z.title||"Untitled recipe",ingredients:ae}});a(B),l(!1)}return L(),()=>{O=!1}},[]);const W=async()=>{if(U.length===0)return;const O=C.length>0?[`Recipes: ${C.join(", ")}`,""]:[],L=U.map(K=>{const ce=K.notes?` (${K.notes})`:"";return`- ${K.display}${ce}`});try{await navigator.clipboard.writeText([...O,...L].join(`
`)),y("Copied!"),setTimeout(()=>y(""),2e3)}catch{y("Copy failed"),setTimeout(()=>y(""),2e3)}},V=()=>{U.length!==0&&window.print()},Q=O=>{v(L=>({...L,[O]:!L[O]}))};return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:"Shop - Recipes"})}),c.jsx("style",{children:`
        @media print {
          body * {
            visibility: hidden;
          }
          .print-area,
          .print-area * {
            visibility: visible;
          }
          .print-area {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
          .print-area > div:first-child {
            column-span: all;
            border: none !important;
            background: transparent !important;
            padding: 0 0 0.5rem 0 !important;
            color: #000 !important;
            font-size: 0.85rem !important;
            text-transform: none !important;
            letter-spacing: normal !important;
          }
          .print-area > div:first-child > div:first-child {
            color: #000 !important;
            font-weight: 400 !important;
            text-transform: none !important;
            letter-spacing: normal !important;
          }
          .print-area > div:first-child ul {
            border: none !important;
            background: transparent !important;
            padding: 0 0 0 1.25rem !important;
            color: #000 !important;
          }
          .print-area > div:first-child li {
            color: #000 !important;
          }
          .print-area > div:nth-child(2) {
            column-span: all;
            color: #000 !important;
            font-size: 0.8rem !important;
            text-transform: none !important;
            letter-spacing: normal !important;
            font-weight: 400 !important;
            margin: 0 0 0.35rem 0 !important;
          }
          .print-area ul {
            list-style: disc;
            padding-left: 1.5rem;
            column-count: 2;
            column-gap: 2.5rem;
          }
          .print-area li {
            border: none !important;
            background: transparent !important;
            padding: 0.15rem 0 !important;
          }
          .print-area span {
            color: #000 !important;
          }
          .print-area li,
          .print-area span {
            font-weight: 400 !important;
            font-size: 12px !important;
          }
          .no-print {
            display: none !important;
          }
          .print-only {
            display: block !important;
          }
        }
        .print-only {
          display: none;
        }
      `}),c.jsx("div",{className:"flex flex-col gap-6",children:u?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading shopping list..."}):d?c.jsx("p",{className:"text-sm text-rose-300",children:d}):n?c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4 md:flex-nowrap",children:[c.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:"Shopping List"}),c.jsx("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:"Tick off what's already in your kitchen, then copy what's left to send a helper, print it for a proper paper run, or pick a supermarket to quickly order online."}),c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["To change recipes on this list, update your"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/plan",children:"plan"}),"."]}),E.length>0?c.jsxs("div",{className:"no-print mt-1 flex flex-col gap-2",children:[c.jsx("div",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:"Recipes:"}),c.jsx("ul",{className:"rounded-lg border border-sky-100 bg-white px-5 py-3 pl-8 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-200",children:E.map(O=>c.jsx("li",{className:"list-disc pl-1",children:c.jsx(Ce,{to:`/recipe/${O.id}/view`,className:"underline decoration-sky-300 underline-offset-2 hover:text-sky-900 dark:decoration-sky-700 dark:hover:text-white",children:O.title})},O.id))}),c.jsxs("label",{className:"mt-2 flex w-full max-w-xs flex-col gap-2 text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:["Online supermarket:",c.jsxs("select",{value:w,onChange:O=>b(O.target.value),className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm font-medium normal-case tracking-normal text-sky-900 outline-none focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:focus:border-white dark:focus:ring-white/40",children:[c.jsx("option",{value:"",children:"None"}),c.jsx("option",{value:"Sainsburys",children:"Sainsburys"}),c.jsx("option",{value:"Waitrose",children:"Waitrose"}),c.jsx("option",{value:"Ocado",children:"Ocado"}),c.jsx("option",{value:"Asda",children:"Asda"}),c.jsx("option",{value:"Tesco",children:"Tesco"})]})]})]}):null]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:ml-auto md:flex-nowrap md:justify-end",children:[m?c.jsx("span",{className:"no-print text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:m}):null,c.jsx("button",{type:"button",onClick:W,disabled:S.length===0,className:"no-print rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Copy"}),c.jsx("button",{type:"button",onClick:V,disabled:S.length===0,className:"no-print rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Print"}),S.length>0?c.jsx(Ce,{to:"/migrate",className:"no-print rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Move to menu"}):null]})]}),S.length===0?c.jsxs("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/40",children:[c.jsx("p",{className:"text-sm font-semibold text-sky-700 dark:text-sky-200",children:"No items yet."}),c.jsx("p",{className:"mt-2 text-sm text-sky-600 dark:text-sky-300",children:"Add recipes to your plan to generate a shopping list."}),c.jsx(Ce,{to:"/plan",className:"mt-4 inline-flex rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Go to plan"})]}):c.jsxs("div",{className:"flex flex-col gap-2 text-sm text-sky-700 dark:text-sky-200",children:[c.jsxs("div",{className:"print-area flex flex-col gap-3",children:[E.length>0?c.jsxs("div",{className:"print-only flex flex-col gap-2",children:[c.jsx("div",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:"Recipes:"}),c.jsx("ul",{className:"rounded-lg border border-sky-100 bg-white px-5 py-3 pl-8 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-950/60 dark:text-sky-200",children:E.map(O=>c.jsx("li",{className:"list-disc pl-1",children:c.jsx(Ce,{to:`/recipe/${O.id}/view`,className:"underline decoration-sky-300 underline-offset-2 hover:text-sky-900 dark:decoration-sky-700 dark:hover:text-white",children:O.title})},O.id))})]}):null,c.jsx("div",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:"Ingredient to Buy:"}),c.jsx("div",{className:"rounded-lg border border-sky-100 bg-white px-4 py-4 dark:border-sky-800 dark:bg-sky-950/60",children:c.jsx("div",{className:"flex flex-col gap-4",children:T.map(O=>c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:O.section}),c.jsx("ul",{className:"divide-y divide-sky-200 dark:divide-sky-800",children:O.items.map(L=>{const K=`${L.name}|||${L.unit}`,ce=rx(w,L.name);return c.jsx("li",{className:"py-2",children:c.jsxs("label",{className:"flex w-full items-center gap-3",children:[c.jsx("input",{type:"checkbox",checked:!!k[K],onChange:()=>Q(K),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900 dark:border-sky-700 dark:text-white dark:focus:ring-white"}),c.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:[c.jsxs("span",{className:"font-semibold text-sky-900 dark:text-sky-100",children:[L.display,L.notes?` (${L.notes})`:""]}),ce?c.jsx("a",{href:ce,target:"_blank",rel:"noreferrer","aria-label":`Search ${w} for ${L.name}`,title:`Search ${w}`,className:"no-print text-xs font-semibold text-sky-600 underline decoration-sky-300 underline-offset-2 transition hover:text-sky-900 dark:text-sky-300 dark:decoration-sky-700 dark:hover:text-white",children:"(Buy)"}):null]})]})},K)})})]},`unchecked-${O.section}`))})})]}),I.length>0?c.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[c.jsx("p",{className:"text-sm font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:"Ingredients you already have:"}),c.jsx("div",{className:"rounded-lg border border-sky-100 bg-white px-4 py-4 dark:border-sky-800 dark:bg-sky-950/60",children:c.jsx("div",{className:"flex flex-col gap-4",children:M.map(O=>c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 dark:text-sky-200",children:O.section}),c.jsx("ul",{className:"divide-y divide-sky-200 dark:divide-sky-800",children:O.items.map(L=>{const K=`${L.name}|||${L.unit}`;return c.jsx("li",{className:"py-2 text-sky-500 dark:text-sky-400",children:c.jsxs("label",{className:"flex w-full items-center gap-3",children:[c.jsx("input",{type:"checkbox",checked:!!k[K],onChange:()=>Q(K),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900 dark:border-sky-700 dark:text-white dark:focus:ring-white"}),c.jsx("div",{className:"flex flex-1 flex-wrap items-center gap-2",children:c.jsxs("span",{className:"font-semibold",children:[L.display,L.notes?` (${L.notes})`:""]})})]})},`checked-${K}`)})})]},`checked-${O.section}`))})})]}):null]})]}):c.jsx("div",{className:"rounded-2xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center dark:border-sky-800 dark:bg-sky-900/50",children:c.jsxs("p",{className:"text-sm text-sky-600 dark:text-sky-300",children:["Join a"," ",c.jsx(Ce,{className:"font-semibold text-sky-900 underline dark:text-white",to:"/household",children:"household"})," ","to view your shopping list."]})})})]})}const sx=["Fruit & Vegtables","Fridge","Bakery","Cupboard","Snacks and Sweets","Alcohol","Freezer"];function ja(n){return n.trim().toLowerCase()}function ix(n){const t=new Map;return n.forEach(s=>{if(s?.id&&!t.has(s.id)){t.set(s.id,s);return}const a=s?.name?ja(s.name):null;a&&!t.has(a)&&t.set(a,s)}),Array.from(t.values())}function ax(n){const t=new Map;return n.forEach(s=>{if(s?.ingredient_id&&!t.has(s.ingredient_id)){t.set(s.ingredient_id,s);return}const a=s?.ingredients?.name?ja(s.ingredients.name):null;a&&!t.has(a)&&t.set(a,s)}),Array.from(t.values())}function ox({recipeId:n}){const[t,s]=x.useState(!0),[a,u]=x.useState(""),[l,d]=x.useState([]),[f,m]=x.useState(!1),[y,k]=x.useState(""),[v,w]=x.useState(""),[b,S]=x.useState(""),[E,C]=x.useState(""),[U,I]=x.useState(!1),[T,M]=x.useState(null),[W,V]=x.useState(null),[Q,O]=x.useState(""),[L,K]=x.useState(""),[ce,re]=x.useState(""),[oe,fe]=x.useState({}),[xe,pe]=x.useState([]),[P,F]=x.useState(!1),[X,z]=x.useState(""),j=x.useMemo(()=>ja(y),[y]),B=x.useMemo(()=>j.length>0&&xe.some(J=>ja(J.name)===j),[j,xe]);async function Z(){if(!n)return;s(!0),u("");const{data:J,error:ge}=await te.from("recipe_ingredients").select("ingredient_id, quantity, unit, notes, ingredients ( id, name, default_unit, default_quantity, supermarket_section )").eq("recipe_id",n);if(ge)u(ge.message??"Unable to load ingredients."),d([]);else{const Oe=(J??[]).slice().sort((Ue,qe)=>{const fr=Ue.ingredients?.name??"",$r=qe.ingredients?.name??"";return fr.localeCompare($r)});d(ax(Oe))}s(!1)}x.useEffect(()=>{Z()},[n]),x.useEffect(()=>{let J=!0,ge;async function Oe(){if(!j){pe([]),F(!1);return}F(!0);const{data:Ue,error:qe}=await te.from("ingredients").select("id, name, default_unit, default_quantity, supermarket_section").ilike("name",`%${j}%`).order("name").limit(8);if(J){if(qe){pe([]),F(!1);return}pe(ix(Ue??[])),F(!1)}}return ge=setTimeout(()=>{Oe()},1e3),()=>{ge&&clearTimeout(ge),J=!1}},[j]),x.useEffect(()=>{M(null),V(null),O(""),K(""),re(""),fe({}),z("")},[j]);function ae(J){if(J===""||J===null||J===void 0)return null;const ge=Number(J);return Number.isNaN(ge)?null:ge}function he(J){if(J===""||J===null||J===void 0)return null;const ge=Number.parseInt(J,10);return Number.isNaN(ge)||String(ge)!==String(J).trim()||ge<=0?null:ge}function be(){k(""),w(""),S(""),C(""),I(!1),M(null),V(null),O(""),K(""),re(""),fe({}),pe([]),m(!1)}async function je(J){if(!n)return;z("");const{error:ge}=await te.from("recipe_ingredients").insert({recipe_id:n,ingredient_id:J,quantity:ae(Q),unit:L?.trim()||null,notes:ce.trim()||null});if(ge){z(ge.message??"Unable to add ingredient.");return}be(),await Z()}async function _e(J){if(!n||!J)return;z("");const{error:ge}=await te.from("recipe_ingredients").delete().eq("recipe_id",n).eq("ingredient_id",J);if(ge){z(ge.message??"Unable to remove ingredient.");return}await Z()}async function Ee(){if(!j)return;z("");const J=he(b);if(String(b??"").trim()!==""&&J===null){z("Default quantity must be a whole number greater than 0.");return}const{data:Oe,error:Ue}=await te.from("ingredients").insert({name:y.trim(),default_unit:v,default_quantity:J,supermarket_section:E||null,is_synergy_core:U}).select("id").single();if(Ue){z(Ue.message??"Unable to create ingredient.");return}await je(Oe.id)}function ze(J){z(""),M("existing"),V(J),O(J.default_quantity??""),K(J.default_unit||"count"),fe({})}function se(){j&&(z(""),M("new"),V(null),fe({}))}function Ge(J){K(J),T==="new"&&w(J)}function Re(){const J={};return(!Q||ae(Q)===null)&&(J.quantity="Quantity is required."),L?.trim()||(J.unit="Unit is required."),fe(J),Object.keys(J).length===0}return c.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[c.jsx("header",{className:"mb-2",children:c.jsx("h2",{className:"text-xl font-semibold",children:"Ingredients"})}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"flex items-center justify-between gap-3",children:c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:t&&"Loading ingredients..."})}),a?c.jsx("p",{className:"text-sm text-rose-300",children:a}):null,l.length===0&&!t?c.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center text-sm text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-400",children:"No ingredients yet."}):null,l.length>0?c.jsx("ul",{className:"grid gap-2",children:l.map(J=>c.jsxs("li",{className:"flex items-center justify-between gap-3 rounded-xl border border-sky-200 bg-white px-4 py-3 text-sm text-sky-700 dark:border-sky-800 dark:bg-sky-900/50 dark:text-sky-200",children:[c.jsx("span",{children:(()=>{const ge=J.ingredients?.name??"Unnamed ingredient";if(J.quantity===null||J.quantity===void 0)return ge;const Oe=J.unit||J.ingredients?.default_unit,Ue=Oe?.toLowerCase().trim(),qe=Ue&&Ue!=="count";return`${[J.quantity,qe?Oe:null].filter(Boolean).join(" ")}  ${ge}`})()}),c.jsx("button",{type:"button",onClick:()=>_e(J.ingredient_id),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-semibold uppercase tracking-[0.12em] text-rose-600 transition hover:border-rose-300 hover:text-rose-700 dark:border-rose-900/60 dark:text-rose-300 dark:hover:border-rose-700 dark:hover:text-rose-200",children:"Delete"})]},J.ingredient_id??J.ingredients?.id??J.ingredients?.name))}):null,f?c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx("hr",{className:"my-4 border-sky-200 dark:border-sky-800"}),T===null?c.jsxs("label",{className:"form-label",children:["Ingredient name",c.jsx("input",{type:"text",value:y,onChange:J=>k(J.target.value),placeholder:"e.g. Smoked paprika",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none transition focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"})]}):null,c.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[T===null?c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:se,disabled:!j||B,className:"w-full rounded-lg border border-dashed border-sky-300 px-3 py-2 text-left text-sm text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:border-sky-200 disabled:text-sky-400 dark:border-sky-600 dark:text-sky-200 dark:hover:border-sky-400 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-500",children:["Add new ingredient ",y.trim()||"",""]}),xe.map(J=>c.jsxs("button",{type:"button",onClick:()=>ze(J),className:"w-full rounded-lg border border-sky-200 bg-white px-3 py-2 text-left text-sm text-sky-700 transition hover:border-sky-400 hover:bg-sky-50 dark:border-sky-800 dark:bg-sky-950/70 dark:text-sky-200 dark:hover:border-sky-600 dark:hover:bg-sky-900",children:["Use existing: ",J.name]},J.id))]}):null,T==="new"||T==="existing"?c.jsx("div",{className:"flex flex-col gap-3 text-center text-sm text-sky-700 dark:text-sky-200",children:c.jsxs("div",{className:"text-base font-semibold text-sky-800 dark:text-sky-200",children:["Adding ",W?.name||y.trim()||"ingredient"]})}):null]}),T==="new"||T==="existing"?c.jsxs("div",{className:"flex flex-col gap-3 text-left text-sm text-sky-700 dark:text-sky-200",children:[c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsxs("label",{className:"form-label",children:["Recipe Quantity",c.jsx("input",{type:"number",inputMode:"decimal",value:Q,onChange:J=>O(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"}),oe.quantity?c.jsx("span",{className:"text-[11px] text-rose-500",children:oe.quantity}):null]}),c.jsxs("label",{className:"form-label",children:["Recipe Unit",c.jsxs("select",{value:L,onChange:J=>Ge(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[c.jsx("option",{value:"",children:"Select unit"}),c.jsx("option",{value:"count",children:"count"}),c.jsx("option",{value:"g",children:"g"}),c.jsx("option",{value:"tsp",children:"tsp"}),c.jsx("option",{value:"tbsp",children:"tbsp"}),c.jsx("option",{value:"cup",children:"cup"})]}),oe.unit?c.jsx("span",{className:"text-[11px] text-rose-500",children:oe.unit}):null]})]}),c.jsxs("label",{className:"form-label",children:["Recipe Ingredient Notes",c.jsx("input",{type:"text",value:ce,onChange:J=>re(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"})]}),T==="new"?c.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[c.jsx("p",{className:"rounded-lg border border-sky-200 bg-sky-50 px-3 py-2 text-xs text-sky-600 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:"These optional settings apply to the ingredient itself (not just this recipe) and will affect every recipe that uses it."}),c.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[c.jsxs("label",{className:"form-label",children:["Default Unit",c.jsxs("select",{value:v,onChange:J=>w(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[c.jsx("option",{value:"",children:"Select unit"}),c.jsx("option",{value:"count",children:"count"}),c.jsx("option",{value:"g",children:"g"}),c.jsx("option",{value:"tsp",children:"tsp"}),c.jsx("option",{value:"tbsp",children:"tbsp"}),c.jsx("option",{value:"cup",children:"cup"})]})]}),c.jsxs("label",{className:"form-label",children:["Default Quantity",c.jsx("input",{type:"number",min:"1",step:"1",value:b,onChange:J=>S(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",placeholder:"1"})]}),c.jsxs("label",{className:"form-label",children:["Supermarket Section",c.jsxs("select",{value:E,onChange:J=>C(J.target.value),className:"rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400",children:[c.jsx("option",{value:"",children:"Select section"}),sx.map(J=>c.jsx("option",{value:J,children:J},J))]})]}),c.jsxs("label",{className:"form-label",children:["Fresh (synergy core)",c.jsxs("div",{className:"flex items-center gap-2 rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100",children:[c.jsx("input",{type:"checkbox",checked:U,onChange:J=>I(J.target.checked),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-600 dark:bg-sky-950 dark:text-white dark:focus:ring-white/30"}),c.jsx("span",{children:U?"Yes":"No"})]})]})]})]}):null,c.jsx("button",{type:"button",onClick:()=>{Re()&&(T==="existing"&&W?je(W.id):T==="new"&&Ee())},className:"mt-3 w-full rounded-lg border border-sky-300 bg-sky-900 px-3 py-2 text-sm font-semibold text-white transition hover:bg-sky-800 dark:border-sky-700 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100",children:T==="new"?"Add New Ingredient":"Add Ingredient"})]}):null,P?c.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-sky-500 dark:text-sky-400",children:[c.jsx("span",{className:"h-3 w-3 animate-spin rounded-full border border-sky-300 border-t-sky-900 dark:border-sky-600 dark:border-t-sky-300"}),"Searching ingredients"]}):null,X?c.jsx("p",{className:"mt-3 text-xs text-rose-300",children:X}):null]}):null,c.jsx("button",{type:"button",className:"w-full rounded-xl border border-sky-300 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",onClick:()=>{if(f){be();return}m(!0),z("")},children:f?"Cancel":"Add Ingredient"})]})]})}function lf(n,t=""){return n==null||n===""?t:n}function Kl(n,t){if(n===""||n===null||n===void 0)return"";const s=Number.parseInt(n,10);return Number.isNaN(s)||s<0?`${t} must be a non-negative number.`:String(s)!==String(n).trim()?`${t} must be a whole number.`:""}function lx(n){if(n===""||n===null||n===void 0)return"";const t=Number.parseInt(n,10);return Number.isNaN(t)||String(t)!==String(n).trim()?"Heat level must be a whole number.":t<0||t>3?"Heat level must be between 0 and 3.":""}function uf(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function ux({recipeDraft:n,setRecipeDraft:t,onSave:s,loading:a,saving:u,status:l}){const[d,f]=x.useState(!1),[m,y]=x.useState({}),k=x.useMemo(()=>Object.values(m).some(Boolean),[m]);function v(){f(!1),y({})}function w(){const S={title:n.title.trim()?"":"Title is required.",preMinutes:Kl(n.preMinutes,"Prep time"),cookMinutes:Kl(n.cookMinutes,"Cook time"),servings:Kl(n.servings,"Servings"),heat:lx(n.heat)};return y(S),!Object.values(S).some(Boolean)}async function b(){if(w())try{await s(),f(!1)}catch(S){y(E=>({...E,form:S.message??"Unable to save recipe basics."}))}}return c.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[a?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading recipe..."}):d?c.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Title"}),c.jsx("input",{className:"rounded-lg border border-blue-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-blue-600 focus:ring-2 focus:ring-blue-500/20 dark:border-blue-900/60 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-blue-300 dark:focus:ring-blue-400/30",value:n.title,onChange:S=>t(E=>({...E,title:S.target.value})),placeholder:"Smoky Lemon Pasta"}),m.title&&c.jsx("span",{className:"text-xs text-rose-300",children:m.title})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Servings"}),c.jsx("input",{type:"number",min:"0",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.servings,onChange:S=>t(E=>({...E,servings:S.target.value})),placeholder:"4"}),m.servings&&c.jsx("span",{className:"text-xs text-rose-300",children:m.servings})]}),c.jsxs("label",{className:"form-label md:col-span-2",children:[c.jsx("span",{children:"Description"}),c.jsx("textarea",{className:"min-h-[120px] rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.description,onChange:S=>t(E=>({...E,description:S.target.value})),placeholder:"Notes on flavor, pairings, or a quick story."})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Prep Time (min)"}),c.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.preMinutes,onChange:S=>t(E=>({...E,preMinutes:S.target.value})),placeholder:"15"}),m.preMinutes&&c.jsx("span",{className:"text-xs text-rose-300",children:m.preMinutes})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Cook Time (min)"}),c.jsx("input",{type:"number",min:"0",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.cookMinutes,onChange:S=>t(E=>({...E,cookMinutes:S.target.value})),placeholder:"20"}),m.cookMinutes&&c.jsx("span",{className:"text-xs text-rose-300",children:m.cookMinutes})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("span",{children:"Heat Level"}),c.jsx("input",{type:"number",min:"0",max:"3",step:"1",className:"rounded-lg border border-sky-200 bg-white px-3 py-2 text-sm text-sky-900 outline-none placeholder:text-slate-400 focus:border-sky-900 focus:ring-2 focus:ring-sky-900/20 dark:border-sky-800 dark:bg-sky-900 dark:text-sky-100 dark:placeholder:text-slate-500 dark:focus:border-white dark:focus:ring-white/40",value:n.heat,onChange:S=>t(E=>({...E,heat:S.target.value})),placeholder:"0-3"}),m.heat&&c.jsx("span",{className:"text-xs text-rose-300",children:m.heat})]})]}):c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[c.jsx("h1",{className:"text-2xl font-semibold text-sky-900 dark:text-sky-100",children:lf(n.title,"Untitled Recipe")}),c.jsx("button",{type:"button",onClick:()=>f(!0),disabled:a||u,className:"rounded-full border border-sky-300 px-4 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Edit"})]}),c.jsx("p",{className:"mt-2 text-base text-sky-600 dark:text-sky-300",children:lf(n.description,"No description yet.")})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[[["Serves",n.servings],["Prep Time",n.preMinutes],["Cook Time",n.cookMinutes]].filter(([,S])=>S!=null&&S!=="").map(([S,E])=>c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:bg-sky-900/70 dark:text-sky-200",children:[S,": ",E]},S)),uf(n.heat)?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:bg-sky-900/70 dark:text-sky-200",children:uf(n.heat)}):null]})]}),d&&c.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:b,disabled:u||a||k,className:"rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:u?"Saving...":"Save Basics"}),c.jsx("button",{type:"button",onClick:v,disabled:u||a,className:"rounded-full border border-sky-300 px-5 py-2 text-sm font-semibold text-sky-700 transition hover:border-sky-400 hover:text-sky-900 disabled:cursor-not-allowed disabled:opacity-60 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Cancel"}),m.form&&c.jsx("span",{className:"text-sm text-rose-300",children:m.form}),l&&!m.form&&c.jsx("span",{className:"text-sm text-sky-500 dark:text-sky-400",children:l})]})]})}function cx(n){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit"}).format(n)}function dx({recipeId:n}){const[t,s]=x.useState([]),[a,u]=x.useState(!0),[l,d]=x.useState(!1),[f,m]=x.useState(""),[y,k]=x.useState({}),[v,w]=x.useState(()=>new Set);x.useEffect(()=>{let T=!0;async function M(){if(!n)return;u(!0),m("");const{data:W,error:V}=await te.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0});if(T){if(V)m(V.message??"Unable to load steps."),s([]);else{const Q=(W??[]).map(O=>({id:O.id,instruction:O.instruction??"",isHeading:!!O.is_heading}));s(Q)}u(!1)}}return n&&M(),()=>{T=!1}},[n]);function b(T,M){s(W=>W.map((V,Q)=>Q===T?{...V,...M}:V))}function S(T,M){M<0||M>=t.length||s(W=>{const V=W.slice(),[Q]=V.splice(T,1);return V.splice(M,0,Q),V})}function E(){s(T=>[...T,{id:null,instruction:"",isHeading:!1}])}function C(T){s(M=>{const W=M.slice(),[V]=W.splice(T,1);return V?.id&&w(Q=>{const O=new Set(Q);return O.add(V.id),O}),W})}function U(T){const M={};return T.forEach((W,V)=>{W.instruction.trim()||(M[V]="Step text is required.")}),k(M),Object.keys(M).length===0}async function I(){if(n){d(!0),m("");try{if(!U(t))throw new Error("Please fill in all step descriptions.");const T=t.map((L,K)=>({id:L.id,recipe_id:n,position:K+1,instruction:L.instruction.trim(),is_heading:L.isHeading})),M=T.filter(L=>L.id),W=T.filter(L=>!L.id);if(v.size>0){const L=Array.from(v),{error:K}=await te.from("recipe_steps").delete().in("id",L);if(K)throw K}if(M.length>0){const{error:L}=await te.from("recipe_steps").upsert(M,{onConflict:"id"});if(L)throw L}if(W.length>0){const{error:L}=await te.from("recipe_steps").insert(W.map(({id:K,...ce})=>ce));if(L)throw L}w(new Set),m(`Steps saved at ${cx(new Date)}.`);const{data:V,error:Q}=await te.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0});if(Q)throw Q;const O=(V??[]).map(L=>({id:L.id,instruction:L.instruction??"",isHeading:!!L.is_heading}));s(O),k({})}catch(T){throw m(T.message??"Unable to save steps."),T}finally{d(!1)}}}return c.jsxs("section",{className:"rounded-2xl border border-sky-200 bg-white/80 p-6 shadow-lg shadow-black/5 dark:border-sky-800 dark:bg-sky-950/70 dark:shadow-black/20",children:[c.jsx("header",{className:"mb-4",children:c.jsx("h2",{className:"text-xl font-semibold",children:"Steps"})}),c.jsxs("div",{className:"flex flex-col gap-4",children:[a?c.jsx("p",{className:"text-sm text-sky-500 dark:text-sky-400",children:"Loading steps..."}):null,t.length===0&&!a?c.jsx("div",{className:"rounded-xl border border-dashed border-sky-200 bg-sky-50 p-6 text-center text-sm text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-400",children:"No steps yet. Add the first one below."}):null,t.length>0?c.jsx("ul",{className:"grid gap-3",children:t.map((T,M)=>c.jsx("li",{className:"rounded-xl border border-sky-200 bg-white p-4 text-sm text-sky-700 shadow-sm shadow-black/5 dark:border-sky-800 dark:bg-sky-900/50 dark:text-sky-200",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-sky-400",children:["Step ",M+1]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:()=>S(M,M-1),disabled:M===0,className:"rounded-md border border-sky-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-sky-500 transition hover:border-sky-300 hover:text-sky-700 disabled:cursor-not-allowed disabled:border-sky-100 disabled:text-sky-300 dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-600",children:"Up"}),c.jsx("button",{type:"button",onClick:()=>S(M,M+1),disabled:M===t.length-1,className:"rounded-md border border-sky-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-sky-500 transition hover:border-sky-300 hover:text-sky-700 disabled:cursor-not-allowed disabled:border-sky-100 disabled:text-sky-300 dark:border-sky-700 dark:text-sky-300 dark:hover:border-sky-500 dark:hover:text-white dark:disabled:border-sky-800 dark:disabled:text-sky-600",children:"Down"}),c.jsx("button",{type:"button",onClick:()=>C(M),className:"rounded-md border border-rose-200 px-2 py-1 text-[11px] font-semibold uppercase tracking-[0.12em] text-rose-600 transition hover:border-rose-300 hover:text-rose-700 dark:border-rose-900/60 dark:text-rose-300 dark:hover:border-rose-700 dark:hover:text-rose-200",children:"Delete"})]})]}),c.jsxs("label",{className:"form-label",children:[c.jsx("textarea",{rows:3,value:T.instruction,onChange:W=>b(M,{instruction:W.target.value}),className:"min-h-[72px] rounded-md border border-sky-200 bg-white px-2 py-2 text-sm text-sky-900 outline-none focus:border-sky-900 dark:border-sky-700 dark:bg-sky-950 dark:text-sky-100 dark:focus:border-sky-400"}),y[M]?c.jsx("span",{className:"text-[11px] text-rose-500",children:y[M]}):null]}),c.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:text-sky-400",children:[c.jsx("input",{type:"checkbox",checked:T.isHeading,onChange:W=>b(M,{isHeading:W.target.checked}),className:"h-4 w-4 rounded border-sky-300 text-sky-900 focus:ring-sky-900/20 dark:border-sky-600 dark:bg-sky-950 dark:text-white dark:focus:ring-white/30"}),"Section heading"]})]})},T.id??`new-${M}`))}):null,c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:E,className:"rounded-lg border border-sky-300 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Add Step"}),c.jsx("button",{type:"button",onClick:I,disabled:l,className:"rounded-lg border border-sky-300 bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700 dark:border-sky-700 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200",children:l?"Saving...":"Save Steps"}),f?c.jsx("span",{className:"text-xs text-sky-500 dark:text-sky-400",children:f}):null]})]})]})}function ga(n){if(n===""||n===null||n===void 0)return null;const t=Number.parseInt(n,10);return Number.isNaN(t)?null:t}function hx(){const{recipeId:n}=xf(),[t,s]=x.useState(!0),[a,u]=x.useState(!1),[l,d]=x.useState(""),[f,m]=x.useState({title:"",description:"",preMinutes:"",cookMinutes:"",servings:"",heat:""});x.useEffect(()=>{let k=!0;async function v(){s(!0),d("");const{data:w,error:b}=await te.from("recipes").select("title, description, pre_minutes, cook_minutes, servings, heat").eq("id",n).single();k&&(b?d(b.message??"Unable to load recipe details."):m({title:w?.title??"",description:w?.description??"",preMinutes:w?.pre_minutes??"",cookMinutes:w?.cook_minutes??"",servings:w?.servings??"",heat:w?.heat??""}),s(!1))}return n&&v(),()=>{k=!1}},[n]);async function y(){u(!0),d("");try{const k={title:f.title.trim(),description:f.description.trim(),pre_minutes:ga(f.preMinutes),cook_minutes:ga(f.cookMinutes),servings:ga(f.servings),heat:ga(f.heat)};if(!k.title)throw new Error("Recipe title is required.");const{error:v}=await te.from("recipes").update(k).eq("id",n);if(v)throw v;d("Recipe basics saved.")}catch(k){throw d(k.message??"Unable to save recipe basics."),k}finally{u(!1)}}return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:f.title?.trim()?`${f.title.trim()}  Edit  Recipes`:"Edit Recipe  Recipes"})}),c.jsxs("div",{className:"flex w-full flex-col gap-8 text-left",children:[c.jsx(ux,{recipeDraft:f,setRecipeDraft:m,onSave:y,loading:t,saving:a,status:l}),c.jsx(ox,{recipeId:n}),c.jsx(dx,{recipeId:n})]})]})}function fx(n){const t=Number.parseInt(n,10);return Number.isNaN(t)||t<=0?"":"".repeat(Math.min(3,t))}function px(){const{recipeId:n}=xf(),[t,s]=x.useState(null),[a,u]=x.useState([]),[l,d]=x.useState([]),[f,m]=x.useState(!0),[y,k]=x.useState(""),[v,w]=x.useState(null),b=x.useMemo(()=>{let O=0;return l.map(L=>L.is_heading?{...L,displayIndex:null}:(O+=1,{...L,displayIndex:O}))},[l]),S=x.useMemo(()=>b.filter(O=>!O.is_heading),[b]),E=x.useMemo(()=>{const O=new Map;return S.forEach((L,K)=>{O.set(L.id,K)}),O},[S]);x.useEffect(()=>{if(b.length===0){w(null);return}const O=S[0];w(L=>L??O?.id??null)},[b,S]);const C=!!t?.description?.trim(),U=[{label:"Prep",value:t?.pre_minutes,display:T(t?.pre_minutes)},{label:"Cook",value:t?.cook_minutes,display:T(t?.cook_minutes)},{label:"Servings",value:t?.servings,display:t?.servings}].filter(O=>O.value!==null&&O.value!==void 0&&O.value!==""),I=fx(t?.heat);x.useEffect(()=>{let O=!0;async function L(){if(!n)return;m(!0),k("");const[K,ce,re]=await Promise.all([te.from("recipes").select("id, title, description, pre_minutes, cook_minutes, servings, heat").eq("id",n).single(),te.from("recipe_ingredients").select("ingredient_id, quantity, unit, notes, ingredients ( id, name, default_unit )").eq("recipe_id",n),te.from("recipe_steps").select("id, position, instruction, is_heading").eq("recipe_id",n).order("position",{ascending:!0})]);if(O){if(K.error?(k(K.error.message??"Unable to load recipe details."),s(null)):s(K.data??null),ce.error)k(ce.error.message??"Unable to load ingredients."),u([]);else{const oe=(ce.data??[]).slice().sort((fe,xe)=>{const pe=fe.ingredients?.name??"",P=xe.ingredients?.name??"";return pe.localeCompare(P)});u(oe)}re.error?(k(re.error.message??"Unable to load steps."),d([])):d(re.data??[]),m(!1)}}return L(),()=>{O=!1}},[n]);function T(O){return O==null||O===""?"":`${O} min`}function M(O){return O==null||O===""?"":Number.isInteger(Number(O))?`${Number(O)}`:`${O}`}function W(O){const L=O?.ingredients?.name??"Unknown ingredient",K=M(O?.quantity),ce=O?.unit||O?.ingredients?.default_unit||"",re=ce?.toLowerCase()==="count"?"":ce,oe=O?.notes?.trim()||"",xe=[[K,re].filter(Boolean).join(" "),oe].filter(Boolean).join("  ");return{name:L,detail:xe}}function V(O){if(!O)return null;const L=E.get(O);return L==null?null:S[L+1]?.id??null}function Q(O){if(!O)return null;const L=E.get(O);return L==null?null:S[L-1]?.id??null}return c.jsxs(c.Fragment,{children:[c.jsx(xt,{children:c.jsx("title",{children:t?.title?.trim()?`${t.title.trim()}  Recipes`:"Recipe  Recipes"})}),c.jsx("section",{className:"rounded-2xl bg-white/90 px-6 py-6 shadow-sm shadow-sky-900/5 backdrop-blur dark:bg-sky-950/60 dark:shadow-black/20",children:c.jsxs("div",{className:"grid gap-6 md:grid-cols-[minmax(0,1fr)_minmax(0,1.2fr)]",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-2xl font-semibold",children:t?.title||"Recipe Details"}),C?c.jsx("p",{className:"mt-2 max-w-2xl text-base text-sky-600 dark:text-sky-300",children:t.description}):null,U.length>0||I?c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-[11px] font-semibold uppercase tracking-[0.18em] text-sky-600 dark:text-sky-300",children:[U.map(O=>c.jsxs("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:[O.label," ",O.display]},O.label)),I?c.jsx("span",{className:"rounded-full border border-sky-200 bg-sky-50 px-3 py-1 dark:border-sky-800 dark:bg-sky-900/60",children:I}):null]}):null]}),c.jsx(Ce,{to:`/recipe/${n}/edit`,className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",children:"Edit Recipe"})]})}),f?c.jsx("div",{className:"flex min-h-[40vh] items-center justify-center md:col-span-2",children:c.jsxs("div",{className:"flex flex-col items-center gap-3 text-sm text-sky-500 dark:text-sky-400",children:[c.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-sky-300 border-t-sky-900 dark:border-sky-700 dark:border-t-sky-200"}),"Loading recipe..."]})}):y?c.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-6 py-4 text-sm text-rose-700 dark:border-rose-900/60 dark:bg-rose-950/40 dark:text-rose-200 md:col-span-2",children:y}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"rounded-2xl bg-transparent",children:[c.jsx("h2",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"Ingredients"}),a.length===0?c.jsx("p",{className:"mt-5 text-sm text-sky-500 dark:text-sky-400",children:"No ingredients added yet."}):c.jsx("ul",{className:"mt-5 space-y-3 text-sm text-sky-700 dark:text-sky-200",children:a.map(O=>{const L=W(O);return c.jsx("li",{className:"flex items-start gap-3",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sky-900 dark:text-sky-100",children:L.name}),L.detail?c.jsx("p",{className:"text-xs text-sky-500 dark:text-sky-400",children:L.detail}):null]})},O.ingredient_id)})})]}),c.jsxs("div",{className:"rounded-2xl bg-transparent",children:[c.jsx("h2",{className:"text-sm font-semibold uppercase tracking-[0.25em] text-sky-500 dark:text-sky-400",children:"Steps"}),b.length===0?c.jsx("p",{className:"mt-5 text-sm text-sky-500 dark:text-sky-400",children:"No steps added yet."}):c.jsxs("div",{className:"mt-5 space-y-4",children:[c.jsx("ol",{className:"space-y-4 text-sm text-sky-700 dark:text-sky-200",children:b.map((O,L)=>O.is_heading?c.jsx("li",{className:"rounded-lg border border-dashed border-sky-200 bg-sky-50 px-4 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-sky-500 dark:border-sky-800 dark:bg-sky-900/40 dark:text-sky-300",children:O.instruction||"Section"},O.id):c.jsx("li",{className:"flex gap-3 rounded-lg px-2 py-1 transition",children:c.jsxs("button",{type:"button",onClick:()=>w(O.id),className:"flex flex-1 items-start gap-3 text-left",children:[c.jsx("span",{className:"mt-0.5 inline-flex min-w-8 items-center justify-center rounded-full border border-sky-200 px-2 py-1 text-xs font-semibold text-sky-600 dark:border-sky-700 dark:text-sky-300",children:O.displayIndex}),c.jsx("span",{className:v===O.id?"text-base font-semibold text-sky-900 dark:text-sky-100":"",children:O.instruction})]})},O.id??`step-${L}`))}),c.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:()=>w(Q(v)),disabled:!Q(v),className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-sm shadow-sky-900/20 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700/50 disabled:text-sky-200 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200/60 dark:disabled:text-sky-400",children:"Prev Step"}),c.jsx("button",{type:"button",onClick:()=>w(V(v)),disabled:!V(v),className:"inline-flex items-center justify-center rounded-full bg-sky-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-sm shadow-sky-900/20 transition hover:bg-sky-800 disabled:cursor-not-allowed disabled:bg-sky-700/50 disabled:text-sky-200 dark:bg-white dark:text-sky-900 dark:hover:bg-sky-100 dark:disabled:bg-sky-200/60 dark:disabled:text-sky-400",children:"Next Step"})]})]})]})]})]})})]})}function mx(){const[n,t]=x.useState(null),[s,a]=x.useState(!0),u=dr(),d=new Set(["/","/about","/contact","/login"]).has(u.pathname);return x.useEffect(()=>{let f=!0;async function m(){const{data:k}=await te.auth.getUser();f&&(t(k?.user??null),a(!1))}const{data:y}=te.auth.onAuthStateChange((k,v)=>{t(v?.user??null),a(!1)});return m(),()=>{f=!1,y?.subscription?.unsubscribe()}},[]),c.jsxs("div",{className:"flex min-h-screen flex-col bg-sky-50 text-sky-900 dark:bg-sky-950 dark:text-sky-100",children:[c.jsx("header",{className:"border-b border-sky-200/70 bg-white/80 backdrop-blur dark:border-sky-800/70 dark:bg-sky-950/80",children:c.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-6 py-4",children:[c.jsx(Ce,{className:"text-lg font-semibold tracking-tight",to:"/",children:" Recipes"}),c.jsxs("nav",{className:"flex items-center gap-6 text-sm text-sky-600 dark:text-sky-300",children:[c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/create",children:"Add"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/plan",children:"Plan"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/shop",children:"Shop"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/menu",children:"Cook"}),n?c.jsx("button",{type:"button",onClick:()=>te.auth.signOut(),className:"rounded-full border border-sky-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-sky-700 transition hover:border-sky-400 hover:text-sky-900 dark:border-sky-700 dark:text-sky-200 dark:hover:border-sky-500 dark:hover:text-white",children:"Log Out"}):c.jsx(Ce,{className:"rounded-full bg-sky-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/10 transition hover:bg-sky-800 dark:bg-white dark:text-sky-900 dark:shadow-black/20 dark:hover:bg-sky-100",to:"/login",children:"Log In"})]})]})}),c.jsx("main",{className:"mx-auto w-full max-w-5xl flex-1 px-6 pt-6 pb-10",children:s?c.jsx("div",{className:"flex min-h-[40vh] items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-3 text-sm text-sky-500 dark:text-sky-400",children:[c.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-2 border-sky-300 border-t-sky-900 dark:border-sky-700 dark:border-t-sky-200"}),"Checking session"]})}):!n&&!d?c.jsx(Zm,{to:"/login",replace:!0}):c.jsxs(ty,{children:[c.jsx(ft,{path:"/",element:c.jsx(Wv,{})}),c.jsx(ft,{path:"/about",element:c.jsx(og,{})}),c.jsx(ft,{path:"/contact",element:c.jsx(Fv,{})}),c.jsx(ft,{path:"/recipes",element:c.jsx(ex,{})}),c.jsx(ft,{path:"/create",element:c.jsx(qv,{})}),c.jsx(ft,{path:"/ingredients",element:c.jsx(Gv,{})}),c.jsx(ft,{path:"/plan",element:c.jsx(Xv,{})}),c.jsx(ft,{path:"/migrate",element:c.jsx(Qv,{})}),c.jsx(ft,{path:"/menu",element:c.jsx(Yv,{})}),c.jsx(ft,{path:"/shop",element:c.jsx(nx,{})}),c.jsx(ft,{path:"/household",element:c.jsx(Vv,{})}),c.jsx(ft,{path:"/recipe/:recipeId/edit",element:c.jsx(hx,{})}),c.jsx(ft,{path:"/recipe/:recipeId/view",element:c.jsx(px,{})}),c.jsx(ft,{path:"/login",element:c.jsx(Jv,{})})]})}),c.jsx("footer",{className:"mt-auto border-t border-sky-200/70 bg-white/80 backdrop-blur dark:border-sky-800/70 dark:bg-sky-950/80",children:c.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-4 px-6 py-6 text-sm text-sky-600 dark:text-sky-300 md:flex-row md:items-center md:justify-between",children:[c.jsx("div",{children:c.jsxs("p",{className:"text-sm font-semibold text-sky-900 dark:text-sky-100",children:["Made with  by"," ",c.jsx("a",{href:"https://github.com/doowyab/",target:"_blank",rel:"noreferrer",className:"underline decoration-sky-300 underline-offset-2 transition hover:text-sky-700 dark:decoration-sky-600 dark:hover:text-white",children:"doowyab"}),"."]})}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs font-semibold uppercase tracking-[0.2em]",children:[c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/about",children:"About"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/contact",children:"Contact"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/recipes",children:"Recipes"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/ingredients",children:"Ingredients"}),c.jsx(Ce,{className:"transition hover:text-sky-900 dark:hover:text-white",to:"/household",children:"Your Household"})]})]})})]})}nm.createRoot(document.getElementById("root")).render(c.jsx(x.StrictMode,{children:c.jsx(If,{children:c.jsx(jy,{children:c.jsx(mx,{})})})}));
